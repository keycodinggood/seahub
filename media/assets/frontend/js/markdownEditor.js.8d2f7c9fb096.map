{"version":3,"sources":["../js/markdownEditor.js","components/modal-portal.js","models/repo-tag.js","components/dialog/edit-filetag-dialog.js","components/dialog/related-file-dialogs.js","components/markdown-view/comment-dialog.js","components/dialog/insert-file-dialog.js","components/dialog/local-draft-dialog.js","components/loading.js","components/toolbar/markdown-viewer-toolbar.js","components/markdown-view/history-list.js","components/markdown-view/outline.js","i18n.js","../config/polyfills.js","utils/pinyin-by-unicode.js","models/dirent.js","components/toast/toaster.js","components/dialog/add-related-file-dialog.js","components/toast/toastManager.js","components/dialog/list-related-file-dialog.js","components/toast/toast.js","components/toast/alert.js","components/select-editor/share-permission-editor.js","utils/constants.js","components/user-select.js","models/file-tag.js","components/dialog/share-dialog.js","utils/seafile-api.js","components/file-chooser/file-chooser.js","models/repo-info.js","components/select-editor/select-editor.js","utils/utils.js","models/shared-link-info.js","models/shared-upload-info.js","components/file-chooser/repo-list-view.js","components/file-chooser/repo-list-item.js","components/file-chooser/dirent-list-view.js","components/file-chooser/dirent-list-item.js","components/file-chooser/searched-list-view.js","components/file-chooser/searched-list-item.js","components/dialog/share-to-user.js","components/dialog/share-to-group.js","components/dialog/generate-share-link.js","components/dialog/generate-upload-link.js","index.js","markdown-editor.js","components/file-view/comment-panel.js","components/toast/index.js"],"names":["webpackJsonp","10","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_react","_react2","_reactDom","_reactDom2","_propTypes","_propTypes2","propTypes","children","PropTypes","object","isRequired","modalRoot","document","getElementById","ModalPortal","_React$Component","this","_this","getPrototypeOf","el","createElement","appendChild","removeChild","ReactDOM","createPortal","React","Component","103","RepoTag","id","repo_tag_id","fileCount","files_count","name","tag_name","color","tag_color","106","_reactstrap","_constants","_seafileApi","_utils","_repoTag","_repoTag2","TagItemPropTypes","repoID","string","repoTag","filePath","fileTagList","array","onEditFileTag","func","TagItem","onMouseEnter","setState","showSelectedTag","onMouseLeave","getRepoTagIdList","repoTagIdList","map","fileTag","push","_this$props","indexOf","seafileAPI","addFileTag","then","deleteFileTag","state","drakColor","Utils","getDarkColor","className","onClick","style","backgroundColor","onFileTagChanged","toggleCancel","EditFileTagDialog","_React$Component2","_this2","getRepoTagList","listRepoTags","res","repotagList","data","repo_tags","forEach","item","toggle","_this3","Modal","isOpen","ModalHeader","gettext","ModalBody","ModalFooter","Button","107","_addRelatedFileDialog","_addRelatedFileDialog2","_listRelatedFileDialog","_listRelatedFileDialog2","_modalPortal","_modalPortal2","onRelatedFileChange","dirent","relatedFiles","viewMode","oneOf","RelatedFileDialogs","onAddRelatedFileToggle","showListRelatedFileDialog","onCloseAddRelatedFileDialog","size","width","addRelatedFileToggle","onClose","1079","_seafileMarkdown2html","editorUtilities","quote","commentPosition","onCommentAdded","toggleCommentDialog","CommentDialog","handleCommentChange","event","comment","submitComment","trim","detail","position","detailJSON","JSON","stringify","postComment","setQuoteText","mdQuote","processor","process","result","String","nextProps","dangerouslySetInnerHTML","__html","onChange","1080","1081","_fileChooser","_fileChooser2","getInsertLink","InsertFileDialog","handleInsert","repo","repo_id","selectedPath","onDirentItemClick","type","onRepoItemClick","isShowFile","mode","disabled","1084","1096","1099","deleteDraft","useDraft","localDraftDialog","bool","closeDraftDialog","LocalDraftDialog","_React$PureComponent","apply","arguments","PureComponent","11","Loading","1103","_editorToolBar","_fileInfo","_fileInfo2","isDocs","hasDraft","isDraft","collabUsers","fileInfo","toggleShareLinkDialog","onEdit","toggleNewDraft","toggleStar","backToParentDirectory","openDialogs","showFileHistory","toggleHistory","commentsNumber","number","toggleCommentList","MarkdownViewerToolbar","onMouseDown","goDraftPage","CollabUsersButton","users","ButtonGroup","IconButton","text","icon","data-active","permission","_props","relatedFileString","index","undefined","title","bind","Fragment","href","renderFirstToolbar","renderSecondToolbar","1104","_toConsumableArray","arr","Array","isArray","arr2","from","_axios","_axios2","_loading","_loading2","_moment","_moment2","showDiffViewer","setDiffViewerContent","reloadDiffContent","HistoryList","preItem","currentItem","activeItem","axios","all","getFileHistoryVersion","commit_id","path","spread","res1","res2","getFileContent","content1","content2","onScroll","clientHeight","scrollHeight","scrollTop","totalReversionCount","perPage","currentPage","loading","listFileHistoryRecords","currentHistoryList","assign","historyList","total_count","content","toggleHistoryPanel","preItemIndex","HistoryItem","ctime","creator_name","margin","HistoryItempropTypes","currewntItem","_this5","time","moment","parseZone","format","1105","1106","OutlineItempropTypes","scrollToNode","node","active","OutlineItem","c","isViewer","activeTitleIndex","OutlineView","_React$PureComponent2","headerList","nodes","filter","1107","113","1132","_i18next","_i18next2","_i18nextXhrBackend","_i18nextXhrBackend2","siteRoot","window","app","config","i18n","use","XHR","init","fallbackLng","ns","defaultNS","whitelist","backend","loadPath","debug","interpolation","escapeValue","load","react","wait","1146","12","Promise","enable","13","strChineseFirstPY","137","14","_fileTag","_fileTag2","Dirent","json","mtime","mtime_relative","unix","fromNow","isSelected","starred","bytesToSize","is_locked","lock_time","lock_owner","lock_owner_name","locked_by_me","modifier_name","modifier_email","modifier_contact_email","file_tags","FileTag","encoded_thumbnail_src","15","_extends","source","hasOwnProperty","_toastManager","_toastManager2","isBrowser","Toaster","_bindNotify","handler","notifyHandler","_bindGetToasts","getToastsHandler","_bindCloseAll","closeAllHandler","getToasts","closeAll","notify","settings","intent","success","warning","danger","container","setAttribute","body","render","bindNotify","bindGetToasts","bindCloseAll","156","159","AddRelatedFileDialog","handleSubmit","onAddRelatedFile","_this$state","oRepoID","rRepoID","oFilePath","rFilePath","message","errMessage","addRelatedFile","catch","error","response","error_msg","subtitle","replace","HTMLescape","aria-label","Alert","16","_objectWithoutProperties","keys","_glamor","_toast","_toast2","wrapperClass","css","maxWidth","top","left","right","zIndex","hasCustomId","ToastManager","context","toasts","toast","close","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","startsWith","closeToast","err","return","createToastInstance","previousState","concat","uniqueId","idCounter","description","hasCloseButton","duration","isShown","removeToast","_ref","onRemove","160","_dirent","_dirent2","ListRelatedFileDialog","onDeleteRelatedFile","relatedID","related_id","deleteRelatedFile","getDirentList","direntList","getFileInfo","repo_name","encodePath","Table","hover","relatedFile","RelatedFile","RelatedFilePropTypes","link","161","17","_Transition","_Transition2","_alert","_alert2","animationEasing","deceleration","acceleration","spring","openAnimation","keyframes","opacity","transform","to","closeAnimation","animationStyles","display","flexDirection","alignItems","height","transition","&[data-state=\"entering\"], &[data-state=\"entered\"]","animation","&[data-state=\"exiting\"]","Toast","_temp","_ret","_len","args","_key","clearCloseTimer","startCloseTimer","closeTimer","setTimeout","clearTimeout","handleMouseEnter","handleMouseLeave","onRef","ref","_ref$getBoundingClien","getBoundingClientRect","prevProps","appear","unmountOnExit","timeout","in","onExited","data-state","marginBottom","padding","isRemoveable","defaultProps","18","containerStyle","borderRadius","boxSizing","boxShadow","justifyContent","containerBorderSuccess","borderLeft","containerBorderWarn","containerBorderDanger","containerBorderNotify","toastTextTitle","fontWeight","fontSize","toastTextChild","toastClose","marginLeft","lineHeight","textAlign","cursor",":hover","toastIcon","marginRight","borderStyle","iconColor","iconClass","toastStyle","getContainerStyle","toastTextContainer","19","_selectEditor","_selectEditor2","isTextMode","isEditIconShow","permissions","currentPermission","onPermissionChanged","SharePermissionEditor","translatePermission","sharePerms","translateExplanation","explanation","sharePermsExplanation","options","currentOption","onOptionChanged","translateOption","194","2","dirPath","loginUrl","avatarInfo","logoPath","mediaUrl","siteTitle","siteName","logoWidth","logoHeight","isPro","lang","fileServerRoot","seafileVersion","serviceURL","seafileCollabServer","pageOptions","contactEmail","username","canAddRepo","canGenerateShareLink","canGenerateUploadLink","canViewOrg","fileAuditEnabled","enableFileComment","folderPermEnabled","enableResetEncryptedRepoPassword","isEmailConfigured","enableUploadFolder","enableResumableFileUpload","storages","enableRepoSnapshotLabel","shareLinkExpireDaysMin","shareLinkExpireDaysMax","maxFileName","enableWiki","enableEncryptedLibrary","enableRepoHistorySetting","isSystemStaff","thumbnailSizeForOriginal","repoPasswordMinLength","curNoteMsg","curNoteID","slug","wiki","repoId","initialPath","initial_path","isDir","serviceUrl","isPublicWiki","PER_PAGE","historyRepoID","fileHistory","repoName","fileName","draftFilePath","draft","draftOriginFilePath","draftFileName","draftID","draftRepoID","author","authorAvatar","originFileExists","draftFileExists","draftStatus","draftPublishVersion","originFileVersion","orgID","org","invitationLink","orgMemberQuotaEnabled","constanceEnabled","sysadmin","constance_enabled","multiTenancy","multi_tenancy","multiInstitution","multi_institution","sysadminExtraEnabled","sysadmin_extra_enabled","enableGuestInvitation","enable_guest_invitation","enableTermsAndConditions","enable_terms_and_conditions","isDefaultAdmin","is_default_admin","enableFileScan","enable_file_scan","canViewSystemInfo","admin_permissions","can_view_system_info","canViewStatistic","can_view_statistic","canConfigSystem","can_config_system","canManageLibrary","can_manage_library","canManageUser","can_manage_user","canManageGroup","can_manage_group","canViewUserLog","can_view_user_log","canViewAdminLog","can_view_admin_log","23","_Async","_Async2","placeholder","onSelectChange","isMulti","NoOptionsMessage","innerProps","UserSelect","handleSelectChange","option","loadOptions","input","callback","searchUsers","email","label","src","avatar_url","alt","clearSelect","refs","userSelect","select","action","isClearable","classNamePrefix","components","24","file_tag_id","25","_shareToUser","_shareToUser2","_shareToGroup","_shareToGroup2","_generateShareLink","_generateShareLink2","_generateUploadLink","_generateUploadLink2","isGroupOwnedRepo","itemType","itemName","itemPath","toggleDialog","repoEncrypted","userPerm","enableDirPrivateShare","ShareDialog","getInitialActiveTab","enableShareLink","enableUploadLink","tab","activeTab","renderDirContent","_this$props2","Nav","pills","vertical","NavItem","NavLink","TabContent","TabPane","tabId","closeShareDialog","renderFileContent","258","268","269","271","3","_reactCookies","_reactCookies2","_seafileJs","SeafileAPI","xcsrfHeaders","cookie","initForSeahubUsage","30","_defineProperty","_repoInfo","_repoInfo2","_repoListView","_repoListView2","_searchedListView","_searchedListView2","FileChooser","onOtherRepoToggle","hasRequest","isOtherRepoShow","that","listRepos","repos","repoList","repoIdList","currentRepoInfo","sortRepos","onCurrentRepoToggle","isCurrentRepoShow","selectedRepo","onCloseSearching","isSearching","isResultGot","searchInfo","searchResults","inputValue","timer","onSearchInfoChanged","getValueLength","searchRepo","queryData","q","search_repo","search_ftypes","obj_type","getSearchResult","cancelRequest","getSource","sendRequest","token","cancelToken","searchFiles","total","items","formatResultItems","results","console","log","cancel","str","code","len","charCodeAt","fullpath","is_dir","decodeURI","substring","content_highlight","onSearchedItemClick","RepoInfo","renderSearchedView","onItemClick","renderRepoListView","initToShowChildren","getRepoInfo","repoInfo","_React$createElement","Input","31","file_count","owner_name","owner_email","owner_contact_email","is_admin","is_virtual","no_quota","has_been_shared_out","encrypted","lib_need_decrypt","32","_reactSelect","_reactSelect2","toggleItemFreezed","SelectEditor","setOptions","onEditPermission","e","nativeEvent","stopImmediatePropagation","isEditing","onSelectHandler","onHideSelect","addEventListener","removeEventListener","captureMenuScroll","38","4","_pinyinByUnicode","keyCodes","esc","space","up","down","bytes","sizes","parseInt","Math","floor","toFixed","isHiDPI","devicePixelRatio","FILEEXT_ICON_MAP","md","txt","pdf","doc","docx","odt","fodt","ppt","pptx","odp","fodp","xls","xlsx","ods","fods","mp4","ogv","webm","mov","flv","wmv","rmvb","mp3","oga","ogg","flac","aac","ac3","wma","jpg","jpeg","png","svg","gif","bmp","ico","imageCheck","filename","lastIndexOf","substr","toLowerCase","videoCheck","path_arr","split","path_arr_","encodeURIComponent","join","html","createTextNode","parentNode","innerHTML","generateDialogTitle","operationTarget","targetStr","getFileName","lastIndex","slice","getPaths","paths","pop","reverse","getFolderName","getDirName","dir","isChildPath","child","parent","isAncestorPath","ancestor","renameAncestorPath","newAncestor","joinPath","pathA","pathB","isSupportUploadFolder","navigator","userAgent","getDefaultLibIconUrl","isBig","getLibIconUrl","share_permission","icon_name","getDirentIcon","readonly","getFolderIconUrl","getFileIconUrl","file_ext","getLibIconTitle","getFolderIconTitle","formatSize","precision","kilobyte","megabyte","gigabyte","formatBitRate","bits","Bs","isMarkdownFile","isInternalMarkdownLink","url","RegExp","test","isInternalDirLink","getPathFromInternalMarkdownLink","re","exec","decodeURIComponent","getPathFromInternalDirLink","isWikiInternalMarkdownLink","isWikiInternalDirLink","getPathFromWikiInternalMarkdownLink","getPathFromWikiInternalDirLink","compareTwoWord","wordA","wordB","a_val","b_val","a_uni","b_uni","charAt","compareStrWithNumbersIn","a","b","isDigitPart","aPart","bPart","reParts","reDigit","aParts","match","bParts","min","sortBy","sortOrder","comparator","last_modified","sort","sortDirents","changeMarkdownNodes","fn","chooseLanguage","suffix","DARK_COLOR_MAP","red","orange","yellow","green","cyan","blue","indigo","purple","pink","azure","lime","teal","gray","#FFA8A8","#FFA94D","#FFD43B","#A0EC50","#A9E34B","#63E6BE","#4FD2C9","#72C3FC","#91A7FF","#E599F7","#B197FC","#F783AC","#CED4DA","40","SharedLinkInfo","obj_name","is_expired","expire_date","view_cnt","41","SharedUploadInfo","42","_repoListItem","_repoListItem2","RepoListView","repoItem","43","_direntListView","_direntListView2","RepoListItem","onToggleClick","isShowChildren","isCurrentRepo","repoActive","44","_dirent3","_direntListItem","_direntListItem2","DirentListView","listDir","dirent_list","45","DirentListItem","stopPropagation","hasChildren","renderChildren","isCurrentPath","46","_searchedListItem","_searchedListItem2","SearchedListView","47","SearchedListItem","highlight","fileIconUrl","trClass","link_content","48","49","_userSelect","_userSelect2","_sharePermissionEditor","_sharePermissionEditor2","UserItem","isOperationShow","deleteShareItem","user_info","onChangeUserPermission","nickname","UserList","ShareToUser","_React$Component3","_this4","selectedOption","setPermission","shareToUser","shareGroupOwnedRepoToUser","errorMsg","failed","user_name","user_email","share_type","sharedItems","shareFolder","deleteGroupOwnedRepoSharedUserItem","deleteShareToUserItem","modifyGroupOwnedRepoUserSharedPermission","updateSharedItems","updateShareToUserItemPermission","sharedItem","sharedItemUsername","listSharedItems","colSpan","50","_animated","_animated2","GroupItem","group_info","GroupList","ShareToGroup","shareableGroups","listSharedGroups","shareToGroup","groups","shareGroupOwnedRepoToGroup","group_id","group_name","groupID","deleteGroupOwnedRepoSharedGroupItem","deleteShareToGroupItem","modifyGroupOwnedRepoGroupSharedPermission","updateShareToGroupItemPermission","sharedItemGroupID","maxMenuHeight","inputId","51","_copyToClipboard","_copyToClipboard2","_sharedLinkInfo","_sharedLinkInfo2","GenerateShareLink","getShareLink","sharedLinkInfo","onPasswordInputChecked","isShowPasswordInput","password","passwdnew","errorInfo","togglePasswordVisible","isPasswordVisible","generatePassword","val","random","toString","inputPassword","passwd","inputPasswordNew","can_edit","can_download","generateShareLink","validateParamsInput","expireDays","createShareLink","onCopySharedLink","sharedLink","toaster","onCopyDownloadLink","downloadLink","deleteShareLink","passwordnew","isExpireChecked","isNoticeMessageShow","onExpireChecked","checked","onExpireDaysChanged","day","_this$state2","reg","isExpireDaysNoLimit","flag","minDays","maxDays","onNoticeMessageToggle","isValidate","Form","FormGroup","check","Label","InputGroup","InputGroupAddon","addonType","readOnly","defaultChecked","52","_sharedUploadInfo","_sharedUploadInfo2","GenerateUploadLink","getUploadLink","getUploadLinks","sharedUploadInfo","addPassword","showPasswordInput","passwordVisible","generateUploadLink","createUploadLink","onCopyUploadLink","uploadLink","deleteUploadLink","FormText","53","541","543","_markdownEditor","_markdownEditor2","_reactI18next","_i18n","_i18n2","I18nextProvider","initialLanguage","548","getImageFileNameWithTimestamp","Date","now","_seafileEditor","_seafileEditor2","_slate","_socket","_socket2","_editFiletagDialog","_editFiletagDialog2","_relatedFileDialogs","_relatedFileDialogs2","_shareDialog","_shareDialog2","_commentDialog","_commentDialog2","_insertFileDialog","_insertFileDialog2","_markdownViewerSlate","_markdownViewerSlate2","_slate2markdown","_localDraftDialog","_localDraftDialog2","_diffViewer","_diffViewer2","_markdownViewerToolbar","_markdownViewerToolbar2","_historyList","_historyList2","_commentPanel","_commentPanel2","_outline","_outline2","_slateReact","CryptoJS","URL","_window$app$pageOptio","_window$app$config","userInfo","userName","EditorUtilities","uploadImage","imageFile","uploadLinkComponent","blob","newFile","File","formData","FormData","append","resArr","_getImageURL","uploadLocalImage","listFileTags","contact_email","getUpdateLink","updateFile","unstarItem","starItem","parentPath","libName","fileNode","isImage","recursive","parent_path","parent_dir","getFileHistory","newRepoID","getInternalLink","userPassword","userValidDays","page","commitID","getFileRevision","getCommentsNumber","listComments","commentID","resolved","newComment","updateComment","deleteComment","getUserAvatar","location","createDraft","origin_repo_id","draft_file_path","publishDraft","published_file_path","fileMetaData","slateValue","markdownLint","MarkdownEditor","emitSwitchEditor","is_editing","collabServer","_this2$state$fileInfo","socket","emit","request","doc_id","MD5","user","showRelatedFileDialog","showEditFileTagDialog","showMarkdownEditorDialog","showShareLinkDialog","showCommentDialog","showInsertFileDialog","setEditorMode","editorMode","setDraftValue","draftRichValue","draftPlainValue","setContent","deserialize","markdownContent","checkDraft","draftKey","getDraftKey","localStorage","getItem","localDraft","removeItem","clearTimer","listRelatedFiles","related_files","setFileInfoMtime","lastModifier","last_modifier_name","starrd","autoSaveDraft","serialize","toJSON","setItem","showDraftSaved","getParentDectionaryUrl","preventDefault","getOwnPropertyNames","loadingDiff","oldMarkdownContent","setBtnPosition","isShowComments","nativeSelection","getSelection","rangeCount","range","isCollapsed","nativeRange","getRangeAt","focusNode","tagName","nodeType","getAttribute","fragment","cloneContents","startNode","firstChild","newNativeRange","createRange","setStartBefore","setEndAfter","editor","findRange","rect","collapsed","startOffset","setEnd","endContainer","setStart","startContainer","getClientRects","commentbtn","markdownContainer","addComment","getQuote","_range","anchor","focus","anchorText","getNode","focusText","anchorInline","getClosestInline","focusInline","offset","block","getClosestBlock","nextText","getNextText","moveAnchorTo","moveFocusTo","getFragmentAtRange","removeNullNode","newFragment","Document","newValue","Value","selection","createSelection","setIsFocused","oldNodes","newNodes","childNodes","newNode","Block","set","findScrollContainer","OVERFLOWS","scroller","getComputedStyle","overflowY","includes","scrollToQuote","win","element","querySelector","documentElement","scrollTo","offsetTop","isShowHistory","isShowOutline","fileLink","richMarkdownEditor","addLink","autoSave","on","receivePresenceData","receiveUpdateData","socket_id","currentTime","parseFloat","lastModifyTime","prop","values","_res$data","prevState","getFileDownloadLink","downLoadUrl","contentLength","isBlankFile","hasPermission","isEditMode","_state$fileInfo","hash","component","sidePanel","markdownViewer","createDraftFile","newMarkdownContent","toggleCommentPanel","58","CommentPanelPropTypes","CommentPanel","toggleResolvedComment","showResolvedComment","commentsList","comments","commentTextarea","resolveComment","editComment","oldTime","created_at","getTime","CommentItem","clos","rows","warp","commentItemPropTypes","toggleDropDownMenu","dropdownOpen","convertComment","mdFile","toggleEditComment","editable","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","59","697","699","7","_toaster","_toaster2","813","814","815","816","817","818","822","86","87","88","953","98"],"mappings":"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","file":"js/markdownEditor.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ 10:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(8);var _reactDom2=_interopRequireDefault(_reactDom);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={children:_propTypes2.default.object.isRequired};var modalRoot=document.getElementById('modal-wrapper');var ModalPortal=function(_React$Component){_inherits(ModalPortal,_React$Component);function ModalPortal(props){_classCallCheck(this,ModalPortal);var _this=_possibleConstructorReturn(this,(ModalPortal.__proto__||Object.getPrototypeOf(ModalPortal)).call(this,props));_this.el=document.createElement('div');return _this;}_createClass(ModalPortal,[{key:'componentDidMount',value:function componentDidMount(){modalRoot.appendChild(this.el);}},{key:'componentWillUnmount',value:function componentWillUnmount(){modalRoot.removeChild(this.el);}},{key:'render',value:function render(){return _reactDom2.default.createPortal(this.props.children,this.el);}}]);return ModalPortal;}(_react2.default.Component);ModalPortal.propTypes=propTypes;exports.default=ModalPortal;\n\n/***/ }),\n\n/***/ 103:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var RepoTag=function RepoTag(object){_classCallCheck(this,RepoTag);this.id=object.repo_tag_id;this.fileCount=object.files_count;this.name=object.tag_name;this.color=object.tag_color;};exports.default=RepoTag;\n\n/***/ }),\n\n/***/ 106:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _reactstrap=__webpack_require__(5);var _constants=__webpack_require__(2);var _seafileApi=__webpack_require__(3);var _utils=__webpack_require__(4);var _repoTag=__webpack_require__(103);var _repoTag2=_interopRequireDefault(_repoTag);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}__webpack_require__(113);var TagItemPropTypes={repoID:_propTypes2.default.string.isRequired,repoTag:_propTypes2.default.object.isRequired,filePath:_propTypes2.default.string.isRequired,fileTagList:_propTypes2.default.array.isRequired,onEditFileTag:_propTypes2.default.func.isRequired};var TagItem=function(_React$Component){_inherits(TagItem,_React$Component);function TagItem(props){_classCallCheck(this,TagItem);var _this=_possibleConstructorReturn(this,(TagItem.__proto__||Object.getPrototypeOf(TagItem)).call(this,props));_this.onMouseEnter=function(){_this.setState({showSelectedTag:true});};_this.onMouseLeave=function(){_this.setState({showSelectedTag:false});};_this.getRepoTagIdList=function(){var repoTagIdList=[];var fileTagList=_this.props.fileTagList;fileTagList.map(function(fileTag){repoTagIdList.push(fileTag.repo_tag_id);});return repoTagIdList;};_this.onEditFileTag=function(){var _this$props=_this.props,repoID=_this$props.repoID,repoTag=_this$props.repoTag,filePath=_this$props.filePath;var repoTagIdList=_this.getRepoTagIdList();if(repoTagIdList.indexOf(repoTag.id)===-1){var id=repoTag.id;_seafileApi.seafileAPI.addFileTag(repoID,filePath,id).then(function(){repoTagIdList=_this.getRepoTagIdList();_this.props.onEditFileTag();});}else{var fileTag=null;var fileTagList=_this.props.fileTagList;for(var i=0;i<fileTagList.length;i++){if(fileTagList[i].repo_tag_id===repoTag.id){fileTag=fileTagList[i];break;}}_seafileApi.seafileAPI.deleteFileTag(repoID,fileTag.id).then(function(){repoTagIdList=_this.getRepoTagIdList();_this.props.onEditFileTag();});}};_this.state={showSelectedTag:false};return _this;}_createClass(TagItem,[{key:'render',value:function render(){var repoTag=this.props.repoTag;var repoTagIdList=this.getRepoTagIdList();var drakColor=_utils.Utils.getDarkColor(repoTag.color);return _react2.default.createElement('li',{key:repoTag.id,className:'tag-list-item',onClick:this.onEditFileTag,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},_react2.default.createElement('div',{className:'tag-demo',style:{backgroundColor:repoTag.color}},_react2.default.createElement('span',{className:''+(this.state.showSelectedTag?'show-tag-selected':''),style:{backgroundColor:drakColor}}),_react2.default.createElement('span',{className:'tag-name'},repoTag.name),repoTagIdList.indexOf(repoTag.id)>-1&&_react2.default.createElement('i',{className:'fas fa-check tag-operation'})));}}]);return TagItem;}(_react2.default.Component);TagItem.propTypes=TagItemPropTypes;var propTypes={repoID:_propTypes2.default.string.isRequired,filePath:_propTypes2.default.string.isRequired,fileTagList:_propTypes2.default.array.isRequired,onFileTagChanged:_propTypes2.default.func.isRequired,toggleCancel:_propTypes2.default.func.isRequired};var EditFileTagDialog=function(_React$Component2){_inherits(EditFileTagDialog,_React$Component2);function EditFileTagDialog(props){_classCallCheck(this,EditFileTagDialog);var _this2=_possibleConstructorReturn(this,(EditFileTagDialog.__proto__||Object.getPrototypeOf(EditFileTagDialog)).call(this,props));_this2.getRepoTagList=function(){var repoID=_this2.props.repoID;_seafileApi.seafileAPI.listRepoTags(repoID).then(function(res){var repotagList=[];res.data.repo_tags.forEach(function(item){var repoTag=new _repoTag2.default(item);repotagList.push(repoTag);});_this2.setState({repotagList:repotagList});});};_this2.toggle=function(){_this2.props.toggleCancel();};_this2.onEditFileTag=function(){_this2.props.onFileTagChanged();};_this2.state={repotagList:[]};return _this2;}_createClass(EditFileTagDialog,[{key:'componentDidMount',value:function componentDidMount(){this.getRepoTagList();}},{key:'render',value:function render(){var _this3=this;return _react2.default.createElement(_reactstrap.Modal,{isOpen:true,toggle:this.toggle},_react2.default.createElement(_reactstrap.ModalHeader,{toggle:this.toggle},(0,_constants.gettext)('Select Tags')),_react2.default.createElement(_reactstrap.ModalBody,null,_react2.default.createElement('ul',{className:'tag-list tag-list-container'},this.state.repotagList.map(function(repoTag){return _react2.default.createElement(TagItem,{key:repoTag.id,repoTag:repoTag,repoID:_this3.props.repoID,filePath:_this3.props.filePath,fileTagList:_this3.props.fileTagList,onEditFileTag:_this3.onEditFileTag});}))),_react2.default.createElement(_reactstrap.ModalFooter,null,_react2.default.createElement(_reactstrap.Button,{onClick:this.toggle},(0,_constants.gettext)('Close'))));}}]);return EditFileTagDialog;}(_react2.default.Component);EditFileTagDialog.propTypes=propTypes;exports.default=EditFileTagDialog;\n\n/***/ }),\n\n/***/ 107:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _reactstrap=__webpack_require__(5);var _addRelatedFileDialog=__webpack_require__(159);var _addRelatedFileDialog2=_interopRequireDefault(_addRelatedFileDialog);var _listRelatedFileDialog=__webpack_require__(160);var _listRelatedFileDialog2=_interopRequireDefault(_listRelatedFileDialog);var _modalPortal=__webpack_require__(10);var _modalPortal2=_interopRequireDefault(_modalPortal);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={repoID:_propTypes2.default.string.isRequired,filePath:_propTypes2.default.string.isRequired,toggleCancel:_propTypes2.default.func.isRequired,onRelatedFileChange:_propTypes2.default.func.isRequired,dirent:_propTypes2.default.object.isRequired,relatedFiles:_propTypes2.default.array,viewMode:_propTypes2.default.oneOf(['list_related_file','add_related_file']).isRequired};var RelatedFileDialogs=function(_React$Component){_inherits(RelatedFileDialogs,_React$Component);function RelatedFileDialogs(props){_classCallCheck(this,RelatedFileDialogs);var _this=_possibleConstructorReturn(this,(RelatedFileDialogs.__proto__||Object.getPrototypeOf(RelatedFileDialogs)).call(this,props));_this.onAddRelatedFileToggle=function(){_this.setState({showListRelatedFileDialog:false});};_this.onCloseAddRelatedFileDialog=function(){_this.setState({showListRelatedFileDialog:true});};_this.state={showListRelatedFileDialog:props.viewMode==='list_related_file'};return _this;}_createClass(RelatedFileDialogs,[{key:'render',value:function render(){return _react2.default.createElement(_modalPortal2.default,null,_react2.default.createElement(_reactstrap.Modal,{isOpen:true,toggle:this.props.toggleCancel,size:'lg',style:{width:'650px'}},this.state.showListRelatedFileDialog&&_react2.default.createElement(_listRelatedFileDialog2.default,{filePath:this.props.filePath,relatedFiles:this.props.relatedFiles,repoID:this.props.repoID,toggleCancel:this.props.toggleCancel,addRelatedFileToggle:this.onAddRelatedFileToggle,onRelatedFileChange:this.props.onRelatedFileChange}),!this.state.showListRelatedFileDialog&&_react2.default.createElement(_addRelatedFileDialog2.default,{filePath:this.props.filePath,repoID:this.props.repoID,toggleCancel:this.onCloseAddRelatedFileDialog,onRelatedFileChange:this.props.onRelatedFileChange,dirent:this.props.dirent,onClose:this.props.toggleCancel})));}}]);return RelatedFileDialogs;}(_react2.default.Component);RelatedFileDialogs.propTypes=propTypes;exports.default=RelatedFileDialogs;\n\n/***/ }),\n\n/***/ 1079:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _reactstrap=__webpack_require__(5);var _seafileMarkdown2html=__webpack_require__(82);var _constants=__webpack_require__(2);__webpack_require__(1080);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={editorUtilities:_propTypes2.default.object.isRequired,quote:_propTypes2.default.string.isRequired,commentPosition:_propTypes2.default.object.isRequired,onCommentAdded:_propTypes2.default.func.isRequired,toggleCommentDialog:_propTypes2.default.func.isRequired};var CommentDialog=function(_React$Component){_inherits(CommentDialog,_React$Component);function CommentDialog(props){_classCallCheck(this,CommentDialog);var _this=_possibleConstructorReturn(this,(CommentDialog.__proto__||Object.getPrototypeOf(CommentDialog)).call(this,props));_this.handleCommentChange=function(event){var comment=event.target.value;_this.setState({comment:comment});};_this.submitComment=function(){var comment=_this.state.comment.trim();if(comment.length>0&&_this.props.quote.length>0){var detail={quote:_this.props.quote,position:_this.props.commentPosition};var detailJSON=JSON.stringify(detail);_this.props.editorUtilities.postComment(comment,detailJSON).then(function(res){_this.props.onCommentAdded();});}};_this.setQuoteText=function(mdQuote){_seafileMarkdown2html.processor.process(mdQuote).then(function(result){var quote=String(result);_this.setState({quote:quote});});};_this.state={comment:'',quote:''};return _this;}_createClass(CommentDialog,[{key:'componentDidMount',value:function componentDidMount(){this.setQuoteText(this.props.quote);}},{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){if(this.props.quote!==nextProps.quote){this.setQuoteText(nextProps.quote);}}},{key:'render',value:function render(){return _react2.default.createElement('div',{className:'comment-dialog'},_react2.default.createElement('div',null,this.props.editorUtilities.name),_react2.default.createElement('blockquote',{className:'comment-dialog-quote'},_react2.default.createElement('div',{dangerouslySetInnerHTML:{__html:this.state.quote}})),_react2.default.createElement('textarea',{value:this.state.comment,onChange:this.handleCommentChange}),_react2.default.createElement('div',{className:'button-group'},_react2.default.createElement(_reactstrap.Button,{size:'sm',color:'primary',onClick:this.submitComment},(0,_constants.gettext)('Submit')),_react2.default.createElement(_reactstrap.Button,{size:'sm',color:'secondary',onClick:this.props.toggleCommentDialog},(0,_constants.gettext)('Cancel'))),_react2.default.createElement('span',{className:'comment-dialog-triangle'}));}}]);return CommentDialog;}(_react2.default.Component);CommentDialog.propTypes=propTypes;exports.default=CommentDialog;\n\n/***/ }),\n\n/***/ 1080:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 1081:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _reactstrap=__webpack_require__(5);var _constants=__webpack_require__(2);var _utils=__webpack_require__(4);var _fileChooser=__webpack_require__(30);var _fileChooser2=_interopRequireDefault(_fileChooser);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={repoID:_propTypes2.default.string.isRequired,filePath:_propTypes2.default.string.isRequired,toggleCancel:_propTypes2.default.func.isRequired,getInsertLink:_propTypes2.default.func.isRequired};var InsertFileDialog=function(_React$Component){_inherits(InsertFileDialog,_React$Component);function InsertFileDialog(props){_classCallCheck(this,InsertFileDialog);var _this=_possibleConstructorReturn(this,(InsertFileDialog.__proto__||Object.getPrototypeOf(InsertFileDialog)).call(this,props));_this.handleInsert=function(){_this.props.getInsertLink(_this.state.repo.repo_id,_this.state.selectedPath);_this.props.toggleCancel();};_this.onDirentItemClick=function(repo,selectedPath,dirent){if(dirent.type==='file'){_this.setState({repo:repo,selectedPath:selectedPath});}else{_this.setState({repo:null,selectedPath:''});}};_this.onRepoItemClick=function(){_this.setState({repo:null,selectedPath:''});};_this.state={repo:null,selectedPath:''};return _this;}_createClass(InsertFileDialog,[{key:'render',value:function render(){var toggle=this.props.toggleCancel;return _react2.default.createElement(_reactstrap.Modal,{isOpen:true,toggle:toggle},_react2.default.createElement(_reactstrap.ModalHeader,{toggle:toggle},(0,_constants.gettext)('Select File')),_react2.default.createElement(_reactstrap.ModalBody,null,_react2.default.createElement(_fileChooser2.default,{isShowFile:true,repoID:this.props.repoID,onDirentItemClick:this.onDirentItemClick,onRepoItemClick:this.onRepoItemClick,mode:'current_repo_and_other_repos'})),_react2.default.createElement(_reactstrap.ModalFooter,null,_react2.default.createElement(_reactstrap.Button,{color:'secondary',onClick:toggle},(0,_constants.gettext)('Cancel')),this.state.selectedPath?_react2.default.createElement(_reactstrap.Button,{color:'primary',onClick:this.handleInsert},(0,_constants.gettext)('Submit')):_react2.default.createElement(_reactstrap.Button,{color:'primary',disabled:true},(0,_constants.gettext)('Submit'))));}}]);return InsertFileDialog;}(_react2.default.Component);InsertFileDialog.propTypes=propTypes;exports.default=InsertFileDialog;\n\n/***/ }),\n\n/***/ 1084:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 1096:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 1099:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _constants=__webpack_require__(2);var _reactstrap=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={deleteDraft:_propTypes2.default.func.isRequired,useDraft:_propTypes2.default.func.isRequired,localDraftDialog:_propTypes2.default.bool.isRequired,closeDraftDialog:_propTypes2.default.func.isRequired};var LocalDraftDialog=function(_React$PureComponent){_inherits(LocalDraftDialog,_React$PureComponent);function LocalDraftDialog(){_classCallCheck(this,LocalDraftDialog);return _possibleConstructorReturn(this,(LocalDraftDialog.__proto__||Object.getPrototypeOf(LocalDraftDialog)).apply(this,arguments));}_createClass(LocalDraftDialog,[{key:'render',value:function render(){return _react2.default.createElement(_reactstrap.Modal,{isOpen:true,toggle:this.props.closeDraftDialog},_react2.default.createElement(_reactstrap.ModalHeader,{toggle:this.props.closeDraftDialog},(0,_constants.gettext)('Local draft')),_react2.default.createElement(_reactstrap.ModalBody,null,_react2.default.createElement('p',null,(0,_constants.gettext)('You have an unsaved draft. Do you like to use it?'))),_react2.default.createElement(_reactstrap.ModalFooter,null,_react2.default.createElement(_reactstrap.Button,{color:'primary',onClick:this.props.useDraft},(0,_constants.gettext)('Use draft')),_react2.default.createElement(_reactstrap.Button,{color:'secondary',onClick:this.props.deleteDraft},(0,_constants.gettext)('Delete draft'))));}}]);return LocalDraftDialog;}(_react2.default.PureComponent);LocalDraftDialog.propTypes=propTypes;exports.default=LocalDraftDialog;\n\n/***/ }),\n\n/***/ 11:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function Loading(){return _react2.default.createElement(\"span\",{className:\"loading-icon loading-tip\"});}exports.default=Loading;\n\n/***/ }),\n\n/***/ 1103:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _constants=__webpack_require__(2);var _editorToolBar=__webpack_require__(234);var _fileInfo=__webpack_require__(235);var _fileInfo2=_interopRequireDefault(_fileInfo);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={isDocs:_propTypes2.default.bool.isRequired,hasDraft:_propTypes2.default.bool.isRequired,isDraft:_propTypes2.default.bool.isRequired,editorUtilities:_propTypes2.default.object.isRequired,collabUsers:_propTypes2.default.array.isRequired,fileInfo:_propTypes2.default.object.isRequired,fileTagList:_propTypes2.default.array.isRequired,relatedFiles:_propTypes2.default.array.isRequired,toggleShareLinkDialog:_propTypes2.default.func.isRequired,onEdit:_propTypes2.default.func.isRequired,toggleNewDraft:_propTypes2.default.func.isRequired,toggleStar:_propTypes2.default.func.isRequired,backToParentDirectory:_propTypes2.default.func.isRequired,openDialogs:_propTypes2.default.func.isRequired,showFileHistory:_propTypes2.default.bool.isRequired,toggleHistory:_propTypes2.default.func.isRequired,commentsNumber:_propTypes2.default.number.isRequired,toggleCommentList:_propTypes2.default.func.isRequired};var MarkdownViewerToolbar=function(_React$Component){_inherits(MarkdownViewerToolbar,_React$Component);function MarkdownViewerToolbar(props){_classCallCheck(this,MarkdownViewerToolbar);return _possibleConstructorReturn(this,(MarkdownViewerToolbar.__proto__||Object.getPrototypeOf(MarkdownViewerToolbar)).call(this,props));}_createClass(MarkdownViewerToolbar,[{key:'renderFirstToolbar',value:function renderFirstToolbar(){return _react2.default.createElement('div',{className:'sf-md-viewer-topbar-first d-flex justify-content-between'},_react2.default.createElement(_fileInfo2.default,{toggleStar:this.props.toggleStar,editorUtilities:this.props.editorUtilities,fileInfo:this.props.fileInfo}),this.props.hasDraft&&!this.props.isDraft&&_react2.default.createElement('div',{className:'seafile-btn-view-review'},_react2.default.createElement('div',{className:'tag tag-green'},(0,_constants.gettext)('This file is in draft stage.'),_react2.default.createElement('a',{className:'ml-2',onMouseDown:this.props.editorUtilities.goDraftPage},(0,_constants.gettext)('View Draft')))),_react2.default.createElement('div',{className:'topbar-btn-container'},!this.props.hasDraft&&!this.props.isDraft&&this.props.isDocs&&_react2.default.createElement('button',{onMouseDown:this.props.toggleNewDraft,className:'btn btn-success btn-new-draft'},(0,_constants.gettext)('New Draft')),this.props.collabUsers.length>0&&_react2.default.createElement(_editorToolBar.CollabUsersButton,{className:'collab-users-dropdown',users:this.props.collabUsers,id:'usersButton'}),_react2.default.createElement(_editorToolBar.ButtonGroup,null,_react2.default.createElement(_editorToolBar.IconButton,{id:'shareBtn',text:(0,_constants.gettext)('Share'),icon:'fa fa-share-alt',onMouseDown:this.props.toggleShareLinkDialog}),this.props.commentsNumber>0?_react2.default.createElement('button',{className:'btn btn-icon btn-secondary btn-active',id:'commentsNumber',type:'button','data-active':'false',onMouseDown:this.props.toggleCommentList},_react2.default.createElement('i',{className:'fa fa-comments'}),' ',_react2.default.createElement('span',null,this.props.commentsNumber)):_react2.default.createElement(_editorToolBar.IconButton,{id:'commentsNumber',text:(0,_constants.gettext)('Comments'),icon:'fa fa-comments',onMouseDown:this.props.toggleCommentList}),_react2.default.createElement(_editorToolBar.IconButton,{text:(0,_constants.gettext)('Back to parent directory'),id:'parentDirectory',icon:'fa fa-folder-open',onMouseDown:this.props.backToParentDirectory}),!this.props.hasDraft&&this.props.fileInfo.permission==='rw'?_react2.default.createElement(_editorToolBar.IconButton,{text:(0,_constants.gettext)('Edit'),id:'editButton',icon:'fa fa-edit',onMouseDown:this.props.onEdit}):null,this.props.showFileHistory&&_react2.default.createElement(_editorToolBar.IconButton,{id:'historyButton',text:(0,_constants.gettext)('File History'),onMouseDown:this.props.toggleHistory,icon:'fa fa-history'}))));}},{key:'renderSecondToolbar',value:function renderSecondToolbar(){var _props=this.props,relatedFiles=_props.relatedFiles,fileTagList=_props.fileTagList;var openDialogs=this.props.openDialogs;var relatedFileString='';if(relatedFiles){var length=relatedFiles.length;if(length===1)relatedFileString=(0,_constants.gettext)('Related file');else if(length>1)relatedFileString=(0,_constants.gettext)('Related files');}return _react2.default.createElement('div',{className:'sf-md-viewer-topbar-second d-flex justify-content-center'},fileTagList&&(fileTagList.length>0?_react2.default.createElement('ul',{className:'sf-files-tags'},fileTagList.map(function(item){var index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return _react2.default.createElement('li',{key:index,className:'sf-files-tag'},_react2.default.createElement('span',{className:'file-tag-icon',style:{backgroundColor:item.tag_color}}),_react2.default.createElement('span',{className:'file-tag-name',title:item.tag_name},item.tag_name));}),_react2.default.createElement('li',{className:'sf-files-tag'},_react2.default.createElement('span',{className:'file-tag-name',onClick:openDialogs.bind(this,'tags')},(0,_constants.gettext)('Edit')))):_react2.default.createElement('span',{className:'no-file-tag edit-related-file',onClick:openDialogs.bind(this,'tags')},(0,_constants.gettext)('No tags'))),relatedFiles&&_react2.default.createElement('div',{className:'sf-related-files-bar'},relatedFiles.length===0?_react2.default.createElement('span',{className:'edit-related-file no-related-file',onClick:openDialogs.bind(this,'related_files')},(0,_constants.gettext)('No related files')):_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement('a',{href:'#sf-releted-files'},relatedFiles.length,' ',relatedFileString),_react2.default.createElement('span',{className:'edit-related-file',onClick:openDialogs.bind(this,'related_files')},(0,_constants.gettext)('Edit')))));}},{key:'render',value:function render(){return _react2.default.createElement('div',{className:'sf-md-viewer-topbar'},this.renderFirstToolbar(),this.renderSecondToolbar());}}]);return MarkdownViewerToolbar;}(_react2.default.Component);MarkdownViewerToolbar.propTypes=propTypes;exports.default=MarkdownViewerToolbar;\n\n/***/ }),\n\n/***/ 1104:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _axios=__webpack_require__(158);var _axios2=_interopRequireDefault(_axios);var _loading=__webpack_require__(11);var _loading2=_interopRequireDefault(_loading);var _moment=__webpack_require__(6);var _moment2=_interopRequireDefault(_moment);var _constants=__webpack_require__(2);__webpack_require__(1105);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/* eslint-disable linebreak-style */var propTypes={editorUtilities:_propTypes2.default.object.isRequired,showDiffViewer:_propTypes2.default.func.isRequired,setDiffViewerContent:_propTypes2.default.func.isRequired,reloadDiffContent:_propTypes2.default.func.isRequired};var HistoryList=function(_React$Component){_inherits(HistoryList,_React$Component);function HistoryList(props){_classCallCheck(this,HistoryList);var _this=_possibleConstructorReturn(this,(HistoryList.__proto__||Object.getPrototypeOf(HistoryList)).call(this,props));_this.onClick=function(event,key,preItem,currentItem){if(key===_this.state.activeItem)return false;_this.props.reloadDiffContent();_this.setState({activeItem:key});_axios2.default.all([_this.props.editorUtilities.getFileHistoryVersion(currentItem.commit_id,currentItem.path),_this.props.editorUtilities.getFileHistoryVersion(preItem.commit_id,preItem.path)]).then(_axios2.default.spread(function(res1,res2){_axios2.default.all([_this.props.editorUtilities.getFileContent(res1.data),_this.props.editorUtilities.getFileContent(res2.data)]).then(_axios2.default.spread(function(content1,content2){_this.props.showDiffViewer();_this.props.setDiffViewerContent(content1.data,content2.data);}));}));};_this.onScroll=function(event){var clientHeight=event.target.clientHeight;var scrollHeight=event.target.scrollHeight;var scrollTop=event.target.scrollTop;var isBottom=clientHeight+scrollTop+1>=scrollHeight;if(isBottom){if(_this.state.totalReversionCount>_this.perPage*_this.state.currentPage){var currentPage=_this.state.currentPage+1;_this.setState({currentPage:currentPage,loading:true});_this.props.editorUtilities.listFileHistoryRecords(currentPage,_this.perPage).then(function(res){var currentHistoryList=Object.assign([],_this.state.historyList);_this.setState({historyList:[].concat(_toConsumableArray(currentHistoryList),_toConsumableArray(res.data.data)),loading:false});});}}};_this.perPage=25;_this.state={historyList:[],activeItem:0,currentPage:1,totalReversionCount:0,loading:false};return _this;}_createClass(HistoryList,[{key:'componentDidMount',value:function componentDidMount(){var _this2=this;this.props.editorUtilities.listFileHistoryRecords(1,this.perPage).then(function(res){_this2.setState({historyList:res.data.data,totalReversionCount:res.data.total_count});if(res.data.data.length>1){_axios2.default.all([_this2.props.editorUtilities.getFileHistoryVersion(res.data.data[0].commit_id,res.data.data[0].path),_this2.props.editorUtilities.getFileHistoryVersion(res.data.data[1].commit_id,res.data.data[1].path)]).then(_axios2.default.spread(function(res1,res2){_axios2.default.all([_this2.props.editorUtilities.getFileContent(res1.data),_this2.props.editorUtilities.getFileContent(res2.data)]).then(_axios2.default.spread(function(content1,content2){_this2.props.showDiffViewer();_this2.props.setDiffViewerContent(content1.data,content2.data);}));}));}else{_this2.props.editorUtilities.getFileHistoryVersion(res.data.data[0].commit_id,res.data.data[0].path).then(function(res){_this2.props.editorUtilities.getFileContent(res.data).then(function(content){_this2.props.showDiffViewer();_this2.props.setDiffViewerContent(content.data,'');});});}});}},{key:'render',value:function render(){var _this3=this;return _react2.default.createElement('div',{className:'seafile-history-side-panel'},_react2.default.createElement('div',{className:'seafile-history-title'},_react2.default.createElement('div',{onClick:this.props.toggleHistoryPanel,className:'seafile-history-title-close'},_react2.default.createElement('i',{className:'fa fa-times-circle'})),_react2.default.createElement('div',{className:'seafile-history-title-text'},(0,_constants.gettext)('History Versions'))),_react2.default.createElement('ul',{onScroll:this.onScroll,className:'history-list-container'},this.state.historyList?this.state.historyList.map(function(item){var index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var arr=arguments[2];var preItemIndex=index+1;if(preItemIndex===arr.length){preItemIndex=index;}return _react2.default.createElement(HistoryItem,{onClick:_this3.onClick,ctime:item.ctime,className:_this3.state.activeItem===index?'item-active':'',currentItem:item,name:item.creator_name,index:index,key:index,preItem:arr[preItemIndex]});}):_react2.default.createElement(_loading2.default,null),this.state.loading&&_react2.default.createElement('li',{className:'reloading-reversion'},_react2.default.createElement(_loading2.default,{style:{width:'0.5rem',margin:'0 auto',color:'#b0b0b0'}}))));}}]);return HistoryList;}(_react2.default.Component);HistoryList.propTypes=propTypes;var HistoryItempropTypes={ctime:_propTypes2.default.string,onClick:_propTypes2.default.func,index:_propTypes2.default.number,preItem:_propTypes2.default.object,currewntItem:_propTypes2.default.object,name:_propTypes2.default.string,className:_propTypes2.default.string};var HistoryItem=function(_React$Component2){_inherits(HistoryItem,_React$Component2);function HistoryItem(){_classCallCheck(this,HistoryItem);return _possibleConstructorReturn(this,(HistoryItem.__proto__||Object.getPrototypeOf(HistoryItem)).apply(this,arguments));}_createClass(HistoryItem,[{key:'render',value:function render(){var _this5=this;var time=_moment2.default.parseZone(this.props.ctime).format('YYYY-MM-DD HH:mm');return _react2.default.createElement('li',{onClick:function onClick(event){return _this5.props.onClick(event,_this5.props.index,_this5.props.preItem,_this5.props.currentItem);},className:'history-item-container '+this.props.className},_react2.default.createElement('div',{className:'time'},time),_react2.default.createElement('div',{className:'owner'},_react2.default.createElement('i',{className:'fa fa-square'}),_react2.default.createElement('span',null,this.props.name)));}}]);return HistoryItem;}(_react2.default.Component);HistoryItem.propTypes=HistoryItempropTypes;exports.default=HistoryList;\n\n/***/ }),\n\n/***/ 1105:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 1106:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _constants=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var OutlineItempropTypes={scrollToNode:_propTypes2.default.func.isRequired,node:_propTypes2.default.object.isRequired,active:_propTypes2.default.string.isRequired};var OutlineItem=function(_React$PureComponent){_inherits(OutlineItem,_React$PureComponent);function OutlineItem(props){_classCallCheck(this,OutlineItem);var _this=_possibleConstructorReturn(this,(OutlineItem.__proto__||Object.getPrototypeOf(OutlineItem)).call(this,props));_this.onClick=function(event){_this.props.scrollToNode(_this.props.node);};return _this;}_createClass(OutlineItem,[{key:'render',value:function render(){var node=this.props.node;var c;if(node.type==='header_two'){c='outline-h2';}else if(node.type==='header_three'){c='outline-h3';}c=c+this.props.active;return _react2.default.createElement('div',{className:c,key:node.key,onClick:this.onClick},node.text);}}]);return OutlineItem;}(_react2.default.PureComponent);OutlineItem.propTypes=OutlineItempropTypes;var propTypes={scrollToNode:_propTypes2.default.func.isRequired,isViewer:_propTypes2.default.bool.isRequired,document:_propTypes2.default.object.isRequired,activeTitleIndex:_propTypes2.default.number,value:_propTypes2.default.object};var OutlineView=function(_React$PureComponent2){_inherits(OutlineView,_React$PureComponent2);function OutlineView(){_classCallCheck(this,OutlineView);return _possibleConstructorReturn(this,(OutlineView.__proto__||Object.getPrototypeOf(OutlineView)).apply(this,arguments));}_createClass(OutlineView,[{key:'render',value:function render(){var _this3=this;var document=this.props.document;var headerList=document.nodes.filter(function(node){return node.type==='header_two'||node.type==='header_three';});return _react2.default.createElement('div',{className:'seafile-editor-outline'},_react2.default.createElement('div',{className:'seafile-editor-outline-heading'},(0,_constants.gettext)('Contents')),headerList.size>0?headerList.map(function(node,index){var active=index===_this3.props.activeTitleIndex?' active':'';return _react2.default.createElement(OutlineItem,{key:node.key,value:_this3.props.value,node:node,active:active,scrollToNode:_this3.props.scrollToNode});}):_react2.default.createElement('div',{className:'size-panel-no-content'},(0,_constants.gettext)('No outline')));}}]);return OutlineView;}(_react2.default.PureComponent);OutlineView.propTypes=propTypes;exports.default=OutlineView;\n\n/***/ }),\n\n/***/ 1107:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 113:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 1132:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _i18next=__webpack_require__(1133);var _i18next2=_interopRequireDefault(_i18next);var _i18nextXhrBackend=__webpack_require__(1142);var _i18nextXhrBackend2=_interopRequireDefault(_i18nextXhrBackend);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var siteRoot=window.app.config.siteRoot;_i18next2.default.use(_i18nextXhrBackend2.default).init({fallbackLng:'en',ns:['translations'],defaultNS:'translations',whitelist:['en','zh-CN','fr','de','cs','es','es-AR','es-MX','ru'],backend:{loadPath:siteRoot+'media/assets/frontend/locales/{{ lng }}/{{ ns }}.json'// loadPath: '/media/locales/{{lng}}/{{ns}}.json',\n},debug:false,// console log if debug: true\ninterpolation:{escapeValue:false// not needed for react!!\n},load:'currentOnly',react:{wait:true}});exports.default=_i18next2.default;\n\n/***/ }),\n\n/***/ 1146:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 12:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nif (typeof Promise === 'undefined') {\n  // Rejection tracking prevents a common issue where React gets into an\n  // inconsistent state due to an error, but it gets swallowed by a Promise,\n  // and the user has no idea what causes React's erratic future behavior.\n  __webpack_require__(33).enable();\n  window.Promise = __webpack_require__(34);\n}\n\n// fetch() polyfill for making API calls.\n__webpack_require__(28);\n\n// Object.assign() is commonly used with React.\n// It will use the native implementation if it's present and isn't buggy.\nObject.assign = __webpack_require__(20);\n\n// In tests, polyfill requestAnimationFrame since jsdom doesn't provide it yet.\n// We don't polyfill it in the browser--this is user's responsibility.\nif (false) {\n  require('raf').polyfill(global);\n}\n\n\n/***/ }),\n\n/***/ 13:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var strChineseFirstPY=exports.strChineseFirstPY=\"YDYQSXMWZSSXJBYMGCCZQPSSQBYCDSCDQLDYLYBSSJGYZZJJFKCCLZDHWDWZJLJPFYYNWJJTMYHZWZHFLZPPQHGSCYYYNJQYXXGJHHSDSJNKKTMOMLCRXYPSNQSECCQZGGLLYJLMYZZSECYKYYHQWJSSGGYXYZYJWWKDJHYCHMYXJTLXJYQBYXZLDWRDJRWYSRLDZJPCBZJJBRCFTLECZSTZFXXZHTRQHYBDLYCZSSYMMRFMYQZPWWJJYFCRWFDFZQPYDDWYXKYJAWJFFXYPSFTZYHHYZYSWCJYXSCLCXXWZZXNBGNNXBXLZSZSBSGPYSYZDHMDZBQBZCWDZZYYTZHBTSYYBZGNTNXQYWQSKBPHHLXGYBFMJEBJHHGQTJCYSXSTKZHLYCKGLYSMZXYALMELDCCXGZYRJXSDLTYZCQKCNNJWHJTZZCQLJSTSTBNXBTYXCEQXGKWJYFLZQLYHYXSPSFXLMPBYSXXXYDJCZYLLLSJXFHJXPJBTFFYABYXBHZZBJYZLWLCZGGBTSSMDTJZXPTHYQTGLJSCQFZKJZJQNLZWLSLHDZBWJNCJZYZSQQYCQYRZCJJWYBRTWPYFTWEXCSKDZCTBZHYZZYYJXZCFFZZMJYXXSDZZOTTBZLQWFCKSZSXFYRLNYJMBDTHJXSQQCCSBXYYTSYFBXDZTGBCNSLCYZZPSAZYZZSCJCSHZQYDXLBPJLLMQXTYDZXSQJTZPXLCGLQTZWJBHCTSYJSFXYEJJTLBGXSXJMYJQQPFZASYJNTYDJXKJCDJSZCBARTDCLYJQMWNQNCLLLKBYBZZSYHQQLTWLCCXTXLLZNTYLNEWYZYXCZXXGRKRMTCNDNJTSYYSSDQDGHSDBJGHRWRQLYBGLXHLGTGXBQJDZPYJSJYJCTMRNYMGRZJCZGJMZMGXMPRYXKJNYMSGMZJYMKMFXMLDTGFBHCJHKYLPFMDXLQJJSMTQGZSJLQDLDGJYCALCMZCSDJLLNXDJFFFFJCZFMZFFPFKHKGDPSXKTACJDHHZDDCRRCFQYJKQCCWJDXHWJLYLLZGCFCQDSMLZPBJJPLSBCJGGDCKKDEZSQCCKJGCGKDJTJDLZYCXKLQSCGJCLTFPCQCZGWPJDQYZJJBYJHSJDZWGFSJGZKQCCZLLPSPKJGQJHZZLJPLGJGJJTHJJYJZCZMLZLYQBGJWMLJKXZDZNJQSYZMLJLLJKYWXMKJLHSKJGBMCLYYMKXJQLBMLLKMDXXKWYXYSLMLPSJQQJQXYXFJTJDXMXXLLCXQBSYJBGWYMBGGBCYXPJYGPEPFGDJGBHBNSQJYZJKJKHXQFGQZKFHYGKHDKLLSDJQXPQYKYBNQSXQNSZSWHBSXWHXWBZZXDMNSJBSBKBBZKLYLXGWXDRWYQZMYWSJQLCJXXJXKJEQXSCYETLZHLYYYSDZPAQYZCMTLSHTZCFYZYXYLJSDCJQAGYSLCQLYYYSHMRQQKLDXZSCSSSYDYCJYSFSJBFRSSZQSBXXPXJYSDRCKGJLGDKZJZBDKTCSYQPYHSTCLDJDHMXMCGXYZHJDDTMHLTXZXYLYMOHYJCLTYFBQQXPFBDFHHTKSQHZYYWCNXXCRWHOWGYJLEGWDQCWGFJYCSNTMYTOLBYGWQWESJPWNMLRYDZSZTXYQPZGCWXHNGPYXSHMYQJXZTDPPBFYHZHTJYFDZWKGKZBLDNTSXHQEEGZZYLZMMZYJZGXZXKHKSTXNXXWYLYAPSTHXDWHZYMPXAGKYDXBHNHXKDPJNMYHYLPMGOCSLNZHKXXLPZZLBMLSFBHHGYGYYGGBHSCYAQTYWLXTZQCEZYDQDQMMHTKLLSZHLSJZWFYHQSWSCWLQAZYNYTLSXTHAZNKZZSZZLAXXZWWCTGQQTDDYZTCCHYQZFLXPSLZYGPZSZNGLNDQTBDLXGTCTAJDKYWNSYZLJHHZZCWNYYZYWMHYCHHYXHJKZWSXHZYXLYSKQYSPSLYZWMYPPKBYGLKZHTYXAXQSYSHXASMCHKDSCRSWJPWXSGZJLWWSCHSJHSQNHCSEGNDAQTBAALZZMSSTDQJCJKTSCJAXPLGGXHHGXXZCXPDMMHLDGTYBYSJMXHMRCPXXJZCKZXSHMLQXXTTHXWZFKHCCZDYTCJYXQHLXDHYPJQXYLSYYDZOZJNYXQEZYSQYAYXWYPDGXDDXSPPYZNDLTWRHXYDXZZJHTCXMCZLHPYYYYMHZLLHNXMYLLLMDCPPXHMXDKYCYRDLTXJCHHZZXZLCCLYLNZSHZJZZLNNRLWHYQSNJHXYNTTTKYJPYCHHYEGKCTTWLGQRLGGTGTYGYHPYHYLQYQGCWYQKPYYYTTTTLHYHLLTYTTSPLKYZXGZWGPYDSSZZDQXSKCQNMJJZZBXYQMJRTFFBTKHZKBXLJJKDXJTLBWFZPPTKQTZTGPDGNTPJYFALQMKGXBDCLZFHZCLLLLADPMXDJHLCCLGYHDZFGYDDGCYYFGYDXKSSEBDHYKDKDKHNAXXYBPBYYHXZQGAFFQYJXDMLJCSQZLLPCHBSXGJYNDYBYQSPZWJLZKSDDTACTBXZDYZYPJZQSJNKKTKNJDJGYYPGTLFYQKASDNTCYHBLWDZHBBYDWJRYGKZYHEYYFJMSDTYFZJJHGCXPLXHLDWXXJKYTCYKSSSMTWCTTQZLPBSZDZWZXGZAGYKTYWXLHLSPBCLLOQMMZSSLCMBJCSZZKYDCZJGQQDSMCYTZQQLWZQZXSSFPTTFQMDDZDSHDTDWFHTDYZJYQJQKYPBDJYYXTLJHDRQXXXHAYDHRJLKLYTWHLLRLLRCXYLBWSRSZZSYMKZZHHKYHXKSMDSYDYCJPBZBSQLFCXXXNXKXWYWSDZYQOGGQMMYHCDZTTFJYYBGSTTTYBYKJDHKYXBELHTYPJQNFXFDYKZHQKZBYJTZBXHFDXKDASWTAWAJLDYJSFHBLDNNTNQJTJNCHXFJSRFWHZFMDRYJYJWZPDJKZYJYMPCYZNYNXFBYTFYFWYGDBNZZZDNYTXZEMMQBSQEHXFZMBMFLZZSRXYMJGSXWZJSPRYDJSJGXHJJGLJJYNZZJXHGXKYMLPYYYCXYTWQZSWHWLYRJLPXSLSXMFSWWKLCTNXNYNPSJSZHDZEPTXMYYWXYYSYWLXJQZQXZDCLEEELMCPJPCLWBXSQHFWWTFFJTNQJHJQDXHWLBYZNFJLALKYYJLDXHHYCSTYYWNRJYXYWTRMDRQHWQCMFJDYZMHMYYXJWMYZQZXTLMRSPWWCHAQBXYGZYPXYYRRCLMPYMGKSJSZYSRMYJSNXTPLNBAPPYPYLXYYZKYNLDZYJZCZNNLMZHHARQMPGWQTZMXXMLLHGDZXYHXKYXYCJMFFYYHJFSBSSQLXXNDYCANNMTCJCYPRRNYTYQNYYMBMSXNDLYLYSLJRLXYSXQMLLYZLZJJJKYZZCSFBZXXMSTBJGNXYZHLXNMCWSCYZYFZLXBRNNNYLBNRTGZQYSATSWRYHYJZMZDHZGZDWYBSSCSKXSYHYTXXGCQGXZZSHYXJSCRHMKKBXCZJYJYMKQHZJFNBHMQHYSNJNZYBKNQMCLGQHWLZNZSWXKHLJHYYBQLBFCDSXDLDSPFZPSKJYZWZXZDDXJSMMEGJSCSSMGCLXXKYYYLNYPWWWGYDKZJGGGZGGSYCKNJWNJPCXBJJTQTJWDSSPJXZXNZXUMELPXFSXTLLXCLJXJJLJZXCTPSWXLYDHLYQRWHSYCSQYYBYAYWJJJQFWQCQQCJQGXALDBZZYJGKGXPLTZYFXJLTPADKYQHPMATLCPDCKBMTXYBHKLENXDLEEGQDYMSAWHZMLJTWYGXLYQZLJEEYYBQQFFNLYXRDSCTGJGXYYNKLLYQKCCTLHJLQMKKZGCYYGLLLJDZGYDHZWXPYSJBZKDZGYZZHYWYFQYTYZSZYEZZLYMHJJHTSMQWYZLKYYWZCSRKQYTLTDXWCTYJKLWSQZWBDCQYNCJSRSZJLKCDCDTLZZZACQQZZDDXYPLXZBQJYLZLLLQDDZQJYJYJZYXNYYYNYJXKXDAZWYRDLJYYYRJLXLLDYXJCYWYWNQCCLDDNYYYNYCKCZHXXCCLGZQJGKWPPCQQJYSBZZXYJSQPXJPZBSBDSFNSFPZXHDWZTDWPPTFLZZBZDMYYPQJRSDZSQZSQXBDGCPZSWDWCSQZGMDHZXMWWFYBPDGPHTMJTHZSMMBGZMBZJCFZWFZBBZMQCFMBDMCJXLGPNJBBXGYHYYJGPTZGZMQBQTCGYXJXLWZKYDPDYMGCFTPFXYZTZXDZXTGKMTYBBCLBJASKYTSSQYYMSZXFJEWLXLLSZBQJJJAKLYLXLYCCTSXMCWFKKKBSXLLLLJYXTYLTJYYTDPJHNHNNKBYQNFQYYZBYYESSESSGDYHFHWTCJBSDZZTFDMXHCNJZYMQWSRYJDZJQPDQBBSTJGGFBKJBXTGQHNGWJXJGDLLTHZHHYYYYYYSXWTYYYCCBDBPYPZYCCZYJPZYWCBDLFWZCWJDXXHYHLHWZZXJTCZLCDPXUJCZZZLYXJJTXPHFXWPYWXZPTDZZBDZCYHJHMLXBQXSBYLRDTGJRRCTTTHYTCZWMXFYTWWZCWJWXJYWCSKYBZSCCTZQNHXNWXXKHKFHTSWOCCJYBCMPZZYKBNNZPBZHHZDLSYDDYTYFJPXYNGFXBYQXCBHXCPSXTYZDMKYSNXSXLHKMZXLYHDHKWHXXSSKQYHHCJYXGLHZXCSNHEKDTGZXQYPKDHEXTYKCNYMYYYPKQYYYKXZLTHJQTBYQHXBMYHSQCKWWYLLHCYYLNNEQXQWMCFBDCCMLJGGXDQKTLXKGNQCDGZJWYJJLYHHQTTTNWCHMXCXWHWSZJYDJCCDBQCDGDNYXZTHCQRXCBHZTQCBXWGQWYYBXHMBYMYQTYEXMQKYAQYRGYZSLFYKKQHYSSQYSHJGJCNXKZYCXSBXYXHYYLSTYCXQTHYSMGSCPMMGCCCCCMTZTASMGQZJHKLOSQYLSWTMXSYQKDZLJQQYPLSYCZTCQQPBBQJZCLPKHQZYYXXDTDDTSJCXFFLLCHQXMJLWCJCXTSPYCXNDTJSHJWXDQQJSKXYAMYLSJHMLALYKXCYYDMNMDQMXMCZNNCYBZKKYFLMCHCMLHXRCJJHSYLNMTJZGZGYWJXSRXCWJGJQHQZDQJDCJJZKJKGDZQGJJYJYLXZXXCDQHHHEYTMHLFSBDJSYYSHFYSTCZQLPBDRFRZTZYKYWHSZYQKWDQZRKMSYNBCRXQBJYFAZPZZEDZCJYWBCJWHYJBQSZYWRYSZPTDKZPFPBNZTKLQYHBBZPNPPTYZZYBQNYDCPJMMCYCQMCYFZZDCMNLFPBPLNGQJTBTTNJZPZBBZNJKLJQYLNBZQHKSJZNGGQSZZKYXSHPZSNBCGZKDDZQANZHJKDRTLZLSWJLJZLYWTJNDJZJHXYAYNCBGTZCSSQMNJPJYTYSWXZFKWJQTKHTZPLBHSNJZSYZBWZZZZLSYLSBJHDWWQPSLMMFBJDWAQYZTCJTBNNWZXQXCDSLQGDSDPDZHJTQQPSWLYYJZLGYXYZLCTCBJTKTYCZJTQKBSJLGMGZDMCSGPYNJZYQYYKNXRPWSZXMTNCSZZYXYBYHYZAXYWQCJTLLCKJJTJHGDXDXYQYZZBYWDLWQCGLZGJGQRQZCZSSBCRPCSKYDZNXJSQGXSSJMYDNSTZTPBDLTKZWXQWQTZEXNQCZGWEZKSSBYBRTSSSLCCGBPSZQSZLCCGLLLZXHZQTHCZMQGYZQZNMCOCSZJMMZSQPJYGQLJYJPPLDXRGZYXCCSXHSHGTZNLZWZKJCXTCFCJXLBMQBCZZWPQDNHXLJCTHYZLGYLNLSZZPCXDSCQQHJQKSXZPBAJYEMSMJTZDXLCJYRYYNWJBNGZZTMJXLTBSLYRZPYLSSCNXPHLLHYLLQQZQLXYMRSYCXZLMMCZLTZSDWTJJLLNZGGQXPFSKYGYGHBFZPDKMWGHCXMSGDXJMCJZDYCABXJDLNBCDQYGSKYDQTXDJJYXMSZQAZDZFSLQXYJSJZYLBTXXWXQQZBJZUFBBLYLWDSLJHXJYZJWTDJCZFQZQZZDZSXZZQLZCDZFJHYSPYMPQZMLPPLFFXJJNZZYLSJEYQZFPFZKSYWJJJHRDJZZXTXXGLGHYDXCSKYSWMMZCWYBAZBJKSHFHJCXMHFQHYXXYZFTSJYZFXYXPZLCHMZMBXHZZSXYFYMNCWDABAZLXKTCSHHXKXJJZJSTHYGXSXYYHHHJWXKZXSSBZZWHHHCWTZZZPJXSNXQQJGZYZYWLLCWXZFXXYXYHXMKYYSWSQMNLNAYCYSPMJKHWCQHYLAJJMZXHMMCNZHBHXCLXTJPLTXYJHDYYLTTXFSZHYXXSJBJYAYRSMXYPLCKDUYHLXRLNLLSTYZYYQYGYHHSCCSMZCTZQXKYQFPYYRPFFLKQUNTSZLLZMWWTCQQYZWTLLMLMPWMBZSSTZRBPDDTLQJJBXZCSRZQQYGWCSXFWZLXCCRSZDZMCYGGDZQSGTJSWLJMYMMZYHFBJDGYXCCPSHXNZCSBSJYJGJMPPWAFFYFNXHYZXZYLREMZGZCYZSSZDLLJCSQFNXZKPTXZGXJJGFMYYYSNBTYLBNLHPFZDCYFBMGQRRSSSZXYSGTZRNYDZZCDGPJAFJFZKNZBLCZSZPSGCYCJSZLMLRSZBZZLDLSLLYSXSQZQLYXZLSKKBRXBRBZCYCXZZZEEYFGKLZLYYHGZSGZLFJHGTGWKRAAJYZKZQTSSHJJXDCYZUYJLZYRZDQQHGJZXSSZBYKJPBFRTJXLLFQWJHYLQTYMBLPZDXTZYGBDHZZRBGXHWNJTJXLKSCFSMWLSDQYSJTXKZSCFWJLBXFTZLLJZLLQBLSQMQQCGCZFPBPHZCZJLPYYGGDTGWDCFCZQYYYQYSSCLXZSKLZZZGFFCQNWGLHQYZJJCZLQZZYJPJZZBPDCCMHJGXDQDGDLZQMFGPSYTSDYFWWDJZJYSXYYCZCYHZWPBYKXRYLYBHKJKSFXTZJMMCKHLLTNYYMSYXYZPYJQYCSYCWMTJJKQYRHLLQXPSGTLYYCLJSCPXJYZFNMLRGJJTYZBXYZMSJYJHHFZQMSYXRSZCWTLRTQZSSTKXGQKGSPTGCZNJSJCQCXHMXGGZTQYDJKZDLBZSXJLHYQGGGTHQSZPYHJHHGYYGKGGCWJZZYLCZLXQSFTGZSLLLMLJSKCTBLLZZSZMMNYTPZSXQHJCJYQXYZXZQZCPSHKZZYSXCDFGMWQRLLQXRFZTLYSTCTMJCXJJXHJNXTNRZTZFQYHQGLLGCXSZSJDJLJCYDSJTLNYXHSZXCGJZYQPYLFHDJSBPCCZHJJJQZJQDYBSSLLCMYTTMQTBHJQNNYGKYRQYQMZGCJKPDCGMYZHQLLSLLCLMHOLZGDYYFZSLJCQZLYLZQJESHNYLLJXGJXLYSYYYXNBZLJSSZCQQCJYLLZLTJYLLZLLBNYLGQCHXYYXOXCXQKYJXXXYKLXSXXYQXCYKQXQCSGYXXYQXYGYTQOHXHXPYXXXULCYEYCHZZCBWQBBWJQZSCSZSSLZYLKDESJZWMYMCYTSDSXXSCJPQQSQYLYYZYCMDJDZYWCBTJSYDJKCYDDJLBDJJSODZYSYXQQYXDHHGQQYQHDYXWGMMMAJDYBBBPPBCMUUPLJZSMTXERXJMHQNUTPJDCBSSMSSSTKJTSSMMTRCPLZSZMLQDSDMJMQPNQDXCFYNBFSDQXYXHYAYKQYDDLQYYYSSZBYDSLNTFQTZQPZMCHDHCZCWFDXTMYQSPHQYYXSRGJCWTJTZZQMGWJJTJHTQJBBHWZPXXHYQFXXQYWYYHYSCDYDHHQMNMTMWCPBSZPPZZGLMZFOLLCFWHMMSJZTTDHZZYFFYTZZGZYSKYJXQYJZQBHMBZZLYGHGFMSHPZFZSNCLPBQSNJXZSLXXFPMTYJYGBXLLDLXPZJYZJYHHZCYWHJYLSJEXFSZZYWXKZJLUYDTMLYMQJPWXYHXSKTQJEZRPXXZHHMHWQPWQLYJJQJJZSZCPHJLCHHNXJLQWZJHBMZYXBDHHYPZLHLHLGFWLCHYYTLHJXCJMSCPXSTKPNHQXSRTYXXTESYJCTLSSLSTDLLLWWYHDHRJZSFGXTSYCZYNYHTDHWJSLHTZDQDJZXXQHGYLTZPHCSQFCLNJTCLZPFSTPDYNYLGMJLLYCQHYSSHCHYLHQYQTMZYPBYWRFQYKQSYSLZDQJMPXYYSSRHZJNYWTQDFZBWWTWWRXCWHGYHXMKMYYYQMSMZHNGCEPMLQQMTCWCTMMPXJPJJHFXYYZSXZHTYBMSTSYJTTQQQYYLHYNPYQZLCYZHZWSMYLKFJXLWGXYPJYTYSYXYMZCKTTWLKSMZSYLMPWLZWXWQZSSAQSYXYRHSSNTSRAPXCPWCMGDXHXZDZYFJHGZTTSBJHGYZSZYSMYCLLLXBTYXHBBZJKSSDMALXHYCFYGMQYPJYCQXJLLLJGSLZGQLYCJCCZOTYXMTMTTLLWTGPXYMZMKLPSZZZXHKQYSXCTYJZYHXSHYXZKXLZWPSQPYHJWPJPWXQQYLXSDHMRSLZZYZWTTCYXYSZZSHBSCCSTPLWSSCJCHNLCGCHSSPHYLHFHHXJSXYLLNYLSZDHZXYLSXLWZYKCLDYAXZCMDDYSPJTQJZLNWQPSSSWCTSTSZLBLNXSMNYYMJQBQHRZWTYYDCHQLXKPZWBGQYBKFCMZWPZLLYYLSZYDWHXPSBCMLJBSCGBHXLQHYRLJXYSWXWXZSLDFHLSLYNJLZYFLYJYCDRJLFSYZFSLLCQYQFGJYHYXZLYLMSTDJCYHBZLLNWLXXYGYYHSMGDHXXHHLZZJZXCZZZCYQZFNGWPYLCPKPYYPMCLQKDGXZGGWQBDXZZKZFBXXLZXJTPJPTTBYTSZZDWSLCHZHSLTYXHQLHYXXXYYZYSWTXZKHLXZXZPYHGCHKCFSYHUTJRLXFJXPTZTWHPLYXFCRHXSHXKYXXYHZQDXQWULHYHMJTBFLKHTXCWHJFWJCFPQRYQXCYYYQYGRPYWSGSUNGWCHKZDXYFLXXHJJBYZWTSXXNCYJJYMSWZJQRMHXZWFQSYLZJZGBHYNSLBGTTCSYBYXXWXYHXYYXNSQYXMQYWRGYQLXBBZLJSYLPSYTJZYHYZAWLRORJMKSCZJXXXYXCHDYXRYXXJDTSQFXLYLTSFFYXLMTYJMJUYYYXLTZCSXQZQHZXLYYXZHDNBRXXXJCTYHLBRLMBRLLAXKYLLLJLYXXLYCRYLCJTGJCMTLZLLCYZZPZPCYAWHJJFYBDYYZSMPCKZDQYQPBPCJPDCYZMDPBCYYDYCNNPLMTMLRMFMMGWYZBSJGYGSMZQQQZTXMKQWGXLLPJGZBQCDJJJFPKJKCXBLJMSWMDTQJXLDLPPBXCWRCQFBFQJCZAHZGMYKPHYYHZYKNDKZMBPJYXPXYHLFPNYYGXJDBKXNXHJMZJXSTRSTLDXSKZYSYBZXJLXYSLBZYSLHXJPFXPQNBYLLJQKYGZMCYZZYMCCSLCLHZFWFWYXZMWSXTYNXJHPYYMCYSPMHYSMYDYSHQYZCHMJJMZCAAGCFJBBHPLYZYLXXSDJGXDHKXXTXXNBHRMLYJSLTXMRHNLXQJXYZLLYSWQGDLBJHDCGJYQYCMHWFMJYBMBYJYJWYMDPWHXQLDYGPDFXXBCGJSPCKRSSYZJMSLBZZJFLJJJLGXZGYXYXLSZQYXBEXYXHGCXBPLDYHWETTWWCJMBTXCHXYQXLLXFLYXLLJLSSFWDPZSMYJCLMWYTCZPCHQEKCQBWLCQYDPLQPPQZQFJQDJHYMMCXTXDRMJWRHXCJZYLQXDYYNHYYHRSLSRSYWWZJYMTLTLLGTQCJZYABTCKZCJYCCQLJZQXALMZYHYWLWDXZXQDLLQSHGPJFJLJHJABCQZDJGTKHSSTCYJLPSWZLXZXRWGLDLZRLZXTGSLLLLZLYXXWGDZYGBDPHZPBRLWSXQBPFDWOFMWHLYPCBJCCLDMBZPBZZLCYQXLDOMZBLZWPDWYYGDSTTHCSQSCCRSSSYSLFYBFNTYJSZDFNDPDHDZZMBBLSLCMYFFGTJJQWFTMTPJWFNLBZCMMJTGBDZLQLPYFHYYMJYLSDCHDZJWJCCTLJCLDTLJJCPDDSQDSSZYBNDBJLGGJZXSXNLYCYBJXQYCBYLZCFZPPGKCXZDZFZTJJFJSJXZBNZYJQTTYJYHTYCZHYMDJXTTMPXSPLZCDWSLSHXYPZGTFMLCJTYCBPMGDKWYCYZCDSZZYHFLYCTYGWHKJYYLSJCXGYWJCBLLCSNDDBTZBSCLYZCZZSSQDLLMQYYHFSLQLLXFTYHABXGWNYWYYPLLSDLDLLBJCYXJZMLHLJDXYYQYTDLLLBUGBFDFBBQJZZMDPJHGCLGMJJPGAEHHBWCQXAXHHHZCHXYPHJAXHLPHJPGPZJQCQZGJJZZUZDMQYYBZZPHYHYBWHAZYJHYKFGDPFQSDLZMLJXKXGALXZDAGLMDGXMWZQYXXDXXPFDMMSSYMPFMDMMKXKSYZYSHDZKXSYSMMZZZMSYDNZZCZXFPLSTMZDNMXCKJMZTYYMZMZZMSXHHDCZJEMXXKLJSTLWLSQLYJZLLZJSSDPPMHNLZJCZYHMXXHGZCJMDHXTKGRMXFWMCGMWKDTKSXQMMMFZZYDKMSCLCMPCGMHSPXQPZDSSLCXKYXTWLWJYAHZJGZQMCSNXYYMMPMLKJXMHLMLQMXCTKZMJQYSZJSYSZHSYJZJCDAJZYBSDQJZGWZQQXFKDMSDJLFWEHKZQKJPEYPZYSZCDWYJFFMZZYLTTDZZEFMZLBNPPLPLPEPSZALLTYLKCKQZKGENQLWAGYXYDPXLHSXQQWQCQXQCLHYXXMLYCCWLYMQYSKGCHLCJNSZKPYZKCQZQLJPDMDZHLASXLBYDWQLWDNBQCRYDDZTJYBKBWSZDXDTNPJDTCTQDFXQQMGNXECLTTBKPWSLCTYQLPWYZZKLPYGZCQQPLLKCCYLPQMZCZQCLJSLQZDJXLDDHPZQDLJJXZQDXYZQKZLJCYQDYJPPYPQYKJYRMPCBYMCXKLLZLLFQPYLLLMBSGLCYSSLRSYSQTMXYXZQZFDZUYSYZTFFMZZSMZQHZSSCCMLYXWTPZGXZJGZGSJSGKDDHTQGGZLLBJDZLCBCHYXYZHZFYWXYZYMSDBZZYJGTSMTFXQYXQSTDGSLNXDLRYZZLRYYLXQHTXSRTZNGZXBNQQZFMYKMZJBZYMKBPNLYZPBLMCNQYZZZSJZHJCTZKHYZZJRDYZHNPXGLFZTLKGJTCTSSYLLGZRZBBQZZKLPKLCZYSSUYXBJFPNJZZXCDWXZYJXZZDJJKGGRSRJKMSMZJLSJYWQSKYHQJSXPJZZZLSNSHRNYPZTWCHKLPSRZLZXYJQXQKYSJYCZTLQZYBBYBWZPQDWWYZCYTJCJXCKCWDKKZXSGKDZXWWYYJQYYTCYTDLLXWKCZKKLCCLZCQQDZLQLCSFQCHQHSFSMQZZLNBJJZBSJHTSZDYSJQJPDLZCDCWJKJZZLPYCGMZWDJJBSJQZSYZYHHXJPBJYDSSXDZNCGLQMBTSFSBPDZDLZNFGFJGFSMPXJQLMBLGQCYYXBQKDJJQYRFKZTJDHCZKLBSDZCFJTPLLJGXHYXZCSSZZXSTJYGKGCKGYOQXJPLZPBPGTGYJZGHZQZZLBJLSQFZGKQQJZGYCZBZQTLDXRJXBSXXPZXHYZYCLWDXJJHXMFDZPFZHQHQMQGKSLYHTYCGFRZGNQXCLPDLBZCSCZQLLJBLHBZCYPZZPPDYMZZSGYHCKCPZJGSLJLNSCDSLDLXBMSTLDDFJMKDJDHZLZXLSZQPQPGJLLYBDSZGQLBZLSLKYYHZTTNTJYQTZZPSZQZTLLJTYYLLQLLQYZQLBDZLSLYYZYMDFSZSNHLXZNCZQZPBWSKRFBSYZMTHBLGJPMCZZLSTLXSHTCSYZLZBLFEQHLXFLCJLYLJQCBZLZJHHSSTBRMHXZHJZCLXFNBGXGTQJCZTMSFZKJMSSNXLJKBHSJXNTNLZDNTLMSJXGZJYJCZXYJYJWRWWQNZTNFJSZPZSHZJFYRDJSFSZJZBJFZQZZHZLXFYSBZQLZSGYFTZDCSZXZJBQMSZKJRHYJZCKMJKHCHGTXKXQGLXPXFXTRTYLXJXHDTSJXHJZJXZWZLCQSBTXWXGXTXXHXFTSDKFJHZYJFJXRZSDLLLTQSQQZQWZXSYQTWGWBZCGZLLYZBCLMQQTZHZXZXLJFRMYZFLXYSQXXJKXRMQDZDMMYYBSQBHGZMWFWXGMXLZPYYTGZYCCDXYZXYWGSYJYZNBHPZJSQSYXSXRTFYZGRHZTXSZZTHCBFCLSYXZLZQMZLMPLMXZJXSFLBYZMYQHXJSXRXSQZZZSSLYFRCZJRCRXHHZXQYDYHXSJJHZCXZBTYNSYSXJBQLPXZQPYMLXZKYXLXCJLCYSXXZZLXDLLLJJYHZXGYJWKJRWYHCPSGNRZLFZWFZZNSXGXFLZSXZZZBFCSYJDBRJKRDHHGXJLJJTGXJXXSTJTJXLYXQFCSGSWMSBCTLQZZWLZZKXJMLTMJYHSDDBXGZHDLBMYJFRZFSGCLYJBPMLYSMSXLSZJQQHJZFXGFQFQBPXZGYYQXGZTCQWYLTLGWSGWHRLFSFGZJMGMGBGTJFSYZZGZYZAFLSSPMLPFLCWBJZCLJJMZLPJJLYMQDMYYYFBGYGYZMLYZDXQYXRQQQHSYYYQXYLJTYXFSFSLLGNQCYHYCWFHCCCFXPYLYPLLZYXXXXXKQHHXSHJZCFZSCZJXCPZWHHHHHAPYLQALPQAFYHXDYLUKMZQGGGDDESRNNZLTZGCHYPPYSQJJHCLLJTOLNJPZLJLHYMHEYDYDSQYCDDHGZUNDZCLZYZLLZNTNYZGSLHSLPJJBDGWXPCDUTJCKLKCLWKLLCASSTKZZDNQNTTLYYZSSYSSZZRYLJQKCQDHHCRXRZYDGRGCWCGZQFFFPPJFZYNAKRGYWYQPQXXFKJTSZZXSWZDDFBBXTBGTZKZNPZZPZXZPJSZBMQHKCYXYLDKLJNYPKYGHGDZJXXEAHPNZKZTZCMXCXMMJXNKSZQNMNLWBWWXJKYHCPSTMCSQTZJYXTPCTPDTNNPGLLLZSJLSPBLPLQHDTNJNLYYRSZFFJFQWDPHZDWMRZCCLODAXNSSNYZRESTYJWJYJDBCFXNMWTTBYLWSTSZGYBLJPXGLBOCLHPCBJLTMXZLJYLZXCLTPNCLCKXTPZJSWCYXSFYSZDKNTLBYJCYJLLSTGQCBXRYZXBXKLYLHZLQZLNZCXWJZLJZJNCJHXMNZZGJZZXTZJXYCYYCXXJYYXJJXSSSJSTSSTTPPGQTCSXWZDCSYFPTFBFHFBBLZJCLZZDBXGCXLQPXKFZFLSYLTUWBMQJHSZBMDDBCYSCCLDXYCDDQLYJJWMQLLCSGLJJSYFPYYCCYLTJANTJJPWYCMMGQYYSXDXQMZHSZXPFTWWZQSWQRFKJLZJQQYFBRXJHHFWJJZYQAZMYFRHCYYBYQWLPEXCCZSTYRLTTDMQLYKMBBGMYYJPRKZNPBSXYXBHYZDJDNGHPMFSGMWFZMFQMMBCMZZCJJLCNUXYQLMLRYGQZCYXZLWJGCJCGGMCJNFYZZJHYCPRRCMTZQZXHFQGTJXCCJEAQCRJYHPLQLSZDJRBCQHQDYRHYLYXJSYMHZYDWLDFRYHBPYDTSSCNWBXGLPZMLZZTQSSCPJMXXYCSJYTYCGHYCJWYRXXLFEMWJNMKLLSWTXHYYYNCMMCWJDQDJZGLLJWJRKHPZGGFLCCSCZMCBLTBHBQJXQDSPDJZZGKGLFQYWBZYZJLTSTDHQHCTCBCHFLQMPWDSHYYTQWCNZZJTLBYMBPDYYYXSQKXWYYFLXXNCWCXYPMAELYKKJMZZZBRXYYQJFLJPFHHHYTZZXSGQQMHSPGDZQWBWPJHZJDYSCQWZKTXXSQLZYYMYSDZGRXCKKUJLWPYSYSCSYZLRMLQSYLJXBCXTLWDQZPCYCYKPPPNSXFYZJJRCEMHSZMSXLXGLRWGCSTLRSXBZGBZGZTCPLUJLSLYLYMTXMTZPALZXPXJTJWTCYYZLBLXBZLQMYLXPGHDSLSSDMXMBDZZSXWHAMLCZCPJMCNHJYSNSYGCHSKQMZZQDLLKABLWJXSFMOCDXJRRLYQZKJMYBYQLYHETFJZFRFKSRYXFJTWDSXXSYSQJYSLYXWJHSNLXYYXHBHAWHHJZXWMYLJCSSLKYDZTXBZSYFDXGXZJKHSXXYBSSXDPYNZWRPTQZCZENYGCXQFJYKJBZMLJCMQQXUOXSLYXXLYLLJDZBTYMHPFSTTQQWLHOKYBLZZALZXQLHZWRRQHLSTMYPYXJJXMQSJFNBXYXYJXXYQYLTHYLQYFMLKLJTMLLHSZWKZHLJMLHLJKLJSTLQXYLMBHHLNLZXQJHXCFXXLHYHJJGBYZZKBXSCQDJQDSUJZYYHZHHMGSXCSYMXFEBCQWWRBPYYJQTYZCYQYQQZYHMWFFHGZFRJFCDPXNTQYZPDYKHJLFRZXPPXZDBBGZQSTLGDGYLCQMLCHHMFYWLZYXKJLYPQHSYWMQQGQZMLZJNSQXJQSYJYCBEHSXFSZPXZWFLLBCYYJDYTDTHWZSFJMQQYJLMQXXLLDTTKHHYBFPWTYYSQQWNQWLGWDEBZWCMYGCULKJXTMXMYJSXHYBRWFYMWFRXYQMXYSZTZZTFYKMLDHQDXWYYNLCRYJBLPSXCXYWLSPRRJWXHQYPHTYDNXHHMMYWYTZCSQMTSSCCDALWZTCPQPYJLLQZYJSWXMZZMMYLMXCLMXCZMXMZSQTZPPQQBLPGXQZHFLJJHYTJSRXWZXSCCDLXTYJDCQJXSLQYCLZXLZZXMXQRJMHRHZJBHMFLJLMLCLQNLDXZLLLPYPSYJYSXCQQDCMQJZZXHNPNXZMEKMXHYKYQLXSXTXJYYHWDCWDZHQYYBGYBCYSCFGPSJNZDYZZJZXRZRQJJYMCANYRJTLDPPYZBSTJKXXZYPFDWFGZZRPYMTNGXZQBYXNBUFNQKRJQZMJEGRZGYCLKXZDSKKNSXKCLJSPJYYZLQQJYBZSSQLLLKJXTBKTYLCCDDBLSPPFYLGYDTZJYQGGKQTTFZXBDKTYYHYBBFYTYYBCLPDYTGDHRYRNJSPTCSNYJQHKLLLZSLYDXXWBCJQSPXBPJZJCJDZFFXXBRMLAZHCSNDLBJDSZBLPRZTSWSBXBCLLXXLZDJZSJPYLYXXYFTFFFBHJJXGBYXJPMMMPSSJZJMTLYZJXSWXTYLEDQPJMYGQZJGDJLQJWJQLLSJGJGYGMSCLJJXDTYGJQJQJCJZCJGDZZSXQGSJGGCXHQXSNQLZZBXHSGZXCXYLJXYXYYDFQQJHJFXDHCTXJYRXYSQTJXYEFYYSSYYJXNCYZXFXMSYSZXYYSCHSHXZZZGZZZGFJDLTYLNPZGYJYZYYQZPBXQBDZTZCZYXXYHHSQXSHDHGQHJHGYWSZTMZMLHYXGEBTYLZKQWYTJZRCLEKYSTDBCYKQQSAYXCJXWWGSBHJYZYDHCSJKQCXSWXFLTYNYZPZCCZJQTZWJQDZZZQZLJJXLSBHPYXXPSXSHHEZTXFPTLQYZZXHYTXNCFZYYHXGNXMYWXTZSJPTHHGYMXMXQZXTSBCZYJYXXTYYZYPCQLMMSZMJZZLLZXGXZAAJZYXJMZXWDXZSXZDZXLEYJJZQBHZWZZZQTZPSXZTDSXJJJZNYAZPHXYYSRNQDTHZHYYKYJHDZXZLSWCLYBZYECWCYCRYLCXNHZYDZYDYJDFRJJHTRSQTXYXJRJHOJYNXELXSFSFJZGHPZSXZSZDZCQZBYYKLSGSJHCZSHDGQGXYZGXCHXZJWYQWGYHKSSEQZZNDZFKWYSSTCLZSTSYMCDHJXXYWEYXCZAYDMPXMDSXYBSQMJMZJMTZQLPJYQZCGQHXJHHLXXHLHDLDJQCLDWBSXFZZYYSCHTYTYYBHECXHYKGJPXHHYZJFXHWHBDZFYZBCAPNPGNYDMSXHMMMMAMYNBYJTMPXYYMCTHJBZYFCGTYHWPHFTWZZEZSBZEGPFMTSKFTYCMHFLLHGPZJXZJGZJYXZSBBQSCZZLZCCSTPGXMJSFTCCZJZDJXCYBZLFCJSYZFGSZLYBCWZZBYZDZYPSWYJZXZBDSYUXLZZBZFYGCZXBZHZFTPBGZGEJBSTGKDMFHYZZJHZLLZZGJQZLSFDJSSCBZGPDLFZFZSZYZYZSYGCXSNXXCHCZXTZZLJFZGQSQYXZJQDCCZTQCDXZJYQJQCHXZTDLGSCXZSYQJQTZWLQDQZTQCHQQJZYEZZZPBWKDJFCJPZTYPQYQTTYNLMBDKTJZPQZQZZFPZSBNJLGYJDXJDZZKZGQKXDLPZJTCJDQBXDJQJSTCKNXBXZMSLYJCQMTJQWWCJQNJNLLLHJCWQTBZQYDZCZPZZDZYDDCYZZZCCJTTJFZDPRRTZTJDCQTQZDTJNPLZBCLLCTZSXKJZQZPZLBZRBTJDCXFCZDBCCJJLTQQPLDCGZDBBZJCQDCJWYNLLZYZCCDWLLXWZLXRXNTQQCZXKQLSGDFQTDDGLRLAJJTKUYMKQLLTZYTDYYCZGJWYXDXFRSKSTQTENQMRKQZHHQKDLDAZFKYPBGGPZREBZZYKZZSPEGJXGYKQZZZSLYSYYYZWFQZYLZZLZHWCHKYPQGNPGBLPLRRJYXCCSYYHSFZFYBZYYTGZXYLXCZWXXZJZBLFFLGSKHYJZEYJHLPLLLLCZGXDRZELRHGKLZZYHZLYQSZZJZQLJZFLNBHGWLCZCFJYSPYXZLZLXGCCPZBLLCYBBBBUBBCBPCRNNZCZYRBFSRLDCGQYYQXYGMQZWTZYTYJXYFWTEHZZJYWLCCNTZYJJZDEDPZDZTSYQJHDYMBJNYJZLXTSSTPHNDJXXBYXQTZQDDTJTDYYTGWSCSZQFLSHLGLBCZPHDLYZJYCKWTYTYLBNYTSDSYCCTYSZYYEBHEXHQDTWNYGYCLXTSZYSTQMYGZAZCCSZZDSLZCLZRQXYYELJSBYMXSXZTEMBBLLYYLLYTDQYSHYMRQWKFKBFXNXSBYCHXBWJYHTQBPBSBWDZYLKGZSKYHXQZJXHXJXGNLJKZLYYCDXLFYFGHLJGJYBXQLYBXQPQGZTZPLNCYPXDJYQYDYMRBESJYYHKXXSTMXRCZZYWXYQYBMCLLYZHQYZWQXDBXBZWZMSLPDMYSKFMZKLZCYQYCZLQXFZZYDQZPZYGYJYZMZXDZFYFYTTQTZHGSPCZMLCCYTZXJCYTJMKSLPZHYSNZLLYTPZCTZZCKTXDHXXTQCYFKSMQCCYYAZHTJPCYLZLYJBJXTPNYLJYYNRXSYLMMNXJSMYBCSYSYLZYLXJJQYLDZLPQBFZZBLFNDXQKCZFYWHGQMRDSXYCYTXNQQJZYYPFZXDYZFPRXEJDGYQBXRCNFYYQPGHYJDYZXGRHTKYLNWDZNTSMPKLBTHBPYSZBZTJZSZZJTYYXZPHSSZZBZCZPTQFZMYFLYPYBBJQXZMXXDJMTSYSKKBJZXHJCKLPSMKYJZCXTMLJYXRZZQSLXXQPYZXMKYXXXJCLJPRMYYGADYSKQLSNDHYZKQXZYZTCGHZTLMLWZYBWSYCTBHJHJFCWZTXWYTKZLXQSHLYJZJXTMPLPYCGLTBZZTLZJCYJGDTCLKLPLLQPJMZPAPXYZLKKTKDZCZZBNZDYDYQZJYJGMCTXLTGXSZLMLHBGLKFWNWZHDXUHLFMKYSLGXDTWWFRJEJZTZHYDXYKSHWFZCQSHKTMQQHTZHYMJDJSKHXZJZBZZXYMPAGQMSTPXLSKLZYNWRTSQLSZBPSPSGZWYHTLKSSSWHZZLYYTNXJGMJSZSUFWNLSOZTXGXLSAMMLBWLDSZYLAKQCQCTMYCFJBSLXCLZZCLXXKSBZQCLHJPSQPLSXXCKSLNHPSFQQYTXYJZLQLDXZQJZDYYDJNZPTUZDSKJFSLJHYLZSQZLBTXYDGTQFDBYAZXDZHZJNHHQBYKNXJJQCZMLLJZKSPLDYCLBBLXKLELXJLBQYCXJXGCNLCQPLZLZYJTZLJGYZDZPLTQCSXFDMNYCXGBTJDCZNBGBQYQJWGKFHTNPYQZQGBKPBBYZMTJDYTBLSQMPSXTBNPDXKLEMYYCJYNZCTLDYKZZXDDXHQSHDGMZSJYCCTAYRZLPYLTLKXSLZCGGEXCLFXLKJRTLQJAQZNCMBYDKKCXGLCZJZXJHPTDJJMZQYKQSECQZDSHHADMLZFMMZBGNTJNNLGBYJBRBTMLBYJDZXLCJLPLDLPCQDHLXZLYCBLCXZZJADJLNZMMSSSMYBHBSQKBHRSXXJMXSDZNZPXLGBRHWGGFCXGMSKLLTSJYYCQLTSKYWYYHYWXBXQYWPYWYKQLSQPTNTKHQCWDQKTWPXXHCPTHTWUMSSYHBWCRWXHJMKMZNGWTMLKFGHKJYLSYYCXWHYECLQHKQHTTQKHFZLDXQWYZYYDESBPKYRZPJFYYZJCEQDZZDLATZBBFJLLCXDLMJSSXEGYGSJQXCWBXSSZPDYZCXDNYXPPZYDLYJCZPLTXLSXYZYRXCYYYDYLWWNZSAHJSYQYHGYWWAXTJZDAXYSRLTDPSSYYFNEJDXYZHLXLLLZQZSJNYQYQQXYJGHZGZCYJCHZLYCDSHWSHJZYJXCLLNXZJJYYXNFXMWFPYLCYLLABWDDHWDXJMCXZTZPMLQZHSFHZYNZTLLDYWLSLXHYMMYLMBWWKYXYADTXYLLDJPYBPWUXJMWMLLSAFDLLYFLBHHHBQQLTZJCQJLDJTFFKMMMBYTHYGDCQRDDWRQJXNBYSNWZDBYYTBJHPYBYTTJXAAHGQDQTMYSTQXKBTZPKJLZRBEQQSSMJJBDJOTGTBXPGBKTLHQXJJJCTHXQDWJLWRFWQGWSHCKRYSWGFTGYGBXSDWDWRFHWYTJJXXXJYZYSLPYYYPAYXHYDQKXSHXYXGSKQHYWFDDDPPLCJLQQEEWXKSYYKDYPLTJTHKJLTCYYHHJTTPLTZZCDLTHQKZXQYSTEEYWYYZYXXYYSTTJKLLPZMCYHQGXYHSRMBXPLLNQYDQHXSXXWGDQBSHYLLPJJJTHYJKYPPTHYYKTYEZYENMDSHLCRPQFDGFXZPSFTLJXXJBSWYYSKSFLXLPPLBBBLBSFXFYZBSJSSYLPBBFFFFSSCJDSTZSXZRYYSYFFSYZYZBJTBCTSBSDHRTJJBYTCXYJEYLXCBNEBJDSYXYKGSJZBXBYTFZWGENYHHTHZHHXFWGCSTBGXKLSXYWMTMBYXJSTZSCDYQRCYTWXZFHMYMCXLZNSDJTTTXRYCFYJSBSDYERXJLJXBBDEYNJGHXGCKGSCYMBLXJMSZNSKGXFBNBPTHFJAAFXYXFPXMYPQDTZCXZZPXRSYWZDLYBBKTYQPQJPZYPZJZNJPZJLZZFYSBTTSLMPTZRTDXQSJEHBZYLZDHLJSQMLHTXTJECXSLZZSPKTLZKQQYFSYGYWPCPQFHQHYTQXZKRSGTTSQCZLPTXCDYYZXSQZSLXLZMYCPCQBZYXHBSXLZDLTCDXTYLZJYYZPZYZLTXJSJXHLPMYTXCQRBLZSSFJZZTNJYTXMYJHLHPPLCYXQJQQKZZSCPZKSWALQSBLCCZJSXGWWWYGYKTJBBZTDKHXHKGTGPBKQYSLPXPJCKBMLLXDZSTBKLGGQKQLSBKKTFXRMDKBFTPZFRTBBRFERQGXYJPZSSTLBZTPSZQZSJDHLJQLZBPMSMMSXLQQNHKNBLRDDNXXDHDDJCYYGYLXGZLXSYGMQQGKHBPMXYXLYTQWLWGCPBMQXCYZYDRJBHTDJYHQSHTMJSBYPLWHLZFFNYPMHXXHPLTBQPFBJWQDBYGPNZTPFZJGSDDTQSHZEAWZZYLLTYYBWJKXXGHLFKXDJTMSZSQYNZGGSWQSPHTLSSKMCLZXYSZQZXNCJDQGZDLFNYKLJCJLLZLMZZNHYDSSHTHZZLZZBBHQZWWYCRZHLYQQJBEYFXXXWHSRXWQHWPSLMSSKZTTYGYQQWRSLALHMJTQJSMXQBJJZJXZYZKXBYQXBJXSHZTSFJLXMXZXFGHKZSZGGYLCLSARJYHSLLLMZXELGLXYDJYTLFBHBPNLYZFBBHPTGJKWETZHKJJXZXXGLLJLSTGSHJJYQLQZFKCGNNDJSSZFDBCTWWSEQFHQJBSAQTGYPQLBXBMMYWXGSLZHGLZGQYFLZBYFZJFRYSFMBYZHQGFWZSYFYJJPHZBYYZFFWODGRLMFTWLBZGYCQXCDJYGZYYYYTYTYDWEGAZYHXJLZYYHLRMGRXXZCLHNELJJTJTPWJYBJJBXJJTJTEEKHWSLJPLPSFYZPQQBDLQJJTYYQLYZKDKSQJYYQZLDQTGJQYZJSUCMRYQTHTEJMFCTYHYPKMHYZWJDQFHYYXWSHCTXRLJHQXHCCYYYJLTKTTYTMXGTCJTZAYYOCZLYLBSZYWJYTSJYHBYSHFJLYGJXXTMZYYLTXXYPZLXYJZYZYYPNHMYMDYYLBLHLSYYQQLLNJJYMSOYQBZGDLYXYLCQYXTSZEGXHZGLHWBLJHEYXTWQMAKBPQCGYSHHEGQCMWYYWLJYJHYYZLLJJYLHZYHMGSLJLJXCJJYCLYCJPCPZJZJMMYLCQLNQLJQJSXYJMLSZLJQLYCMMHCFMMFPQQMFYLQMCFFQMMMMHMZNFHHJGTTHHKHSLNCHHYQDXTMMQDCYZYXYQMYQYLTDCYYYZAZZCYMZYDLZFFFMMYCQZWZZMABTBYZTDMNZZGGDFTYPCGQYTTSSFFWFDTZQSSYSTWXJHXYTSXXYLBYQHWWKXHZXWZNNZZJZJJQJCCCHYYXBZXZCYZTLLCQXYNJYCYYCYNZZQYYYEWYCZDCJYCCHYJLBTZYYCQWMPWPYMLGKDLDLGKQQBGYCHJXY\";\n\n/***/ }),\n\n/***/ 137:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 14:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _moment=__webpack_require__(6);var _moment2=_interopRequireDefault(_moment);var _utils=__webpack_require__(4);var _fileTag=__webpack_require__(24);var _fileTag2=_interopRequireDefault(_fileTag);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var Dirent=function(){function Dirent(json){_classCallCheck(this,Dirent);this.id=json.id||'0000000000000000';this.name=json.name;this.type=json.type;this.mtime=json.mtime;this.mtime_relative=_moment2.default.unix(json.mtime).fromNow();this.permission=json.permission||'rw';this.isSelected=false;// is check or not\nthis.starred=json.starred||false;if(json.type==='file'){this.size=_utils.Utils.bytesToSize(json.size);this.is_locked=json.is_locked||false;this.lock_time=json.lock_time||'';this.lock_owner=json.lock_owner||null;this.lock_owner_name=json.lock_owner_name||null;this.locked_by_me=json.locked_by_me||false;this.modifier_name=json.modifier_name||'';this.modifier_email=json.modifier_email||'';this.modifier_contact_email=json.modifier_contact_email||'';var file_tags=[];if(json.file_tags){file_tags=json.file_tags.map(function(item){return new _fileTag2.default(item);});}this.file_tags=file_tags;if(json.encoded_thumbnail_src){this.encoded_thumbnail_src=json.encoded_thumbnail_src;}}}_createClass(Dirent,[{key:'clone',value:function clone(){return new Dirent(this);}},{key:'isDir',value:function isDir(){return this.type!=='file';}}]);return Dirent;}();exports.default=Dirent;\n\n/***/ }),\n\n/***/ 15:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(8);var _reactDom2=_interopRequireDefault(_reactDom);var _toastManager=__webpack_require__(16);var _toastManager2=_interopRequireDefault(_toastManager);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var isBrowser=typeof window!=='undefined'&&typeof window.document!=='undefined';/**\n * The Toaster manages the interactionsb between\n * the ToasterManger and the toast API.\n */var Toaster=function Toaster(){var _this=this;_classCallCheck(this,Toaster);this._bindNotify=function(handler){_this.notifyHandler=handler;};this._bindGetToasts=function(handler){_this.getToastsHandler=handler;};this._bindCloseAll=function(handler){_this.closeAllHandler=handler;};this.getToasts=function(){return _this.getToastsHandler();};this.closeAll=function(){return _this.closeAllHandler();};this.notify=function(title){var settings=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return _this.notifyHandler(title,_extends({},settings,{intent:'none'}));};this.success=function(title){var settings=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return _this.notifyHandler(title,_extends({},settings,{intent:'success'}));};this.warning=function(title){var settings=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return _this.notifyHandler(title,_extends({},settings,{intent:'warning'}));};this.danger=function(title){var settings=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return _this.notifyHandler(title,_extends({},settings,{intent:'danger'}));};if(!isBrowser)return;var container=document.createElement('div');container.setAttribute('data-evergreen-toaster-container','');document.body.appendChild(container);_reactDom2.default.render(_react2.default.createElement(_toastManager2.default,{bindNotify:this._bindNotify,bindGetToasts:this._bindGetToasts,bindCloseAll:this._bindCloseAll}),container);};exports.default=Toaster;\n\n/***/ }),\n\n/***/ 156:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 159:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _reactstrap=__webpack_require__(5);var _constants=__webpack_require__(2);var _seafileApi=__webpack_require__(3);var _utils=__webpack_require__(4);var _fileChooser=__webpack_require__(30);var _fileChooser2=_interopRequireDefault(_fileChooser);__webpack_require__(98);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={repoID:_propTypes2.default.string.isRequired,filePath:_propTypes2.default.string.isRequired,toggleCancel:_propTypes2.default.func.isRequired,onRelatedFileChange:_propTypes2.default.func.isRequired,dirent:_propTypes2.default.object.isRequired,onClose:_propTypes2.default.func};var AddRelatedFileDialog=function(_React$Component){_inherits(AddRelatedFileDialog,_React$Component);function AddRelatedFileDialog(props){_classCallCheck(this,AddRelatedFileDialog);var _this=_possibleConstructorReturn(this,(AddRelatedFileDialog.__proto__||Object.getPrototypeOf(AddRelatedFileDialog)).call(this,props));_this.handleSubmit=function(){_this.onAddRelatedFile();};_this.onAddRelatedFile=function(){var _this$state=_this.state,repo=_this$state.repo,selectedPath=_this$state.selectedPath;var oRepoID=_this.props.repoID;var rRepoID=repo.repo_id;var oFilePath=_this.props.filePath;var rFilePath=selectedPath;if(oRepoID===rRepoID&&oFilePath===rFilePath){var message=(0,_constants.gettext)('Can not select self as a related file.');_this.setState({errMessage:message});return;}_seafileApi.seafileAPI.addRelatedFile(oRepoID,rRepoID,oFilePath,rFilePath).then(function(res){_this.props.onRelatedFileChange();_this.toggle();}).catch(function(error){if(error.response){_this.setState({errMessage:error.response.data.error_msg});}});};_this.toggle=function(){_this.props.toggleCancel();};_this.onDirentItemClick=function(repo,selectedPath,dirent){if(dirent.type==='file'){_this.setState({repo:repo,selectedPath:selectedPath});}else{_this.setState({repo:null,selectedPath:''});}};_this.onRepoItemClick=function(repo){_this.setState({repo:null,selectedPath:''});};_this.state={repo:null,selectedPath:'',isShowFile:true,errMessage:''};return _this;}_createClass(AddRelatedFileDialog,[{key:'render',value:function render(){var subtitle=(0,_constants.gettext)('Select related file for {placeholder}');subtitle=subtitle.replace('{placeholder}','<span class=\"op-target\">'+_utils.Utils.HTMLescape(this.props.dirent.name)+'</span>');return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_reactstrap.ModalHeader,{toggle:this.props.onClose},_react2.default.createElement('span',{className:'tag-dialog-back fas fa-sm fa-arrow-left',onClick:this.toggle,'aria-label':(0,_constants.gettext)('Back')}),(0,_constants.gettext)('Select File')),_react2.default.createElement(_reactstrap.ModalBody,null,_react2.default.createElement('div',{className:'related-file-subtitle',dangerouslySetInnerHTML:{__html:subtitle}}),_react2.default.createElement(_fileChooser2.default,{isShowFile:this.state.isShowFile,repoID:this.props.repoID,onDirentItemClick:this.onDirentItemClick,onRepoItemClick:this.onRepoItemClick,mode:'current_repo_and_other_repos'}),this.state.errMessage&&_react2.default.createElement(_reactstrap.Alert,{color:'danger'},this.state.errMessage)),_react2.default.createElement(_reactstrap.ModalFooter,null,_react2.default.createElement(_reactstrap.Button,{color:'secondary',onClick:this.toggle},(0,_constants.gettext)('Cancel')),this.state.selectedPath?_react2.default.createElement(_reactstrap.Button,{color:'primary',onClick:this.handleSubmit},(0,_constants.gettext)('Submit')):_react2.default.createElement(_reactstrap.Button,{color:'primary',disabled:true},(0,_constants.gettext)('Submit'))));}}]);return AddRelatedFileDialog;}(_react2.default.Component);AddRelatedFileDialog.propTypes=propTypes;exports.default=AddRelatedFileDialog;\n\n/***/ }),\n\n/***/ 16:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _glamor=__webpack_require__(9);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _toast=__webpack_require__(17);var _toast2=_interopRequireDefault(_toast);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var wrapperClass=(0,_glamor.css)({maxWidth:560,margin:'0 auto',top:0,left:0,right:0,position:'fixed',zIndex:999999});var hasCustomId=function hasCustomId(settings){return Object.hasOwnProperty.call(settings,'id');};var ToastManager=function(_React$PureComponent){_inherits(ToastManager,_React$PureComponent);function ToastManager(props,context){_classCallCheck(this,ToastManager);var _this=_possibleConstructorReturn(this,(ToastManager.__proto__||Object.getPrototypeOf(ToastManager)).call(this,props,context));_this.getToasts=function(){return _this.state.toasts;};_this.closeAll=function(){_this.getToasts().forEach(function(toast){return toast.close();});};_this.notify=function(title,settings){// If there's a custom toast ID passed, close existing toasts with the same custom ID\nif(hasCustomId(settings)){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=_this.state.toasts[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var toast=_step.value;// Since unique ID is still appended to a custom ID, skip the unique ID and check only prefix\nif(String(toast.id).startsWith(settings.id)){_this.closeToast(toast.id);}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}}var instance=_this.createToastInstance(title,settings);_this.setState(function(previousState){return{toasts:[instance].concat(_toConsumableArray(previousState.toasts))};});return instance;};_this.createToastInstance=function(title,settings){var uniqueId=++ToastManager.idCounter;var id=hasCustomId(settings)?settings.id+'-'+uniqueId:uniqueId;return{id:id,title:title,description:settings.description,hasCloseButton:settings.hasCloseButton||true,duration:settings.duration||2,close:function close(){return _this.closeToast(id);},intent:settings.intent};};_this.closeToast=function(id){_this.setState(function(previousState){return{toasts:previousState.toasts.map(function(toast){if(toast.id===id){return _extends({},toast,{isShown:false});}return toast;})};});};_this.removeToast=function(id){_this.setState(function(previousState){return{toasts:previousState.toasts.filter(function(toast){return toast.id!==id;})};});};props.bindNotify(_this.notify);props.bindGetToasts(_this.getToasts);props.bindCloseAll(_this.closeAll);_this.state={toasts:[]};return _this;}/**\n   * This will set isShown on the Toast which will close the toast.\n   * It won't remove the toast until onExited triggers onRemove.\n   */_createClass(ToastManager,[{key:'render',value:function render(){var _this2=this;return _react2.default.createElement('span',{className:wrapperClass},this.state.toasts.map(function(_ref){var id=_ref.id,description=_ref.description,props=_objectWithoutProperties(_ref,['id','description']);return _react2.default.createElement(_toast2.default,_extends({key:id,onRemove:function onRemove(){return _this2.removeToast(id);}},props),description);}));}}]);return ToastManager;}(_react2.default.PureComponent);ToastManager.propTypes={/**\n     * Function called with the `this.notify` function.\n     */bindNotify:_propTypes2.default.func.isRequired,/**\n     * Function called with the `this.getToasts` function.\n     */bindGetToasts:_propTypes2.default.func.isRequired,/**\n     * Function called with the `this.closeAll` function.\n     */bindCloseAll:_propTypes2.default.func.isRequired};ToastManager.idCounter=0;exports.default=ToastManager;\n\n/***/ }),\n\n/***/ 160:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _reactstrap=__webpack_require__(5);var _dirent=__webpack_require__(14);var _dirent2=_interopRequireDefault(_dirent);var _constants=__webpack_require__(2);var _utils=__webpack_require__(4);var _seafileApi=__webpack_require__(3);__webpack_require__(161);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={relatedFiles:_propTypes2.default.array.isRequired,repoID:_propTypes2.default.string.isRequired,filePath:_propTypes2.default.string.isRequired,toggleCancel:_propTypes2.default.func.isRequired,addRelatedFileToggle:_propTypes2.default.func.isRequired,onRelatedFileChange:_propTypes2.default.func.isRequired};var ListRelatedFileDialog=function(_React$Component){_inherits(ListRelatedFileDialog,_React$Component);function ListRelatedFileDialog(props){_classCallCheck(this,ListRelatedFileDialog);var _this=_possibleConstructorReturn(this,(ListRelatedFileDialog.__proto__||Object.getPrototypeOf(ListRelatedFileDialog)).call(this,props));_this.onDeleteRelatedFile=function(item){var filePath=_this.props.filePath;var repoID=_this.props.repoID;var relatedID=item.related_id;_seafileApi.seafileAPI.deleteRelatedFile(repoID,filePath,relatedID).then(function(res){_this.props.onRelatedFileChange();});};_this.toggle=function(){_this.props.toggleCancel();};_this.getDirentList=function(relatedFiles){if(relatedFiles.length===0){_this.setState({direntList:[]});return;}var direntList=[];relatedFiles.map(function(item){_seafileApi.seafileAPI.getFileInfo(item.repo_id,item.path).then(function(res){var dirent=new _dirent2.default(res.data);dirent['repo_name']=item.repo_name;dirent['related_id']=item.related_id;dirent['link']=_constants.siteRoot+'lib/'+item.repo_id+'/file'+_utils.Utils.encodePath(item.path);direntList.push(dirent);_this.setState({direntList:direntList});});});};_this.state={direntList:[]};return _this;}_createClass(ListRelatedFileDialog,[{key:'componentWillMount',value:function componentWillMount(){this.getDirentList(this.props.relatedFiles);}},{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){if(nextProps.relatedFiles.length!==this.props.relatedFiles.length){this.getDirentList(nextProps.relatedFiles);}}},{key:'render',value:function render(){var _this2=this;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_reactstrap.ModalHeader,{toggle:this.toggle},(0,_constants.gettext)('Related Files')),_react2.default.createElement(_reactstrap.ModalBody,{className:this.state.direntList.length>0?'list-related-file-body':''},_react2.default.createElement(_reactstrap.Table,{hover:true,size:'sm',className:'list-related-file-table'},_react2.default.createElement('thead',null,_react2.default.createElement('tr',null,_react2.default.createElement('th',{width:'40%'},(0,_constants.gettext)('Name')),_react2.default.createElement('th',{width:'20%'},(0,_constants.gettext)('Library Name')),_react2.default.createElement('th',{width:'13%'},(0,_constants.gettext)('Size')),_react2.default.createElement('th',{width:'20%'},(0,_constants.gettext)('Last Update')),_react2.default.createElement('th',{width:'5%'}),_react2.default.createElement('th',{width:'2%'}))),_react2.default.createElement('tbody',null,this.state.direntList.map(function(relatedFile,index){return _react2.default.createElement(_react2.default.Fragment,{key:index},_react2.default.createElement(RelatedFile,{relatedFile:relatedFile,onDeleteRelatedFile:_this2.onDeleteRelatedFile}));}))),_react2.default.createElement('a',{href:'#',className:'add-related-file-link',onClick:this.props.addRelatedFileToggle},(0,_constants.gettext)('Add File'))),_react2.default.createElement(_reactstrap.ModalFooter,null,_react2.default.createElement(_reactstrap.Button,{color:'secondary',onClick:this.toggle},(0,_constants.gettext)('Close'))));}}]);return ListRelatedFileDialog;}(_react2.default.Component);ListRelatedFileDialog.propTypes=propTypes;var RelatedFilePropTypes={relatedFile:_propTypes2.default.object,onDeleteRelatedFile:_propTypes2.default.func.isRequired};var RelatedFile=function(_React$Component2){_inherits(RelatedFile,_React$Component2);function RelatedFile(props){_classCallCheck(this,RelatedFile);var _this3=_possibleConstructorReturn(this,(RelatedFile.__proto__||Object.getPrototypeOf(RelatedFile)).call(this,props));_this3.onMouseEnter=function(){_this3.setState({active:true});};_this3.onMouseLeave=function(){_this3.setState({active:false});};_this3.state={active:false};return _this3;}_createClass(RelatedFile,[{key:'render',value:function render(){var className=this.state.active?'action-icon sf2-icon-x3':'action-icon vh sf2-icon-x3';var relatedFile=this.props.relatedFile;return _react2.default.createElement('tr',{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},_react2.default.createElement('td',null,_react2.default.createElement('a',{href:relatedFile.link,target:'_blank'},relatedFile.name)),_react2.default.createElement('td',null,relatedFile.repo_name),_react2.default.createElement('td',null,relatedFile.size),_react2.default.createElement('td',null,relatedFile.mtime_relative),_react2.default.createElement('td',null,_react2.default.createElement('i',{className:className,onClick:this.props.onDeleteRelatedFile.bind(this,relatedFile)})),_react2.default.createElement('td',null));}}]);return RelatedFile;}(_react2.default.Component);RelatedFile.propTypes=RelatedFilePropTypes;exports.default=ListRelatedFileDialog;\n\n/***/ }),\n\n/***/ 161:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 17:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _glamor=__webpack_require__(9);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _Transition=__webpack_require__(36);var _Transition2=_interopRequireDefault(_Transition);var _alert=__webpack_require__(18);var _alert2=_interopRequireDefault(_alert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var animationEasing={deceleration:'cubic-bezier(0.0, 0.0, 0.2, 1)',acceleration:'cubic-bezier(0.4, 0.0, 1, 1)',spring:'cubic-bezier(0.175, 0.885, 0.320, 1.175)'};var ANIMATION_DURATION=240;var openAnimation=_glamor.css.keyframes('openAnimation',{from:{opacity:0,transform:'translateY(-120%)'},to:{transform:'translateY(0)'}});var closeAnimation=_glamor.css.keyframes('closeAnimation',{from:{transform:'scale(1)',opacity:1},to:{transform:'scale(0.9)',opacity:0}});var animationStyles=(0,_glamor.css)({display:'flex',flexDirection:'column',alignItems:'center',height:0,transition:'all '+ANIMATION_DURATION+'ms '+animationEasing.deceleration,'&[data-state=\"entering\"], &[data-state=\"entered\"]':{animation:openAnimation+' '+ANIMATION_DURATION+'ms '+animationEasing.spring+' both'},'&[data-state=\"exiting\"]':{animation:closeAnimation+' 120ms '+animationEasing.acceleration+' both'}});var Toast=function(_React$PureComponent){_inherits(Toast,_React$PureComponent);function Toast(){var _ref;var _temp,_this,_ret;_classCallCheck(this,Toast);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=Toast.__proto__||Object.getPrototypeOf(Toast)).call.apply(_ref,[this].concat(args))),_this),_this.state={isShown:true,height:0},_this.close=function(){_this.clearCloseTimer();_this.setState({isShown:false});},_this.startCloseTimer=function(){if(_this.props.duration){_this.closeTimer=setTimeout(function(){_this.close();},_this.props.duration*1000);}},_this.clearCloseTimer=function(){if(_this.closeTimer){clearTimeout(_this.closeTimer);_this.closeTimer=null;}},_this.handleMouseEnter=function(){_this.clearCloseTimer();},_this.handleMouseLeave=function(){_this.startCloseTimer();},_this.onRef=function(ref){if(ref===null)return;var _ref$getBoundingClien=ref.getBoundingClientRect(),height=_ref$getBoundingClien.height;_this.setState({height:height});},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(Toast,[{key:'componentDidUpdate',value:function componentDidUpdate(prevProps){if(prevProps.isShown!==this.props.isShown){// eslint-disable-next-line react/no-did-update-set-state\nthis.setState({isShown:this.props.isShown});}}},{key:'componentDidMount',value:function componentDidMount(){this.startCloseTimer();}},{key:'componentWillUnmount',value:function componentWillUnmount(){this.clearCloseTimer();}},{key:'render',value:function render(){var _this2=this;return _react2.default.createElement(_Transition2.default,{appear:true,unmountOnExit:true,timeout:ANIMATION_DURATION,'in':this.state.isShown,onExited:this.props.onRemove},function(state){return _react2.default.createElement('div',{'data-state':state,className:animationStyles,onMouseEnter:_this2.handleMouseEnter,onMouseLeave:_this2.handleMouseLeave,style:{height:_this2.state.height,zIndex:_this2.props.zIndex,marginBottom:_this2.state.isShown?0:-_this2.state.height}},_react2.default.createElement('div',{ref:_this2.onRef,style:{padding:8}},_react2.default.createElement(_alert2.default,{intent:_this2.props.intent,title:_this2.props.title,children:_this2.props.children,isRemoveable:_this2.props.hasCloseButton,onRemove:function onRemove(){return _this2.close();}})));});}}]);return Toast;}(_react2.default.PureComponent);Toast.propTypes={/**\n     * The z-index of the toast.\n     */zIndex:_propTypes2.default.number,/**\n     * Duration of the toast.\n     */duration:_propTypes2.default.number,/**\n     * Function called when the toast is all the way closed.\n     */onRemove:_propTypes2.default.func,/**\n     * The type of the alert.\n     */intent:_propTypes2.default.oneOf(['none','success','warning','danger']).isRequired,/**\n     * The title of the alert.\n     */title:_propTypes2.default.node,/**\n     * Description of the alert.\n     */children:_propTypes2.default.node,/**\n     * When true, show a close icon button inside of the toast.\n     */hasCloseButton:_propTypes2.default.bool,/**\n     * When false, will close the Toast and call onRemove when finished.\n     */isShown:_propTypes2.default.bool};Toast.defaultProps={intent:'none'};exports.default=Toast;\n\n/***/ }),\n\n/***/ 18:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _glamor=__webpack_require__(9);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var Alert=function(_React$PureComponent){_inherits(Alert,_React$PureComponent);function Alert(props){_classCallCheck(this,Alert);var _this=_possibleConstructorReturn(this,(Alert.__proto__||Object.getPrototypeOf(Alert)).call(this,props));_this.containerStyle=(0,_glamor.css)({borderRadius:'3px',backgroundColor:'#fff',padding:'10px 16px',display:'flex',boxSizing:'border-box',boxShadow:'rgba(67, 90, 111, 0.3) 0px 0px 1px, rgba(67, 90, 111, 0.47) 0px 8px 10px -4px',justifyContent:'space-between',flexDirection:'row'});_this.containerBorderSuccess=(0,_glamor.css)({borderLeft:'3px solid rgb(71, 184, 129)'});_this.containerBorderWarn=(0,_glamor.css)({borderLeft:'3px solid rgb(217, 130, 43)'});_this.containerBorderDanger=(0,_glamor.css)({borderLeft:'3px solid rgb(236, 76, 71)'});_this.containerBorderNotify=(0,_glamor.css)({borderLeft:'3px solid rgb(16, 112, 202)'});_this.toastTextTitle=(0,_glamor.css)({fontWeight:'600',fontSize:'14px',color:'#435a6f',margin:'0'});_this.toastTextChild=(0,_glamor.css)({fontSize:'14px',color:'#999',margin:'0'});_this.toastClose=(0,_glamor.css)({marginLeft:'15px',height:'24px',width:'24px',lineHeight:'22px',fontWeight:'700',textAlign:'center',fontSize:'20px',color:'#000',cursor:'pointer',opacity:'0.5',':hover':{opacity:1}});_this.toastIcon=(0,_glamor.css)({marginRight:'10px',width:'14px',height:'20px',lineHeight:'20px'});return _this;}_createClass(Alert,[{key:'getContainerStyle',value:function getContainerStyle(intent){switch(intent){case'success':return{borderStyle:this.containerBorderSuccess,iconColor:(0,_glamor.css)({color:'rgb(71, 184, 129)'}),iconClass:'fa fa-check-circle'};case'warning':return{borderStyle:this.containerBorderWarn,iconColor:(0,_glamor.css)({color:'rgb(217, 130, 43)'}),iconClass:'fa fa-exclamation-triangle'};case'none':return{borderStyle:this.containerBorderNotify,iconColor:(0,_glamor.css)({color:'rgb(16, 112, 202)'}),iconClass:'fa fa-exclamation-circle'};case'danger':return{borderStyle:this.containerBorderDanger,iconColor:(0,_glamor.css)({color:'rgb(236, 76, 71)'}),iconClass:'fa fa-exclamation-circle'};}}},{key:'render',value:function render(){var toastStyle=this.getContainerStyle(this.props.intent);return _react2.default.createElement('div',(0,_glamor.css)(toastStyle.borderStyle,this.containerStyle),_react2.default.createElement('div',{className:this.toastIcon},_react2.default.createElement('i',_extends({className:toastStyle.iconClass},toastStyle.iconColor))),_react2.default.createElement('div',{className:this.toastTextContainer},_react2.default.createElement('p',{className:this.toastTextTitle},this.props.title),this.props.children?_react2.default.createElement('p',{className:this.toastTextChild},this.props.children):null),_react2.default.createElement('div',{onClick:this.props.onRemove,className:this.toastClose},_react2.default.createElement('span',null,'\\xD7')));}}]);return Alert;}(_react2.default.PureComponent);exports.default=Alert;\n\n/***/ }),\n\n/***/ 19:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _utils=__webpack_require__(4);var _selectEditor=__webpack_require__(32);var _selectEditor2=_interopRequireDefault(_selectEditor);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={isTextMode:_propTypes2.default.bool.isRequired,isEditIconShow:_propTypes2.default.bool.isRequired,permissions:_propTypes2.default.array.isRequired,currentPermission:_propTypes2.default.string.isRequired,onPermissionChanged:_propTypes2.default.func.isRequired};var SharePermissionEditor=function(_React$Component){_inherits(SharePermissionEditor,_React$Component);function SharePermissionEditor(){var _ref;var _temp,_this,_ret;_classCallCheck(this,SharePermissionEditor);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=SharePermissionEditor.__proto__||Object.getPrototypeOf(SharePermissionEditor)).call.apply(_ref,[this].concat(args))),_this),_this.translatePermission=function(permission){return _utils.Utils.sharePerms(permission);},_this.translateExplanation=function(explanation){return _utils.Utils.sharePermsExplanation(explanation);},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(SharePermissionEditor,[{key:'render',value:function render(){return _react2.default.createElement(_selectEditor2.default,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.permissions,currentOption:this.props.currentPermission,onOptionChanged:this.props.onPermissionChanged,translateOption:this.translatePermission,translateExplanation:this.translateExplanation});}}]);return SharePermissionEditor;}(_react2.default.Component);SharePermissionEditor.propTypes=propTypes;exports.default=SharePermissionEditor;\n\n/***/ }),\n\n/***/ 194:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 2:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var dirPath=exports.dirPath='/';var gettext=exports.gettext=window.gettext;var siteRoot=exports.siteRoot=window.app.config.siteRoot;var loginUrl=exports.loginUrl=window.app.config.loginUrl;var avatarInfo=exports.avatarInfo=window.app.config.avatarInfo;var logoPath=exports.logoPath=window.app.config.logoPath;var mediaUrl=exports.mediaUrl=window.app.config.mediaUrl;var siteTitle=exports.siteTitle=window.app.config.siteTitle;var siteName=exports.siteName=window.app.config.siteName;var logoWidth=exports.logoWidth=window.app.config.logoWidth;var logoHeight=exports.logoHeight=window.app.config.logoHeight;var isPro=exports.isPro=window.app.config.isPro==='True';var isDocs=exports.isDocs=window.app.config.isDocs==='True';var lang=exports.lang=window.app.config.lang;var fileServerRoot=exports.fileServerRoot=window.app.config.fileServerRoot;var seafileVersion=exports.seafileVersion=window.app.config.seafileVersion;var serviceURL=exports.serviceURL=window.app.config.serviceURL;//pageOptions\nvar seafileCollabServer=exports.seafileCollabServer=window.app.pageOptions.seafileCollabServer;var name=exports.name=window.app.pageOptions.name;var contactEmail=exports.contactEmail=window.app.pageOptions.contactEmail;var username=exports.username=window.app.pageOptions.username;var canAddRepo=exports.canAddRepo=window.app.pageOptions.canAddRepo;var canGenerateShareLink=exports.canGenerateShareLink=window.app.pageOptions.canGenerateShareLink;var canGenerateUploadLink=exports.canGenerateUploadLink=window.app.pageOptions.canGenerateUploadLink?true:false;var canViewOrg=exports.canViewOrg=window.app.pageOptions.canViewOrg==='True';var fileAuditEnabled=exports.fileAuditEnabled=window.app.pageOptions.fileAuditEnabled?true:false;var enableFileComment=exports.enableFileComment=window.app.pageOptions.enableFileComment?true:false;var folderPermEnabled=exports.folderPermEnabled=window.app.pageOptions.folderPermEnabled==='True';var enableResetEncryptedRepoPassword=exports.enableResetEncryptedRepoPassword=window.app.pageOptions.enableResetEncryptedRepoPassword==='True';var isEmailConfigured=exports.isEmailConfigured=window.app.pageOptions.isEmailConfigured==='True';var enableUploadFolder=exports.enableUploadFolder=window.app.pageOptions.enableUploadFolder==='True';var enableResumableFileUpload=exports.enableResumableFileUpload=window.app.pageOptions.enableResumableFileUpload==='True';var storages=exports.storages=window.app.pageOptions.storages;// storage backends\nvar enableRepoSnapshotLabel=exports.enableRepoSnapshotLabel=window.app.pageOptions.enableRepoSnapshotLabel;var shareLinkExpireDaysMin=exports.shareLinkExpireDaysMin=window.app.pageOptions.shareLinkExpireDaysMin;var shareLinkExpireDaysMax=exports.shareLinkExpireDaysMax=window.app.pageOptions.shareLinkExpireDaysMax;var maxFileName=exports.maxFileName=window.app.pageOptions.maxFileName;var enableWiki=exports.enableWiki=window.app.pageOptions.enableWiki;var enableEncryptedLibrary=exports.enableEncryptedLibrary=window.app.pageOptions.enableEncryptedLibrary;var enableRepoHistorySetting=exports.enableRepoHistorySetting=window.app.pageOptions.enableRepoHistorySetting;var isSystemStaff=exports.isSystemStaff=window.app.pageOptions.isSystemStaff;var thumbnailSizeForOriginal=exports.thumbnailSizeForOriginal=window.app.pageOptions.thumbnailSizeForOriginal;var repoPasswordMinLength=exports.repoPasswordMinLength=window.app.pageOptions.repoPasswordMinLength;var curNoteMsg=exports.curNoteMsg=window.app.pageOptions.curNoteMsg;var curNoteID=exports.curNoteID=window.app.pageOptions.curNoteID;// wiki\nvar slug=exports.slug=window.wiki?window.wiki.config.slug:'';var repoID=exports.repoID=window.wiki?window.wiki.config.repoId:'';var initialPath=exports.initialPath=window.wiki?window.wiki.config.initial_path:'';var permission=exports.permission=window.wiki?window.wiki.config.permission==='True':'';var isDir=exports.isDir=window.wiki?window.wiki.config.isDir:'';var serviceUrl=exports.serviceUrl=window.wiki?window.wiki.config.serviceUrl:'';var isPublicWiki=exports.isPublicWiki=window.wiki?window.wiki.config.isPublicWiki==='True':'';// file history\nvar PER_PAGE=exports.PER_PAGE=25;var historyRepoID=exports.historyRepoID=window.fileHistory?window.fileHistory.pageOptions.repoID:'';var repoName=exports.repoName=window.fileHistory?window.fileHistory.pageOptions.repoName:'';var filePath=exports.filePath=window.fileHistory?window.fileHistory.pageOptions.filePath:'';var fileName=exports.fileName=window.fileHistory?window.fileHistory.pageOptions.fileName:'';// Draft review\nvar draftFilePath=exports.draftFilePath=window.draft?window.draft.config.draftFilePath:'';var draftOriginFilePath=exports.draftOriginFilePath=window.draft?window.draft.config.draftOriginFilePath:'';var draftFileName=exports.draftFileName=window.draft?window.draft.config.draftFileName:'';var draftID=exports.draftID=window.draft?window.draft.config.draftID:'';var draftRepoID=exports.draftRepoID=window.draft?window.draft.config.draftRepoID:'';var author=exports.author=window.draft?window.draft.config.author:'';var authorAvatar=exports.authorAvatar=window.draft?window.draft.config.authorAvatar:'';var originFileExists=exports.originFileExists=window.draft?window.draft.config.originFileExists:'';var draftFileExists=exports.draftFileExists=window.draft?window.draft.config.draftFileExists:'';var draftStatus=exports.draftStatus=window.draft?window.draft.config.draftStatus:'';var draftPublishVersion=exports.draftPublishVersion=window.draft?window.draft.config.draftPublishVersion:'';var originFileVersion=exports.originFileVersion=window.draft?window.draft.config.originFileVersion:'';// org admin\nvar orgID=exports.orgID=window.org?window.org.pageOptions.orgID:'';var invitationLink=exports.invitationLink=window.org?window.org.pageOptions.invitationLink:'';var orgMemberQuotaEnabled=exports.orgMemberQuotaEnabled=window.org?window.org.pageOptions.orgMemberQuotaEnabled:'';// sys admin\nvar constanceEnabled=exports.constanceEnabled=window.sysadmin?window.sysadmin.pageOptions.constance_enabled:'';var multiTenancy=exports.multiTenancy=window.sysadmin?window.sysadmin.pageOptions.multi_tenancy:'';var multiInstitution=exports.multiInstitution=window.sysadmin?window.sysadmin.pageOptions.multi_institution:'';var sysadminExtraEnabled=exports.sysadminExtraEnabled=window.sysadmin?window.sysadmin.pageOptions.sysadmin_extra_enabled:'';var enableGuestInvitation=exports.enableGuestInvitation=window.sysadmin?window.sysadmin.pageOptions.enable_guest_invitation:'';var enableTermsAndConditions=exports.enableTermsAndConditions=window.sysadmin?window.sysadmin.pageOptions.enable_terms_and_conditions:'';var isDefaultAdmin=exports.isDefaultAdmin=window.sysadmin?window.sysadmin.pageOptions.is_default_admin:'';var enableFileScan=exports.enableFileScan=window.sysadmin?window.sysadmin.pageOptions.enable_file_scan:'';var canViewSystemInfo=exports.canViewSystemInfo=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_system_info:'';var canViewStatistic=exports.canViewStatistic=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_statistic:'';var canConfigSystem=exports.canConfigSystem=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_config_system:'';var canManageLibrary=exports.canManageLibrary=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_library:'';var canManageUser=exports.canManageUser=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_user:'';var canManageGroup=exports.canManageGroup=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_group:'';var canViewUserLog=exports.canViewUserLog=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_user_log:'';var canViewAdminLog=exports.canViewAdminLog=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_admin_log:'';\n\n/***/ }),\n\n/***/ 23:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _Async=__webpack_require__(76);var _Async2=_interopRequireDefault(_Async);var _seafileApi=__webpack_require__(3);var _constants=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={placeholder:_propTypes2.default.string.isRequired,onSelectChange:_propTypes2.default.func.isRequired,isMulti:_propTypes2.default.bool.isRequired,className:_propTypes2.default.string};var NoOptionsMessage=function NoOptionsMessage(props){return _react2.default.createElement('div',_extends({},props.innerProps,{style:{margin:'6px 10px',textAlign:'center',color:'hsl(0,0%,50%)'}}),(0,_constants.gettext)('User not found'));};var UserSelect=function(_React$Component){_inherits(UserSelect,_React$Component);function UserSelect(props){_classCallCheck(this,UserSelect);var _this=_possibleConstructorReturn(this,(UserSelect.__proto__||Object.getPrototypeOf(UserSelect)).call(this,props));_this.handleSelectChange=function(option){_this.options=[];_this.props.onSelectChange(option);};_this.loadOptions=function(input,callback){var value=input.trim();if(value.length>0){_seafileApi.seafileAPI.searchUsers(value).then(function(res){_this.options=[];for(var i=0;i<res.data.users.length;i++){var item=res.data.users[i];var obj={};obj.value=item.name;obj.email=item.email;obj.label=_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement('img',{src:item.avatar_url,className:'select-module select-module-icon avatar',alt:''}),_react2.default.createElement('span',{className:'select-module select-module-name'},item.name));_this.options.push(obj);}callback(_this.options);});}};_this.clearSelect=function(){_this.refs.userSelect.select.onChange([],{action:'clear'});};_this.options=[];return _this;}_createClass(UserSelect,[{key:'render',value:function render(){return _react2.default.createElement(_Async2.default,{isClearable:true,classNamePrefix:true,components:{NoOptionsMessage:NoOptionsMessage},isMulti:this.props.isMulti,loadOptions:this.loadOptions,onChange:this.handleSelectChange,placeholder:this.props.placeholder,className:'user-select '+this.props.className,ref:'userSelect'});}}]);return UserSelect;}(_react2.default.Component);UserSelect.propTypes=propTypes;exports.default=UserSelect;\n\n/***/ }),\n\n/***/ 24:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var FileTag=function FileTag(object){_classCallCheck(this,FileTag);this.id=object.file_tag_id;this.repo_tag_id=object.repo_tag_id;this.name=object.tag_name;this.color=object.tag_color;};exports.default=FileTag;\n\n/***/ }),\n\n/***/ 25:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _reactstrap=__webpack_require__(5);var _constants=__webpack_require__(2);var _shareToUser=__webpack_require__(49);var _shareToUser2=_interopRequireDefault(_shareToUser);var _shareToGroup=__webpack_require__(50);var _shareToGroup2=_interopRequireDefault(_shareToGroup);var _generateShareLink=__webpack_require__(51);var _generateShareLink2=_interopRequireDefault(_generateShareLink);var _generateUploadLink=__webpack_require__(52);var _generateUploadLink2=_interopRequireDefault(_generateUploadLink);__webpack_require__(53);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={isGroupOwnedRepo:_propTypes2.default.bool,itemType:_propTypes2.default.string.isRequired,// there will be three choose: ['library', 'dir', 'file']\nitemName:_propTypes2.default.string.isRequired,itemPath:_propTypes2.default.string.isRequired,toggleDialog:_propTypes2.default.func.isRequired,repoID:_propTypes2.default.string.isRequired,repoEncrypted:_propTypes2.default.bool,userPerm:_propTypes2.default.string,enableDirPrivateShare:_propTypes2.default.bool};var ShareDialog=function(_React$Component){_inherits(ShareDialog,_React$Component);function ShareDialog(props){_classCallCheck(this,ShareDialog);var _this=_possibleConstructorReturn(this,(ShareDialog.__proto__||Object.getPrototypeOf(ShareDialog)).call(this,props));_this.getInitialActiveTab=function(){var _this$props=_this.props,repoEncrypted=_this$props.repoEncrypted,userPerm=_this$props.userPerm,enableDirPrivateShare=_this$props.enableDirPrivateShare;var enableShareLink=!repoEncrypted&&_constants.canGenerateShareLink;var enableUploadLink=!repoEncrypted&&_constants.canGenerateUploadLink&&userPerm=='rw';if(enableShareLink){return'shareLink';}else if(enableUploadLink){return'uploadLink';}else if(enableDirPrivateShare){return'shareToUser';}};_this.toggle=function(tab){if(_this.state.activeTab!==tab){_this.setState({activeTab:tab});}};_this.renderDirContent=function(){var activeTab=_this.state.activeTab;var _this$props2=_this.props,repoEncrypted=_this$props2.repoEncrypted,userPerm=_this$props2.userPerm,enableDirPrivateShare=_this$props2.enableDirPrivateShare;var enableShareLink=!repoEncrypted&&_constants.canGenerateShareLink;var enableUploadLink=!repoEncrypted&&_constants.canGenerateUploadLink&&userPerm=='rw';return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement('div',{className:'share-dialog-side'},_react2.default.createElement(_reactstrap.Nav,{pills:true,vertical:true},enableShareLink&&_react2.default.createElement(_reactstrap.NavItem,null,_react2.default.createElement(_reactstrap.NavLink,{className:activeTab==='shareLink'?'active':'',onClick:_this.toggle.bind(_this,'shareLink')},(0,_constants.gettext)('Share Link'))),enableUploadLink&&_react2.default.createElement(_reactstrap.NavItem,null,_react2.default.createElement(_reactstrap.NavLink,{className:activeTab==='uploadLink'?'active':'',onClick:_this.toggle.bind(_this,'uploadLink')},(0,_constants.gettext)('Upload Link'))),enableDirPrivateShare&&_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_reactstrap.NavItem,null,_react2.default.createElement(_reactstrap.NavLink,{className:activeTab==='shareToUser'?'active':'',onClick:_this.toggle.bind(_this,'shareToUser')},(0,_constants.gettext)('Share to user'))),_react2.default.createElement(_reactstrap.NavItem,null,_react2.default.createElement(_reactstrap.NavLink,{className:activeTab==='shareToGroup'?'active':'',onClick:_this.toggle.bind(_this,'shareToGroup')},(0,_constants.gettext)('Share to group')))))),_react2.default.createElement('div',{className:'share-dialog-main'},_react2.default.createElement(_reactstrap.TabContent,{activeTab:_this.state.activeTab},enableShareLink&&_react2.default.createElement(_reactstrap.TabPane,{tabId:'shareLink'},_react2.default.createElement(_generateShareLink2.default,{itemPath:_this.props.itemPath,repoID:_this.props.repoID,closeShareDialog:_this.props.toggleDialog})),enableUploadLink&&_react2.default.createElement(_reactstrap.TabPane,{tabId:'uploadLink'},_react2.default.createElement(_generateUploadLink2.default,{itemPath:_this.props.itemPath,repoID:_this.props.repoID,closeShareDialog:_this.props.toggleDialog})),enableDirPrivateShare&&_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_reactstrap.TabPane,{tabId:'shareToUser'},_react2.default.createElement(_shareToUser2.default,{itemType:_this.props.itemType,isGroupOwnedRepo:_this.props.isGroupOwnedRepo,itemPath:_this.props.itemPath,repoID:_this.props.repoID})),_react2.default.createElement(_reactstrap.TabPane,{tabId:'shareToGroup'},_react2.default.createElement(_shareToGroup2.default,{itemType:_this.props.itemType,isGroupOwnedRepo:_this.props.isGroupOwnedRepo,itemPath:_this.props.itemPath,repoID:_this.props.repoID}))))));};_this.renderFileContent=function(){return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement('div',{className:'share-dialog-side'},_react2.default.createElement(_reactstrap.Nav,{pills:true,vertical:true},_react2.default.createElement(_reactstrap.NavItem,null,_react2.default.createElement(_reactstrap.NavLink,{className:'active',onClick:function onClick(){_this.toggle.bind(_this,'shareLink');}},(0,_constants.gettext)('Share Link'))))),_react2.default.createElement('div',{className:'share-dialog-main'},_react2.default.createElement(_reactstrap.TabContent,{activeTab:_this.state.activeTab},_react2.default.createElement(_reactstrap.TabPane,{tabId:'shareLink'},_react2.default.createElement(_generateShareLink2.default,{itemPath:_this.props.itemPath,repoID:_this.props.repoID,closeShareDialog:_this.props.toggleDialog})))));};_this.state={activeTab:_this.getInitialActiveTab()};return _this;}_createClass(ShareDialog,[{key:'render',value:function render(){var _props=this.props,itemType=_props.itemType,itemName=_props.itemName,repoEncrypted=_props.repoEncrypted;var enableShareLink=!repoEncrypted&&_constants.canGenerateShareLink;return _react2.default.createElement('div',null,_react2.default.createElement(_reactstrap.Modal,{isOpen:true,style:{maxWidth:'720px'},className:'share-dialog',toggle:this.props.toggleDialog},_react2.default.createElement(_reactstrap.ModalHeader,{toggle:this.props.toggleDialog},(0,_constants.gettext)('Share'),' ',_react2.default.createElement('span',{className:'op-target',title:itemName},itemName)),_react2.default.createElement(_reactstrap.ModalBody,{className:'dialog-list-container share-dialog-content'},(itemType==='library'||itemType==='dir')&&this.renderDirContent(),itemType==='file'&&enableShareLink&&this.renderFileContent())));}}]);return ShareDialog;}(_react2.default.Component);ShareDialog.propTypes=propTypes;exports.default=ShareDialog;\n\n/***/ }),\n\n/***/ 258:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 268:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 269:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 271:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 3:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});exports.seafileAPI=undefined;var _reactCookies=__webpack_require__(22);var _reactCookies2=_interopRequireDefault(_reactCookies);var _seafileJs=__webpack_require__(35);var _constants=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var seafileAPI=new _seafileJs.SeafileAPI();var xcsrfHeaders=_reactCookies2.default.load('sfcsrftoken');seafileAPI.initForSeahubUsage({siteRoot:_constants.siteRoot,xcsrfHeaders:xcsrfHeaders});exports.seafileAPI=seafileAPI;\n\n/***/ }),\n\n/***/ 30:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _reactstrap=__webpack_require__(5);var _seafileApi=__webpack_require__(3);var _constants=__webpack_require__(2);var _utils=__webpack_require__(4);var _repoInfo=__webpack_require__(31);var _repoInfo2=_interopRequireDefault(_repoInfo);var _repoListView=__webpack_require__(42);var _repoListView2=_interopRequireDefault(_repoListView);var _loading=__webpack_require__(11);var _loading2=_interopRequireDefault(_loading);var _searchedListView=__webpack_require__(46);var _searchedListView2=_interopRequireDefault(_searchedListView);__webpack_require__(48);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={isShowFile:_propTypes2.default.bool,repoID:_propTypes2.default.string,onDirentItemClick:_propTypes2.default.func,onRepoItemClick:_propTypes2.default.func,mode:_propTypes2.default.oneOf(['current_repo_and_other_repos','only_all_repos','only_current_library'])};var FileChooser=function(_React$Component){_inherits(FileChooser,_React$Component);function FileChooser(props){_classCallCheck(this,FileChooser);var _this=_possibleConstructorReturn(this,(FileChooser.__proto__||Object.getPrototypeOf(FileChooser)).call(this,props));_this.onOtherRepoToggle=function(){if(!_this.state.hasRequest){var that=_this;_seafileApi.seafileAPI.listRepos().then(function(res){// todo optimized code\nvar repos=res.data.repos;var repoList=[];var repoIdList=[];for(var i=0;i<repos.length;i++){if(repos[i].permission!=='rw'){continue;}if(that.props.repoID&&repos[i].repo_name===that.state.currentRepoInfo.repo_name){continue;}if(repoIdList.indexOf(repos[i].repo_id)>-1){continue;}repoList.push(repos[i]);repoIdList.push(repos[i].repo_id);}repoList=_utils.Utils.sortRepos(repoList,'name','asc');_this.setState({repoList:repoList,isOtherRepoShow:!_this.state.isOtherRepoShow});});}else{_this.setState({isOtherRepoShow:!_this.state.isOtherRepoShow});}};_this.onCurrentRepoToggle=function(){return[_this.setState({isCurrentRepoShow:!_this.state.isCurrentRepoShow})];};_this.onDirentItemClick=function(repo,filePath,dirent){_this.props.onDirentItemClick(repo,filePath,dirent);_this.setState({selectedRepo:repo,selectedPath:filePath});};_this.onRepoItemClick=function(repo){if(_this.props.onRepoItemClick){_this.props.onRepoItemClick(repo);}_this.setState({selectedRepo:repo,selectedPath:''});};_this.onCloseSearching=function(){_this.setState({isSearching:false,isResultGot:false,searchInfo:'',searchResults:[]});_this.inputValue='';_this.timer=null;_this.source=null;};_this.onSearchInfoChanged=function(event){var searchInfo=event.target.value.trim();_this.setState({searchInfo:searchInfo});if(_this.inputValue===searchInfo){return false;}_this.inputValue=searchInfo;if(searchInfo.length===0){_this.setState({isSearching:false,searchResults:[]});return false;}if(!_this.state.searchResults.length&&searchInfo.length>0){_this.setState({isSearching:true,isResultGot:false});}if(_this.inputValue===''||_this.getValueLength(_this.inputValue)<3){_this.setState({isResultGot:false});return false;}var repoID=_this.props.repoID;var isShowFile=_this.props.isShowFile;var mode=_this.props.mode;var searchRepo=mode==='only_current_library'?repoID:'all';var queryData={q:searchInfo,search_repo:searchRepo,search_ftypes:'all',obj_type:isShowFile?'file':'dir'};if(_this.timer){clearTimeout(_this.timer);}_this.timer=setTimeout(_this.getSearchResult(queryData),500);};_this.getSearchResult=function(queryData){if(_this.source){_this.cancelRequest();}_this.setState({isResultGot:false});_this.source=_seafileApi.seafileAPI.getSource();_this.sendRequest(queryData,_this.source.token);};_this.sendRequest=function(queryData,cancelToken){_seafileApi.seafileAPI.searchFiles(queryData,cancelToken).then(function(res){if(!res.data.total){_this.setState({searchResults:[],isResultGot:true});_this.source=null;return;}var items=_this.formatResultItems(res.data.results);_this.setState({searchResults:items,isResultGot:true});_this.source=null;}).catch(function(res){/* eslint-disable */console.log(res);/* eslint-enable */});};_this.cancelRequest=function(){_this.source.cancel('prev request is cancelled');};_this.getValueLength=function(str){var i=0,code,len=0;for(;i<str.length;i++){code=str.charCodeAt(i);if(code==10){//solve enter problem\nlen+=2;}else if(code<0x007f){len+=1;}else if(code>=0x0080&&code<=0x07ff){len+=2;}else if(code>=0x0800&&code<=0xffff){len+=3;}}return len;};_this.formatResultItems=function(data){var items=[];var length=data.length>10?10:data.length;for(var i=0;i<length;i++){items[i]={};items[i]['index']=[i];items[i]['name']=data[i].name;items[i]['path']=data[i].fullpath;items[i]['repo_id']=data[i].repo_id;items[i]['repo_name']=data[i].repo_name;items[i]['is_dir']=data[i].is_dir;items[i]['link_content']=decodeURI(data[i].fullpath).substring(1);items[i]['content']=data[i].content_highlight;}return items;};_this.onSearchedItemClick=function(item){item['type']=item.is_dir?'dir':'file';var repo=new _repoInfo2.default(item);_this.props.onDirentItemClick(repo,item.path,item);};_this.renderSearchedView=function(){if(_this.getValueLength(_this.inputValue)<3){return'';}if(!_this.state.isResultGot){return _react2.default.createElement(_loading2.default,null);}if(_this.state.isResultGot&&_this.state.searchResults.length===0){return _react2.default.createElement('div',{className:'search-result-none text-center'},(0,_constants.gettext)('No results matching.'));}if(_this.state.isResultGot&&_this.state.searchResults.length>0){return _react2.default.createElement(_searchedListView2.default,{searchResults:_this.state.searchResults,onItemClick:_this.onSearchedItemClick});}};_this.renderRepoListView=function(){return _react2.default.createElement('div',{className:'file-chooser-container'},_this.props.mode==='current_repo_and_other_repos'&&_react2.default.createElement(_react.Fragment,null,_react2.default.createElement('div',{className:'list-view'},_react2.default.createElement('div',{className:'list-view-header'},_react2.default.createElement('span',{className:'item-toggle fa '+(_this.state.isCurrentRepoShow?'fa-caret-down':'fa-caret-right'),onClick:_this.onCurrentRepoToggle}),_react2.default.createElement('span',{className:'library'},(0,_constants.gettext)('Current Library'))),_this.state.isCurrentRepoShow&&_this.state.currentRepoInfo&&_react2.default.createElement(_repoListView2.default,{initToShowChildren:true,currentRepoInfo:_this.state.currentRepoInfo,selectedRepo:_this.state.selectedRepo,selectedPath:_this.state.selectedPath,onRepoItemClick:_this.onRepoItemClick,onDirentItemClick:_this.onDirentItemClick,isShowFile:_this.props.isShowFile})),_react2.default.createElement('div',{className:'list-view'},_react2.default.createElement('div',{className:'list-view-header'},_react2.default.createElement('span',{className:'item-toggle fa '+(_this.state.isOtherRepoShow?'fa-caret-down':'fa-caret-right'),onClick:_this.onOtherRepoToggle}),_react2.default.createElement('span',{className:'library'},(0,_constants.gettext)('Other Libraries'))),_this.state.isOtherRepoShow&&_react2.default.createElement(_repoListView2.default,{initToShowChildren:false,repoList:_this.state.repoList,selectedRepo:_this.state.selectedRepo,selectedPath:_this.state.selectedPath,onRepoItemClick:_this.onRepoItemClick,onDirentItemClick:_this.onDirentItemClick,isShowFile:_this.props.isShowFile}))),_this.props.mode==='only_current_library'&&_react2.default.createElement('div',{className:'list-view'},_react2.default.createElement('div',{className:'list-view-header'},_react2.default.createElement('span',{className:'item-toggle fa '+(_this.state.isCurrentRepoShow?'fa-caret-down':'fa-caret-right'),onClick:_this.onCurrentRepoToggle}),_react2.default.createElement('span',{className:'library'},(0,_constants.gettext)('Current Library'))),_this.state.isCurrentRepoShow&&_this.state.currentRepoInfo&&_react2.default.createElement(_repoListView2.default,{initToShowChildren:true,currentRepoInfo:_this.state.currentRepoInfo,selectedRepo:_this.state.selectedRepo,selectedPath:_this.state.selectedPath,onRepoItemClick:_this.onRepoItemClick,onDirentItemClick:_this.onDirentItemClick,isShowFile:_this.props.isShowFile})),_this.props.mode==='only_all_repos'&&_react2.default.createElement('div',{className:'file-chooser-container'},_react2.default.createElement('div',{className:'list-view'},_react2.default.createElement('div',{className:'list-view-header'},_react2.default.createElement('span',{className:'item-toggle fa fa-caret-down'}),_react2.default.createElement('span',{className:'library'},(0,_constants.gettext)('Libraries'))),_react2.default.createElement(_repoListView2.default,{initToShowChildren:false,repoList:_this.state.repoList,selectedRepo:_this.state.selectedRepo,selectedPath:_this.state.selectedPath,onRepoItemClick:_this.onRepoItemClick,onDirentItemClick:_this.onDirentItemClick,isShowFile:_this.props.isShowFile}))));};_this.state={hasRequest:false,isCurrentRepoShow:true,isOtherRepoShow:false,repoList:[],currentRepoInfo:null,selectedRepo:null,selectedPath:'',isSearching:false,isResultGot:false,searchInfo:'',searchResults:[]};_this.inputValue='';_this.timer=null;_this.source=null;return _this;}_createClass(FileChooser,[{key:'componentDidMount',value:function componentDidMount(){var _this2=this;if(this.props.repoID){// current_repo_and_other_repos, only_current_library\nvar repoID=this.props.repoID;_seafileApi.seafileAPI.getRepoInfo(repoID).then(function(res){// need to optimized\nvar repoInfo=new _repoInfo2.default(res.data);_this2.setState({currentRepoInfo:repoInfo,selectedRepo:repoInfo});_this2.props.onRepoItemClick(repoInfo);});}else{// only_all_repos\n_seafileApi.seafileAPI.listRepos().then(function(res){var repos=res.data.repos;var repoList=[];var repoIdList=[];for(var i=0;i<repos.length;i++){if(repos[i].permission!=='rw'){continue;}if(repoIdList.indexOf(repos[i].repo_id)>-1){continue;}repoList.push(repos[i]);repoIdList.push(repos[i].repo_id);}repoList=_utils.Utils.sortRepos(repoList,'name','asc');_this2.setState({repoList:repoList});});}}},{key:'render',value:function render(){var _React$createElement;if(!this.state.selectedRepo&&this.props.repoID){return'';}return _react2.default.createElement(_react.Fragment,null,_constants.isPro&&_react2.default.createElement('div',{className:'file-chooser-search-input'},_react2.default.createElement(_reactstrap.Input,(_React$createElement={className:'search-input',placeholder:(0,_constants.gettext)('Search...')},_defineProperty(_React$createElement,'className','mb-2'),_defineProperty(_React$createElement,'type','text'),_defineProperty(_React$createElement,'value',this.state.searchInfo),_defineProperty(_React$createElement,'onChange',this.onSearchInfoChanged),_React$createElement)),this.state.searchInfo.length!==0&&_react2.default.createElement('span',{className:'search-control attr-action-icon fas fa-times',onClick:this.onCloseSearching})),this.state.isSearching&&_react2.default.createElement('div',{className:'file-chooser-search-container'},this.renderSearchedView()),!this.state.isSearching&&this.renderRepoListView());}}]);return FileChooser;}(_react2.default.Component);FileChooser.propTypes=propTypes;exports.default=FileChooser;\n\n/***/ }),\n\n/***/ 31:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _utils=__webpack_require__(4);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var RepoInfo=function RepoInfo(object){_classCallCheck(this,RepoInfo);this.repo_id=object.repo_id;this.repo_name=object.repo_name;this.permission=object.permission;this.size=_utils.Utils.bytesToSize(object.size);this.file_count=object.file_count;this.owner_name=object.owner_name;this.owner_email=object.owner_email;this.owner_contact_email=object.owner_contact_email;// is repo shared admin; \n// is repo shared admin && is one of current ordinary group's admins; \n// is one of current group owned group's admins;\nthis.is_admin=object.is_admin;this.is_virtual=object.is_virtual;this.no_quota=object.no_quota;this.has_been_shared_out=object.has_been_shared_out;this.encrypted=object.encrypted;this.lib_need_decrypt=object.lib_need_decrypt;};exports.default=RepoInfo;\n\n/***/ }),\n\n/***/ 32:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _constants=__webpack_require__(2);var _reactSelect=__webpack_require__(37);var _reactSelect2=_interopRequireDefault(_reactSelect);__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={isTextMode:_propTypes2.default.bool.isRequired,// there will be two mode. first: text and select. second: just select\nisEditIconShow:_propTypes2.default.bool.isRequired,options:_propTypes2.default.array.isRequired,currentOption:_propTypes2.default.string.isRequired,translateOption:_propTypes2.default.func.isRequired,translateExplanation:_propTypes2.default.func,onOptionChanged:_propTypes2.default.func.isRequired,toggleItemFreezed:_propTypes2.default.func};var SelectEditor=function(_React$Component){_inherits(SelectEditor,_React$Component);function SelectEditor(props){_classCallCheck(this,SelectEditor);var _this=_possibleConstructorReturn(this,(SelectEditor.__proto__||Object.getPrototypeOf(SelectEditor)).call(this,props));_this.setOptions=function(){_this.options=[];var options=_this.props.options;for(var i=0,length=options.length;i<length;i++){var option={};option.value=options[i];option.label=_react2.default.createElement('div',null,_this.props.translateOption(options[i]),_this.props.translateExplanation&&_react2.default.createElement('div',{className:'permission-editor-explanation'},_this.props.translateExplanation(options[i])));_this.options.push(option);}};_this.onEditPermission=function(e){e.nativeEvent.stopImmediatePropagation();_this.setState({isEditing:true});_this.props.toggleItemFreezed&&_this.props.toggleItemFreezed(true);};_this.onOptionChanged=function(e){var permission=e.value;if(permission!==_this.props.currentOption){_this.props.onOptionChanged(permission);}_this.setState({isEditing:false});_this.props.toggleItemFreezed&&_this.props.toggleItemFreezed(false);};_this.onSelectHandler=function(e){e.nativeEvent.stopImmediatePropagation();};_this.onHideSelect=function(){_this.setState({isEditing:false});_this.props.toggleItemFreezed&&_this.props.toggleItemFreezed(false);};_this.state={isEditing:false};_this.options=[];return _this;}_createClass(SelectEditor,[{key:'componentDidMount',value:function componentDidMount(){document.addEventListener('click',this.onHideSelect);this.setOptions();}},{key:'componentWillUnmount',value:function componentWillUnmount(){document.removeEventListener('click',this.onHideSelect);}},{key:'render',value:function render(){var _props=this.props,currentOption=_props.currentOption,isTextMode=_props.isTextMode;// scence1: isTextMode (text)editor-icon --> select\n// scence2: !isTextMode select\nreturn _react2.default.createElement('div',{className:'permission-editor',onClick:this.onSelectHandler},(!isTextMode||this.state.isEditing)&&_react2.default.createElement(_reactSelect2.default,{options:this.options,className:'permission-editor-select',classNamePrefix:'permission-editor',placeholder:this.props.translateOption(currentOption),onChange:this.onOptionChanged,captureMenuScroll:false}),isTextMode&&!this.state.isEditing&&_react2.default.createElement('div',null,this.props.translateOption(currentOption),this.props.isEditIconShow&&_react2.default.createElement('span',{title:(0,_constants.gettext)('Edit'),className:'fa fa-pencil-alt attr-action-icon',onClick:this.onEditPermission})));}}]);return SelectEditor;}(_react2.default.Component);SelectEditor.propTypes=propTypes;exports.default=SelectEditor;\n\n/***/ }),\n\n/***/ 38:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});exports.Utils=undefined;var _constants=__webpack_require__(2);var _pinyinByUnicode=__webpack_require__(13);var Utils=exports.Utils={keyCodes:{esc:27,space:32,tab:9,up:38,down:40},bytesToSize:function bytesToSize(bytes){if(typeof bytes=='undefined')return' ';if(bytes<0)return'--';var sizes=['bytes','KB','MB','GB','TB','PB'];if(bytes===0)return bytes+' '+sizes[0];var i=parseInt(Math.floor(Math.log(bytes)/Math.log(1000)),10);if(i===0)return bytes+' '+sizes[i];return(bytes/Math.pow(1000,i)).toFixed(1)+' '+sizes[i];},isHiDPI:function isHiDPI(){var pixelRatio=window.devicePixelRatio?window.devicePixelRatio:1;if(pixelRatio>1){return true;}else{return false;}},FILEEXT_ICON_MAP:{// text file\n'md':'txt.png','txt':'txt.png',// pdf file\n'pdf':'pdf.png',// document file\n'doc':'word.png','docx':'word.png','odt':'word.png','fodt':'word.png','ppt':'ppt.png','pptx':'ppt.png','odp':'ppt.png','fodp':'ppt.png','xls':'excel.png','xlsx':'excel.png','ods':'excel.png','fods':'excel.png',// video\n'mp4':'video.png','ogv':'video.png','webm':'video.png','mov':'video.png','flv':'video.png','wmv':'video.png','rmvb':'video.png',// music file\n'mp3':'music.png','oga':'music.png','ogg':'music.png','flac':'music.png','aac':'music.png','ac3':'music.png','wma':'music.png',// image file\n'jpg':'pic.png','jpeg':'pic.png','png':'pic.png','svg':'pic.png','gif':'pic.png','bmp':'pic.png','ico':'pic.png',// default\n'default':'file.png'},// check if a file is an image\nimageCheck:function imageCheck(filename){// no file ext\nif(filename.lastIndexOf('.')==-1){return false;}var file_ext=filename.substr(filename.lastIndexOf('.')+1).toLowerCase();var image_exts=['gif','jpeg','jpg','png','ico','bmp'];if(image_exts.indexOf(file_ext)!=-1){return true;}else{return false;}},// check if a file is a video\nvideoCheck:function videoCheck(filename){// no file ext\nif(filename.lastIndexOf('.')==-1){return false;}var file_ext=filename.substr(filename.lastIndexOf('.')+1).toLowerCase();var exts=['mp4','ogv','webm','mov'];if(exts.indexOf(file_ext)!=-1){return true;}else{return false;}},encodePath:function encodePath(path){// IE8 does not support 'map()'\n/*\n       return path.split('/').map(function(e) {\n       return encodeURIComponent(e);\n       }).join('/');\n       */if(!path){return'';}var path_arr=path.split('/');var path_arr_=[];for(var i=0,len=path_arr.length;i<len;i++){path_arr_.push(encodeURIComponent(path_arr[i]));}return path_arr_.join('/');},HTMLescape:function HTMLescape(html){return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;},generateDialogTitle:function generateDialogTitle(title,operationTarget){/*\n     * @param title: gettext('...{placeholder}...')\n     */var targetStr=this.HTMLescape(operationTarget);var str='<span class=\"op-target ellipsis ellipsis-op-target\" title='+targetStr+'>'+targetStr+'</span>';return title.replace('{placeholder}',str);},getFileName:function getFileName(filePath){var lastIndex=filePath.lastIndexOf('/');return filePath.slice(lastIndex+1);},/**\n   * input: '/abc/bc/cb'\n   * output: ['/abc', '/abc/bc', '/abc/bc/cb'];\n   */getPaths:function getPaths(path){var paths=path.split('/').slice(1);var result=[];while(paths.length){result.push('/'+paths.join('/'));paths.pop();}return result.reverse();},/**\n   * input: \n   *  eg: /\n   *      ../abc/abc/\n   *      ../abc/bc\n   * output(return):\n   *  eg: /\n   *      abc\n   *      bc\n   */getFolderName:function getFolderName(path){if(path==='/'){return path;}path=path[path.length-1]!=='/'?path:path.slice(0,path.length-2);return path.slice(path.lastIndexOf('/')+1);},/*\n    return dirname of a path.\n    if path is '/', return '/'.\n  */getDirName:function getDirName(path){var dir=path.slice(0,path.lastIndexOf('/'));if(dir===''){return'/';}else{return dir;}},isChildPath:function isChildPath(child,parent){var p=this.getDirName(child);return p===parent;},isAncestorPath:function isAncestorPath(ancestor,path){return path.indexOf(ancestor)>-1;},renameAncestorPath:function renameAncestorPath(path,ancestor,newAncestor){return path.replace(ancestor,newAncestor);},joinPath:function joinPath(pathA,pathB){if(pathA[pathA.length-1]==='/'){return pathA+pathB;}else{return pathA+'/'+pathB;}},isSupportUploadFolder:function isSupportUploadFolder(){return navigator.userAgent.indexOf('Firefox')!=-1||navigator.userAgent.indexOf('Chrome')>-1;},getDefaultLibIconUrl:function getDefaultLibIconUrl(isBig){var size=Utils.isHiDPI()?48:24;size=isBig?256:size;var icon_name='lib.png';return _constants.mediaUrl+'img/lib/'+size+'/'+icon_name;},getLibIconUrl:function getLibIconUrl(repo,isBig){var permission=repo.permission||repo.share_permission;//Compatible with regular repo and repo shared\nvar size=Utils.isHiDPI()?48:24;size=isBig?256:size;var icon_name='lib.png';if(repo.encrypted){icon_name='lib-encrypted.png';}if(permission==='r'||permission==='perview'){icon_name='lib-readonly.png';}return _constants.mediaUrl+'img/lib/'+size+'/'+icon_name;},getDirentIcon:function getDirentIcon(dirent,isBig){var size=this.isHiDPI()?48:24;size=isBig?192:size;if(dirent.isDir()){var readonly=false;if(dirent.permission&&(dirent.permission==='r'||dirent.permission==='preview')){readonly=true;}return this.getFolderIconUrl(readonly,size);}else{return this.getFileIconUrl(dirent.name,size);}},getFolderIconUrl:function getFolderIconUrl(){var readonly=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var size=arguments[1];if(!size){size=Utils.isHiDPI()?48:24;}size=size>24?192:24;return _constants.mediaUrl+'img/folder'+(readonly?'-read-only-':'-')+size+'.png';},getFileIconUrl:function getFileIconUrl(filename,size){if(!size){size=Utils.isHiDPI()?48:24;}size=size>24?192:24;var file_ext='';if(filename.lastIndexOf('.')==-1){return _constants.mediaUrl+'img/file/'+size+'/'+this.FILEEXT_ICON_MAP['default'];}else{file_ext=filename.substr(filename.lastIndexOf('.')+1).toLowerCase();}if(this.FILEEXT_ICON_MAP[file_ext]){return _constants.mediaUrl+'img/file/'+size+'/'+this.FILEEXT_ICON_MAP[file_ext];}else{return _constants.mediaUrl+'img/file/'+size+'/'+this.FILEEXT_ICON_MAP['default'];}},getLibIconTitle:function getLibIconTitle(repo){var title;var permission=repo.permission||repo.share_permission;//Compatible with regular repo and repo shared\nif(repo.encrypted){title=(0,_constants.gettext)('Encrypted library');}else if(repo.is_admin){// shared with 'admin' permission\ntitle=(0,_constants.gettext)('Admin access');}else{switch(permission){case'rw':title=(0,_constants.gettext)('Read-Write library');break;case'r':title=(0,_constants.gettext)('Read-Only library');break;case'cloud-edit':title=(0,_constants.gettext)('Preview-Edit-on-Cloud library');break;case'preview':title=(0,_constants.gettext)('Preview-on-Cloud library');break;}}return title;},getFolderIconTitle:function getFolderIconTitle(options){var title;switch(options.permission){case'rw':title=(0,_constants.gettext)('Read-Write folder');break;case'r':title=(0,_constants.gettext)('Read-Only folder');break;case'cloud-edit':title=(0,_constants.gettext)('Preview-Edit-on-Cloud folder');break;case'preview':title=(0,_constants.gettext)('Preview-on-Cloud folder');break;}return title;},sharePerms:function sharePerms(permission){var title;switch(permission){case'rw':title=(0,_constants.gettext)('Read-Write');break;case'r':title=(0,_constants.gettext)('Read-Only');break;case'admin':title=(0,_constants.gettext)('Admin');break;case'cloud-edit':title=(0,_constants.gettext)('Preview-Edit-on-Cloud');break;case'preview':title=(0,_constants.gettext)('Preview-on-Cloud');break;}return title;},sharePermsExplanation:function sharePermsExplanation(permission){var title;switch(permission){case'rw':title=(0,_constants.gettext)('User can read, write, upload, download and sync files.');break;case'r':title=(0,_constants.gettext)('User can read, download and sync files.');break;case'admin':title=(0,_constants.gettext)('Besides Write permission, user can also share the library.');break;case'cloud-edit':title=(0,_constants.gettext)('Same as Preview on cloud. But user can also edit files online via browser.');break;case'preview':title=(0,_constants.gettext)('User can only view files online via browser. Files can\\'t be downloaded.');break;}return title;},formatSize:function formatSize(options){/*\n     * param: {bytes, precision}\n     */var bytes=options.bytes;var precision=options.precision||0;var kilobyte=1000;var megabyte=kilobyte*1000;var gigabyte=megabyte*1000;var terabyte=gigabyte*1000;if(bytes>=0&&bytes<kilobyte){return bytes+' B';}else if(bytes>=kilobyte&&bytes<megabyte){return(bytes/kilobyte).toFixed(precision)+' KB';}else if(bytes>=megabyte&&bytes<gigabyte){return(bytes/megabyte).toFixed(precision)+' MB';}else if(bytes>=gigabyte&&bytes<terabyte){return(bytes/gigabyte).toFixed(precision)+' GB';}else if(bytes>=terabyte){return(bytes/terabyte).toFixed(precision)+' TB';}else{return bytes+' B';}},formatBitRate:function formatBitRate(bits){var Bs;if(typeof bits!=='number'){return'';}Bs=bits/8;if(Bs>=1000000000){return(Bs/1000000000).toFixed(2)+' GB/s';}if(Bs>=1000000){return(Bs/1000000).toFixed(2)+' MB/s';}if(Bs>=1000){return(Bs/1000).toFixed(2)+' kB/s';}return Bs.toFixed(2)+' B/s';},isMarkdownFile:function isMarkdownFile(filePath){var index=filePath.lastIndexOf('.');if(index===-1){return false;}else{var type=filePath.substring(index).toLowerCase();if(type==='.md'||type==='.markdown'){return true;}else{return false;}}},isInternalMarkdownLink:function isInternalMarkdownLink(url,repoID){var re=new RegExp(_constants.serviceURL+'/lib/'+repoID+'.*\\.md$');return re.test(url);},isInternalDirLink:function isInternalDirLink(url,repoID){var re=new RegExp(_constants.serviceURL+'/library/'+repoID+'.*');return re.test(url);},getPathFromInternalMarkdownLink:function getPathFromInternalMarkdownLink(url,repoID){var re=new RegExp(_constants.serviceURL+'/lib/'+repoID+'/file'+'(.*\\.md)');var array=re.exec(url);var path=decodeURIComponent(array[1]);return path;},getPathFromInternalDirLink:function getPathFromInternalDirLink(url,repoID){var re=new RegExp(_constants.serviceURL+'/library/'+repoID+'(/.*)');var array=re.exec(url);var path=decodeURIComponent(array[1]);path=path.slice(1);path=path.slice(path.indexOf('/'));return path;},isWikiInternalMarkdownLink:function isWikiInternalMarkdownLink(url,slug){slug=encodeURIComponent(slug);var re=new RegExp(_constants.serviceURL+'/wikis/'+slug+'.*\\.md$');return re.test(url);},isWikiInternalDirLink:function isWikiInternalDirLink(url,slug){slug=encodeURIComponent(slug);var re=new RegExp(_constants.serviceURL+'/wikis/'+slug+'.*');return re.test(url);},getPathFromWikiInternalMarkdownLink:function getPathFromWikiInternalMarkdownLink(url,slug){slug=encodeURIComponent(slug);var re=new RegExp(_constants.serviceURL+'/wikis/'+slug+'(.*\\.md)');var array=re.exec(url);var path=array[1];try{path=decodeURIComponent(path);}catch(err){path=path.replace(/%/g,'%25');path=decodeURIComponent(path);}return path;},getPathFromWikiInternalDirLink:function getPathFromWikiInternalDirLink(url,slug){slug=encodeURIComponent(slug);var re=new RegExp(_constants.serviceURL+'/wikis/'+slug+'(/.*)');var array=re.exec(url);var path=array[1];try{path=decodeURIComponent(path);}catch(err){path=path.replace(/%/g,'%25');path=decodeURIComponent(path);}return path;},compareTwoWord:function compareTwoWord(wordA,wordB){// compare wordA and wordB at lower case\n// if wordA >= wordB, return 1\n// if wordA < wordB, return -1\nvar a_val,b_val,a_uni=wordA.charCodeAt(0),b_uni=wordB.charCodeAt(0);if(19968<a_uni&&a_uni<40869&&19968<b_uni&&b_uni<40869){// both are chinese words\na_val=_pinyinByUnicode.strChineseFirstPY.charAt(a_uni-19968).toLowerCase();b_val=_pinyinByUnicode.strChineseFirstPY.charAt(b_uni-19968).toLowerCase();}else if(19968<a_uni&&a_uni<40869&&!(19968<b_uni&&b_uni<40869)){// a is chinese and b is english\nreturn 1;}else if(!(19968<a_uni&&a_uni<40869)&&19968<b_uni&&b_uni<40869){// a is english and b is chinese\nreturn-1;}else{// both are english words\na_val=wordA.toLowerCase();b_val=wordB.toLowerCase();return this.compareStrWithNumbersIn(a_val,b_val);}return a_val>=b_val?1:-1;},// compare two strings which may have digits in them\n// and compare those digits as number instead of string\ncompareStrWithNumbersIn:function compareStrWithNumbersIn(a,b){var reParts=/\\d+|\\D+/g;var reDigit=/\\d/;var aParts=a.match(reParts);var bParts=b.match(reParts);var isDigitPart;var len=Math.min(aParts.length,bParts.length);var aPart,bPart;if(aParts&&bParts&&(isDigitPart=reDigit.test(aParts[0]))==reDigit.test(bParts[0])){// Loop through each substring part to compare the overall strings.\nfor(var i=0;i<len;i++){aPart=aParts[i];bPart=bParts[i];if(isDigitPart){aPart=parseInt(aPart,10);bPart=parseInt(bPart,10);}if(aPart!=bPart){return aPart<bPart?-1:1;}// Toggle the value of isDigitPart since the parts will alternate.\nisDigitPart=!isDigitPart;}}// Use normal comparison.\nreturn(a>=b)-(a<=b);},sortRepos:function sortRepos(repos,sortBy,sortOrder){var _this=this;var comparator=void 0;switch(sortBy+'-'+sortOrder){case'name-asc':comparator=function comparator(a,b){if(!a.repo_name){return 1;}if(!b.repo_name){return-1;}var result=_this.compareTwoWord(a.repo_name,b.repo_name);return result;};break;case'name-desc':comparator=function comparator(a,b){if(!a.repo_name){return-1;}if(!b.repo_name){return 1;}var result=_this.compareTwoWord(a.repo_name,b.repo_name);return-result;};break;case'time-asc':comparator=function comparator(a,b){return a.last_modified<b.last_modified?-1:1;};break;case'time-desc':comparator=function comparator(a,b){return a.last_modified<b.last_modified?1:-1;};break;}repos.sort(comparator);return repos;},sortDirents:function sortDirents(items,sortBy,sortOrder){var _this=this;var comparator=void 0;switch(sortBy+'-'+sortOrder){case'name-asc':comparator=function comparator(a,b){var result=_this.compareTwoWord(a.name,b.name);return result;};break;case'name-desc':comparator=function comparator(a,b){var result=_this.compareTwoWord(a.name,b.name);return-result;};break;case'time-asc':comparator=function comparator(a,b){return a.mtime<b.mtime?-1:1;};break;case'time-desc':comparator=function comparator(a,b){return a.mtime<b.mtime?1:-1;};break;}items.sort(function(a,b){if(a.type=='dir'&&b.type=='file'){return-1;}else if(a.type=='file'&&b.type=='dir'){return 1;}else{return comparator(a,b);}});return items;},changeMarkdownNodes:function changeMarkdownNodes(nodes,fn){nodes.map(function(item){fn(item);if(item.nodes&&item.nodes.length>0){Utils.changeMarkdownNodes(item.nodes,fn);}});return nodes;},chooseLanguage:function chooseLanguage(suffix){var mode=void 0;switch(suffix){case'py':mode='python';break;case'js':mode='javascript';break;case'c':mode='text/x-csrc';break;case'cpp':mode='text/x-c++src';break;case'java':mode='text/x-java';break;case'cs':mode='text/x-csharp';break;case'mdf':mode='text/x-sql';break;case'html':mode='htmlmixed';break;default:mode=suffix;}return mode;},DARK_COLOR_MAP:{// old color\n'red':'#D11507','orange':'#FF8C00','yellow':'#EDEF00','green':'#006400','cyan':'#00E0E1','blue':'#2510A3','indigo':'#350C56','purple':'#551054','pink':'#E3A5B0','azure':'#C4D0D0','lime':'#00E100','teal':'#006A6B','gray':'#545454',// new color\n'#FFA8A8':'#E49090','#FFA94D':'#E39136','#FFD43B':'#E0B815','#A0EC50':'#83CF32','#A9E34B':'#8DC72E','#63E6BE':'#43CAA4','#4FD2C9':'#2DB9B0','#72C3FC':'#57ABE3','#91A7FF':'#7A91E7','#E599F7':'#CC82DE','#B197FC':'#9B82E5','#F783AC':'#DF6D97','#CED4DA':'#A8ADB2'},getDarkColor:function getDarkColor(color){var darkColor=void 0;darkColor=this.DARK_COLOR_MAP[color];return darkColor;}};\n\n/***/ }),\n\n/***/ 40:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var SharedLinkInfo=function SharedLinkInfo(object){_classCallCheck(this,SharedLinkInfo);this.repo_id=object.repo_id;this.repo_name=object.repo_name;this.path=object.path;this.obj_name=object.obj_name;this.is_dir=object.is_dir;this.permissions=object.permissions;this.username=object.username;this.is_expired=object.is_expired;this.expire_date=object.expire_date;this.token=object.token;this.link=object.link;this.view_cnt=object.view_cnt;this.ctime=object.ctime;};exports.default=SharedLinkInfo;\n\n/***/ }),\n\n/***/ 41:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var SharedUploadInfo=function SharedUploadInfo(object){_classCallCheck(this,SharedUploadInfo);this.repo_id=object.repo_id;this.repo_name=object.repo_name;this.path=object.path;this.link=object.link;this.obj_name=object.obj_name;this.username=object.username;this.ctime=object.ctime;this.token=object.token;this.view_cnt=object.view_cnt;};exports.default=SharedUploadInfo;\n\n/***/ }),\n\n/***/ 42:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _repoListItem=__webpack_require__(43);var _repoListItem2=_interopRequireDefault(_repoListItem);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={currentRepoInfo:_propTypes2.default.object,isShowFile:_propTypes2.default.bool,repo:_propTypes2.default.object,repoList:_propTypes2.default.array,selectedRepo:_propTypes2.default.object,initToShowChildren:_propTypes2.default.bool.isRequired,selectedPath:_propTypes2.default.string,onDirentItemClick:_propTypes2.default.func.isRequired,onRepoItemClick:_propTypes2.default.func.isRequired};var RepoListView=function(_React$Component){_inherits(RepoListView,_React$Component);function RepoListView(){_classCallCheck(this,RepoListView);return _possibleConstructorReturn(this,(RepoListView.__proto__||Object.getPrototypeOf(RepoListView)).apply(this,arguments));}_createClass(RepoListView,[{key:'render',value:function render(){var _this2=this;var _props=this.props,currentRepoInfo=_props.currentRepoInfo,repoList=_props.repoList;if(currentRepoInfo){repoList=[];repoList.push(currentRepoInfo);}return _react2.default.createElement('ul',{className:'list-view-content file-chooser-item'},repoList.length>0&&repoList.map(function(repoItem,index){return _react2.default.createElement(_repoListItem2.default,{key:index,repo:repoItem,initToShowChildren:_this2.props.initToShowChildren,selectedRepo:_this2.props.selectedRepo,selectedPath:_this2.props.selectedPath,onRepoItemClick:_this2.props.onRepoItemClick,onDirentItemClick:_this2.props.onDirentItemClick,isShowFile:_this2.props.isShowFile});}));}}]);return RepoListView;}(_react2.default.Component);RepoListView.propTypes=propTypes;exports.default=RepoListView;\n\n/***/ }),\n\n/***/ 43:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _direntListView=__webpack_require__(44);var _direntListView2=_interopRequireDefault(_direntListView);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={isShowFile:_propTypes2.default.bool,selectedPath:_propTypes2.default.string,selectedRepo:_propTypes2.default.object,repo:_propTypes2.default.object.isRequired,initToShowChildren:_propTypes2.default.bool.isRequired,onDirentItemClick:_propTypes2.default.func.isRequired,onRepoItemClick:_propTypes2.default.func.isRequired};var RepoListItem=function(_React$Component){_inherits(RepoListItem,_React$Component);function RepoListItem(props){_classCallCheck(this,RepoListItem);var _this=_possibleConstructorReturn(this,(RepoListItem.__proto__||Object.getPrototypeOf(RepoListItem)).call(this,props));_this.onToggleClick=function(){_this.setState({isShowChildren:!_this.state.isShowChildren});};_this.onDirentItemClick=function(filePath,dirent){var repo=_this.props.repo;_this.props.onDirentItemClick(repo,filePath,dirent);};_this.onRepoItemClick=function(){if(!_this.isCurrentRepo()){_this.props.onRepoItemClick(_this.props.repo);}else{_this.onToggleClick();}};_this.isCurrentRepo=function(){var _this$props=_this.props,selectedRepo=_this$props.selectedRepo,repo=_this$props.repo;return selectedRepo&&repo.repo_id===selectedRepo.repo_id;};_this.state={isShowChildren:_this.props.initToShowChildren};return _this;}_createClass(RepoListItem,[{key:'render',value:function render(){var repoActive=false;var isCurrentRepo=this.isCurrentRepo();if(isCurrentRepo&&!this.props.selectedPath){repoActive=true;}return _react2.default.createElement('li',{className:'file-chooser-item'},_react2.default.createElement('span',{className:'item-toggle fa '+(this.state.isShowChildren?'fa-caret-down':'fa-caret-right'),onClick:this.onToggleClick}),_react2.default.createElement('span',{className:'item-info '+(repoActive?'item-active':''),onClick:this.onRepoItemClick},_react2.default.createElement('span',{className:'icon far fa-folder'}),_react2.default.createElement('span',{className:'name user-select-none ellipsis'},this.props.repo.repo_name)),this.state.isShowChildren&&_react2.default.createElement(_direntListView2.default,{repo:this.props.repo,isShowChildren:this.state.isShowChildren,onDirentItemClick:this.onDirentItemClick,selectedRepo:this.props.selectedRepo,selectedPath:this.props.selectedPath,isShowFile:this.props.isShowFile}));}}]);return RepoListItem;}(_react2.default.Component);RepoListItem.propTypes=propTypes;exports.default=RepoListItem;\n\n/***/ }),\n\n/***/ 44:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _seafileApi=__webpack_require__(3);var _dirent2=__webpack_require__(14);var _dirent3=_interopRequireDefault(_dirent2);var _direntListItem=__webpack_require__(45);var _direntListItem2=_interopRequireDefault(_direntListItem);var _utils=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={isShowFile:_propTypes2.default.bool,selectedPath:_propTypes2.default.string,selectedRepo:_propTypes2.default.object,repo:_propTypes2.default.object.isRequired,isShowChildren:_propTypes2.default.bool.isRequired,onDirentItemClick:_propTypes2.default.func.isRequired};var DirentListView=function(_React$Component){_inherits(DirentListView,_React$Component);function DirentListView(props){_classCallCheck(this,DirentListView);var _this=_possibleConstructorReturn(this,(DirentListView.__proto__||Object.getPrototypeOf(DirentListView)).call(this,props));_this.state={direntList:[]};return _this;}_createClass(DirentListView,[{key:'componentDidMount',value:function componentDidMount(){var _this2=this;var repo=this.props.repo;_seafileApi.seafileAPI.listDir(repo.repo_id,'/').then(function(res){var direntList=[];res.data.dirent_list.forEach(function(item){if(_this2.props.isShowFile===true){var dirent=new _dirent3.default(item);direntList.push(dirent);}else{if(item.type==='dir'){var _dirent=new _dirent3.default(item);direntList.push(_dirent);}}});direntList=_utils.Utils.sortDirents(direntList,'name','asc');_this2.setState({direntList:direntList});});}},{key:'render',value:function render(){var _this3=this;var direntList=this.state.direntList;return _react2.default.createElement('ul',{className:'list-view-content '+(this.props.isShowChildren?'':'hide')},direntList.map(function(dirent,index){return _react2.default.createElement(_direntListItem2.default,{key:index,repo:_this3.props.repo,dirent:dirent,selectedRepo:_this3.props.selectedRepo,onDirentItemClick:_this3.props.onDirentItemClick,selectedPath:_this3.props.selectedPath,isShowFile:_this3.props.isShowFile});}));}}]);return DirentListView;}(_react2.default.Component);DirentListView.propTypes=propTypes;exports.default=DirentListView;\n\n/***/ }),\n\n/***/ 45:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _seafileApi=__webpack_require__(3);var _dirent2=__webpack_require__(14);var _dirent3=_interopRequireDefault(_dirent2);var _utils=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={isShowFile:_propTypes2.default.bool,filePath:_propTypes2.default.string,selectedPath:_propTypes2.default.string,selectedRepo:_propTypes2.default.object,dirent:_propTypes2.default.object.isRequired,repo:_propTypes2.default.object.isRequired,onDirentItemClick:_propTypes2.default.func.isRequired};var DirentListItem=function(_React$Component){_inherits(DirentListItem,_React$Component);function DirentListItem(props){_classCallCheck(this,DirentListItem);var _this=_possibleConstructorReturn(this,(DirentListItem.__proto__||Object.getPrototypeOf(DirentListItem)).call(this,props));_this.onItemClick=function(e){e.stopPropagation();// need prevent event popup\nvar isCurrentRepo=_this.props.selectedRepo.repo_id===_this.props.repo.repo_id;if(isCurrentRepo){if(_this.props.selectedPath!==_this.state.filePath){_this.props.onDirentItemClick(_this.state.filePath,_this.props.dirent);}else{if(_this.props.dirent.type==='dir'){_this.onToggleClick(e);}}}else{_this.props.onDirentItemClick(_this.state.filePath,_this.props.dirent);}};_this.onToggleClick=function(e){e.stopPropagation();// need prevent event popup\nif(!_this.state.hasRequest){_seafileApi.seafileAPI.listDir(_this.props.repo.repo_id,_this.state.filePath).then(function(res){var direntList=[];res.data.dirent_list.forEach(function(item){if(_this.props.isShowFile===true){// show dir and file\nvar dirent=new _dirent3.default(item);direntList.push(dirent);}else{// just show dir\nif(item.type==='dir'){var _dirent=new _dirent3.default(item);direntList.push(_dirent);}}});direntList=_utils.Utils.sortDirents(direntList,'name','asc');_this.setState({hasRequest:true,direntList:direntList});if(res.data.length===0||direntList.length===0){_this.setState({hasChildren:false});}});}_this.setState({isShowChildren:!_this.state.isShowChildren});};_this.renderChildren=function(){return _react2.default.createElement('ul',{className:'list-view-content'},_this.state.direntList.map(function(dirent,index){return _react2.default.createElement(DirentListItem,{key:index,dirent:dirent,repo:_this.props.repo,filePath:_this.state.filePath,onItemClick:_this.onItemClick,selectedPath:_this.props.selectedPath,selectedRepo:_this.props.selectedRepo,onDirentItemClick:_this.props.onDirentItemClick,isShowFile:_this.props.isShowFile});}));};var filePath=_this.props.filePath?_this.props.filePath+'/'+_this.props.dirent.name:'/'+_this.props.dirent.name;_this.state={isShowChildren:false,hasRequest:false,hasChildren:true,filePath:filePath,direntList:[]};return _this;}_createClass(DirentListItem,[{key:'render',value:function render(){var isCurrentRepo=this.props.selectedRepo.repo_id===this.props.repo.repo_id;var isCurrentPath=this.props.selectedPath===this.state.filePath;return _react2.default.createElement('li',{className:'file-chooser-item'},this.state.hasChildren&&this.props.dirent.type!=='file'&&_react2.default.createElement('span',{className:'item-toggle fa '+(this.state.isShowChildren?'fa-caret-down':'fa-caret-right'),onClick:this.onToggleClick}),_react2.default.createElement('span',{className:'item-info '+(isCurrentRepo&&isCurrentPath?'item-active':''),onClick:this.onItemClick},_react2.default.createElement('span',{className:'icon far '+(this.props.dirent.type==='dir'?'fa-folder':'fa-file')}),_react2.default.createElement('span',{className:'name user-select-none ellipsis'},this.props.dirent&&this.props.dirent.name)),this.state.isShowChildren&&this.renderChildren());}}]);return DirentListItem;}(_react2.default.Component);DirentListItem.propTypes=propTypes;exports.default=DirentListItem;\n\n/***/ }),\n\n/***/ 46:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _searchedListItem=__webpack_require__(47);var _searchedListItem2=_interopRequireDefault(_searchedListItem);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={searchResults:_propTypes2.default.array.isRequired,onItemClick:_propTypes2.default.func.isRequired};var SearchedListView=function(_React$Component){_inherits(SearchedListView,_React$Component);function SearchedListView(props){_classCallCheck(this,SearchedListView);var _this=_possibleConstructorReturn(this,(SearchedListView.__proto__||Object.getPrototypeOf(SearchedListView)).call(this,props));_this.onItemClick=function(item){_this.setState({currentItem:item});_this.props.onItemClick(item);};_this.state={currentItem:null};return _this;}_createClass(SearchedListView,[{key:'render',value:function render(){var _this2=this;return _react2.default.createElement('table',{className:'table-thead-hidden'},_react2.default.createElement('thead',null,_react2.default.createElement('tr',null,_react2.default.createElement('th',{width:'8%'}),_react2.default.createElement('th',{width:'92%'}))),_react2.default.createElement('tbody',null,this.props.searchResults.map(function(item,index){return _react2.default.createElement(_searchedListItem2.default,{key:index,item:item,currentItem:_this2.state.currentItem,onItemClick:_this2.onItemClick});})));}}]);return SearchedListView;}(_react2.default.Component);SearchedListView.propTypes=propTypes;exports.default=SearchedListView;\n\n/***/ }),\n\n/***/ 47:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _utils=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={currentItem:_propTypes2.default.object,onItemClick:_propTypes2.default.func.isRequired};var SearchedListItem=function(_React$Component){_inherits(SearchedListItem,_React$Component);function SearchedListItem(props){_classCallCheck(this,SearchedListItem);var _this=_possibleConstructorReturn(this,(SearchedListItem.__proto__||Object.getPrototypeOf(SearchedListItem)).call(this,props));_this.onMouseEnter=function(){_this.setState({highlight:true});};_this.onMouseLeave=function(){_this.setState({highlight:false});};_this.onClick=function(){var item=_this.props.item;_this.props.onItemClick(item);};_this.state={highlight:false};return _this;}_createClass(SearchedListItem,[{key:'render',value:function render(){var _props=this.props,item=_props.item,currentItem=_props.currentItem;var fileIconUrl=item.is_dir?_utils.Utils.getFolderIconUrl(false,192):_utils.Utils.getFileIconUrl(item.name,192);var trClass=this.state.highlight?'tr-highlight':'';if(currentItem){if(item.repo_id===currentItem.repo_id&&item.path===currentItem.path){trClass='searched-active';}}return _react2.default.createElement('tr',{className:trClass,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},_react2.default.createElement('td',{className:'text-center'},_react2.default.createElement('img',{className:'item-img',src:fileIconUrl,alt:'',width:'24'})),_react2.default.createElement('td',null,_react2.default.createElement('span',{className:'item-link'},item.repo_name,'/',item.link_content)));}}]);return SearchedListItem;}(_react2.default.Component);SearchedListItem.propTypes=propTypes;exports.default=SearchedListItem;\n\n/***/ }),\n\n/***/ 48:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 49:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _constants=__webpack_require__(2);var _reactstrap=__webpack_require__(5);var _seafileApi=__webpack_require__(3);var _userSelect=__webpack_require__(23);var _userSelect2=_interopRequireDefault(_userSelect);var _sharePermissionEditor=__webpack_require__(19);var _sharePermissionEditor2=_interopRequireDefault(_sharePermissionEditor);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var UserItem=function(_React$Component){_inherits(UserItem,_React$Component);function UserItem(props){_classCallCheck(this,UserItem);var _this=_possibleConstructorReturn(this,(UserItem.__proto__||Object.getPrototypeOf(UserItem)).call(this,props));_this.onMouseEnter=function(){_this.setState({isOperationShow:true});};_this.onMouseLeave=function(){_this.setState({isOperationShow:false});};_this.deleteShareItem=function(){var item=_this.props.item;_this.props.deleteShareItem(item.user_info.name);};_this.onChangeUserPermission=function(permission){var item=_this.props.item;_this.props.onChangeUserPermission(item,permission);};_this.state={isOperationShow:false};return _this;}_createClass(UserItem,[{key:'render',value:function render(){var item=this.props.item;var currentPermission=item.is_admin?'admin':item.permission;return _react2.default.createElement('tr',{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},_react2.default.createElement('td',{className:'name'},item.user_info.nickname),_react2.default.createElement('td',null,_react2.default.createElement(_sharePermissionEditor2.default,{isTextMode:true,isEditIconShow:this.state.isOperationShow,currentPermission:currentPermission,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})),_react2.default.createElement('td',null,_react2.default.createElement('span',{className:'sf2-icon-x3 action-icon '+(this.state.isOperationShow?'':'hide'),onClick:this.deleteShareItem,title:(0,_constants.gettext)('Delete')})));}}]);return UserItem;}(_react2.default.Component);var UserList=function(_React$Component2){_inherits(UserList,_React$Component2);function UserList(){_classCallCheck(this,UserList);return _possibleConstructorReturn(this,(UserList.__proto__||Object.getPrototypeOf(UserList)).apply(this,arguments));}_createClass(UserList,[{key:'render',value:function render(){var _this3=this;var items=this.props.items;return _react2.default.createElement('tbody',null,items.map(function(item,index){return _react2.default.createElement(UserItem,{key:index,item:item,permissions:_this3.props.permissions,deleteShareItem:_this3.props.deleteShareItem,onChangeUserPermission:_this3.props.onChangeUserPermission});}));}}]);return UserList;}(_react2.default.Component);var propTypes={isGroupOwnedRepo:_propTypes2.default.bool,itemPath:_propTypes2.default.string.isRequired,itemType:_propTypes2.default.string.isRequired,repoID:_propTypes2.default.string.isRequired};var ShareToUser=function(_React$Component3){_inherits(ShareToUser,_React$Component3);function ShareToUser(props){_classCallCheck(this,ShareToUser);var _this4=_possibleConstructorReturn(this,(ShareToUser.__proto__||Object.getPrototypeOf(ShareToUser)).call(this,props));_this4.handleSelectChange=function(option){_this4.setState({selectedOption:option});_this4.options=[];};_this4.setPermission=function(permission){_this4.setState({permission:permission});};_this4.shareToUser=function(){var users=[];var path=_this4.props.itemPath;var repoID=_this4.props.repoID;if(_this4.state.selectedOption&&_this4.state.selectedOption.length>0){for(var i=0;i<_this4.state.selectedOption.length;i++){users[i]=_this4.state.selectedOption[i].email;}}if(_this4.props.isGroupOwnedRepo){_seafileApi.seafileAPI.shareGroupOwnedRepoToUser(repoID,_this4.state.permission,users).then(function(res){var errorMsg=[];if(res.data.failed.length>0){for(var _i=0;_i<res.data.failed.length;_i++){errorMsg[_i]=res.data.failed[_i];}}// todo modify api\nvar items=res.data.success.map(function(item){var sharedItem={'user_info':{'nickname':item.user_name,'name':item.user_email},'permission':item.permission,'share_type':'user'};return sharedItem;});_this4.setState({errorMsg:errorMsg,sharedItems:_this4.state.sharedItems.concat(items),selectedOption:null,permission:'rw'});_this4.refs.userSelect.clearSelect();}).catch(function(error){if(error.response){var message=(0,_constants.gettext)('Library can not be shared to owner.');var errMessage=[];errMessage.push(message);_this4.setState({errorMsg:errMessage,selectedOption:null});}});}else{_seafileApi.seafileAPI.shareFolder(repoID,path,'user',_this4.state.permission,users).then(function(res){var errorMsg=[];if(res.data.failed.length>0){for(var _i2=0;_i2<res.data.failed.length;_i2++){errorMsg[_i2]=res.data.failed[_i2];}}_this4.setState({errorMsg:errorMsg,sharedItems:_this4.state.sharedItems.concat(res.data.success),selectedOption:null,permission:'rw'});_this4.refs.userSelect.clearSelect();}).catch(function(error){if(error.response){var message=(0,_constants.gettext)('Library can not be shared to owner.');var errMessage=[];errMessage.push(message);_this4.setState({errorMsg:errMessage,selectedOption:null});}});}};_this4.deleteShareItem=function(username){var path=_this4.props.itemPath;var repoID=_this4.props.repoID;if(_this4.props.isGroupOwnedRepo){_seafileApi.seafileAPI.deleteGroupOwnedRepoSharedUserItem(repoID,username).then(function(res){_this4.setState({sharedItems:_this4.state.sharedItems.filter(function(item){return item.user_info.name!==username;})});});}else{_seafileApi.seafileAPI.deleteShareToUserItem(repoID,path,'user',username).then(function(res){_this4.setState({sharedItems:_this4.state.sharedItems.filter(function(item){return item.user_info.name!==username;})});});}};_this4.onChangeUserPermission=function(item,permission){var path=_this4.props.itemPath;var repoID=_this4.props.repoID;var username=item.user_info.name;if(_this4.props.isGroupOwnedRepo){_seafileApi.seafileAPI.modifyGroupOwnedRepoUserSharedPermission(repoID,permission,username).then(function(){_this4.updateSharedItems(item,permission);});}else{_seafileApi.seafileAPI.updateShareToUserItemPermission(repoID,path,'user',username,permission).then(function(){_this4.updateSharedItems(item,permission);});}};_this4.updateSharedItems=function(item,permission){var username=item.user_info.name;var sharedItems=_this4.state.sharedItems.map(function(sharedItem){var sharedItemUsername=sharedItem.user_info.name;if(username===sharedItemUsername){sharedItem.permission=permission;}sharedItem.is_admin=permission==='admin'?true:false;return sharedItem;});_this4.setState({sharedItems:sharedItems});};_this4.state={selectedOption:null,errorMsg:[],permission:'rw',sharedItems:[]};_this4.options=[];_this4.permissions=[];if(_this4.props.itemType==='library'){_this4.permissions=['rw','r','admin','cloud-edit','preview'];}else if(_this4.props.itemType==='dir'){_this4.permissions=['rw','r','cloud-edit','preview'];}if(_this4.props.isGroupOwnedRepo||!_constants.isPro){_this4.permissions=['rw','r'];}return _this4;}_createClass(ShareToUser,[{key:'componentDidMount',value:function componentDidMount(){var _this5=this;var path=this.props.itemPath;var repoID=this.props.repoID;_seafileApi.seafileAPI.listSharedItems(repoID,path,'user').then(function(res){if(res.data.length!==0){_this5.setState({sharedItems:res.data});}});}},{key:'render',value:function render(){var sharedItems=this.state.sharedItems;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement('table',null,_react2.default.createElement('thead',null,_react2.default.createElement('tr',null,_react2.default.createElement('th',{width:'50%'},(0,_constants.gettext)('User')),_react2.default.createElement('th',{width:'35%'},(0,_constants.gettext)('Permission')),_react2.default.createElement('th',{width:'15%'}))),_react2.default.createElement('tbody',null,_react2.default.createElement('tr',null,_react2.default.createElement('td',null,_react2.default.createElement(_userSelect2.default,{ref:'userSelect',isMulti:true,className:'reviewer-select',placeholder:(0,_constants.gettext)('Select users...'),onSelectChange:this.handleSelectChange})),_react2.default.createElement('td',null,_react2.default.createElement(_sharePermissionEditor2.default,{isTextMode:false,isEditIconShow:false,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission})),_react2.default.createElement('td',null,_react2.default.createElement(_reactstrap.Button,{onClick:this.shareToUser},(0,_constants.gettext)('Submit')))),this.state.errorMsg.length>0&&this.state.errorMsg.map(function(item,index){var errMessage='';if(item.email){errMessage=item.email+': '+item.error_msg;}else{errMessage=item;}return _react2.default.createElement('tr',{key:index},_react2.default.createElement('td',{colSpan:3},_react2.default.createElement('p',{className:'error'},errMessage)));}))),_react2.default.createElement('div',{className:'share-list-container'},_react2.default.createElement('table',{className:'table-thead-hidden'},_react2.default.createElement('thead',null,_react2.default.createElement('tr',null,_react2.default.createElement('th',{width:'50%'},(0,_constants.gettext)('User')),_react2.default.createElement('th',{width:'35%'},(0,_constants.gettext)('Permission')),_react2.default.createElement('th',{width:'15%'}))),_react2.default.createElement(UserList,{items:sharedItems,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission}))));}}]);return ShareToUser;}(_react2.default.Component);ShareToUser.propTypes=propTypes;exports.default=ShareToUser;\n\n/***/ }),\n\n/***/ 50:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _reactstrap=__webpack_require__(5);var _reactSelect=__webpack_require__(37);var _reactSelect2=_interopRequireDefault(_reactSelect);var _animated=__webpack_require__(85);var _animated2=_interopRequireDefault(_animated);var _constants=__webpack_require__(2);var _seafileApi=__webpack_require__(3);var _sharePermissionEditor=__webpack_require__(19);var _sharePermissionEditor2=_interopRequireDefault(_sharePermissionEditor);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var GroupItem=function(_React$Component){_inherits(GroupItem,_React$Component);function GroupItem(props){_classCallCheck(this,GroupItem);var _this=_possibleConstructorReturn(this,(GroupItem.__proto__||Object.getPrototypeOf(GroupItem)).call(this,props));_this.onMouseEnter=function(){_this.setState({isOperationShow:true});};_this.onMouseLeave=function(){_this.setState({isOperationShow:false});};_this.deleteShareItem=function(){var item=_this.props.item;_this.props.deleteShareItem(item.group_info.id);};_this.onChangeUserPermission=function(permission){var item=_this.props.item;_this.props.onChangeUserPermission(item,permission);};_this.state={isOperationShow:false};return _this;}_createClass(GroupItem,[{key:'render',value:function render(){var item=this.props.item;return _react2.default.createElement('tr',{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},_react2.default.createElement('td',{className:'name'},item.group_info.name),_react2.default.createElement('td',null,_react2.default.createElement(_sharePermissionEditor2.default,{isTextMode:true,isEditIconShow:this.state.isOperationShow,currentPermission:item.permission,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})),_react2.default.createElement('td',null,_react2.default.createElement('span',{className:'sf2-icon-x3 action-icon '+(this.state.isOperationShow?'':'hide'),onClick:this.deleteShareItem,title:(0,_constants.gettext)('Delete')})));}}]);return GroupItem;}(_react2.default.Component);var GroupList=function(_React$Component2){_inherits(GroupList,_React$Component2);function GroupList(){_classCallCheck(this,GroupList);return _possibleConstructorReturn(this,(GroupList.__proto__||Object.getPrototypeOf(GroupList)).apply(this,arguments));}_createClass(GroupList,[{key:'render',value:function render(){var _this3=this;var items=this.props.items;return _react2.default.createElement('tbody',null,items.map(function(item,index){return _react2.default.createElement(GroupItem,{key:index,item:item,permissions:_this3.props.permissions,deleteShareItem:_this3.props.deleteShareItem,onChangeUserPermission:_this3.props.onChangeUserPermission});}));}}]);return GroupList;}(_react2.default.Component);var propTypes={isGroupOwnedRepo:_propTypes2.default.bool,itemPath:_propTypes2.default.string.isRequired,itemType:_propTypes2.default.string.isRequired,repoID:_propTypes2.default.string.isRequired};var NoOptionsMessage=function NoOptionsMessage(props){return _react2.default.createElement('div',_extends({},props.innerProps,{style:{margin:'6px 10px',textAlign:'center',color:'hsl(0,0%,50%)'}}),(0,_constants.gettext)('Group not found'));};var ShareToGroup=function(_React$Component3){_inherits(ShareToGroup,_React$Component3);function ShareToGroup(props){_classCallCheck(this,ShareToGroup);var _this4=_possibleConstructorReturn(this,(ShareToGroup.__proto__||Object.getPrototypeOf(ShareToGroup)).call(this,props));_this4.handleSelectChange=function(option){_this4.setState({selectedOption:option});};_this4.loadOptions=function(){_seafileApi.seafileAPI.shareableGroups().then(function(res){_this4.options=[];for(var i=0;i<res.data.length;i++){var obj={};obj.value=res.data[i].name;obj.id=res.data[i].id;obj.label=res.data[i].name;_this4.options.push(obj);}});};_this4.listSharedGroups=function(){var path=_this4.props.itemPath;var repoID=_this4.props.repoID;_seafileApi.seafileAPI.listSharedItems(repoID,path,'group').then(function(res){if(res.data.length!==0){_this4.setState({sharedItems:res.data});}});};_this4.setPermission=function(permission){_this4.setState({permission:permission});};_this4.shareToGroup=function(){var groups=[];var path=_this4.props.itemPath;var repoID=_this4.props.repoID;var isGroupOwnedRepo=_this4.props.isGroupOwnedRepo;if(_this4.state.selectedOption&&_this4.state.selectedOption.length>0){for(var i=0;i<_this4.state.selectedOption.length;i++){groups[i]=_this4.state.selectedOption[i].id;}}if(isGroupOwnedRepo){_seafileApi.seafileAPI.shareGroupOwnedRepoToGroup(repoID,_this4.state.permission,groups).then(function(res){var errorMsg=[];if(res.data.failed.length>0){for(var _i=0;_i<res.data.failed.length;_i++){errorMsg[_i]=res.data.failed[_i];}}// todo modify api\nvar items=res.data.success.map(function(item){var sharedItem={'group_info':{'id':item.group_id,'name':item.group_name},'permission':item.permission,'share_type':'group'};return sharedItem;});_this4.setState({errorMsg:errorMsg,sharedItems:_this4.state.sharedItems.concat(items),selectedOption:null,permission:'rw'});});}else{_seafileApi.seafileAPI.shareFolder(repoID,path,'group',_this4.state.permission,groups).then(function(res){var errorMsg=[];if(res.data.failed.length>0){for(var _i2=0;_i2<res.data.failed.length;_i2++){errorMsg[_i2]=res.data.failed[_i2];}}_this4.setState({errorMsg:errorMsg,sharedItems:_this4.state.sharedItems.concat(res.data.success),selectedOption:null,permission:'rw'});});}};_this4.deleteShareItem=function(groupID){var path=_this4.props.itemPath;var repoID=_this4.props.repoID;if(_this4.props.isGroupOwnedRepo){_seafileApi.seafileAPI.deleteGroupOwnedRepoSharedGroupItem(repoID,groupID).then(function(){_this4.setState({sharedItems:_this4.state.sharedItems.filter(function(item){return item.group_info.id!==groupID;})});});}else{_seafileApi.seafileAPI.deleteShareToGroupItem(repoID,path,'group',groupID).then(function(){_this4.setState({sharedItems:_this4.state.sharedItems.filter(function(item){return item.group_info.id!==groupID;})});});}};_this4.onChangeUserPermission=function(item,permission){var path=_this4.props.itemPath;var repoID=_this4.props.repoID;var groupID=item.group_info.id;if(_this4.props.isGroupOwnedRepo){_seafileApi.seafileAPI.modifyGroupOwnedRepoGroupSharedPermission(repoID,permission,groupID).then(function(){_this4.updateSharedItems(item,permission);});}else{_seafileApi.seafileAPI.updateShareToGroupItemPermission(repoID,path,'group',groupID,permission).then(function(){_this4.updateSharedItems(item,permission);});}};_this4.updateSharedItems=function(item,permission){var groupID=item.group_info.id;var sharedItems=_this4.state.sharedItems.map(function(sharedItem){var sharedItemGroupID=sharedItem.group_info.id;if(groupID===sharedItemGroupID){sharedItem.permission=permission;}return sharedItem;});_this4.setState({sharedItems:sharedItems});};_this4.state={selectedOption:null,errorMsg:[],permission:'rw',sharedItems:[]};_this4.options=[];_this4.permissions=[];if(_this4.props.itemType==='library'){_this4.permissions=['rw','r','admin','cloud-edit','preview'];}else if(_this4.props.itemType==='dir'){_this4.permissions=['rw','r','cloud-edit','preview'];}if(_this4.props.isGroupOwnedRepo||!_constants.isPro){_this4.permissions=['rw','r'];}return _this4;}_createClass(ShareToGroup,[{key:'componentDidMount',value:function componentDidMount(){this.loadOptions();this.listSharedGroups();}},{key:'render',value:function render(){return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement('table',null,_react2.default.createElement('thead',null,_react2.default.createElement('tr',null,_react2.default.createElement('th',{width:'50%'},(0,_constants.gettext)('Group')),_react2.default.createElement('th',{width:'35%'},(0,_constants.gettext)('Permission')),_react2.default.createElement('th',{width:'15%'}))),_react2.default.createElement('tbody',null,_react2.default.createElement('tr',null,_react2.default.createElement('td',null,_react2.default.createElement(_reactSelect2.default,_defineProperty({isMulti:true,onChange:this.handleSelectChange,options:this.options,placeholder:(0,_constants.gettext)('Select a group'),components:(0,_animated2.default)(),maxMenuHeight:200,inputId:'react-select-2-input',value:this.state.selectedOption},'components',{NoOptionsMessage:NoOptionsMessage}))),_react2.default.createElement('td',null,_react2.default.createElement(_sharePermissionEditor2.default,{isTextMode:false,isEditIconShow:false,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission})),_react2.default.createElement('td',null,_react2.default.createElement(_reactstrap.Button,{onClick:this.shareToGroup},(0,_constants.gettext)('Submit')))),this.state.errorMsg.length>0&&this.state.errorMsg.map(function(item,index){var errMessage=item.group_name+': '+item.error_msg;return _react2.default.createElement('tr',{key:index},_react2.default.createElement('td',{colSpan:3},_react2.default.createElement('p',{className:'error'},errMessage)));}))),_react2.default.createElement('div',{className:'share-list-container'},_react2.default.createElement('table',{className:'table-thead-hidden'},_react2.default.createElement('thead',null,_react2.default.createElement('tr',null,_react2.default.createElement('th',{width:'50%'},(0,_constants.gettext)('Group')),_react2.default.createElement('th',{width:'35%'},(0,_constants.gettext)('Permission')),_react2.default.createElement('th',{width:'15%'}))),_react2.default.createElement(GroupList,{items:this.state.sharedItems,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission}))));}}]);return ShareToGroup;}(_react2.default.Component);ShareToGroup.propTypes=propTypes;exports.default=ShareToGroup;\n\n/***/ }),\n\n/***/ 51:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _moment=__webpack_require__(6);var _moment2=_interopRequireDefault(_moment);var _copyToClipboard=__webpack_require__(39);var _copyToClipboard2=_interopRequireDefault(_copyToClipboard);var _reactstrap=__webpack_require__(5);var _constants=__webpack_require__(2);var _seafileApi=__webpack_require__(3);var _sharedLinkInfo=__webpack_require__(40);var _sharedLinkInfo2=_interopRequireDefault(_sharedLinkInfo);var _toast=__webpack_require__(7);var _toast2=_interopRequireDefault(_toast);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={itemPath:_propTypes2.default.string.isRequired,repoID:_propTypes2.default.string.isRequired,closeShareDialog:_propTypes2.default.func.isRequired};var GenerateShareLink=function(_React$Component){_inherits(GenerateShareLink,_React$Component);function GenerateShareLink(props){_classCallCheck(this,GenerateShareLink);var _this=_possibleConstructorReturn(this,(GenerateShareLink.__proto__||Object.getPrototypeOf(GenerateShareLink)).call(this,props));_this.getShareLink=function(){var path=_this.props.itemPath;var repoID=_this.props.repoID;_seafileApi.seafileAPI.getShareLink(repoID,path).then(function(res){if(res.data.length!==0){var sharedLinkInfo=new _sharedLinkInfo2.default(res.data[0]);_this.setState({sharedLinkInfo:sharedLinkInfo});}});};_this.onPasswordInputChecked=function(){_this.setState({isShowPasswordInput:!_this.state.isShowPasswordInput,password:'',passwdnew:'',errorInfo:''});};_this.togglePasswordVisible=function(){_this.setState({isPasswordVisible:!_this.state.isPasswordVisible});};_this.generatePassword=function(){var val=Math.random().toString(36).substr(5);_this.setState({password:val,passwdnew:val});};_this.inputPassword=function(e){var passwd=e.target.value.trim();_this.setState({password:passwd});};_this.inputPasswordNew=function(e){var passwd=e.target.value.trim();_this.setState({passwdnew:passwd});};_this.setPermission=function(permission){if(permission=='previewAndDownload'){_this.permissions={'can_edit':false,'can_download':true};}else{_this.permissions={'can_edit':false,'can_download':false};}};_this.generateShareLink=function(){var isValid=_this.validateParamsInput();if(isValid){_this.setState({errorInfo:''});var _this$props=_this.props,itemPath=_this$props.itemPath,repoID=_this$props.repoID;var _this$state=_this.state,password=_this$state.password,expireDays=_this$state.expireDays;var permissions=_this.permissions;permissions=JSON.stringify(permissions);_seafileApi.seafileAPI.createShareLink(repoID,itemPath,password,expireDays,permissions).then(function(res){var sharedLinkInfo=new _sharedLinkInfo2.default(res.data);_this.setState({sharedLinkInfo:sharedLinkInfo});});}};_this.onCopySharedLink=function(){var sharedLink=_this.state.sharedLinkInfo.link;(0,_copyToClipboard2.default)(sharedLink);_toast2.default.success((0,_constants.gettext)('Share link is copied to the clipboard.'));_this.props.closeShareDialog();};_this.onCopyDownloadLink=function(){var downloadLink=_this.state.sharedLinkInfo.link+'?dl';(0,_copyToClipboard2.default)(downloadLink);_toast2.default.success((0,_constants.gettext)('Direct download link is copied to the clipboard.'));_this.props.closeShareDialog();};_this.deleteShareLink=function(){var sharedLinkInfo=_this.state.sharedLinkInfo;_seafileApi.seafileAPI.deleteShareLink(sharedLinkInfo.token).then(function(){_this.setState({password:'',passwordnew:'',isShowPasswordInput:false,expireDays:'',isExpireChecked:false,errorInfo:'',sharedLinkInfo:null,isNoticeMessageShow:false});_this.permissions={'can_edit':false,'can_download':true};});};_this.onExpireChecked=function(e){_this.setState({isExpireChecked:e.target.checked});};_this.onExpireDaysChanged=function(e){var day=e.target.value.trim();_this.setState({expireDays:day});};_this.validateParamsInput=function(){var _this$state2=_this.state,isShowPasswordInput=_this$state2.isShowPasswordInput,password=_this$state2.password,passwdnew=_this$state2.passwdnew,isExpireChecked=_this$state2.isExpireChecked,expireDays=_this$state2.expireDays;// validate password\nif(isShowPasswordInput){if(password.length===0){_this.setState({errorInfo:'Please enter password'});return false;}if(password.length<8){_this.setState({errorInfo:'Password is too short'});return false;}if(password!==passwdnew){_this.setState({errorInfo:'Passwords don\\'t match'});return false;}}// validate days\n// no limit\nvar reg=/^\\d+$/;if(_this.isExpireDaysNoLimit){if(isExpireChecked){if(!expireDays){_this.setState({errorInfo:'Please enter days'});return false;}var flag=reg.test(expireDays);if(!flag){_this.setState({errorInfo:'Please enter a non-negative integer'});return false;}_this.setState({expireDays:parseInt(expireDays)});}}else{if(!expireDays){_this.setState({errorInfo:'Please enter days'});return false;}var _flag=reg.test(expireDays);if(!_flag){_this.setState({errorInfo:'Please enter a non-negative integer'});return false;}expireDays=parseInt(expireDays);var minDays=parseInt(_constants.shareLinkExpireDaysMin);var maxDays=parseInt(_constants.shareLinkExpireDaysMax);if(minDays!==0&&maxDays!==maxDays){if(expireDays<minDays){_this.setState({errorInfo:'Please enter valid days'});return false;}}if(minDays===0&&maxDays!==0){if(expireDays>maxDays){_this.setState({errorInfo:'Please enter valid days'});return false;}}if(minDays!==0&&maxDays!==0){if(expireDays<minDays||expireDays<maxDays){_this.setState({errorInfo:'Please enter valid days'});return false;}}_this.setState({expireDays:expireDays});}return true;};_this.onNoticeMessageToggle=function(){_this.setState({isNoticeMessageShow:!_this.state.isNoticeMessageShow});};_this.state={isValidate:false,isShowPasswordInput:false,isPasswordVisible:false,isExpireChecked:false,password:'',passwdnew:'',expireDays:'',errorInfo:'',sharedLinkInfo:null,isNoticeMessageShow:false};_this.permissions={'can_edit':false,'can_download':true};_this.isExpireDaysNoLimit=parseInt(_constants.shareLinkExpireDaysMin)===0&&parseInt(_constants.shareLinkExpireDaysMax)===0;return _this;}_createClass(GenerateShareLink,[{key:'componentDidMount',value:function componentDidMount(){this.getShareLink();}},{key:'render',value:function render(){var _this2=this;if(this.state.sharedLinkInfo){var sharedLinkInfo=this.state.sharedLinkInfo;return _react2.default.createElement('div',null,_react2.default.createElement(_reactstrap.Form,{className:'mb-4'},_react2.default.createElement(_reactstrap.FormGroup,{className:'mb-0'},_react2.default.createElement('dt',{className:'text-secondary font-weight-normal'},(0,_constants.gettext)('Link:')),_react2.default.createElement('dd',{className:'d-flex'},_react2.default.createElement('span',null,sharedLinkInfo.link),' ',sharedLinkInfo.is_expired?_react2.default.createElement('span',{className:'err-message'},'(',(0,_constants.gettext)('Expired'),')'):_react2.default.createElement('span',{className:'far fa-copy action-icon',onClick:this.onCopySharedLink}))),!sharedLinkInfo.is_dir&&//just for file\n_react2.default.createElement(_reactstrap.FormGroup,{className:'mb-0'},_react2.default.createElement('dt',{className:'text-secondary font-weight-normal'},(0,_constants.gettext)('Direct Download Link:')),_react2.default.createElement('dd',{className:'d-flex'},_react2.default.createElement('span',null,sharedLinkInfo.link,'?dl'),' ',sharedLinkInfo.is_expired?_react2.default.createElement('span',{className:'err-message'},'(',(0,_constants.gettext)('Expired'),')'):_react2.default.createElement('span',{className:'far fa-copy action-icon',onClick:this.onCopyDownloadLink}))),sharedLinkInfo.expire_date&&_react2.default.createElement(_reactstrap.FormGroup,{className:'mb-0'},_react2.default.createElement('dt',{className:'text-secondary font-weight-normal'},(0,_constants.gettext)('Expiration Date:')),_react2.default.createElement('dd',null,(0,_moment2.default)(sharedLinkInfo.expire_date).format('YYYY-MM-DD hh:mm:ss')))),!this.state.isNoticeMessageShow?_react2.default.createElement(_reactstrap.Button,{onClick:this.onNoticeMessageToggle},(0,_constants.gettext)('Delete')):_react2.default.createElement('div',{className:'alert alert-warning'},_react2.default.createElement('h4',{className:'alert-heading'},(0,_constants.gettext)('Are you sure you want to delete the share link?')),_react2.default.createElement('p',{className:'mb-4'},(0,_constants.gettext)('If the share link is deleted, no one will be able to access it any more.')),_react2.default.createElement('button',{className:'btn btn-primary',onClick:this.deleteShareLink},(0,_constants.gettext)('Delete')),' ',_react2.default.createElement('button',{className:'btn btn-secondary',onClick:this.onNoticeMessageToggle},(0,_constants.gettext)('Cancel'))));}else{return _react2.default.createElement(_reactstrap.Form,{className:'generate-share-link'},_react2.default.createElement(_reactstrap.FormGroup,{check:true},_react2.default.createElement(_reactstrap.Label,{check:true},_react2.default.createElement(_reactstrap.Input,{type:'checkbox',onChange:this.onPasswordInputChecked}),'  ',(0,_constants.gettext)('Add password protection'))),this.state.isShowPasswordInput&&_react2.default.createElement(_reactstrap.FormGroup,{className:'link-operation-content'},_react2.default.createElement(_reactstrap.Label,{className:'font-weight-bold'},(0,_constants.gettext)('Password')),' ',_react2.default.createElement('span',{className:'tip'},(0,_constants.gettext)('(at least 8 characters)')),_react2.default.createElement(_reactstrap.InputGroup,{className:'passwd'},_react2.default.createElement(_reactstrap.Input,{type:this.state.isPasswordVisible?'text':'password',value:this.state.password||'',onChange:this.inputPassword}),_react2.default.createElement(_reactstrap.InputGroupAddon,{addonType:'append'},_react2.default.createElement(_reactstrap.Button,{onClick:this.togglePasswordVisible},_react2.default.createElement('i',{className:'link-operation-icon fas '+(this.state.isPasswordVisible?'fa-eye':'fa-eye-slash')})),_react2.default.createElement(_reactstrap.Button,{onClick:this.generatePassword},_react2.default.createElement('i',{className:'link-operation-icon fas fa-magic'})))),_react2.default.createElement(_reactstrap.Label,{className:'font-weight-bold'},(0,_constants.gettext)('Password again')),_react2.default.createElement(_reactstrap.Input,{className:'passwd',type:this.state.isPasswordVisible?'text':'password',value:this.state.passwdnew||'',onChange:this.inputPasswordNew})),this.isExpireDaysNoLimit&&_react2.default.createElement(_reactstrap.FormGroup,{check:true},_react2.default.createElement(_reactstrap.Label,{check:true},_react2.default.createElement(_reactstrap.Input,{className:'expire-checkbox',type:'checkbox',onChange:this.onExpireChecked}),'  ',(0,_constants.gettext)('Add auto expiration'),_react2.default.createElement(_reactstrap.Input,{className:'expire-input',type:'text',value:this.state.expireDays,onChange:this.onExpireDaysChanged,readOnly:!this.state.isExpireChecked}),_react2.default.createElement('span',null,(0,_constants.gettext)('days')))),!this.isExpireDaysNoLimit&&_react2.default.createElement(_reactstrap.FormGroup,{check:true},_react2.default.createElement(_reactstrap.Label,{check:true},_react2.default.createElement(_reactstrap.Input,{className:'expire-checkbox',type:'checkbox',onChange:this.onExpireChecked,checked:true,readOnly:true}),'  ',(0,_constants.gettext)('Add auto expiration'),_react2.default.createElement(_reactstrap.Input,{className:'expire-input',type:'text',value:this.state.expireDays,onChange:this.onExpireDaysChanged}),' ',_react2.default.createElement('span',null,(0,_constants.gettext)('days')),parseInt(_constants.shareLinkExpireDaysMin)!==0&&parseInt(_constants.shareLinkExpireDaysMax)!==0&&_react2.default.createElement('span',null,' (',_constants.shareLinkExpireDaysMin,' - ',_constants.shareLinkExpireDaysMax,' ',(0,_constants.gettext)('days'),')'),parseInt(_constants.shareLinkExpireDaysMin)!==0&&parseInt(_constants.shareLinkExpireDaysMax)===0&&_react2.default.createElement('span',null,' (',(0,_constants.gettext)('Greater than or equal to'),' ',_constants.shareLinkExpireDaysMin,' ',(0,_constants.gettext)('days'),')'),parseInt(_constants.shareLinkExpireDaysMin)===0&&parseInt(_constants.shareLinkExpireDaysMax)!==0&&_react2.default.createElement('span',null,' (',(0,_constants.gettext)('Less than or equal to'),' ',_constants.shareLinkExpireDaysMax,' ',(0,_constants.gettext)('days'),')'))),_react2.default.createElement(_reactstrap.FormGroup,{check:true},_react2.default.createElement(_reactstrap.Label,{check:true},_react2.default.createElement(_reactstrap.Input,{type:'checkbox',checked:true,readOnly:true}),'  ',(0,_constants.gettext)('Set permission'))),_react2.default.createElement(_reactstrap.FormGroup,{check:true,className:'permission'},_react2.default.createElement(_reactstrap.Label,{check:true},_react2.default.createElement(_reactstrap.Input,{type:'radio',name:'radio1',defaultChecked:true,onChange:function onChange(){return _this2.setPermission('previewAndDownload');}}),'  ',(0,_constants.gettext)('Preview and download'))),_react2.default.createElement(_reactstrap.FormGroup,{check:true,className:'permission'},_react2.default.createElement(_reactstrap.Label,{check:true},_react2.default.createElement(_reactstrap.Input,{type:'radio',name:'radio1',onChange:function onChange(){return _this2.setPermission('preview');}}),'  ',(0,_constants.gettext)('Preview only'))),this.state.errorInfo&&_react2.default.createElement(_reactstrap.Alert,{color:'danger',className:'mt-2'},(0,_constants.gettext)(this.state.errorInfo)),_react2.default.createElement(_reactstrap.Button,{onClick:this.generateShareLink},(0,_constants.gettext)('Generate')));}}}]);return GenerateShareLink;}(_react2.default.Component);GenerateShareLink.propTypes=propTypes;exports.default=GenerateShareLink;\n\n/***/ }),\n\n/***/ 52:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _copyToClipboard=__webpack_require__(39);var _copyToClipboard2=_interopRequireDefault(_copyToClipboard);var _reactstrap=__webpack_require__(5);var _constants=__webpack_require__(2);var _seafileApi=__webpack_require__(3);var _sharedUploadInfo=__webpack_require__(41);var _sharedUploadInfo2=_interopRequireDefault(_sharedUploadInfo);var _toast=__webpack_require__(7);var _toast2=_interopRequireDefault(_toast);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var propTypes={itemPath:_propTypes2.default.string.isRequired,repoID:_propTypes2.default.string.isRequired,closeShareDialog:_propTypes2.default.func.isRequired};var GenerateUploadLink=function(_React$Component){_inherits(GenerateUploadLink,_React$Component);function GenerateUploadLink(props){_classCallCheck(this,GenerateUploadLink);var _this=_possibleConstructorReturn(this,(GenerateUploadLink.__proto__||Object.getPrototypeOf(GenerateUploadLink)).call(this,props));_this.getUploadLink=function(){var path=_this.props.itemPath;var repoID=_this.props.repoID;_seafileApi.seafileAPI.getUploadLinks(repoID,path).then(function(res){if(res.data.length!==0){var sharedUploadInfo=new _sharedUploadInfo2.default(res.data[0]);_this.setState({sharedUploadInfo:sharedUploadInfo});}});};_this.addPassword=function(){_this.setState({showPasswordInput:!_this.state.showPasswordInput,password:'',passwdnew:'',errorInfo:''});};_this.togglePasswordVisible=function(){_this.setState({passwordVisible:!_this.state.passwordVisible});};_this.generatePassword=function(){var val=Math.random().toString(36).substr(5);_this.setState({password:val,passwordnew:val});};_this.inputPassword=function(e){_this.setState({password:e.target.value});};_this.inputPasswordNew=function(e){_this.setState({passwordnew:e.target.value});};_this.generateUploadLink=function(){var path=_this.props.itemPath;var repoID=_this.props.repoID;if(_this.state.showPasswordInput&&_this.state.password==''){_this.setState({errorInfo:(0,_constants.gettext)('Please enter password')});}else if(_this.state.showPasswordInput&&_this.state.showPasswordInput&&_this.state.password.length<8){_this.setState({errorInfo:(0,_constants.gettext)('Password is too short')});}else if(_this.state.showPasswordInput&&_this.state.password!==_this.state.passwordnew){_this.setState({errorInfo:(0,_constants.gettext)('Passwords don\\'t match')});}else{_seafileApi.seafileAPI.createUploadLink(repoID,path,_this.state.password).then(function(res){var sharedUploadInfo=new _sharedUploadInfo2.default(res.data);_this.setState({sharedUploadInfo:sharedUploadInfo});});}};_this.onCopyUploadLink=function(){var uploadLink=_this.state.sharedUploadInfo.link;(0,_copyToClipboard2.default)(uploadLink);_toast2.default.success((0,_constants.gettext)('Upload link is copied to the clipboard.'));_this.props.closeShareDialog();};_this.deleteUploadLink=function(){var sharedUploadInfo=_this.state.sharedUploadInfo;_seafileApi.seafileAPI.deleteUploadLink(sharedUploadInfo.token).then(function(){_this.setState({showPasswordInput:false,password:'',passwordnew:'',sharedUploadInfo:null});});};_this.state={showPasswordInput:false,passwordVisible:false,password:'',passwdnew:'',sharedUploadInfo:null};return _this;}_createClass(GenerateUploadLink,[{key:'componentDidMount',value:function componentDidMount(){this.getUploadLink();}},{key:'render',value:function render(){if(this.state.sharedUploadInfo){var sharedUploadInfo=this.state.sharedUploadInfo;return _react2.default.createElement('div',null,_react2.default.createElement(_reactstrap.Form,{className:'mb-4'},_react2.default.createElement(_reactstrap.FormGroup,null,_react2.default.createElement('dt',{className:'text-secondary font-weight-normal'},(0,_constants.gettext)('Upload Link:')),_react2.default.createElement('dd',{className:'d-flex'},_react2.default.createElement('span',null,sharedUploadInfo.link),_react2.default.createElement('span',{className:'far fa-copy action-icon',onClick:this.onCopyUploadLink})))),_react2.default.createElement(_reactstrap.Button,{onClick:this.deleteUploadLink},(0,_constants.gettext)('Delete')));}return _react2.default.createElement(_reactstrap.Form,{className:'generate-upload-link'},_react2.default.createElement(_reactstrap.FormGroup,null,_react2.default.createElement(_reactstrap.FormText,{className:'tip'},(0,_constants.gettext)('You can share the generated link to others and then they can upload files to this directory via the link.'))),_react2.default.createElement(_reactstrap.FormGroup,{check:true},_react2.default.createElement(_reactstrap.Label,{check:true},_react2.default.createElement(_reactstrap.Input,{type:'checkbox',onChange:this.addPassword}),'  ',(0,_constants.gettext)('Add password protection'))),this.state.showPasswordInput&&_react2.default.createElement(_reactstrap.FormGroup,{className:'link-operation-content'},_react2.default.createElement(_reactstrap.Label,{className:'font-weight-bold'},(0,_constants.gettext)('Password')),' ',_react2.default.createElement('span',{className:'tip'},(0,_constants.gettext)('(at least 8 characters)')),_react2.default.createElement(_reactstrap.InputGroup,{className:'passwd'},_react2.default.createElement(_reactstrap.Input,{type:this.state.passwordVisible?'text':'password',value:this.state.password||'',onChange:this.inputPassword}),_react2.default.createElement(_reactstrap.InputGroupAddon,{addonType:'append'},_react2.default.createElement(_reactstrap.Button,{onClick:this.togglePasswordVisible},_react2.default.createElement('i',{className:'link-operation-icon fas '+(this.state.passwordVisible?'fa-eye':'fa-eye-slash')})),_react2.default.createElement(_reactstrap.Button,{onClick:this.generatePassword},_react2.default.createElement('i',{className:'link-operation-icon fas fa-magic'})))),_react2.default.createElement(_reactstrap.Label,{className:'font-weight-bold'},(0,_constants.gettext)('Password again')),_react2.default.createElement(_reactstrap.Input,{className:'passwd',type:this.state.passwordVisible?'text':'password',value:this.state.passwordnew||'',onChange:this.inputPasswordNew})),this.state.errorInfo&&_react2.default.createElement(_reactstrap.Alert,{color:'danger',className:'mt-2'},this.state.errorInfo),_react2.default.createElement(_reactstrap.Button,{className:'generate-link-btn',onClick:this.generateUploadLink},(0,_constants.gettext)('Generate')));}}]);return GenerateUploadLink;}(_react2.default.Component);GenerateUploadLink.propTypes=propTypes;exports.default=GenerateUploadLink;\n\n/***/ }),\n\n/***/ 53:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 541:\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(12);\nmodule.exports = __webpack_require__(543);\n\n\n/***/ }),\n\n/***/ 543:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nvar _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(8);var _reactDom2=_interopRequireDefault(_reactDom);var _markdownEditor=__webpack_require__(548);var _markdownEditor2=_interopRequireDefault(_markdownEditor);var _reactI18next=__webpack_require__(77);var _i18n=__webpack_require__(1132);var _i18n2=_interopRequireDefault(_i18n);__webpack_require__(86);__webpack_require__(87);__webpack_require__(88);__webpack_require__(1146);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var lang=window.app.pageOptions.lang;// Import React!\n_reactDom2.default.render(_react2.default.createElement(_reactI18next.I18nextProvider,{i18n:_i18n2.default,initialLanguage:lang},_react2.default.createElement(_markdownEditor2.default,null)),document.getElementById('root'));\n\n/***/ }),\n\n/***/ 548:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _seafileEditor=__webpack_require__(549);var _seafileEditor2=_interopRequireDefault(_seafileEditor);__webpack_require__(28);var _slate=__webpack_require__(29);var _seafileApi=__webpack_require__(3);var _utils=__webpack_require__(4);var _constants=__webpack_require__(2);var _socket=__webpack_require__(253);var _socket2=_interopRequireDefault(_socket);var _toast=__webpack_require__(7);var _toast2=_interopRequireDefault(_toast);var _modalPortal=__webpack_require__(10);var _modalPortal2=_interopRequireDefault(_modalPortal);var _editFiletagDialog=__webpack_require__(106);var _editFiletagDialog2=_interopRequireDefault(_editFiletagDialog);var _relatedFileDialogs=__webpack_require__(107);var _relatedFileDialogs2=_interopRequireDefault(_relatedFileDialogs);var _shareDialog=__webpack_require__(25);var _shareDialog2=_interopRequireDefault(_shareDialog);var _commentDialog=__webpack_require__(1079);var _commentDialog2=_interopRequireDefault(_commentDialog);var _insertFileDialog=__webpack_require__(1081);var _insertFileDialog2=_interopRequireDefault(_insertFileDialog);var _markdownViewerSlate=__webpack_require__(1082);var _markdownViewerSlate2=_interopRequireDefault(_markdownViewerSlate);var _slate2markdown=__webpack_require__(195);var _localDraftDialog=__webpack_require__(1099);var _localDraftDialog2=_interopRequireDefault(_localDraftDialog);var _diffViewer=__webpack_require__(270);var _diffViewer2=_interopRequireDefault(_diffViewer);var _markdownViewerToolbar=__webpack_require__(1103);var _markdownViewerToolbar2=_interopRequireDefault(_markdownViewerToolbar);var _historyList=__webpack_require__(1104);var _historyList2=_interopRequireDefault(_historyList);var _commentPanel=__webpack_require__(58);var _commentPanel2=_interopRequireDefault(_commentPanel);var _outline=__webpack_require__(1106);var _outline2=_interopRequireDefault(_outline);var _loading=__webpack_require__(11);var _loading2=_interopRequireDefault(_loading);var _slateReact=__webpack_require__(96);__webpack_require__(1107);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var CryptoJS=__webpack_require__(1108);var URL=__webpack_require__(202);var _window$app$pageOptio=window.app.pageOptions,repoID=_window$app$pageOptio.repoID,repoName=_window$app$pageOptio.repoName,filePath=_window$app$pageOptio.filePath,fileName=_window$app$pageOptio.fileName,mode=_window$app$pageOptio.mode,draftID=_window$app$pageOptio.draftID,isDraft=_window$app$pageOptio.isDraft,hasDraft=_window$app$pageOptio.hasDraft;var _window$app$config=window.app.config,siteRoot=_window$app$config.siteRoot,serviceUrl=_window$app$config.serviceUrl,seafileCollabServer=_window$app$config.seafileCollabServer;var userInfo=window.app.userInfo;var userName=userInfo.username;var dirPath='/';function getImageFileNameWithTimestamp(){var d=Date.now();return'image-'+d.toString()+'.png';}var EditorUtilities=function(){function EditorUtilities(){var _this=this;_classCallCheck(this,EditorUtilities);this.uploadImage=function(imageFile){return _seafileApi.seafileAPI.getUploadLink(repoID,dirPath).then(function(res){var uploadLinkComponent=res.data;var uploadLink=uploadLinkComponent+'?ret-json=1';var name=getImageFileNameWithTimestamp();var blob=imageFile.slice(0,-1,'image/png');var newFile=new File([blob],name,{type:'image/png'});var formData=new FormData();formData.append('parent_dir','/');formData.append('relative_path','images/auto-upload');formData.append('file',newFile);return{uploadLink:uploadLink,formData:formData};}).then(function(_ref){var uploadLink=_ref.uploadLink,formData=_ref.formData;return _seafileApi.seafileAPI.uploadImage(uploadLink,formData);}).then(function(res){var resArr=res.data[0];var filename=resArr.name;return _this._getImageURL(filename);});};this.uploadLocalImage=function(imageFile){return _seafileApi.seafileAPI.getUploadLink(repoID,dirPath).then(function(res){var uploadLink=res.data+'?ret-json=1';var newFile=new File([imageFile],imageFile.name,{type:imageFile.type});var formData=new FormData();formData.append('parent_dir','/');formData.append('relative_path','images/auto-upload');formData.append('file',newFile);return _seafileApi.seafileAPI.uploadImage(uploadLink,formData);}).then(function(res){return _this._getImageURL(res.data[0].name);});};this.listFileTags=function(){return _seafileApi.seafileAPI.listFileTags(repoID,filePath);};this.listRepoTags=function(){return _seafileApi.seafileAPI.listRepoTags(repoID);};this.repoID=repoID;this.filePath=filePath;this.serviceUrl=serviceUrl;this.name=userInfo.name;this.contact_email=userInfo.contact_email;this.fileName=fileName;this.userName=userName;}_createClass(EditorUtilities,[{key:'saveContent',value:function saveContent(content){return _seafileApi.seafileAPI.getUpdateLink(repoID,dirPath).then(function(res){var uploadLink=res.data;return _seafileApi.seafileAPI.updateFile(uploadLink,filePath,fileName,content);});}},{key:'unstarItem',value:function unstarItem(){return _seafileApi.seafileAPI.unstarItem(this.repoID,this.filePath);}},{key:'starItem',value:function starItem(){return _seafileApi.seafileAPI.starItem(this.repoID,this.filePath);}},{key:'getParentDectionaryUrl',value:function getParentDectionaryUrl(){var parentPath=this.filePath.substring(0,this.filePath.lastIndexOf('/'));var libName=encodeURIComponent(repoName);var path=_utils.Utils.encodePath(parentPath);return this.serviceUrl+'/library/'+this.repoID+'/'+libName+path;}},{key:'_getImageURL',value:function _getImageURL(fileName){var url=this.serviceUrl+'/lib/'+repoID+'/file/images/auto-upload/'+fileName+'?raw=1';return url;}},{key:'getFileURL',value:function getFileURL(fileNode){var url;if(fileNode.type==='file'){if(fileNode.isImage()){url=serviceUrl+'/lib/'+repoID+'/file'+_utils.Utils.encodePath(fileNode.path())+'?raw=1';}else{url=serviceUrl+'/lib/'+repoID+'/file'+_utils.Utils.encodePath(fileNode.path());}}else{url=serviceUrl+'/library/'+repoID+'/'+encodeURIComponent(repoName)+_utils.Utils.encodePath(fileNode.path());}return url;}},{key:'isInternalFileLink',value:function isInternalFileLink(url){var re=new RegExp(this.serviceUrl+'/lib/[0-9a-f-]{36}/file.*');return re.test(url);}},{key:'isInternalDirLink',value:function isInternalDirLink(url){var re=new RegExp(serviceUrl+'/library/'+'[0-9a-f\\-]{36}.*');return re.test(url);}},{key:'getFiles',value:function getFiles(){return _seafileApi.seafileAPI.listDir(repoID,dirPath,{recursive:true}).then(function(response){var files=response.data.dirent_list.map(function(item){return{name:item.name,type:item.type==='dir'?'dir':'file',parent_path:item.parent_dir};});return files;});}},{key:'getFileHistory',value:function getFileHistory(){return _seafileApi.seafileAPI.getFileHistory(repoID,filePath);}},{key:'getFileInfo',value:function getFileInfo(){return _seafileApi.seafileAPI.getFileInfo(repoID,filePath);}},{key:'getRepoInfo',value:function getRepoInfo(newRepoID){return _seafileApi.seafileAPI.getRepoInfo(newRepoID);}},{key:'getInternalLink',value:function getInternalLink(){return _seafileApi.seafileAPI.getInternalLink(repoID,filePath);}},{key:'getShareLink',value:function getShareLink(){return _seafileApi.seafileAPI.getShareLink(repoID,filePath);}},{key:'createShareLink',value:function createShareLink(repoID,filePath,userPassword,userValidDays,permissions){return _seafileApi.seafileAPI.createShareLink(repoID,filePath,userPassword,userValidDays,permissions);}},{key:'deleteShareLink',value:function deleteShareLink(token){return _seafileApi.seafileAPI.deleteShareLink(token);}},{key:'getDraftKey',value:function getDraftKey(){return repoID+filePath;}},{key:'getFileContent',value:function getFileContent(url){return _seafileApi.seafileAPI.getFileContent(url);}},{key:'listFileHistoryRecords',value:function listFileHistoryRecords(page,perPage){return _seafileApi.seafileAPI.listFileHistoryRecords(repoID,filePath,page,perPage);}},{key:'getFileHistoryVersion',value:function getFileHistoryVersion(commitID,filePath){return _seafileApi.seafileAPI.getFileRevision(repoID,commitID,filePath);}},{key:'getCommentsNumber',value:function getCommentsNumber(){return _seafileApi.seafileAPI.getCommentsNumber(this.repoID,filePath);}},{key:'postComment',value:function postComment(comment,detail){return _seafileApi.seafileAPI.postComment(this.repoID,this.filePath,comment,detail);}},{key:'listComments',value:function listComments(){return _seafileApi.seafileAPI.listComments(this.repoID,this.filePath);}},{key:'updateComment',value:function updateComment(commentID,resolved,detail,newComment){return _seafileApi.seafileAPI.updateComment(this.repoID,commentID,resolved,detail,newComment);}},{key:'deleteComment',value:function deleteComment(commentID){return _seafileApi.seafileAPI.deleteComment(this.repoID,commentID);}},{key:'getUserAvatar',value:function getUserAvatar(size){return _seafileApi.seafileAPI.getUserAvatar(userName,size);}},{key:'goDraftPage',value:function goDraftPage(){window.location.href=serviceUrl+'/drafts/'+draftID+'/';}},{key:'createDraftFile',value:function createDraftFile(){return _seafileApi.seafileAPI.createDraft(repoID,filePath).then(function(res){window.location.href=serviceUrl+'/lib/'+res.data.origin_repo_id+'/file'+_utils.Utils.encodePath(res.data.draft_file_path)+'?mode=edit';});}},{key:'publishDraftFile',value:function publishDraftFile(){return _seafileApi.seafileAPI.publishDraft(draftID).then(function(res){window.location.href=serviceUrl+'/lib/'+repoID+'/file'+_utils.Utils.encodePath(res.data.published_file_path);});}},{key:'fileMetaData',value:function fileMetaData(){return _seafileApi.seafileAPI.fileMetaData(repoID,filePath);}},{key:'markdownLint',value:function markdownLint(slateValue){return _seafileApi.seafileAPI.markdownLint(slateValue);}}]);return EditorUtilities;}();var editorUtilities=new EditorUtilities();var MarkdownEditor=function(_React$Component){_inherits(MarkdownEditor,_React$Component);function MarkdownEditor(props){_classCallCheck(this,MarkdownEditor);var _this2=_possibleConstructorReturn(this,(MarkdownEditor.__proto__||Object.getPrototypeOf(MarkdownEditor)).call(this,props));_this2.emitSwitchEditor=function(){var is_editing=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(userInfo&&_this2.state.collabServer){var _this2$state$fileInfo=_this2.state.fileInfo,_repoID=_this2$state$fileInfo.repoID,path=_this2$state$fileInfo.path;_this2.socket.emit('presence',{request:'editing',doc_id:CryptoJS.MD5(_repoID+path).toString(),user:userInfo,is_editing:is_editing});}};_this2.toggleCancel=function(){_this2.setState({showRelatedFileDialog:false,showEditFileTagDialog:false,showMarkdownEditorDialog:false,showShareLinkDialog:false,showCommentDialog:false,showInsertFileDialog:false});};_this2.setEditorMode=function(type){_this2.setState({editorMode:type});};_this2.setDraftValue=function(type,value){if(type==='rich'){_this2.draftRichValue=value;}else{_this2.draftPlainValue=value;}};_this2.setContent=function(str){var value=(0,_slate2markdown.deserialize)(str);_this2.setState({markdownContent:str,value:value});};_this2.checkDraft=function(){var draftKey=editorUtilities.getDraftKey();var draft=localStorage.getItem(draftKey);var that=_this2;if(draft){that.setState({localDraftDialog:true});that.localDraft=draft;localStorage.removeItem(draftKey);}};_this2.useDraft=function(){_this2.setState({localDraftDialog:false,loading:false,markdownContent:_this2.localDraft,editorMode:'rich'});_this2.emitSwitchEditor(true);};_this2.deleteDraft=function(){if(_this2.state.localDraftDialog){_this2.setState({localDraftDialog:false,loading:false});}else{var draftKey=editorUtilities.getDraftKey();localStorage.removeItem(draftKey);}};_this2.closeDraftDialog=function(){_this2.setState({localDraftDialog:false});};_this2.clearTimer=function(){clearTimeout(_this2.timer);_this2.timer=null;};_this2.openDialogs=function(option){switch(option){case'related_files':if(_this2.state.relatedFiles.length>0){_this2.setState({showRelatedFileDialog:true,showMarkdownEditorDialog:true,viewMode:'list_related_file'});}else{_this2.setState({showRelatedFileDialog:true,showMarkdownEditorDialog:true,viewMode:'add_related_file'});}break;case'tags':_this2.setState({showEditFileTagDialog:true,showMarkdownEditorDialog:true});break;case'share_link':_this2.setState({showMarkdownEditorDialog:true,showShareLinkDialog:true});break;case'comment':_this2.setState({showMarkdownEditorDialog:true,showCommentDialog:true});break;case'insert_file':_this2.setState({showMarkdownEditorDialog:true,showInsertFileDialog:true});break;default:return;}};_this2.listRelatedFiles=function(){_seafileApi.seafileAPI.listRelatedFiles(repoID,filePath).then(function(res){_this2.setState({relatedFiles:res.data.related_files});});};_this2.listFileTags=function(){_seafileApi.seafileAPI.listFileTags(repoID,filePath).then(function(res){var fileTagList=res.data.file_tags;for(var i=0,length=fileTagList.length;i<length;i++){fileTagList[i].id=fileTagList[i].file_tag_id;}_this2.setState({fileTagList:fileTagList});});};_this2.onRelatedFileChange=function(){_this2.listRelatedFiles();};_this2.onFileTagChanged=function(){_this2.listFileTags();};_this2.setFileInfoMtime=function(fileInfo){_this2.setState({fileInfo:Object.assign({},_this2.state.fileInfo,{mtime:fileInfo.mtime,id:fileInfo.id,lastModifier:fileInfo.last_modifier_name})});};_this2.toggleStar=function(){var starrd=_this2.state.fileInfo.starred;if(starrd){editorUtilities.unstarItem().then(function(response){_this2.setState({fileInfo:Object.assign({},_this2.state.fileInfo,{starred:!starrd})});});}else if(!starrd){editorUtilities.starItem().then(function(response){_this2.setState({fileInfo:Object.assign({},_this2.state.fileInfo,{starred:!starrd})});});}};_this2.autoSaveDraft=function(){var that=_this2;if(that.timer){return;}else{that.timer=setTimeout(function(){var str='';if(_this2.state.editorMode=='rich'){var value=_this2.draftRichValue;str=(0,_slate2markdown.serialize)(value.toJSON());}else if(_this2.state.editorMode=='plain'){str=_this2.draftPlainValue;}var draftKey=editorUtilities.getDraftKey();localStorage.setItem(draftKey,str);that.setState({showDraftSaved:true});setTimeout(function(){that.setState({showDraftSaved:false});},3000);that.timer=null;},60000);}};_this2.backToParentDirectory=function(){window.location.href=editorUtilities.getParentDectionaryUrl();};_this2.onEdit=function(event){event.preventDefault();_this2.setEditorMode('rich');};_this2.toggleShareLinkDialog=function(){_this2.openDialogs('share_link');};_this2.getCommentsNumber=function(){editorUtilities.getCommentsNumber().then(function(res){var commentsNumber=res.data[Object.getOwnPropertyNames(res.data)[0]];_this2.setState({commentsNumber:commentsNumber});});};_this2.onCommentAdded=function(){_this2.getCommentsNumber();_this2.toggleCancel();};_this2.showDiffViewer=function(){_this2.setState({loadingDiff:false});};_this2.setDiffViewerContent=function(markdownContent,oldMarkdownContent){_this2.setState({markdownContent:markdownContent,oldMarkdownContent:oldMarkdownContent});_this2.showDiffViewer();};_this2.reloadDiffContent=function(){_this2.setState({loadingDiff:true});};_this2.setBtnPosition=function(e){if(!_this2.state.isShowComments)return;var nativeSelection=window.getSelection();if(!nativeSelection.rangeCount){_this2.range=null;return;}if(nativeSelection.isCollapsed===false){var nativeRange=nativeSelection.getRangeAt(0);var focusNode=nativeSelection.focusNode;if(focusNode.tagName==='I'||focusNode.nodeType!==3&&focusNode.getAttribute('class')==='language-type'){// fix select last paragraph\nvar fragment=nativeRange.cloneContents();var startNode=fragment.firstChild.firstChild;if(!startNode)return;var newNativeRange=document.createRange();newNativeRange.setStartBefore(startNode);newNativeRange.setEndAfter(startNode);var editor={value:_this2.state.value};_this2.range=(0,_slateReact.findRange)(nativeRange,editor);}else{var _editor={value:_this2.state.value};_this2.range=(0,_slateReact.findRange)(nativeRange,_editor);}if(!_this2.range)return;var rect=nativeRange.getBoundingClientRect();// fix Safari bug\nif(navigator.userAgent.indexOf('Chrome')<0&&navigator.userAgent.indexOf('Safari')>0){if(nativeRange.collapsed&&rect.top==0&&rect.height==0){if(nativeRange.startOffset==0){nativeRange.setEnd(nativeRange.endContainer,1);}else{nativeRange.setStart(nativeRange.startContainer,nativeRange.startOffset-1);}rect=nativeRange.getBoundingClientRect();if(rect.top==0&&rect.height==0){if(nativeRange.getClientRects().length){rect=nativeRange.getClientRects()[0];}}}}var style=_this2.refs.commentbtn.style;style.top=rect.top-63+_this2.refs.markdownContainer.scrollTop+'px';style.right='0px';}else{var _style=_this2.refs.commentbtn.style;_style.top='-1000px';}};_this2.addComment=function(e){e.stopPropagation();_this2.getQuote();_this2.openDialogs('comment');};_this2.getQuote=function(){var range=_this2.range;if(!range)return;var document=_this2.state.value.document;var _range=range,anchor=_range.anchor,focus=_range.focus;var anchorText=document.getNode(anchor.key);var focusText=document.getNode(focus.key);var anchorInline=document.getClosestInline(anchor.key);var focusInline=document.getClosestInline(focus.key);// COMPAT: If the selection is at the end of a non-void inline node, and\n// there is a node after it, put it in the node after instead. This\n// standardizes the behavior, since it's indistinguishable to the user.\nif(anchorInline&&anchor.offset==anchorText.text.length){var block=document.getClosestBlock(anchor.key);var nextText=block.getNextText(anchor.key);if(nextText){range=range.moveAnchorTo(nextText.key,0);}}if(focusInline&&focus.offset==focusText.text.length){var _block=document.getClosestBlock(focus.key);var _nextText=_block.getNextText(focus.key);if(_nextText){range=range.moveFocusTo(_nextText.key,0);}}var fragment=document.getFragmentAtRange(range);var nodes=_this2.removeNullNode(fragment.nodes);var newFragment=_slate.Document.create({nodes:nodes});var newValue=_slate.Value.create({document:newFragment});_this2.quote=(0,_slate2markdown.serialize)(newValue.toJSON());var selection=document.createSelection(range);selection=selection.setIsFocused(true);_this2.setState({commentPosition:selection.anchor.path});};_this2.removeNullNode=function(oldNodes){var newNodes=[];oldNodes.map(function(node){var text=node.text.trim();var childNodes=node.nodes;if(!text)return;if(childNodes&&childNodes.size===1||!childNodes){newNodes.push(node);}else if(childNodes.size>1){var nodes=_this2.removeNullNode(childNodes);var newNode=_slate.Block.create({nodes:nodes,data:node.data,key:node.key,type:node.type});newNodes.push(newNode);}});return newNodes;};_this2.scrollToNode=function(node){var url=new URL(window.location.href);url.set('hash','user-content-'+node.text);window.location.href=url.toString();};_this2.findScrollContainer=function(el,window){var parent=el.parentNode;var OVERFLOWS=['auto','overlay','scroll'];var scroller=void 0;while(!scroller){if(!parent.parentNode)break;var style=window.getComputedStyle(parent);var overflowY=style.overflowY;if(OVERFLOWS.includes(overflowY)){scroller=parent;break;}parent=parent.parentNode;}if(!scroller){return window.document.body;}return scroller;};_this2.scrollToQuote=function(path){if(!path)return;var win=window;if(path.length>2){// deal with code block or chart\npath[0]=path[0]>1?path[0]-1:path[0]+1;path=path.slice(0,1);}var node=_this2.state.value.document.getNode(path);if(!node){path=path.slice(0,1);node=_this2.state.value.document.getNode(path);}if(node){var element=win.document.querySelector('[data-key=\"'+node.key+'\"]');while(element.tagName==='CODE'){element=element.parentNode;}var scroller=_this2.findScrollContainer(element,win);var isWindow=scroller==win.document.body||scroller==win.document.documentElement;if(isWindow){win.scrollTo(0,element.offsetTop);}else{scroller.scrollTop=element.offsetTop;}}};_this2.toggleHistory=function(){if(!_constants.isDocs){window.location.href=siteRoot+'repo/file_revisions/'+repoID+'/?p='+_utils.Utils.encodePath(filePath);return;}if(_this2.state.isShowHistory){_this2.setState({isShowHistory:false,isShowOutline:true,isShowComments:false});}else{_this2.setState({isShowHistory:true,isShowOutline:false,isShowComments:false});}};_this2.toggleCommentList=function(){if(_this2.state.isShowComments){_this2.setState({isShowHistory:false,isShowOutline:true,isShowComments:false});}else{_this2.setState({isShowHistory:false,isShowOutline:false,isShowComments:true});}};_this2.getInsertLink=function(repoID,filePath){_seafileApi.seafileAPI.getShareLink(repoID,filePath).then(function(res){if(res.data.length!==0){var fileLink=res.data[0];window.richMarkdownEditor.addLink(fileLink.obj_name,fileLink.link);}else{var permissions={'can_edit':false,'can_download':true};permissions=JSON.stringify(permissions);_seafileApi.seafileAPI.createShareLink(repoID,filePath,null,null,permissions).then(function(res){var fileLink=res.data;window.richMarkdownEditor.addLink(fileLink.obj_name,fileLink.link);});}});};_this2.timer=null;_this2.localDraft='';_this2.autoSave=false;_this2.draftRichValue='';_this2.draftPlainValue='';_this2.state={markdownContent:'',oldMarkdownContent:'',loading:true,mode:'editor',fileInfo:{repoID:repoID,name:fileName,path:filePath,mtime:null,size:0,starred:false,permission:'',lastModifier:'',id:''},editorMode:'viewer',collabServer:seafileCollabServer?seafileCollabServer:null,relatedFiles:[],fileTagList:[],localDraftDialog:false,showRelatedFileDialog:false,showEditFileTagDialog:false,showMarkdownEditorDialog:false,showShareLinkDialog:false,showCommentDialog:false,showInsertFileDialog:false,showDraftSaved:false,collabUsers:userInfo?[{user:userInfo,is_editing:false}]:[],commentsNumber:null,loadingDiff:false,value:null,isShowComments:false,isShowHistory:false,isShowOutline:true,viewMode:'list_related_file'};if(_this2.state.collabServer){var socket=(0,_socket2.default)(_this2.state.collabServer);_this2.socket=socket;socket.on('presence',function(data){return _this2.receivePresenceData(data);});socket.on('repo_update',function(data){return _this2.receiveUpdateData(data);});socket.on('connect',function(){_this2.socket_id=socket.id;});}return _this2;}_createClass(MarkdownEditor,[{key:'receiveUpdateData',value:function receiveUpdateData(data){var _this3=this;var currentTime=new Date();if(parseFloat(currentTime-this.lastModifyTime)/1000<=5){return;}editorUtilities.fileMetaData().then(function(res){if(res.data.id!==_this3.state.fileInfo.id){_toast2.default.notify(_react2.default.createElement('span',null,(0,_constants.gettext)('This file has been updated.'),_react2.default.createElement('a',{href:''},' ',(0,_constants.gettext)('Refresh'))),{id:'repo_updated',duration:3600});}});}},{key:'receivePresenceData',value:function receivePresenceData(data){switch(data.response){case'user_join':_toast2.default.notify('user '+data.user.name+' joined',{duration:3});return;case'user_left':_toast2.default.notify('user '+data.user.name+' left',{duration:3});return;case'update_users':for(var prop in data.users){if(data.users.hasOwnProperty(prop)){if(prop===this.socket_id){data.users[prop]['myself']=true;break;}}}this.setState({collabUsers:Object.values(data.users)});return;case'user_editing':_toast2.default.danger('user '+data.user.name+' is editing this file!',{duration:3});return;default:console.log('unknown response type: '+data.response);return;}}},{key:'componentWillUnmount',value:function componentWillUnmount(){this.socket.emit('repo_update',{request:'unwatch_update',repo_id:this.props.c.repoID,user:{name:editorUtilities.name,username:editorUtilities.username,contact_email:editorUtilities.contact_email}});document.removeEventListener('selectionchange',this.setBtnPosition);}},{key:'componentDidMount',value:function componentDidMount(){var _this4=this;_seafileApi.seafileAPI.getFileInfo(repoID,filePath).then(function(res){var _res$data=res.data,mtime=_res$data.mtime,size=_res$data.size,starred=_res$data.starred,permission=_res$data.permission,last_modifier_name=_res$data.last_modifier_name,id=_res$data.id;var lastModifier=last_modifier_name;_this4.setState(function(prevState,props){return{fileInfo:_extends({},prevState.fileInfo,{mtime:mtime,size:size,starred:starred,permission:permission,lastModifier:lastModifier,id:id})};});_seafileApi.seafileAPI.getFileDownloadLink(repoID,filePath).then(function(res){var downLoadUrl=res.data;_seafileApi.seafileAPI.getFileContent(downLoadUrl).then(function(res){var contentLength=res.data.length;var isBlankFile=contentLength===0||contentLength===1;var hasPermission=_this4.state.fileInfo.permission==='rw';var isEditMode=mode==='edit'?true:false;var value=(0,_slate2markdown.deserialize)(res.data);_this4.setState({markdownContent:res.data,loading:false,// Goto rich edit page\n// First, the user has the relevant permissions, otherwise he can only enter the viewer interface or cannot access\n// case1: If file is draft file\n// case2: If mode == 'edit' and the file has no draft\n// case3: The length of markDownContent is 1 when clear all content in editor and the file has no draft\neditorMode:hasPermission&&(isDraft||isEditMode&&!hasDraft||isBlankFile&&!hasDraft)?'rich':'viewer',value:value});});});});if(userInfo&&this.socket){var _state$fileInfo=this.state.fileInfo,_repoID2=_state$fileInfo.repoID,path=_state$fileInfo.path;this.socket.emit('presence',{request:'join_room',doc_id:CryptoJS.MD5(_repoID2+path).toString(),user:userInfo});this.socket.emit('repo_update',{request:'watch_update',repo_id:editorUtilities.repoID,user:{name:editorUtilities.name,username:editorUtilities.username,contact_email:editorUtilities.contact_email}});}this.checkDraft();this.listRelatedFiles();this.listFileTags();this.getCommentsNumber();document.addEventListener('selectionchange',this.setBtnPosition);setTimeout(function(){var url=new URL(window.location.href);if(url.hash){window.location.href=window.location.href;}},100);}},{key:'render',value:function render(){var component=void 0;var sidePanel=this.state.isShowHistory?true:false;var markdownViewer=sidePanel?\"seafile-md-viewer-slate side-panel-on\":this.state.isShowComments?\"seafile-md-viewer-slate comment-on\":\"seafile-md-viewer-slate\";if(this.state.loading){return _react2.default.createElement('div',{className:'empty-loading-page'},_react2.default.createElement('div',{className:'lds-ripple page-centered'},_react2.default.createElement('div',null),_react2.default.createElement('div',null)));}else if(this.state.mode==='editor'){if(this.state.editorMode==='viewer'){component=_react2.default.createElement('div',{className:'seafile-md-viewer d-flex flex-column'},_react2.default.createElement(_markdownViewerToolbar2.default,{isDocs:_constants.isDocs,hasDraft:hasDraft,isDraft:isDraft,editorUtilities:editorUtilities,collabUsers:this.state.collabUsers,fileInfo:this.state.fileInfo,toggleStar:this.toggleStar,backToParentDirectory:this.backToParentDirectory,openDialogs:this.openDialogs,fileTagList:this.state.fileTagList,relatedFiles:this.state.relatedFiles,toggleShareLinkDialog:this.toggleShareLinkDialog,onEdit:this.onEdit,toggleNewDraft:editorUtilities.createDraftFile,commentsNumber:this.state.commentsNumber,toggleCommentList:this.toggleCommentList,showFileHistory:this.state.isShowHistory?false:true,toggleHistory:this.toggleHistory}),_react2.default.createElement('div',{className:'seafile-md-viewer d-flex'},_react2.default.createElement('div',{className:sidePanel?\"seafile-md-viewer-container side-panel-on\":\"seafile-md-viewer-container\",ref:'markdownContainer'},this.state.isShowHistory?_react2.default.createElement('div',{className:'diff-container'},_react2.default.createElement('div',{className:'diff-wrapper article'},this.state.loadingDiff?_react2.default.createElement(_loading2.default,null):_react2.default.createElement(_diffViewer2.default,{newMarkdownContent:this.state.markdownContent,oldMarkdownContent:this.state.oldMarkdownContent}))):_react2.default.createElement('div',{className:markdownViewer},_react2.default.createElement(_markdownViewerSlate2.default,{relatedFiles:this.state.relatedFiles,siteRoot:siteRoot,value:this.state.value}),this.state.isShowComments&&_react2.default.createElement('i',{className:'fa fa-plus-square seafile-viewer-comment-btn',ref:'commentbtn',onMouseDown:this.addComment})),this.state.isShowOutline&&_react2.default.createElement(_outline2.default,{isViewer:true,document:this.state.value.document,scrollToNode:this.scrollToNode}),this.state.isShowComments&&_react2.default.createElement(_commentPanel2.default,{toggleCommentPanel:this.toggleCommentList,commentsNumber:this.state.commentsNumber})),_react2.default.createElement('div',{className:'seafile-md-viewer-side-panel'},this.state.isShowHistory&&_react2.default.createElement(_historyList2.default,{editorUtilities:editorUtilities,showDiffViewer:this.showDiffViewer,setDiffViewerContent:this.setDiffViewerContent,reloadDiffContent:this.reloadDiffContent,toggleHistoryPanel:this.toggleHistory}))));}else{component=_react2.default.createElement(_seafileEditor2.default,{fileInfo:this.state.fileInfo,markdownContent:this.state.markdownContent,editorUtilities:editorUtilities,collabUsers:this.state.collabUsers,setFileInfoMtime:this.setFileInfoMtime,toggleStar:this.toggleStar,showFileHistory:true,setEditorMode:this.setEditorMode,setContent:this.setContent,draftID:draftID,isDraft:isDraft,mode:this.state.mode,emitSwitchEditor:this.emitSwitchEditor,hasDraft:hasDraft,editorMode:this.state.editorMode,relatedFiles:this.state.relatedFiles,siteRoot:siteRoot,autoSaveDraft:this.autoSaveDraft,setDraftValue:this.setDraftValue,clearTimer:this.clearTimer,openDialogs:this.openDialogs,fileTagList:this.state.fileTagList,deleteDraft:this.deleteDraft,showDraftSaved:this.state.showDraftSaved});}return _react2.default.createElement(_react2.default.Fragment,null,this.state.localDraftDialog?_react2.default.createElement(_modalPortal2.default,null,_react2.default.createElement(_localDraftDialog2.default,{localDraftDialog:this.state.localDraftDialog,deleteDraft:this.deleteDraft,closeDraftDialog:this.closeDraftDialog,useDraft:this.useDraft})):null,component,this.state.showMarkdownEditorDialog&&_react2.default.createElement(_react2.default.Fragment,null,this.state.showEditFileTagDialog&&_react2.default.createElement(_modalPortal2.default,null,_react2.default.createElement(_editFiletagDialog2.default,{repoID:repoID,filePath:filePath,fileTagList:this.state.fileTagList,toggleCancel:this.toggleCancel,onFileTagChanged:this.onFileTagChanged})),this.state.showRelatedFileDialog&&_react2.default.createElement(_modalPortal2.default,null,_react2.default.createElement(_relatedFileDialogs2.default,{repoID:repoID,filePath:filePath,relatedFiles:this.state.relatedFiles,toggleCancel:this.toggleCancel,onRelatedFileChange:this.onRelatedFileChange,dirent:this.state.fileInfo,viewMode:this.state.viewMode})),this.state.showInsertFileDialog&&_react2.default.createElement(_modalPortal2.default,null,_react2.default.createElement(_insertFileDialog2.default,{repoID:repoID,filePath:filePath,toggleCancel:this.toggleCancel,getInsertLink:this.getInsertLink})),this.state.showShareLinkDialog&&_react2.default.createElement(_modalPortal2.default,null,_react2.default.createElement(_shareDialog2.default,{itemType:'file',itemName:this.state.fileInfo.name,itemPath:filePath,repoID:repoID,toggleDialog:this.toggleCancel,isGroupOwnedRepo:false,repoEncrypted:false})),this.state.showCommentDialog&&_react2.default.createElement(_modalPortal2.default,null,_react2.default.createElement(_commentDialog2.default,{toggleCommentDialog:this.toggleCancel,editorUtilities:editorUtilities,onCommentAdded:this.onCommentAdded,commentPosition:this.state.commentPosition,quote:this.quote}))));}}}]);return MarkdownEditor;}(_react2.default.Component);exports.default=MarkdownEditor;\n\n/***/ }),\n\n/***/ 58:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);var _moment=__webpack_require__(6);var _moment2=_interopRequireDefault(_moment);var _seafileMarkdown2html=__webpack_require__(82);var _reactstrap=__webpack_require__(5);var _constants=__webpack_require__(2);var _seafileApi=__webpack_require__(3);__webpack_require__(59);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _window$app$pageOptio=window.app.pageOptions,username=_window$app$pageOptio.username,repoID=_window$app$pageOptio.repoID,filePath=_window$app$pageOptio.filePath;var CommentPanelPropTypes={toggleCommentPanel:_propTypes2.default.func.isRequired,commentsNumber:_propTypes2.default.number};var CommentPanel=function(_React$Component){_inherits(CommentPanel,_React$Component);function CommentPanel(props){_classCallCheck(this,CommentPanel);var _this=_possibleConstructorReturn(this,(CommentPanel.__proto__||Object.getPrototypeOf(CommentPanel)).call(this,props));_this.toggleResolvedComment=function(){_this.setState({showResolvedComment:!_this.state.showResolvedComment});};_this.listComments=function(){_seafileApi.seafileAPI.listComments(repoID,filePath).then(function(res){_this.setState({commentsList:res.data.comments});});};_this.handleCommentChange=function(event){_this.setState({comment:event.target.value});};_this.submitComment=function(){var comment=_this.refs.commentTextarea.value;if(comment.trim()){_seafileApi.seafileAPI.postComment(repoID,filePath,comment).then(function(){_this.listComments();});}_this.refs.commentTextarea.value='';};_this.resolveComment=function(event){_seafileApi.seafileAPI.updateComment(repoID,event.target.id,'true').then(function(){_this.listComments();});};_this.deleteComment=function(event){_seafileApi.seafileAPI.deleteComment(repoID,event.target.id).then(function(){_this.listComments();});};_this.editComment=function(commentID,newComment){_seafileApi.seafileAPI.updateComment(repoID,commentID,null,null,newComment).then(function(res){_this.listComments();});};_this.state={commentsList:[],showResolvedComment:true};return _this;}_createClass(CommentPanel,[{key:'componentDidMount',value:function componentDidMount(){this.listComments();}},{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){if(this.props.commentsNumber!==nextProps.commentsNumber){this.listComments();}}},{key:'render',value:function render(){var _this2=this;return _react2.default.createElement('div',{className:'seafile-comment'},_react2.default.createElement('div',{className:'seafile-comment-title'},_react2.default.createElement('div',{onClick:this.props.toggleCommentPanel,className:'seafile-comment-title-close'},_react2.default.createElement('i',{className:'fa fa-times-circle'})),_react2.default.createElement('div',{className:'seafile-comment-title-text'},(0,_constants.gettext)('Comments'))),_react2.default.createElement('div',{className:'seafile-comment-toggle-resolved'},_react2.default.createElement('div',{className:'seafile-comment-title-text'},(0,_constants.gettext)('Show resolved comments')),_react2.default.createElement('div',{className:'seafile-comment-title-toggle d-flex'},_react2.default.createElement('label',{className:'custom-switch',id:'toggle-resolved-comments'},_react2.default.createElement('input',{type:'checkbox',name:'option',className:'custom-switch-input',onChange:this.toggleResolvedComment,checked:this.state.showResolvedComment&&'checked'}),_react2.default.createElement('span',{className:'custom-switch-indicator'})))),_react2.default.createElement('ul',{className:'seafile-comment-list'},this.state.commentsList.length>0&&this.state.commentsList.map(function(item){var index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var arr=arguments[2];var oldTime=new Date(item.created_at).getTime();var time=(0,_moment2.default)(oldTime).format('YYYY-MM-DD HH:mm');return _react2.default.createElement(_react2.default.Fragment,{key:item.id},_react2.default.createElement(CommentItem,{item:item,time:time,deleteComment:_this2.deleteComment,resolveComment:_this2.resolveComment,editComment:_this2.editComment,showResolvedComment:_this2.state.showResolvedComment}));}),this.state.commentsList.length==0&&_react2.default.createElement('li',{className:'comment-vacant'},(0,_constants.gettext)('No comment yet.'))),_react2.default.createElement('div',{className:'seafile-comment-footer'},_react2.default.createElement('textarea',{className:'add-comment-input',ref:'commentTextarea',placeholder:(0,_constants.gettext)('Add a comment.'),clos:'100',rows:'3',warp:'virtual'}),_react2.default.createElement(_reactstrap.Button,{className:'submit-comment',color:'success',size:'sm',onClick:this.submitComment},(0,_constants.gettext)('Submit'))));}}]);return CommentPanel;}(_react2.default.Component);CommentPanel.propTypes=CommentPanelPropTypes;var commentItemPropTypes={time:_propTypes2.default.string.isRequired,item:_propTypes2.default.object.isRequired,deleteComment:_propTypes2.default.func.isRequired,resolveComment:_propTypes2.default.func.isRequired,showResolvedComment:_propTypes2.default.bool.isRequired,editComment:_propTypes2.default.func.isRequired};var CommentItem=function(_React$Component2){_inherits(CommentItem,_React$Component2);function CommentItem(props){_classCallCheck(this,CommentItem);var _this3=_possibleConstructorReturn(this,(CommentItem.__proto__||Object.getPrototypeOf(CommentItem)).call(this,props));_this3.toggleDropDownMenu=function(){_this3.setState({dropdownOpen:!_this3.state.dropdownOpen});};_this3.convertComment=function(mdFile){_seafileMarkdown2html.processor.process(mdFile).then(function(result){var html=String(result);_this3.setState({html:html});});};_this3.toggleEditComment=function(){_this3.setState({editable:!_this3.state.editable});};_this3.updateComment=function(event){var newComment=_this3.state.newComment;if(_this3.props.item.comment!==newComment){_this3.props.editComment(event.target.id,newComment);}_this3.toggleEditComment();};_this3.handleCommentChange=function(event){_this3.setState({newComment:event.target.value});};_this3.state={dropdownOpen:false,html:'',newComment:_this3.props.item.comment,editable:false};return _this3;}_createClass(CommentItem,[{key:'componentWillMount',value:function componentWillMount(){this.convertComment(this.props.item.comment);}},{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){this.convertComment(nextProps.item.comment);}},{key:'render',value:function render(){var item=this.props.item;if(item.resolved&&!this.props.showResolvedComment){return null;}if(this.state.editable){return _react2.default.createElement('li',{className:'seafile-comment-item',id:item.id},_react2.default.createElement('div',{className:'seafile-comment-info'},_react2.default.createElement('img',{className:'avatar',src:item.avatar_url,alt:''}),_react2.default.createElement('div',{className:'reviewer-info'},_react2.default.createElement('div',{className:'reviewer-name'},item.user_name),_react2.default.createElement('div',{className:'review-time'},this.props.time))),_react2.default.createElement('div',{className:'seafile-edit-comment'},_react2.default.createElement('textarea',{className:'edit-comment-input',value:this.state.newComment,onChange:this.handleCommentChange,clos:'100',rows:'3',warp:'virtual'}),_react2.default.createElement(_reactstrap.Button,{className:'comment-btn',color:'success',size:'sm',onClick:this.updateComment,id:item.id},(0,_constants.gettext)('Update')),' ',_react2.default.createElement(_reactstrap.Button,{className:'comment-btn',color:'secondary',size:'sm',onClick:this.toggleEditComment},' ',(0,_constants.gettext)('Cancel'))));}return _react2.default.createElement('li',{className:item.resolved?'seafile-comment-item seafile-comment-item-resolved':'seafile-comment-item',id:item.id},_react2.default.createElement('div',{className:'seafile-comment-info'},_react2.default.createElement('img',{className:'avatar',src:item.avatar_url,alt:''}),_react2.default.createElement('div',{className:'reviewer-info'},_react2.default.createElement('div',{className:'reviewer-name'},item.user_name),_react2.default.createElement('div',{className:'review-time'},this.props.time)),_react2.default.createElement(_reactstrap.Dropdown,{isOpen:this.state.dropdownOpen,size:'sm',className:'seafile-comment-dropdown',toggle:this.toggleDropDownMenu},_react2.default.createElement(_reactstrap.DropdownToggle,{className:'seafile-comment-dropdown-btn'},_react2.default.createElement('i',{className:'fas fa-ellipsis-v'})),_react2.default.createElement(_reactstrap.DropdownMenu,null,item.user_email===username&&_react2.default.createElement(_reactstrap.DropdownItem,{onClick:this.props.deleteComment,className:'delete-comment',id:item.id},(0,_constants.gettext)('Delete')),item.user_email===username&&_react2.default.createElement(_reactstrap.DropdownItem,{onClick:this.toggleEditComment,className:'edit-comment',id:item.id},(0,_constants.gettext)('Edit')),!item.resolved&&_react2.default.createElement(_reactstrap.DropdownItem,{onClick:this.props.resolveComment,className:'seafile-comment-resolved',id:item.id},(0,_constants.gettext)('Mark as resolved'))))),_react2.default.createElement('div',{className:'seafile-comment-content',dangerouslySetInnerHTML:{__html:this.state.html}}));}}]);return CommentItem;}(_react2.default.Component);CommentItem.propTypes=commentItemPropTypes;exports.default=CommentPanel;\n\n/***/ }),\n\n/***/ 59:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 697:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 699:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 7:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _toaster=__webpack_require__(15);var _toaster2=_interopRequireDefault(_toaster);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var toaster=new _toaster2.default();exports.default=toaster;\n\n/***/ }),\n\n/***/ 813:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 814:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 815:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 816:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 817:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 818:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 822:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 86:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 87:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 88:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 953:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 98:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[541]);\n\n\n// WEBPACK FOOTER //\n// js/markdownEditor.js","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nconst modalRoot = document.getElementById('modal-wrapper');\nclass ModalPortal extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.el = document.createElement('div');\n  }\n\n  componentDidMount() {\n    modalRoot.appendChild(this.el);\n  }\n\n  componentWillUnmount() {\n    modalRoot.removeChild(this.el);\n  }\n\n  render() {\n    return ReactDOM.createPortal(\n      this.props.children,\n      this.el,\n    );\n  }\n}\n\nModalPortal.propTypes = propTypes;\n\nexport default ModalPortal;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/modal-portal.js","class RepoTag {\n  constructor(object) {\n    this.id = object.repo_tag_id;\n    this.fileCount = object.files_count;\n    this.name = object.tag_name;\n    this.color = object.tag_color;\n  }\n}\n\nexport default RepoTag;\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/repo-tag.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nrequire('../../css/repo-tag.css');\n\nconst TagItemPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onEditFileTag: PropTypes.func.isRequired,\n};\n\nclass TagItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showSelectedTag: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      showSelectedTag: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      showSelectedTag: false\n    });\n  }\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList;\n    fileTagList.map((fileTag) => {\n      repoTagIdList.push(fileTag.repo_tag_id);\n    });\n    return repoTagIdList;\n  }\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onEditFileTag();\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      } \n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onEditFileTag();\n      });\n    }\n  }\n\n  render() {\n    let repoTag = this.props.repoTag;\n    let repoTagIdList = this.getRepoTagIdList();\n    let drakColor = Utils.getDarkColor(repoTag.color);\n    return (\n      <li key={repoTag.id} className=\"tag-list-item\" onClick={this.onEditFileTag} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <div className=\"tag-demo\" style={{backgroundColor:repoTag.color}}>\n          <span className={`${this.state.showSelectedTag ? 'show-tag-selected': ''}`} style={{backgroundColor: drakColor}}></span>\n          <span className=\"tag-name\">{repoTag.name}</span>\n          {repoTagIdList.indexOf(repoTag.id) > -1 &&\n            <i className=\"fas fa-check tag-operation\"></i>\n          }\n        </div>\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = TagItemPropTypes;\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass EditFileTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getRepoTagList();\n  }\n\n  getRepoTagList = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repoTag = new RepoTag(item);\n        repotagList.push(repoTag);\n      });\n      this.setState({\n        repotagList: repotagList,\n      });\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  onEditFileTag = () => {\n    this.props.onFileTagChanged();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Select Tags')}</ModalHeader>\n        <ModalBody>\n          {\n            <ul className=\"tag-list tag-list-container\">\n              {this.state.repotagList.map((repoTag) => {\n                return (\n                  <TagItem \n                    key={repoTag.id} \n                    repoTag={repoTag}\n                    repoID={this.props.repoID}\n                    filePath={this.props.filePath}\n                    fileTagList={this.props.fileTagList}\n                    onEditFileTag={this.onEditFileTag}\n                  />\n                );\n              })}\n            </ul>\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nEditFileTagDialog.propTypes = propTypes;\n\nexport default EditFileTagDialog;\n\n\n// WEBPACK FOOTER //\n// ./src/components/dialog/edit-filetag-dialog.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal } from 'reactstrap';\nimport AddRelatedFileDialog from './add-related-file-dialog';\nimport ListRelatedFileDialog from './list-related-file-dialog';\nimport ModalPortal from '../modal-portal';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onRelatedFileChange: PropTypes.func.isRequired,\n  dirent: PropTypes.object.isRequired,\n  relatedFiles: PropTypes.array,\n  viewMode: PropTypes.oneOf(['list_related_file','add_related_file']).isRequired,\n};\n\nclass RelatedFileDialogs extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showListRelatedFileDialog: props.viewMode === 'list_related_file',\n    };\n  }\n\n  onAddRelatedFileToggle = () => {\n    this.setState({\n      showListRelatedFileDialog: false,\n    });\n  }\n\n  onCloseAddRelatedFileDialog = () => {\n    this.setState({\n      showListRelatedFileDialog: true,\n    });\n  }\n\n  render() {\n    return (\n      <ModalPortal>\n        <Modal isOpen={true} toggle={this.props.toggleCancel} size='lg' style={{width:'650px'}}>\n          {this.state.showListRelatedFileDialog && \n            <ListRelatedFileDialog\n              filePath={this.props.filePath}\n              relatedFiles={this.props.relatedFiles}\n              repoID={this.props.repoID}\n              toggleCancel={this.props.toggleCancel}\n              addRelatedFileToggle={this.onAddRelatedFileToggle}\n              onRelatedFileChange={this.props.onRelatedFileChange}\n            />\n          }\n          {!this.state.showListRelatedFileDialog && \n            <AddRelatedFileDialog\n              filePath={this.props.filePath}\n              repoID={this.props.repoID}\n              toggleCancel={this.onCloseAddRelatedFileDialog}\n              onRelatedFileChange={this.props.onRelatedFileChange}\n              dirent={this.props.dirent}\n              onClose={this.props.toggleCancel}\n            />\n          }\n        </Modal>\n      </ModalPortal>\n    )\n  }\n}\n\nRelatedFileDialogs.propTypes = propTypes;\n\nexport default RelatedFileDialogs\n\n\n// WEBPACK FOOTER //\n// ./src/components/dialog/related-file-dialogs.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { processor } from '@seafile/seafile-editor/dist/utils/seafile-markdown2html';\nimport { gettext } from '../../utils/constants';\nimport '../../css/markdown-viewer/comment-dialog.css';\n\nconst propTypes = {\n  editorUtilities: PropTypes.object.isRequired,\n  quote: PropTypes.string.isRequired,\n  commentPosition: PropTypes.object.isRequired,\n  onCommentAdded: PropTypes.func.isRequired,\n  toggleCommentDialog: PropTypes.func.isRequired,\n};\n\nclass CommentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      comment: '',\n      quote: '',\n    };\n  }\n\n  handleCommentChange = (event) => {\n    let comment = event.target.value;\n    this.setState({\n      comment: comment\n    });\n  }\n\n  submitComment = () => {\n    let comment = this.state.comment.trim();\n    if (comment.length > 0 && this.props.quote.length > 0) {\n      let detail = {\n        quote: this.props.quote,\n        position: this.props.commentPosition,\n      };\n      let detailJSON = JSON.stringify(detail);\n      this.props.editorUtilities.postComment(comment, detailJSON).then((res) => {\n        this.props.onCommentAdded();\n      });\n    }\n  }\n\n  setQuoteText = (mdQuote) => {\n    processor.process(mdQuote).then(\n      (result) => {\n        let quote = String(result);\n        this.setState({\n          quote: quote\n        });\n      }\n    );\n  }\n\n  componentDidMount() {\n    this.setQuoteText(this.props.quote);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.quote !== nextProps.quote) {\n      this.setQuoteText(nextProps.quote);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"comment-dialog\">\n        <div>{this.props.editorUtilities.name}</div>\n        <blockquote className=\"comment-dialog-quote\">\n          <div dangerouslySetInnerHTML={{ __html: this.state.quote}}></div>\n        </blockquote>\n        <textarea value={this.state.comment} onChange={this.handleCommentChange}></textarea>\n        <div className=\"button-group\">\n          <Button size=\"sm\" color=\"primary\" onClick={this.submitComment}>{gettext('Submit')}</Button>\n          <Button size=\"sm\" color=\"secondary\" onClick={this.props.toggleCommentDialog}>{gettext('Cancel')}</Button>\n        </div>\n        <span className=\"comment-dialog-triangle\"></span>\n      </div>\n    );\n  }\n}\n\nCommentDialog.propTypes = propTypes;\n\nexport default CommentDialog;\n\n\n// WEBPACK FOOTER //\n// ./src/components/markdown-view/comment-dialog.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  getInsertLink: PropTypes.func.isRequired,\n};\n\nclass InsertFileDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: null,\n      selectedPath: '',\n    };\n  }\n\n  handleInsert = () => {\n    this.props.getInsertLink(this.state.repo.repo_id, this.state.selectedPath);\n    this.props.toggleCancel();\n  }\n\n  onDirentItemClick = (repo, selectedPath, dirent) => {\n    if (dirent.type === 'file') {\n      this.setState({\n        repo: repo,\n        selectedPath: selectedPath,\n      });\n    }\n    else {\n      this.setState({\n        repo: null,\n        selectedPath: '',\n      });\n    }\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      repo: null,\n      selectedPath: '',\n    });\n  }\n\n  render() {\n    const toggle = this.props.toggleCancel;\n    return (\n      <Modal isOpen={true} toggle={toggle} >\n        <ModalHeader toggle={toggle}>{gettext('Select File')}</ModalHeader>\n        <ModalBody>\n          <FileChooser\n            isShowFile={true}\n            repoID={this.props.repoID}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode=\"current_repo_and_other_repos\"\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          {this.state.selectedPath ? <Button color=\"primary\" onClick={this.handleInsert}>{gettext('Submit')}</Button>\n            : <Button color=\"primary\" disabled>{gettext('Submit')}</Button>}\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInsertFileDialog.propTypes = propTypes;\n\nexport default InsertFileDialog;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/dialog/insert-file-dialog.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  deleteDraft: PropTypes.func.isRequired,\n  useDraft: PropTypes.func.isRequired,\n  localDraftDialog: PropTypes.bool.isRequired,\n  closeDraftDialog: PropTypes.func.isRequired,\n};\n\nclass LocalDraftDialog extends React.PureComponent {\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.closeDraftDialog}>\n        <ModalHeader toggle={this.props.closeDraftDialog}>{gettext('Local draft')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('You have an unsaved draft. Do you like to use it?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.props.useDraft}>{gettext('Use draft')}</Button>\n          <Button color=\"secondary\" onClick={this.props.deleteDraft}>{gettext('Delete draft')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLocalDraftDialog.propTypes = propTypes;\n\nexport default LocalDraftDialog;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/dialog/local-draft-dialog.js","import React from 'react';\n\nfunction Loading() {\n  return (\n    <span className=\"loading-icon loading-tip\"></span>\n  );\n}\n\nexport default Loading;\n\n\n// WEBPACK FOOTER //\n// ./src/components/loading.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { IconButton, ButtonGroup, CollabUsersButton } from '@seafile/seafile-editor/dist/components/topbarcomponent/editorToolBar';\nimport FileInfo from '@seafile/seafile-editor/dist/components/topbarcomponent/file-info';\n\nconst propTypes = {\n  isDocs: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  isDraft: PropTypes.bool.isRequired,\n  editorUtilities: PropTypes.object.isRequired,\n  collabUsers: PropTypes.array.isRequired,\n  fileInfo: PropTypes.object.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  relatedFiles: PropTypes.array.isRequired,\n  toggleShareLinkDialog: PropTypes.func.isRequired,\n  onEdit: PropTypes.func.isRequired,\n  toggleNewDraft: PropTypes.func.isRequired,\n  toggleStar: PropTypes.func.isRequired,\n  backToParentDirectory: PropTypes.func.isRequired,\n  openDialogs: PropTypes.func.isRequired,\n  showFileHistory: PropTypes.bool.isRequired,\n  toggleHistory: PropTypes.func.isRequired,\n  commentsNumber: PropTypes.number.isRequired,\n  toggleCommentList: PropTypes.func.isRequired,\n};\n\nclass MarkdownViewerToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  renderFirstToolbar() {\n    return (\n      <div className=\"sf-md-viewer-topbar-first d-flex justify-content-between\">\n        <FileInfo toggleStar={this.props.toggleStar} editorUtilities={this.props.editorUtilities}\n          fileInfo={this.props.fileInfo}/>\n        {(this.props.hasDraft && !this.props.isDraft) &&\n          <div className='seafile-btn-view-review'>\n            <div className='tag tag-green'>{gettext('This file is in draft stage.')}\n              <a className=\"ml-2\" onMouseDown={this.props.editorUtilities.goDraftPage}>{gettext('View Draft')}</a></div>\n          </div>\n        }\n        <div className=\"topbar-btn-container\">\n          { (!this.props.hasDraft && !this.props.isDraft && this.props.isDocs) &&\n            <button onMouseDown={this.props.toggleNewDraft} className=\"btn btn-success btn-new-draft\">\n              {gettext('New Draft')}</button>\n          }\n          {this.props.collabUsers.length > 0 && <CollabUsersButton className={'collab-users-dropdown'}\n            users={this.props.collabUsers} id={'usersButton'} />}\n          <ButtonGroup>\n            <IconButton id={'shareBtn'} text={gettext('Share')} icon={'fa fa-share-alt'}\n              onMouseDown={this.props.toggleShareLinkDialog}/>\n            {\n              this.props.commentsNumber > 0 ?\n                <button className=\"btn btn-icon btn-secondary btn-active\" id=\"commentsNumber\" type=\"button\"\n                  data-active=\"false\" onMouseDown={this.props.toggleCommentList}>\n                  <i className=\"fa fa-comments\"></i>{' '}<span>{this.props.commentsNumber}</span>\n                </button>\n                :\n                <IconButton id={'commentsNumber'} text={gettext('Comments')} icon={'fa fa-comments'} onMouseDown={this.props.toggleCommentList}/>\n            }\n            <IconButton text={gettext('Back to parent directory')} id={'parentDirectory'}\n              icon={'fa fa-folder-open'} onMouseDown={this.props.backToParentDirectory}/>\n            {\n              (!this.props.hasDraft && this.props.fileInfo.permission === 'rw')? <IconButton text={gettext('Edit')}\n                id={'editButton'} icon={'fa fa-edit'} onMouseDown={this.props.onEdit}/>: null\n            }\n            {\n              this.props.showFileHistory && <IconButton id={'historyButton'}\n                text={gettext('File History')} onMouseDown={this.props.toggleHistory} icon={'fa fa-history'}/>\n            }\n          </ButtonGroup>\n        </div>\n      </div>\n    );\n  }\n\n  renderSecondToolbar() {\n    const { relatedFiles, fileTagList } = this.props;\n    const openDialogs = this.props.openDialogs;\n    let relatedFileString = '';\n    if (relatedFiles) {\n      const length = relatedFiles.length;\n      if (length === 1) relatedFileString = gettext('Related file');\n      else if (length > 1) relatedFileString = gettext('Related files');\n    }\n    return(\n      <div className=\"sf-md-viewer-topbar-second d-flex justify-content-center\">\n        {(fileTagList) && (fileTagList.length > 0 ?\n          <ul className=\"sf-files-tags\">\n            {\n              fileTagList.map((item, index=0) => {\n                return (\n                  <li key={index} className='sf-files-tag'>\n                    <span className=\"file-tag-icon\" style={{backgroundColor: item.tag_color}}></span>\n                    <span className=\"file-tag-name\" title={item.tag_name}>{item.tag_name}</span>\n                  </li>\n                );\n              })\n            }\n            <li className='sf-files-tag'><span className=\"file-tag-name\"\n              onClick={openDialogs.bind(this, 'tags')}>{gettext('Edit')}</span></li>\n          </ul>\n          :\n          <span className=\"no-file-tag edit-related-file\"\n            onClick={openDialogs.bind(this, 'tags')}>{gettext('No tags')}</span>\n        )}\n        {relatedFiles &&\n          <div className=\"sf-related-files-bar\">\n            {relatedFiles.length === 0 ?\n              <span className=\"edit-related-file no-related-file\"\n                onClick={openDialogs.bind(this, 'related_files')}>{gettext('No related files')}</span>:\n              <React.Fragment>\n                <a href=\"#sf-releted-files\">{relatedFiles.length}{' '}{relatedFileString}</a>\n                <span className=\"edit-related-file\" onClick={openDialogs.bind(this, 'related_files')}>\n                  {gettext('Edit')}</span>\n              </React.Fragment>\n            }\n          </div>\n        }\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"sf-md-viewer-topbar\">\n        {this.renderFirstToolbar()}\n        {this.renderSecondToolbar()}\n      </div>\n    );\n  }\n}\n\nMarkdownViewerToolbar.propTypes = propTypes;\n\nexport default MarkdownViewerToolbar;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/toolbar/markdown-viewer-toolbar.js","/* eslint-disable linebreak-style */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport Loading from '../loading';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport '../../css/markdown-viewer/history-viewer.css';\n\nconst propTypes = {\n  editorUtilities: PropTypes.object.isRequired,\n  showDiffViewer: PropTypes.func.isRequired,\n  setDiffViewerContent: PropTypes.func.isRequired,\n  reloadDiffContent: PropTypes.func.isRequired,\n};\n\nclass HistoryList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.perPage = 25;\n    this.state = {\n      historyList: [],\n      activeItem: 0,\n      currentPage: 1,\n      totalReversionCount: 0,\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    this.props.editorUtilities.listFileHistoryRecords(1, this.perPage).then((res) => {\n      this.setState({\n        historyList: res.data.data,\n        totalReversionCount: res.data.total_count\n      });\n      if (res.data.data.length > 1) {\n        axios.all([\n          this.props.editorUtilities.getFileHistoryVersion(res.data.data[0].commit_id, res.data.data[0].path),\n          this.props.editorUtilities.getFileHistoryVersion(res.data.data[1].commit_id, res.data.data[1].path)\n        ]).then(axios.spread((res1, res2) => {\n          axios.all([this.props.editorUtilities.getFileContent(res1.data), this.props.editorUtilities.getFileContent(res2.data)]).then(axios.spread((content1,content2) => {\n            this.props.showDiffViewer();\n            this.props.setDiffViewerContent(content1.data, content2.data);\n          }));\n        }));\n      } else {\n        this.props.editorUtilities.getFileHistoryVersion(res.data.data[0].commit_id, res.data.data[0].path).then((res) => {\n          this.props.editorUtilities.getFileContent(res.data).then((content) => {\n            this.props.showDiffViewer();\n            this.props.setDiffViewerContent(content.data, '');\n          });\n        });\n      }\n    });\n  }\n\n  onClick = (event, key, preItem, currentItem)=> {\n    if (key === this.state.activeItem) return false;\n    this.props.reloadDiffContent();\n    this.setState({\n      activeItem: key,\n    });\n    axios.all([\n      this.props.editorUtilities.getFileHistoryVersion(currentItem.commit_id, currentItem.path),\n      this.props.editorUtilities.getFileHistoryVersion(preItem.commit_id, preItem.path)\n    ]).then(axios.spread((res1, res2) => {\n      axios.all([this.props.editorUtilities.getFileContent(res1.data), this.props.editorUtilities.getFileContent(res2.data)]).then(axios.spread((content1,content2) => {\n        this.props.showDiffViewer();\n        this.props.setDiffViewerContent(content1.data, content2.data);\n      }));\n    }));\n  }\n\n  onScroll = (event) => {\n    const clientHeight = event.target.clientHeight;\n    const scrollHeight = event.target.scrollHeight;\n    const scrollTop    = event.target.scrollTop;\n    const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n    if (isBottom) {\n      if (this.state.totalReversionCount > this.perPage * this.state.currentPage) {\n        let currentPage = this.state.currentPage + 1;\n        this.setState({\n          currentPage: currentPage,\n          loading : true\n        });\n        this.props.editorUtilities.listFileHistoryRecords(currentPage, this.perPage).then((res) => {\n          let currentHistoryList = Object.assign([], this.state.historyList);\n          this.setState({\n            historyList: [...currentHistoryList, ...res.data.data],\n            loading : false\n          });\n        });\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"seafile-history-side-panel\">\n        <div className=\"seafile-history-title\">\n          <div onClick={this.props.toggleHistoryPanel} className={'seafile-history-title-close'}>\n            <i className={'fa fa-times-circle'}/>\n          </div>\n          <div className={'seafile-history-title-text'}>{gettext('History Versions')}</div>\n        </div>\n        <ul onScroll={this.onScroll} className={'history-list-container'}>\n          {this.state.historyList ?\n            this.state.historyList.map((item, index = 0, arr) => {\n              let preItemIndex = index + 1;\n              if (preItemIndex === arr.length) {\n                preItemIndex = index;\n              }\n              return (\n                <HistoryItem\n                  onClick={this.onClick}\n                  ctime={item.ctime}\n                  className={this.state.activeItem === index ? 'item-active': ''}\n                  currentItem={item}\n                  name={item.creator_name}\n                  index={index}\n                  key={index}\n                  preItem={arr[preItemIndex]}\n                />\n              );\n            }) : <Loading/>\n          }\n          {\n            this.state.loading &&\n            <li className={'reloading-reversion'}><Loading style={{width: '0.5rem', margin: '0 auto', color: '#b0b0b0'}}/></li>\n          }\n        </ul>\n      </div>\n    );\n  }\n}\n\nHistoryList.propTypes = propTypes;\n\n\nconst HistoryItempropTypes = {\n  ctime: PropTypes.string,\n  onClick: PropTypes.func,\n  index: PropTypes.number,\n  preItem: PropTypes.object,\n  currewntItem: PropTypes.object,\n  name: PropTypes.string,\n  className: PropTypes.string,\n};\n\nclass HistoryItem extends React.Component {\n  render() {\n    let time = moment.parseZone(this.props.ctime).format('YYYY-MM-DD HH:mm');\n    return (\n      <li onClick={(event) => this.props.onClick(event, this.props.index, this.props.preItem, this.props.currentItem)} className={'history-item-container ' + this.props.className}>\n        <div className=\"time\">{time}</div>\n        <div className=\"owner\"><i className=\"fa fa-square\"/><span>{this.props.name}</span></div>\n      </li>\n    );\n  }\n}\n\nHistoryItem.propTypes = HistoryItempropTypes;\n\n\nexport default HistoryList;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/markdown-view/history-list.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst OutlineItempropTypes = {\n  scrollToNode: PropTypes.func.isRequired,\n  node: PropTypes.object.isRequired,\n  active: PropTypes.string.isRequired,\n};\n\nclass OutlineItem extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n  }\n\n  onClick = (event) => {\n    this.props.scrollToNode(this.props.node);\n  }\n\n  render() {\n    const node = this.props.node;\n    var c;\n    if (node.type === 'header_two') {\n      c = 'outline-h2';\n    } else if (node.type === 'header_three') {\n      c = 'outline-h3';\n    }\n    c = c + this.props.active;\n\n    return (\n      <div className={c} key={node.key} onClick={this.onClick}>{node.text}</div>\n    );\n  }\n}\n\nOutlineItem.propTypes = OutlineItempropTypes;\n\nconst propTypes = {\n  scrollToNode: PropTypes.func.isRequired,\n  isViewer: PropTypes.bool.isRequired,\n  document: PropTypes.object.isRequired,\n  activeTitleIndex: PropTypes.number,\n  value: PropTypes.object,\n};\n\nclass OutlineView extends React.PureComponent {\n\n  render() {\n    const document = this.props.document;\n    var headerList = document.nodes.filter(node => {\n      return (node.type === 'header_two' || node.type === 'header_three');\n    });\n\n    return (\n      <div className=\"seafile-editor-outline\">\n        <div className=\"seafile-editor-outline-heading\">{gettext('Contents')}</div>\n        {headerList.size > 0 ?\n          headerList.map((node, index) => {\n            let active = (index === this.props.activeTitleIndex) ? ' active' : ''; \n            return (\n              <OutlineItem\n                key={node.key}\n                value={this.props.value}\n                node={node}\n                active={active}\n                scrollToNode={this.props.scrollToNode}\n              />\n            );\n          }) : <div className={'size-panel-no-content'}>{gettext('No outline')}</div>}\n      </div>\n    );\n  }\n\n}\n\nOutlineView.propTypes = propTypes;\n\nexport default OutlineView;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/markdown-view/outline.js","import i18n from 'i18next';\nimport XHR from 'i18next-xhr-backend';\n\nlet siteRoot = window.app.config.siteRoot;\n\ni18n\n  .use(XHR)\n  .init({\n    fallbackLng: 'en',\n\n    ns: ['translations'],\n    defaultNS: 'translations',\n\n    whitelist: ['en', 'zh-CN', 'fr', 'de', 'cs', 'es', 'es-AR', 'es-MX', 'ru'],\n\n    backend: {\n      loadPath: siteRoot + 'media/assets/frontend/locales/{{ lng }}/{{ ns }}.json',\n      // loadPath: '/media/locales/{{lng}}/{{ns}}.json',\n    },\n\n    debug: false, // console log if debug: true\n\n    interpolation: {\n      escapeValue: false, // not needed for react!!\n    },\n\n\n    load: 'currentOnly',\n\n    react: {\n      wait: true,\n    }\n  });\n\nexport default i18n;\n\n\n\n// WEBPACK FOOTER //\n// ./src/i18n.js","'use strict';\n\nif (typeof Promise === 'undefined') {\n  // Rejection tracking prevents a common issue where React gets into an\n  // inconsistent state due to an error, but it gets swallowed by a Promise,\n  // and the user has no idea what causes React's erratic future behavior.\n  require('promise/lib/rejection-tracking').enable();\n  window.Promise = require('promise/lib/es6-extensions.js');\n}\n\n// fetch() polyfill for making API calls.\nrequire('whatwg-fetch');\n\n// Object.assign() is commonly used with React.\n// It will use the native implementation if it's present and isn't buggy.\nObject.assign = require('object-assign');\n\n// In tests, polyfill requestAnimationFrame since jsdom doesn't provide it yet.\n// We don't polyfill it in the browser--this is user's responsibility.\nif (process.env.NODE_ENV === 'test') {\n  require('raf').polyfill(global);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./config/polyfills.js\n// module id = 12\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28","export const strChineseFirstPY = \"YDYQSXMWZSSXJBYMGCCZQPSSQBYCDSCDQLDYLYBSSJGYZZJJFKCCLZDHWDWZJLJPFYYNWJJTMYHZWZHFLZPPQHGSCYYYNJQYXXGJHHSDSJNKKTMOMLCRXYPSNQSECCQZGGLLYJLMYZZSECYKYYHQWJSSGGYXYZYJWWKDJHYCHMYXJTLXJYQBYXZLDWRDJRWYSRLDZJPCBZJJBRCFTLECZSTZFXXZHTRQHYBDLYCZSSYMMRFMYQZPWWJJYFCRWFDFZQPYDDWYXKYJAWJFFXYPSFTZYHHYZYSWCJYXSCLCXXWZZXNBGNNXBXLZSZSBSGPYSYZDHMDZBQBZCWDZZYYTZHBTSYYBZGNTNXQYWQSKBPHHLXGYBFMJEBJHHGQTJCYSXSTKZHLYCKGLYSMZXYALMELDCCXGZYRJXSDLTYZCQKCNNJWHJTZZCQLJSTSTBNXBTYXCEQXGKWJYFLZQLYHYXSPSFXLMPBYSXXXYDJCZYLLLSJXFHJXPJBTFFYABYXBHZZBJYZLWLCZGGBTSSMDTJZXPTHYQTGLJSCQFZKJZJQNLZWLSLHDZBWJNCJZYZSQQYCQYRZCJJWYBRTWPYFTWEXCSKDZCTBZHYZZYYJXZCFFZZMJYXXSDZZOTTBZLQWFCKSZSXFYRLNYJMBDTHJXSQQCCSBXYYTSYFBXDZTGBCNSLCYZZPSAZYZZSCJCSHZQYDXLBPJLLMQXTYDZXSQJTZPXLCGLQTZWJBHCTSYJSFXYEJJTLBGXSXJMYJQQPFZASYJNTYDJXKJCDJSZCBARTDCLYJQMWNQNCLLLKBYBZZSYHQQLTWLCCXTXLLZNTYLNEWYZYXCZXXGRKRMTCNDNJTSYYSSDQDGHSDBJGHRWRQLYBGLXHLGTGXBQJDZPYJSJYJCTMRNYMGRZJCZGJMZMGXMPRYXKJNYMSGMZJYMKMFXMLDTGFBHCJHKYLPFMDXLQJJSMTQGZSJLQDLDGJYCALCMZCSDJLLNXDJFFFFJCZFMZFFPFKHKGDPSXKTACJDHHZDDCRRCFQYJKQCCWJDXHWJLYLLZGCFCQDSMLZPBJJPLSBCJGGDCKKDEZSQCCKJGCGKDJTJDLZYCXKLQSCGJCLTFPCQCZGWPJDQYZJJBYJHSJDZWGFSJGZKQCCZLLPSPKJGQJHZZLJPLGJGJJTHJJYJZCZMLZLYQBGJWMLJKXZDZNJQSYZMLJLLJKYWXMKJLHSKJGBMCLYYMKXJQLBMLLKMDXXKWYXYSLMLPSJQQJQXYXFJTJDXMXXLLCXQBSYJBGWYMBGGBCYXPJYGPEPFGDJGBHBNSQJYZJKJKHXQFGQZKFHYGKHDKLLSDJQXPQYKYBNQSXQNSZSWHBSXWHXWBZZXDMNSJBSBKBBZKLYLXGWXDRWYQZMYWSJQLCJXXJXKJEQXSCYETLZHLYYYSDZPAQYZCMTLSHTZCFYZYXYLJSDCJQAGYSLCQLYYYSHMRQQKLDXZSCSSSYDYCJYSFSJBFRSSZQSBXXPXJYSDRCKGJLGDKZJZBDKTCSYQPYHSTCLDJDHMXMCGXYZHJDDTMHLTXZXYLYMOHYJCLTYFBQQXPFBDFHHTKSQHZYYWCNXXCRWHOWGYJLEGWDQCWGFJYCSNTMYTOLBYGWQWESJPWNMLRYDZSZTXYQPZGCWXHNGPYXSHMYQJXZTDPPBFYHZHTJYFDZWKGKZBLDNTSXHQEEGZZYLZMMZYJZGXZXKHKSTXNXXWYLYAPSTHXDWHZYMPXAGKYDXBHNHXKDPJNMYHYLPMGOCSLNZHKXXLPZZLBMLSFBHHGYGYYGGBHSCYAQTYWLXTZQCEZYDQDQMMHTKLLSZHLSJZWFYHQSWSCWLQAZYNYTLSXTHAZNKZZSZZLAXXZWWCTGQQTDDYZTCCHYQZFLXPSLZYGPZSZNGLNDQTBDLXGTCTAJDKYWNSYZLJHHZZCWNYYZYWMHYCHHYXHJKZWSXHZYXLYSKQYSPSLYZWMYPPKBYGLKZHTYXAXQSYSHXASMCHKDSCRSWJPWXSGZJLWWSCHSJHSQNHCSEGNDAQTBAALZZMSSTDQJCJKTSCJAXPLGGXHHGXXZCXPDMMHLDGTYBYSJMXHMRCPXXJZCKZXSHMLQXXTTHXWZFKHCCZDYTCJYXQHLXDHYPJQXYLSYYDZOZJNYXQEZYSQYAYXWYPDGXDDXSPPYZNDLTWRHXYDXZZJHTCXMCZLHPYYYYMHZLLHNXMYLLLMDCPPXHMXDKYCYRDLTXJCHHZZXZLCCLYLNZSHZJZZLNNRLWHYQSNJHXYNTTTKYJPYCHHYEGKCTTWLGQRLGGTGTYGYHPYHYLQYQGCWYQKPYYYTTTTLHYHLLTYTTSPLKYZXGZWGPYDSSZZDQXSKCQNMJJZZBXYQMJRTFFBTKHZKBXLJJKDXJTLBWFZPPTKQTZTGPDGNTPJYFALQMKGXBDCLZFHZCLLLLADPMXDJHLCCLGYHDZFGYDDGCYYFGYDXKSSEBDHYKDKDKHNAXXYBPBYYHXZQGAFFQYJXDMLJCSQZLLPCHBSXGJYNDYBYQSPZWJLZKSDDTACTBXZDYZYPJZQSJNKKTKNJDJGYYPGTLFYQKASDNTCYHBLWDZHBBYDWJRYGKZYHEYYFJMSDTYFZJJHGCXPLXHLDWXXJKYTCYKSSSMTWCTTQZLPBSZDZWZXGZAGYKTYWXLHLSPBCLLOQMMZSSLCMBJCSZZKYDCZJGQQDSMCYTZQQLWZQZXSSFPTTFQMDDZDSHDTDWFHTDYZJYQJQKYPBDJYYXTLJHDRQXXXHAYDHRJLKLYTWHLLRLLRCXYLBWSRSZZSYMKZZHHKYHXKSMDSYDYCJPBZBSQLFCXXXNXKXWYWSDZYQOGGQMMYHCDZTTFJYYBGSTTTYBYKJDHKYXBELHTYPJQNFXFDYKZHQKZBYJTZBXHFDXKDASWTAWAJLDYJSFHBLDNNTNQJTJNCHXFJSRFWHZFMDRYJYJWZPDJKZYJYMPCYZNYNXFBYTFYFWYGDBNZZZDNYTXZEMMQBSQEHXFZMBMFLZZSRXYMJGSXWZJSPRYDJSJGXHJJGLJJYNZZJXHGXKYMLPYYYCXYTWQZSWHWLYRJLPXSLSXMFSWWKLCTNXNYNPSJSZHDZEPTXMYYWXYYSYWLXJQZQXZDCLEEELMCPJPCLWBXSQHFWWTFFJTNQJHJQDXHWLBYZNFJLALKYYJLDXHHYCSTYYWNRJYXYWTRMDRQHWQCMFJDYZMHMYYXJWMYZQZXTLMRSPWWCHAQBXYGZYPXYYRRCLMPYMGKSJSZYSRMYJSNXTPLNBAPPYPYLXYYZKYNLDZYJZCZNNLMZHHARQMPGWQTZMXXMLLHGDZXYHXKYXYCJMFFYYHJFSBSSQLXXNDYCANNMTCJCYPRRNYTYQNYYMBMSXNDLYLYSLJRLXYSXQMLLYZLZJJJKYZZCSFBZXXMSTBJGNXYZHLXNMCWSCYZYFZLXBRNNNYLBNRTGZQYSATSWRYHYJZMZDHZGZDWYBSSCSKXSYHYTXXGCQGXZZSHYXJSCRHMKKBXCZJYJYMKQHZJFNBHMQHYSNJNZYBKNQMCLGQHWLZNZSWXKHLJHYYBQLBFCDSXDLDSPFZPSKJYZWZXZDDXJSMMEGJSCSSMGCLXXKYYYLNYPWWWGYDKZJGGGZGGSYCKNJWNJPCXBJJTQTJWDSSPJXZXNZXUMELPXFSXTLLXCLJXJJLJZXCTPSWXLYDHLYQRWHSYCSQYYBYAYWJJJQFWQCQQCJQGXALDBZZYJGKGXPLTZYFXJLTPADKYQHPMATLCPDCKBMTXYBHKLENXDLEEGQDYMSAWHZMLJTWYGXLYQZLJEEYYBQQFFNLYXRDSCTGJGXYYNKLLYQKCCTLHJLQMKKZGCYYGLLLJDZGYDHZWXPYSJBZKDZGYZZHYWYFQYTYZSZYEZZLYMHJJHTSMQWYZLKYYWZCSRKQYTLTDXWCTYJKLWSQZWBDCQYNCJSRSZJLKCDCDTLZZZACQQZZDDXYPLXZBQJYLZLLLQDDZQJYJYJZYXNYYYNYJXKXDAZWYRDLJYYYRJLXLLDYXJCYWYWNQCCLDDNYYYNYCKCZHXXCCLGZQJGKWPPCQQJYSBZZXYJSQPXJPZBSBDSFNSFPZXHDWZTDWPPTFLZZBZDMYYPQJRSDZSQZSQXBDGCPZSWDWCSQZGMDHZXMWWFYBPDGPHTMJTHZSMMBGZMBZJCFZWFZBBZMQCFMBDMCJXLGPNJBBXGYHYYJGPTZGZMQBQTCGYXJXLWZKYDPDYMGCFTPFXYZTZXDZXTGKMTYBBCLBJASKYTSSQYYMSZXFJEWLXLLSZBQJJJAKLYLXLYCCTSXMCWFKKKBSXLLLLJYXTYLTJYYTDPJHNHNNKBYQNFQYYZBYYESSESSGDYHFHWTCJBSDZZTFDMXHCNJZYMQWSRYJDZJQPDQBBSTJGGFBKJBXTGQHNGWJXJGDLLTHZHHYYYYYYSXWTYYYCCBDBPYPZYCCZYJPZYWCBDLFWZCWJDXXHYHLHWZZXJTCZLCDPXUJCZZZLYXJJTXPHFXWPYWXZPTDZZBDZCYHJHMLXBQXSBYLRDTGJRRCTTTHYTCZWMXFYTWWZCWJWXJYWCSKYBZSCCTZQNHXNWXXKHKFHTSWOCCJYBCMPZZYKBNNZPBZHHZDLSYDDYTYFJPXYNGFXBYQXCBHXCPSXTYZDMKYSNXSXLHKMZXLYHDHKWHXXSSKQYHHCJYXGLHZXCSNHEKDTGZXQYPKDHEXTYKCNYMYYYPKQYYYKXZLTHJQTBYQHXBMYHSQCKWWYLLHCYYLNNEQXQWMCFBDCCMLJGGXDQKTLXKGNQCDGZJWYJJLYHHQTTTNWCHMXCXWHWSZJYDJCCDBQCDGDNYXZTHCQRXCBHZTQCBXWGQWYYBXHMBYMYQTYEXMQKYAQYRGYZSLFYKKQHYSSQYSHJGJCNXKZYCXSBXYXHYYLSTYCXQTHYSMGSCPMMGCCCCCMTZTASMGQZJHKLOSQYLSWTMXSYQKDZLJQQYPLSYCZTCQQPBBQJZCLPKHQZYYXXDTDDTSJCXFFLLCHQXMJLWCJCXTSPYCXNDTJSHJWXDQQJSKXYAMYLSJHMLALYKXCYYDMNMDQMXMCZNNCYBZKKYFLMCHCMLHXRCJJHSYLNMTJZGZGYWJXSRXCWJGJQHQZDQJDCJJZKJKGDZQGJJYJYLXZXXCDQHHHEYTMHLFSBDJSYYSHFYSTCZQLPBDRFRZTZYKYWHSZYQKWDQZRKMSYNBCRXQBJYFAZPZZEDZCJYWBCJWHYJBQSZYWRYSZPTDKZPFPBNZTKLQYHBBZPNPPTYZZYBQNYDCPJMMCYCQMCYFZZDCMNLFPBPLNGQJTBTTNJZPZBBZNJKLJQYLNBZQHKSJZNGGQSZZKYXSHPZSNBCGZKDDZQANZHJKDRTLZLSWJLJZLYWTJNDJZJHXYAYNCBGTZCSSQMNJPJYTYSWXZFKWJQTKHTZPLBHSNJZSYZBWZZZZLSYLSBJHDWWQPSLMMFBJDWAQYZTCJTBNNWZXQXCDSLQGDSDPDZHJTQQPSWLYYJZLGYXYZLCTCBJTKTYCZJTQKBSJLGMGZDMCSGPYNJZYQYYKNXRPWSZXMTNCSZZYXYBYHYZAXYWQCJTLLCKJJTJHGDXDXYQYZZBYWDLWQCGLZGJGQRQZCZSSBCRPCSKYDZNXJSQGXSSJMYDNSTZTPBDLTKZWXQWQTZEXNQCZGWEZKSSBYBRTSSSLCCGBPSZQSZLCCGLLLZXHZQTHCZMQGYZQZNMCOCSZJMMZSQPJYGQLJYJPPLDXRGZYXCCSXHSHGTZNLZWZKJCXTCFCJXLBMQBCZZWPQDNHXLJCTHYZLGYLNLSZZPCXDSCQQHJQKSXZPBAJYEMSMJTZDXLCJYRYYNWJBNGZZTMJXLTBSLYRZPYLSSCNXPHLLHYLLQQZQLXYMRSYCXZLMMCZLTZSDWTJJLLNZGGQXPFSKYGYGHBFZPDKMWGHCXMSGDXJMCJZDYCABXJDLNBCDQYGSKYDQTXDJJYXMSZQAZDZFSLQXYJSJZYLBTXXWXQQZBJZUFBBLYLWDSLJHXJYZJWTDJCZFQZQZZDZSXZZQLZCDZFJHYSPYMPQZMLPPLFFXJJNZZYLSJEYQZFPFZKSYWJJJHRDJZZXTXXGLGHYDXCSKYSWMMZCWYBAZBJKSHFHJCXMHFQHYXXYZFTSJYZFXYXPZLCHMZMBXHZZSXYFYMNCWDABAZLXKTCSHHXKXJJZJSTHYGXSXYYHHHJWXKZXSSBZZWHHHCWTZZZPJXSNXQQJGZYZYWLLCWXZFXXYXYHXMKYYSWSQMNLNAYCYSPMJKHWCQHYLAJJMZXHMMCNZHBHXCLXTJPLTXYJHDYYLTTXFSZHYXXSJBJYAYRSMXYPLCKDUYHLXRLNLLSTYZYYQYGYHHSCCSMZCTZQXKYQFPYYRPFFLKQUNTSZLLZMWWTCQQYZWTLLMLMPWMBZSSTZRBPDDTLQJJBXZCSRZQQYGWCSXFWZLXCCRSZDZMCYGGDZQSGTJSWLJMYMMZYHFBJDGYXCCPSHXNZCSBSJYJGJMPPWAFFYFNXHYZXZYLREMZGZCYZSSZDLLJCSQFNXZKPTXZGXJJGFMYYYSNBTYLBNLHPFZDCYFBMGQRRSSSZXYSGTZRNYDZZCDGPJAFJFZKNZBLCZSZPSGCYCJSZLMLRSZBZZLDLSLLYSXSQZQLYXZLSKKBRXBRBZCYCXZZZEEYFGKLZLYYHGZSGZLFJHGTGWKRAAJYZKZQTSSHJJXDCYZUYJLZYRZDQQHGJZXSSZBYKJPBFRTJXLLFQWJHYLQTYMBLPZDXTZYGBDHZZRBGXHWNJTJXLKSCFSMWLSDQYSJTXKZSCFWJLBXFTZLLJZLLQBLSQMQQCGCZFPBPHZCZJLPYYGGDTGWDCFCZQYYYQYSSCLXZSKLZZZGFFCQNWGLHQYZJJCZLQZZYJPJZZBPDCCMHJGXDQDGDLZQMFGPSYTSDYFWWDJZJYSXYYCZCYHZWPBYKXRYLYBHKJKSFXTZJMMCKHLLTNYYMSYXYZPYJQYCSYCWMTJJKQYRHLLQXPSGTLYYCLJSCPXJYZFNMLRGJJTYZBXYZMSJYJHHFZQMSYXRSZCWTLRTQZSSTKXGQKGSPTGCZNJSJCQCXHMXGGZTQYDJKZDLBZSXJLHYQGGGTHQSZPYHJHHGYYGKGGCWJZZYLCZLXQSFTGZSLLLMLJSKCTBLLZZSZMMNYTPZSXQHJCJYQXYZXZQZCPSHKZZYSXCDFGMWQRLLQXRFZTLYSTCTMJCXJJXHJNXTNRZTZFQYHQGLLGCXSZSJDJLJCYDSJTLNYXHSZXCGJZYQPYLFHDJSBPCCZHJJJQZJQDYBSSLLCMYTTMQTBHJQNNYGKYRQYQMZGCJKPDCGMYZHQLLSLLCLMHOLZGDYYFZSLJCQZLYLZQJESHNYLLJXGJXLYSYYYXNBZLJSSZCQQCJYLLZLTJYLLZLLBNYLGQCHXYYXOXCXQKYJXXXYKLXSXXYQXCYKQXQCSGYXXYQXYGYTQOHXHXPYXXXULCYEYCHZZCBWQBBWJQZSCSZSSLZYLKDESJZWMYMCYTSDSXXSCJPQQSQYLYYZYCMDJDZYWCBTJSYDJKCYDDJLBDJJSODZYSYXQQYXDHHGQQYQHDYXWGMMMAJDYBBBPPBCMUUPLJZSMTXERXJMHQNUTPJDCBSSMSSSTKJTSSMMTRCPLZSZMLQDSDMJMQPNQDXCFYNBFSDQXYXHYAYKQYDDLQYYYSSZBYDSLNTFQTZQPZMCHDHCZCWFDXTMYQSPHQYYXSRGJCWTJTZZQMGWJJTJHTQJBBHWZPXXHYQFXXQYWYYHYSCDYDHHQMNMTMWCPBSZPPZZGLMZFOLLCFWHMMSJZTTDHZZYFFYTZZGZYSKYJXQYJZQBHMBZZLYGHGFMSHPZFZSNCLPBQSNJXZSLXXFPMTYJYGBXLLDLXPZJYZJYHHZCYWHJYLSJEXFSZZYWXKZJLUYDTMLYMQJPWXYHXSKTQJEZRPXXZHHMHWQPWQLYJJQJJZSZCPHJLCHHNXJLQWZJHBMZYXBDHHYPZLHLHLGFWLCHYYTLHJXCJMSCPXSTKPNHQXSRTYXXTESYJCTLSSLSTDLLLWWYHDHRJZSFGXTSYCZYNYHTDHWJSLHTZDQDJZXXQHGYLTZPHCSQFCLNJTCLZPFSTPDYNYLGMJLLYCQHYSSHCHYLHQYQTMZYPBYWRFQYKQSYSLZDQJMPXYYSSRHZJNYWTQDFZBWWTWWRXCWHGYHXMKMYYYQMSMZHNGCEPMLQQMTCWCTMMPXJPJJHFXYYZSXZHTYBMSTSYJTTQQQYYLHYNPYQZLCYZHZWSMYLKFJXLWGXYPJYTYSYXYMZCKTTWLKSMZSYLMPWLZWXWQZSSAQSYXYRHSSNTSRAPXCPWCMGDXHXZDZYFJHGZTTSBJHGYZSZYSMYCLLLXBTYXHBBZJKSSDMALXHYCFYGMQYPJYCQXJLLLJGSLZGQLYCJCCZOTYXMTMTTLLWTGPXYMZMKLPSZZZXHKQYSXCTYJZYHXSHYXZKXLZWPSQPYHJWPJPWXQQYLXSDHMRSLZZYZWTTCYXYSZZSHBSCCSTPLWSSCJCHNLCGCHSSPHYLHFHHXJSXYLLNYLSZDHZXYLSXLWZYKCLDYAXZCMDDYSPJTQJZLNWQPSSSWCTSTSZLBLNXSMNYYMJQBQHRZWTYYDCHQLXKPZWBGQYBKFCMZWPZLLYYLSZYDWHXPSBCMLJBSCGBHXLQHYRLJXYSWXWXZSLDFHLSLYNJLZYFLYJYCDRJLFSYZFSLLCQYQFGJYHYXZLYLMSTDJCYHBZLLNWLXXYGYYHSMGDHXXHHLZZJZXCZZZCYQZFNGWPYLCPKPYYPMCLQKDGXZGGWQBDXZZKZFBXXLZXJTPJPTTBYTSZZDWSLCHZHSLTYXHQLHYXXXYYZYSWTXZKHLXZXZPYHGCHKCFSYHUTJRLXFJXPTZTWHPLYXFCRHXSHXKYXXYHZQDXQWULHYHMJTBFLKHTXCWHJFWJCFPQRYQXCYYYQYGRPYWSGSUNGWCHKZDXYFLXXHJJBYZWTSXXNCYJJYMSWZJQRMHXZWFQSYLZJZGBHYNSLBGTTCSYBYXXWXYHXYYXNSQYXMQYWRGYQLXBBZLJSYLPSYTJZYHYZAWLRORJMKSCZJXXXYXCHDYXRYXXJDTSQFXLYLTSFFYXLMTYJMJUYYYXLTZCSXQZQHZXLYYXZHDNBRXXXJCTYHLBRLMBRLLAXKYLLLJLYXXLYCRYLCJTGJCMTLZLLCYZZPZPCYAWHJJFYBDYYZSMPCKZDQYQPBPCJPDCYZMDPBCYYDYCNNPLMTMLRMFMMGWYZBSJGYGSMZQQQZTXMKQWGXLLPJGZBQCDJJJFPKJKCXBLJMSWMDTQJXLDLPPBXCWRCQFBFQJCZAHZGMYKPHYYHZYKNDKZMBPJYXPXYHLFPNYYGXJDBKXNXHJMZJXSTRSTLDXSKZYSYBZXJLXYSLBZYSLHXJPFXPQNBYLLJQKYGZMCYZZYMCCSLCLHZFWFWYXZMWSXTYNXJHPYYMCYSPMHYSMYDYSHQYZCHMJJMZCAAGCFJBBHPLYZYLXXSDJGXDHKXXTXXNBHRMLYJSLTXMRHNLXQJXYZLLYSWQGDLBJHDCGJYQYCMHWFMJYBMBYJYJWYMDPWHXQLDYGPDFXXBCGJSPCKRSSYZJMSLBZZJFLJJJLGXZGYXYXLSZQYXBEXYXHGCXBPLDYHWETTWWCJMBTXCHXYQXLLXFLYXLLJLSSFWDPZSMYJCLMWYTCZPCHQEKCQBWLCQYDPLQPPQZQFJQDJHYMMCXTXDRMJWRHXCJZYLQXDYYNHYYHRSLSRSYWWZJYMTLTLLGTQCJZYABTCKZCJYCCQLJZQXALMZYHYWLWDXZXQDLLQSHGPJFJLJHJABCQZDJGTKHSSTCYJLPSWZLXZXRWGLDLZRLZXTGSLLLLZLYXXWGDZYGBDPHZPBRLWSXQBPFDWOFMWHLYPCBJCCLDMBZPBZZLCYQXLDOMZBLZWPDWYYGDSTTHCSQSCCRSSSYSLFYBFNTYJSZDFNDPDHDZZMBBLSLCMYFFGTJJQWFTMTPJWFNLBZCMMJTGBDZLQLPYFHYYMJYLSDCHDZJWJCCTLJCLDTLJJCPDDSQDSSZYBNDBJLGGJZXSXNLYCYBJXQYCBYLZCFZPPGKCXZDZFZTJJFJSJXZBNZYJQTTYJYHTYCZHYMDJXTTMPXSPLZCDWSLSHXYPZGTFMLCJTYCBPMGDKWYCYZCDSZZYHFLYCTYGWHKJYYLSJCXGYWJCBLLCSNDDBTZBSCLYZCZZSSQDLLMQYYHFSLQLLXFTYHABXGWNYWYYPLLSDLDLLBJCYXJZMLHLJDXYYQYTDLLLBUGBFDFBBQJZZMDPJHGCLGMJJPGAEHHBWCQXAXHHHZCHXYPHJAXHLPHJPGPZJQCQZGJJZZUZDMQYYBZZPHYHYBWHAZYJHYKFGDPFQSDLZMLJXKXGALXZDAGLMDGXMWZQYXXDXXPFDMMSSYMPFMDMMKXKSYZYSHDZKXSYSMMZZZMSYDNZZCZXFPLSTMZDNMXCKJMZTYYMZMZZMSXHHDCZJEMXXKLJSTLWLSQLYJZLLZJSSDPPMHNLZJCZYHMXXHGZCJMDHXTKGRMXFWMCGMWKDTKSXQMMMFZZYDKMSCLCMPCGMHSPXQPZDSSLCXKYXTWLWJYAHZJGZQMCSNXYYMMPMLKJXMHLMLQMXCTKZMJQYSZJSYSZHSYJZJCDAJZYBSDQJZGWZQQXFKDMSDJLFWEHKZQKJPEYPZYSZCDWYJFFMZZYLTTDZZEFMZLBNPPLPLPEPSZALLTYLKCKQZKGENQLWAGYXYDPXLHSXQQWQCQXQCLHYXXMLYCCWLYMQYSKGCHLCJNSZKPYZKCQZQLJPDMDZHLASXLBYDWQLWDNBQCRYDDZTJYBKBWSZDXDTNPJDTCTQDFXQQMGNXECLTTBKPWSLCTYQLPWYZZKLPYGZCQQPLLKCCYLPQMZCZQCLJSLQZDJXLDDHPZQDLJJXZQDXYZQKZLJCYQDYJPPYPQYKJYRMPCBYMCXKLLZLLFQPYLLLMBSGLCYSSLRSYSQTMXYXZQZFDZUYSYZTFFMZZSMZQHZSSCCMLYXWTPZGXZJGZGSJSGKDDHTQGGZLLBJDZLCBCHYXYZHZFYWXYZYMSDBZZYJGTSMTFXQYXQSTDGSLNXDLRYZZLRYYLXQHTXSRTZNGZXBNQQZFMYKMZJBZYMKBPNLYZPBLMCNQYZZZSJZHJCTZKHYZZJRDYZHNPXGLFZTLKGJTCTSSYLLGZRZBBQZZKLPKLCZYSSUYXBJFPNJZZXCDWXZYJXZZDJJKGGRSRJKMSMZJLSJYWQSKYHQJSXPJZZZLSNSHRNYPZTWCHKLPSRZLZXYJQXQKYSJYCZTLQZYBBYBWZPQDWWYZCYTJCJXCKCWDKKZXSGKDZXWWYYJQYYTCYTDLLXWKCZKKLCCLZCQQDZLQLCSFQCHQHSFSMQZZLNBJJZBSJHTSZDYSJQJPDLZCDCWJKJZZLPYCGMZWDJJBSJQZSYZYHHXJPBJYDSSXDZNCGLQMBTSFSBPDZDLZNFGFJGFSMPXJQLMBLGQCYYXBQKDJJQYRFKZTJDHCZKLBSDZCFJTPLLJGXHYXZCSSZZXSTJYGKGCKGYOQXJPLZPBPGTGYJZGHZQZZLBJLSQFZGKQQJZGYCZBZQTLDXRJXBSXXPZXHYZYCLWDXJJHXMFDZPFZHQHQMQGKSLYHTYCGFRZGNQXCLPDLBZCSCZQLLJBLHBZCYPZZPPDYMZZSGYHCKCPZJGSLJLNSCDSLDLXBMSTLDDFJMKDJDHZLZXLSZQPQPGJLLYBDSZGQLBZLSLKYYHZTTNTJYQTZZPSZQZTLLJTYYLLQLLQYZQLBDZLSLYYZYMDFSZSNHLXZNCZQZPBWSKRFBSYZMTHBLGJPMCZZLSTLXSHTCSYZLZBLFEQHLXFLCJLYLJQCBZLZJHHSSTBRMHXZHJZCLXFNBGXGTQJCZTMSFZKJMSSNXLJKBHSJXNTNLZDNTLMSJXGZJYJCZXYJYJWRWWQNZTNFJSZPZSHZJFYRDJSFSZJZBJFZQZZHZLXFYSBZQLZSGYFTZDCSZXZJBQMSZKJRHYJZCKMJKHCHGTXKXQGLXPXFXTRTYLXJXHDTSJXHJZJXZWZLCQSBTXWXGXTXXHXFTSDKFJHZYJFJXRZSDLLLTQSQQZQWZXSYQTWGWBZCGZLLYZBCLMQQTZHZXZXLJFRMYZFLXYSQXXJKXRMQDZDMMYYBSQBHGZMWFWXGMXLZPYYTGZYCCDXYZXYWGSYJYZNBHPZJSQSYXSXRTFYZGRHZTXSZZTHCBFCLSYXZLZQMZLMPLMXZJXSFLBYZMYQHXJSXRXSQZZZSSLYFRCZJRCRXHHZXQYDYHXSJJHZCXZBTYNSYSXJBQLPXZQPYMLXZKYXLXCJLCYSXXZZLXDLLLJJYHZXGYJWKJRWYHCPSGNRZLFZWFZZNSXGXFLZSXZZZBFCSYJDBRJKRDHHGXJLJJTGXJXXSTJTJXLYXQFCSGSWMSBCTLQZZWLZZKXJMLTMJYHSDDBXGZHDLBMYJFRZFSGCLYJBPMLYSMSXLSZJQQHJZFXGFQFQBPXZGYYQXGZTCQWYLTLGWSGWHRLFSFGZJMGMGBGTJFSYZZGZYZAFLSSPMLPFLCWBJZCLJJMZLPJJLYMQDMYYYFBGYGYZMLYZDXQYXRQQQHSYYYQXYLJTYXFSFSLLGNQCYHYCWFHCCCFXPYLYPLLZYXXXXXKQHHXSHJZCFZSCZJXCPZWHHHHHAPYLQALPQAFYHXDYLUKMZQGGGDDESRNNZLTZGCHYPPYSQJJHCLLJTOLNJPZLJLHYMHEYDYDSQYCDDHGZUNDZCLZYZLLZNTNYZGSLHSLPJJBDGWXPCDUTJCKLKCLWKLLCASSTKZZDNQNTTLYYZSSYSSZZRYLJQKCQDHHCRXRZYDGRGCWCGZQFFFPPJFZYNAKRGYWYQPQXXFKJTSZZXSWZDDFBBXTBGTZKZNPZZPZXZPJSZBMQHKCYXYLDKLJNYPKYGHGDZJXXEAHPNZKZTZCMXCXMMJXNKSZQNMNLWBWWXJKYHCPSTMCSQTZJYXTPCTPDTNNPGLLLZSJLSPBLPLQHDTNJNLYYRSZFFJFQWDPHZDWMRZCCLODAXNSSNYZRESTYJWJYJDBCFXNMWTTBYLWSTSZGYBLJPXGLBOCLHPCBJLTMXZLJYLZXCLTPNCLCKXTPZJSWCYXSFYSZDKNTLBYJCYJLLSTGQCBXRYZXBXKLYLHZLQZLNZCXWJZLJZJNCJHXMNZZGJZZXTZJXYCYYCXXJYYXJJXSSSJSTSSTTPPGQTCSXWZDCSYFPTFBFHFBBLZJCLZZDBXGCXLQPXKFZFLSYLTUWBMQJHSZBMDDBCYSCCLDXYCDDQLYJJWMQLLCSGLJJSYFPYYCCYLTJANTJJPWYCMMGQYYSXDXQMZHSZXPFTWWZQSWQRFKJLZJQQYFBRXJHHFWJJZYQAZMYFRHCYYBYQWLPEXCCZSTYRLTTDMQLYKMBBGMYYJPRKZNPBSXYXBHYZDJDNGHPMFSGMWFZMFQMMBCMZZCJJLCNUXYQLMLRYGQZCYXZLWJGCJCGGMCJNFYZZJHYCPRRCMTZQZXHFQGTJXCCJEAQCRJYHPLQLSZDJRBCQHQDYRHYLYXJSYMHZYDWLDFRYHBPYDTSSCNWBXGLPZMLZZTQSSCPJMXXYCSJYTYCGHYCJWYRXXLFEMWJNMKLLSWTXHYYYNCMMCWJDQDJZGLLJWJRKHPZGGFLCCSCZMCBLTBHBQJXQDSPDJZZGKGLFQYWBZYZJLTSTDHQHCTCBCHFLQMPWDSHYYTQWCNZZJTLBYMBPDYYYXSQKXWYYFLXXNCWCXYPMAELYKKJMZZZBRXYYQJFLJPFHHHYTZZXSGQQMHSPGDZQWBWPJHZJDYSCQWZKTXXSQLZYYMYSDZGRXCKKUJLWPYSYSCSYZLRMLQSYLJXBCXTLWDQZPCYCYKPPPNSXFYZJJRCEMHSZMSXLXGLRWGCSTLRSXBZGBZGZTCPLUJLSLYLYMTXMTZPALZXPXJTJWTCYYZLBLXBZLQMYLXPGHDSLSSDMXMBDZZSXWHAMLCZCPJMCNHJYSNSYGCHSKQMZZQDLLKABLWJXSFMOCDXJRRLYQZKJMYBYQLYHETFJZFRFKSRYXFJTWDSXXSYSQJYSLYXWJHSNLXYYXHBHAWHHJZXWMYLJCSSLKYDZTXBZSYFDXGXZJKHSXXYBSSXDPYNZWRPTQZCZENYGCXQFJYKJBZMLJCMQQXUOXSLYXXLYLLJDZBTYMHPFSTTQQWLHOKYBLZZALZXQLHZWRRQHLSTMYPYXJJXMQSJFNBXYXYJXXYQYLTHYLQYFMLKLJTMLLHSZWKZHLJMLHLJKLJSTLQXYLMBHHLNLZXQJHXCFXXLHYHJJGBYZZKBXSCQDJQDSUJZYYHZHHMGSXCSYMXFEBCQWWRBPYYJQTYZCYQYQQZYHMWFFHGZFRJFCDPXNTQYZPDYKHJLFRZXPPXZDBBGZQSTLGDGYLCQMLCHHMFYWLZYXKJLYPQHSYWMQQGQZMLZJNSQXJQSYJYCBEHSXFSZPXZWFLLBCYYJDYTDTHWZSFJMQQYJLMQXXLLDTTKHHYBFPWTYYSQQWNQWLGWDEBZWCMYGCULKJXTMXMYJSXHYBRWFYMWFRXYQMXYSZTZZTFYKMLDHQDXWYYNLCRYJBLPSXCXYWLSPRRJWXHQYPHTYDNXHHMMYWYTZCSQMTSSCCDALWZTCPQPYJLLQZYJSWXMZZMMYLMXCLMXCZMXMZSQTZPPQQBLPGXQZHFLJJHYTJSRXWZXSCCDLXTYJDCQJXSLQYCLZXLZZXMXQRJMHRHZJBHMFLJLMLCLQNLDXZLLLPYPSYJYSXCQQDCMQJZZXHNPNXZMEKMXHYKYQLXSXTXJYYHWDCWDZHQYYBGYBCYSCFGPSJNZDYZZJZXRZRQJJYMCANYRJTLDPPYZBSTJKXXZYPFDWFGZZRPYMTNGXZQBYXNBUFNQKRJQZMJEGRZGYCLKXZDSKKNSXKCLJSPJYYZLQQJYBZSSQLLLKJXTBKTYLCCDDBLSPPFYLGYDTZJYQGGKQTTFZXBDKTYYHYBBFYTYYBCLPDYTGDHRYRNJSPTCSNYJQHKLLLZSLYDXXWBCJQSPXBPJZJCJDZFFXXBRMLAZHCSNDLBJDSZBLPRZTSWSBXBCLLXXLZDJZSJPYLYXXYFTFFFBHJJXGBYXJPMMMPSSJZJMTLYZJXSWXTYLEDQPJMYGQZJGDJLQJWJQLLSJGJGYGMSCLJJXDTYGJQJQJCJZCJGDZZSXQGSJGGCXHQXSNQLZZBXHSGZXCXYLJXYXYYDFQQJHJFXDHCTXJYRXYSQTJXYEFYYSSYYJXNCYZXFXMSYSZXYYSCHSHXZZZGZZZGFJDLTYLNPZGYJYZYYQZPBXQBDZTZCZYXXYHHSQXSHDHGQHJHGYWSZTMZMLHYXGEBTYLZKQWYTJZRCLEKYSTDBCYKQQSAYXCJXWWGSBHJYZYDHCSJKQCXSWXFLTYNYZPZCCZJQTZWJQDZZZQZLJJXLSBHPYXXPSXSHHEZTXFPTLQYZZXHYTXNCFZYYHXGNXMYWXTZSJPTHHGYMXMXQZXTSBCZYJYXXTYYZYPCQLMMSZMJZZLLZXGXZAAJZYXJMZXWDXZSXZDZXLEYJJZQBHZWZZZQTZPSXZTDSXJJJZNYAZPHXYYSRNQDTHZHYYKYJHDZXZLSWCLYBZYECWCYCRYLCXNHZYDZYDYJDFRJJHTRSQTXYXJRJHOJYNXELXSFSFJZGHPZSXZSZDZCQZBYYKLSGSJHCZSHDGQGXYZGXCHXZJWYQWGYHKSSEQZZNDZFKWYSSTCLZSTSYMCDHJXXYWEYXCZAYDMPXMDSXYBSQMJMZJMTZQLPJYQZCGQHXJHHLXXHLHDLDJQCLDWBSXFZZYYSCHTYTYYBHECXHYKGJPXHHYZJFXHWHBDZFYZBCAPNPGNYDMSXHMMMMAMYNBYJTMPXYYMCTHJBZYFCGTYHWPHFTWZZEZSBZEGPFMTSKFTYCMHFLLHGPZJXZJGZJYXZSBBQSCZZLZCCSTPGXMJSFTCCZJZDJXCYBZLFCJSYZFGSZLYBCWZZBYZDZYPSWYJZXZBDSYUXLZZBZFYGCZXBZHZFTPBGZGEJBSTGKDMFHYZZJHZLLZZGJQZLSFDJSSCBZGPDLFZFZSZYZYZSYGCXSNXXCHCZXTZZLJFZGQSQYXZJQDCCZTQCDXZJYQJQCHXZTDLGSCXZSYQJQTZWLQDQZTQCHQQJZYEZZZPBWKDJFCJPZTYPQYQTTYNLMBDKTJZPQZQZZFPZSBNJLGYJDXJDZZKZGQKXDLPZJTCJDQBXDJQJSTCKNXBXZMSLYJCQMTJQWWCJQNJNLLLHJCWQTBZQYDZCZPZZDZYDDCYZZZCCJTTJFZDPRRTZTJDCQTQZDTJNPLZBCLLCTZSXKJZQZPZLBZRBTJDCXFCZDBCCJJLTQQPLDCGZDBBZJCQDCJWYNLLZYZCCDWLLXWZLXRXNTQQCZXKQLSGDFQTDDGLRLAJJTKUYMKQLLTZYTDYYCZGJWYXDXFRSKSTQTENQMRKQZHHQKDLDAZFKYPBGGPZREBZZYKZZSPEGJXGYKQZZZSLYSYYYZWFQZYLZZLZHWCHKYPQGNPGBLPLRRJYXCCSYYHSFZFYBZYYTGZXYLXCZWXXZJZBLFFLGSKHYJZEYJHLPLLLLCZGXDRZELRHGKLZZYHZLYQSZZJZQLJZFLNBHGWLCZCFJYSPYXZLZLXGCCPZBLLCYBBBBUBBCBPCRNNZCZYRBFSRLDCGQYYQXYGMQZWTZYTYJXYFWTEHZZJYWLCCNTZYJJZDEDPZDZTSYQJHDYMBJNYJZLXTSSTPHNDJXXBYXQTZQDDTJTDYYTGWSCSZQFLSHLGLBCZPHDLYZJYCKWTYTYLBNYTSDSYCCTYSZYYEBHEXHQDTWNYGYCLXTSZYSTQMYGZAZCCSZZDSLZCLZRQXYYELJSBYMXSXZTEMBBLLYYLLYTDQYSHYMRQWKFKBFXNXSBYCHXBWJYHTQBPBSBWDZYLKGZSKYHXQZJXHXJXGNLJKZLYYCDXLFYFGHLJGJYBXQLYBXQPQGZTZPLNCYPXDJYQYDYMRBESJYYHKXXSTMXRCZZYWXYQYBMCLLYZHQYZWQXDBXBZWZMSLPDMYSKFMZKLZCYQYCZLQXFZZYDQZPZYGYJYZMZXDZFYFYTTQTZHGSPCZMLCCYTZXJCYTJMKSLPZHYSNZLLYTPZCTZZCKTXDHXXTQCYFKSMQCCYYAZHTJPCYLZLYJBJXTPNYLJYYNRXSYLMMNXJSMYBCSYSYLZYLXJJQYLDZLPQBFZZBLFNDXQKCZFYWHGQMRDSXYCYTXNQQJZYYPFZXDYZFPRXEJDGYQBXRCNFYYQPGHYJDYZXGRHTKYLNWDZNTSMPKLBTHBPYSZBZTJZSZZJTYYXZPHSSZZBZCZPTQFZMYFLYPYBBJQXZMXXDJMTSYSKKBJZXHJCKLPSMKYJZCXTMLJYXRZZQSLXXQPYZXMKYXXXJCLJPRMYYGADYSKQLSNDHYZKQXZYZTCGHZTLMLWZYBWSYCTBHJHJFCWZTXWYTKZLXQSHLYJZJXTMPLPYCGLTBZZTLZJCYJGDTCLKLPLLQPJMZPAPXYZLKKTKDZCZZBNZDYDYQZJYJGMCTXLTGXSZLMLHBGLKFWNWZHDXUHLFMKYSLGXDTWWFRJEJZTZHYDXYKSHWFZCQSHKTMQQHTZHYMJDJSKHXZJZBZZXYMPAGQMSTPXLSKLZYNWRTSQLSZBPSPSGZWYHTLKSSSWHZZLYYTNXJGMJSZSUFWNLSOZTXGXLSAMMLBWLDSZYLAKQCQCTMYCFJBSLXCLZZCLXXKSBZQCLHJPSQPLSXXCKSLNHPSFQQYTXYJZLQLDXZQJZDYYDJNZPTUZDSKJFSLJHYLZSQZLBTXYDGTQFDBYAZXDZHZJNHHQBYKNXJJQCZMLLJZKSPLDYCLBBLXKLELXJLBQYCXJXGCNLCQPLZLZYJTZLJGYZDZPLTQCSXFDMNYCXGBTJDCZNBGBQYQJWGKFHTNPYQZQGBKPBBYZMTJDYTBLSQMPSXTBNPDXKLEMYYCJYNZCTLDYKZZXDDXHQSHDGMZSJYCCTAYRZLPYLTLKXSLZCGGEXCLFXLKJRTLQJAQZNCMBYDKKCXGLCZJZXJHPTDJJMZQYKQSECQZDSHHADMLZFMMZBGNTJNNLGBYJBRBTMLBYJDZXLCJLPLDLPCQDHLXZLYCBLCXZZJADJLNZMMSSSMYBHBSQKBHRSXXJMXSDZNZPXLGBRHWGGFCXGMSKLLTSJYYCQLTSKYWYYHYWXBXQYWPYWYKQLSQPTNTKHQCWDQKTWPXXHCPTHTWUMSSYHBWCRWXHJMKMZNGWTMLKFGHKJYLSYYCXWHYECLQHKQHTTQKHFZLDXQWYZYYDESBPKYRZPJFYYZJCEQDZZDLATZBBFJLLCXDLMJSSXEGYGSJQXCWBXSSZPDYZCXDNYXPPZYDLYJCZPLTXLSXYZYRXCYYYDYLWWNZSAHJSYQYHGYWWAXTJZDAXYSRLTDPSSYYFNEJDXYZHLXLLLZQZSJNYQYQQXYJGHZGZCYJCHZLYCDSHWSHJZYJXCLLNXZJJYYXNFXMWFPYLCYLLABWDDHWDXJMCXZTZPMLQZHSFHZYNZTLLDYWLSLXHYMMYLMBWWKYXYADTXYLLDJPYBPWUXJMWMLLSAFDLLYFLBHHHBQQLTZJCQJLDJTFFKMMMBYTHYGDCQRDDWRQJXNBYSNWZDBYYTBJHPYBYTTJXAAHGQDQTMYSTQXKBTZPKJLZRBEQQSSMJJBDJOTGTBXPGBKTLHQXJJJCTHXQDWJLWRFWQGWSHCKRYSWGFTGYGBXSDWDWRFHWYTJJXXXJYZYSLPYYYPAYXHYDQKXSHXYXGSKQHYWFDDDPPLCJLQQEEWXKSYYKDYPLTJTHKJLTCYYHHJTTPLTZZCDLTHQKZXQYSTEEYWYYZYXXYYSTTJKLLPZMCYHQGXYHSRMBXPLLNQYDQHXSXXWGDQBSHYLLPJJJTHYJKYPPTHYYKTYEZYENMDSHLCRPQFDGFXZPSFTLJXXJBSWYYSKSFLXLPPLBBBLBSFXFYZBSJSSYLPBBFFFFSSCJDSTZSXZRYYSYFFSYZYZBJTBCTSBSDHRTJJBYTCXYJEYLXCBNEBJDSYXYKGSJZBXBYTFZWGENYHHTHZHHXFWGCSTBGXKLSXYWMTMBYXJSTZSCDYQRCYTWXZFHMYMCXLZNSDJTTTXRYCFYJSBSDYERXJLJXBBDEYNJGHXGCKGSCYMBLXJMSZNSKGXFBNBPTHFJAAFXYXFPXMYPQDTZCXZZPXRSYWZDLYBBKTYQPQJPZYPZJZNJPZJLZZFYSBTTSLMPTZRTDXQSJEHBZYLZDHLJSQMLHTXTJECXSLZZSPKTLZKQQYFSYGYWPCPQFHQHYTQXZKRSGTTSQCZLPTXCDYYZXSQZSLXLZMYCPCQBZYXHBSXLZDLTCDXTYLZJYYZPZYZLTXJSJXHLPMYTXCQRBLZSSFJZZTNJYTXMYJHLHPPLCYXQJQQKZZSCPZKSWALQSBLCCZJSXGWWWYGYKTJBBZTDKHXHKGTGPBKQYSLPXPJCKBMLLXDZSTBKLGGQKQLSBKKTFXRMDKBFTPZFRTBBRFERQGXYJPZSSTLBZTPSZQZSJDHLJQLZBPMSMMSXLQQNHKNBLRDDNXXDHDDJCYYGYLXGZLXSYGMQQGKHBPMXYXLYTQWLWGCPBMQXCYZYDRJBHTDJYHQSHTMJSBYPLWHLZFFNYPMHXXHPLTBQPFBJWQDBYGPNZTPFZJGSDDTQSHZEAWZZYLLTYYBWJKXXGHLFKXDJTMSZSQYNZGGSWQSPHTLSSKMCLZXYSZQZXNCJDQGZDLFNYKLJCJLLZLMZZNHYDSSHTHZZLZZBBHQZWWYCRZHLYQQJBEYFXXXWHSRXWQHWPSLMSSKZTTYGYQQWRSLALHMJTQJSMXQBJJZJXZYZKXBYQXBJXSHZTSFJLXMXZXFGHKZSZGGYLCLSARJYHSLLLMZXELGLXYDJYTLFBHBPNLYZFBBHPTGJKWETZHKJJXZXXGLLJLSTGSHJJYQLQZFKCGNNDJSSZFDBCTWWSEQFHQJBSAQTGYPQLBXBMMYWXGSLZHGLZGQYFLZBYFZJFRYSFMBYZHQGFWZSYFYJJPHZBYYZFFWODGRLMFTWLBZGYCQXCDJYGZYYYYTYTYDWEGAZYHXJLZYYHLRMGRXXZCLHNELJJTJTPWJYBJJBXJJTJTEEKHWSLJPLPSFYZPQQBDLQJJTYYQLYZKDKSQJYYQZLDQTGJQYZJSUCMRYQTHTEJMFCTYHYPKMHYZWJDQFHYYXWSHCTXRLJHQXHCCYYYJLTKTTYTMXGTCJTZAYYOCZLYLBSZYWJYTSJYHBYSHFJLYGJXXTMZYYLTXXYPZLXYJZYZYYPNHMYMDYYLBLHLSYYQQLLNJJYMSOYQBZGDLYXYLCQYXTSZEGXHZGLHWBLJHEYXTWQMAKBPQCGYSHHEGQCMWYYWLJYJHYYZLLJJYLHZYHMGSLJLJXCJJYCLYCJPCPZJZJMMYLCQLNQLJQJSXYJMLSZLJQLYCMMHCFMMFPQQMFYLQMCFFQMMMMHMZNFHHJGTTHHKHSLNCHHYQDXTMMQDCYZYXYQMYQYLTDCYYYZAZZCYMZYDLZFFFMMYCQZWZZMABTBYZTDMNZZGGDFTYPCGQYTTSSFFWFDTZQSSYSTWXJHXYTSXXYLBYQHWWKXHZXWZNNZZJZJJQJCCCHYYXBZXZCYZTLLCQXYNJYCYYCYNZZQYYYEWYCZDCJYCCHYJLBTZYYCQWMPWPYMLGKDLDLGKQQBGYCHJXY\";\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/pinyin-by-unicode.js","import moment from 'moment';\nimport { Utils } from '../utils/utils';\nimport FileTag from './file-tag';\n\nclass Dirent {\n  constructor(json) {\n    this.id = json.id || '0000000000000000';\n    this.name = json.name;\n    this.type = json.type;\n    this.mtime = json.mtime;\n    this.mtime_relative = moment.unix(json.mtime).fromNow();\n    this.permission = json.permission || 'rw';\n    this.isSelected = false; // is check or not\n    this.starred = json.starred || false;\n    if (json.type === 'file') {\n      this.size = Utils.bytesToSize(json.size);\n      this.is_locked = json.is_locked || false;\n      this.lock_time = json.lock_time || '';\n      this.lock_owner= json.lock_owner || null;\n      this.lock_owner_name= json.lock_owner_name || null;\n      this.locked_by_me = json.locked_by_me || false;\n      this.modifier_name = json.modifier_name || '';\n      this.modifier_email = json.modifier_email || '';\n      this.modifier_contact_email = json.modifier_contact_email || '';\n      let file_tags = [];\n      if (json.file_tags) {\n        file_tags = json.file_tags.map(item => {\n          return new FileTag(item);\n        });\n      }\n      this.file_tags = file_tags;\n      if (json.encoded_thumbnail_src) {\n        this.encoded_thumbnail_src = json.encoded_thumbnail_src;\n      }\n    }\n  }\n\n  clone() {\n    return new Dirent(this);\n  }\n\n  isDir() {\n    return this.type !== 'file';\n  }\n\n}\n\nexport default Dirent;\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/dirent.js","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport ToastManager from './toastManager';\n\nconst isBrowser =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n\n/**\n * The Toaster manages the interactionsb between\n * the ToasterManger and the toast API.\n */\nexport default class Toaster {\n  constructor() {\n    if (!isBrowser) return;\n\n    const container = document.createElement('div');\n    container.setAttribute('data-evergreen-toaster-container', '');\n    document.body.appendChild(container);\n\n    ReactDOM.render(\n      <ToastManager\n        bindNotify={this._bindNotify}\n        bindGetToasts={this._bindGetToasts}\n        bindCloseAll={this._bindCloseAll}\n      />,\n      container\n    );\n  }\n\n  _bindNotify = handler => {\n    this.notifyHandler = handler;\n  }\n\n  _bindGetToasts = handler => {\n    this.getToastsHandler = handler;\n  }\n\n  _bindCloseAll = handler => {\n    this.closeAllHandler = handler;\n  }\n\n  getToasts = () => {\n    return this.getToastsHandler();\n  }\n\n  closeAll = () => {\n    return this.closeAllHandler();\n  }\n\n  notify = (title, settings = {}) => {\n    return this.notifyHandler(title, { ...settings, intent: 'none' });\n  }\n\n  success = (title, settings = {}) => {\n    return this.notifyHandler(title, { ...settings, intent: 'success' });\n  }\n\n  warning = (title, settings = {}) => {\n    return this.notifyHandler(title, { ...settings, intent: 'warning' });\n  }\n\n  danger = (title, settings = {}) => {\n    return this.notifyHandler(title, { ...settings, intent: 'danger' });\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/toast/toaster.js","import React ,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onRelatedFileChange: PropTypes.func.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onClose: PropTypes.func,\n};\n\nclass AddRelatedFileDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: null,\n      selectedPath: '',\n      isShowFile: true,\n      errMessage: '',\n    };\n  }\n\n  handleSubmit = () => {\n    this.onAddRelatedFile();\n  }\n\n  onAddRelatedFile = () => {\n    let { repo, selectedPath } = this.state;\n    let oRepoID = this.props.repoID;\n    let rRepoID = repo.repo_id;\n    let oFilePath = this.props.filePath;\n    let rFilePath = selectedPath;\n\n    if (oRepoID === rRepoID && oFilePath === rFilePath) {\n      let message = gettext('Can not select self as a related file.');\n      this.setState({errMessage: message});\n      return;\n    }\n\n    seafileAPI.addRelatedFile(oRepoID, rRepoID, oFilePath, rFilePath).then((res) => {\n      this.props.onRelatedFileChange();\n      this.toggle();\n    }).catch((error) => {\n      if (error.response) {\n        this.setState({\n          errMessage: error.response.data.error_msg\n        });\n      }\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  onDirentItemClick = (repo, selectedPath, dirent) => {\n    if (dirent.type === 'file') {\n      this.setState({\n        repo: repo,\n        selectedPath: selectedPath,\n      });\n    }\n    else {\n      this.setState({\n        repo: null,\n        selectedPath: '',\n      });\n    }\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: null,\n      selectedPath: '',\n    });\n  }\n\n  render() {\n    let subtitle = gettext('Select related file for {placeholder}');\n    subtitle = subtitle.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.toggle} aria-label={gettext('Back')}></span>\n          {gettext('Select File')}\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"related-file-subtitle\" dangerouslySetInnerHTML={{__html: subtitle}}></div>\n          <FileChooser\n            isShowFile={this.state.isShowFile}\n            repoID={this.props.repoID}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode=\"current_repo_and_other_repos\"\n          />\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          { this.state.selectedPath ?\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n            :\n            <Button color=\"primary\" disabled>{gettext('Submit')}</Button>\n          }\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nAddRelatedFileDialog.propTypes = propTypes;\n\nexport default AddRelatedFileDialog;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/dialog/add-related-file-dialog.js","import React from 'react';\nimport { css } from 'glamor';\nimport PropTypes from 'prop-types';\n\nimport Toast from './toast';\n\nconst wrapperClass = css({\n  maxWidth: 560,\n  margin: '0 auto',\n  top: 0,\n  left: 0,\n  right: 0,\n  position: 'fixed',\n  zIndex: 999999,\n});\n\n\nconst hasCustomId = settings => Object.hasOwnProperty.call(settings, 'id');\n\nexport default class ToastManager extends React.PureComponent {\n  static propTypes = {\n    /**\n     * Function called with the `this.notify` function.\n     */\n    bindNotify: PropTypes.func.isRequired,\n\n    /**\n     * Function called with the `this.getToasts` function.\n     */\n    bindGetToasts: PropTypes.func.isRequired,\n\n    /**\n     * Function called with the `this.closeAll` function.\n     */\n    bindCloseAll: PropTypes.func.isRequired\n  }\n\n  static idCounter = 0;\n\n  constructor(props, context) {\n    super(props, context);\n\n    props.bindNotify(this.notify);\n    props.bindGetToasts(this.getToasts);\n    props.bindCloseAll(this.closeAll);\n\n    this.state = {\n      toasts: []\n    };\n  }\n\n  getToasts = () => {\n    return this.state.toasts;\n  }\n\n  closeAll = () => {\n    this.getToasts().forEach(toast => toast.close());\n  }\n\n  notify = (title, settings) => {\n    // If there's a custom toast ID passed, close existing toasts with the same custom ID\n    if (hasCustomId(settings)) {\n      for (const toast of this.state.toasts) {\n        // Since unique ID is still appended to a custom ID, skip the unique ID and check only prefix\n        if (String(toast.id).startsWith(settings.id)) {\n          this.closeToast(toast.id);\n        }\n      }\n    }\n\n    const instance = this.createToastInstance(title, settings);\n\n    this.setState(previousState => {\n      return {\n        toasts: [instance, ...previousState.toasts]\n      };\n    });\n\n    return instance;\n  }\n\n  createToastInstance = (title, settings) => {\n    const uniqueId = ++ToastManager.idCounter;\n    const id = hasCustomId(settings) ? `${settings.id}-${uniqueId}` : uniqueId;\n\n    return {\n      id,\n      title,\n      description: settings.description,\n      hasCloseButton: settings.hasCloseButton || true,\n      duration: settings.duration || 2,\n      close: () => this.closeToast(id),\n      intent: settings.intent\n    };\n  }\n\n  /**\n   * This will set isShown on the Toast which will close the toast.\n   * It won't remove the toast until onExited triggers onRemove.\n   */\n  closeToast = id => {\n    this.setState(previousState => {\n      return {\n        toasts: previousState.toasts.map(toast => {\n          if (toast.id === id) {\n            return {\n              ...toast,\n              isShown: false\n            };\n          }\n          return toast;\n        })\n      };\n    });\n  }\n\n  removeToast = id => {\n    this.setState(previousState => {\n      return {\n        toasts: previousState.toasts.filter(toast => toast.id !== id)\n      };\n    });\n  }\n\n  render() {\n    return (\n      <span className={wrapperClass}>\n        {this.state.toasts.map(({ id, description, ...props }) => {\n          return (\n            <Toast key={id} onRemove={() => this.removeToast(id)} {...props}>\n              {description}\n            </Toast>\n          );\n        })}\n      </span>\n    );\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/toast/toastManager.js","import React ,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Table } from 'reactstrap';\nimport Dirent from '../../models/dirent';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport '../../css/list-related-file-dialog.css';\n\nconst propTypes = {\n  relatedFiles: PropTypes.array.isRequired,\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  addRelatedFileToggle: PropTypes.func.isRequired,\n  onRelatedFileChange: PropTypes.func.isRequired,\n};\n\nclass ListRelatedFileDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      direntList: [],\n    });\n  }\n\n  onDeleteRelatedFile = (item) => {\n    let filePath = this.props.filePath;\n    let repoID = this.props.repoID;\n    let relatedID = item.related_id;\n    seafileAPI.deleteRelatedFile(repoID, filePath, relatedID).then((res) => {\n      this.props.onRelatedFileChange();\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  getDirentList = (relatedFiles) => {\n    if (relatedFiles.length === 0) {\n      this.setState({\n        direntList: [],\n      });\n      return;\n    }\n    let direntList = [];\n    relatedFiles.map((item) => {\n      seafileAPI.getFileInfo(item.repo_id, item.path).then(res => {\n        let dirent = new Dirent(res.data);\n        dirent['repo_name'] = item.repo_name;\n        dirent['related_id'] = item.related_id;\n        dirent['link'] = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(item.path);\n        direntList.push(dirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    });\n  }\n\n  componentWillMount() {\n    this.getDirentList(this.props.relatedFiles);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.relatedFiles.length !== this.props.relatedFiles.length) {\n      this.getDirentList(nextProps.relatedFiles);\n    }\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.toggle}>{gettext('Related Files')}</ModalHeader>\n        <ModalBody className={this.state.direntList.length > 0 ? 'list-related-file-body' : ''}>\n          <Table hover size=\"sm\" className=\"list-related-file-table\">\n            <thead>\n              <tr>\n                <th width='40%'>{gettext('Name')}</th>\n                <th width='20%'>{gettext('Library Name')}</th>\n                <th width='13%'>{gettext('Size')}</th>\n                <th width='20%'>{gettext('Last Update')}</th>\n                <th width='5%'></th>\n                <th width='2%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                this.state.direntList.map((relatedFile, index) => {\n                  return (\n                    <React.Fragment key={index}>\n                      <RelatedFile relatedFile={relatedFile} onDeleteRelatedFile={this.onDeleteRelatedFile}/>\n                    </React.Fragment>\n                  );\n                })\n              }\n            </tbody>\n          </Table>\n          <a href=\"#\" className=\"add-related-file-link\" onClick={this.props.addRelatedFileToggle}>{gettext('Add File')}</a>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nListRelatedFileDialog.propTypes = propTypes;\n\nconst RelatedFilePropTypes = {\n  relatedFile: PropTypes.object,\n  onDeleteRelatedFile: PropTypes.func.isRequired,\n};\n\nclass RelatedFile extends React.Component {\n  \n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  render() {\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    const relatedFile = this.props.relatedFile;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><a href={relatedFile.link} target='_blank'>{relatedFile.name}</a></td>\n        <td>{relatedFile.repo_name}</td>\n        <td>{relatedFile.size}</td>\n        <td>{relatedFile.mtime_relative}</td>\n        <td><i className={className} onClick={this.props.onDeleteRelatedFile.bind(this, relatedFile)}></i></td>\n        <td></td>\n      </tr>\n    );\n  }\n}\n\nRelatedFile.propTypes = RelatedFilePropTypes;\n\nexport default ListRelatedFileDialog;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/dialog/list-related-file-dialog.js","import React from 'react';\nimport { css } from 'glamor';\nimport PropTypes from 'prop-types';\nimport Transition from 'react-transition-group/Transition';\nimport Alert from './alert';\n\nconst animationEasing = {\n  deceleration: 'cubic-bezier(0.0, 0.0, 0.2, 1)',\n  acceleration: 'cubic-bezier(0.4, 0.0, 1, 1)',\n  spring: 'cubic-bezier(0.175, 0.885, 0.320, 1.175)'\n};\n\nconst ANIMATION_DURATION = 240;\n\nconst openAnimation = css.keyframes('openAnimation', {\n  from: {\n    opacity: 0,\n    transform: 'translateY(-120%)'\n  },\n  to: {\n    transform: 'translateY(0)'\n  }\n});\n\nconst closeAnimation = css.keyframes('closeAnimation', {\n  from: {\n    transform: 'scale(1)',\n    opacity: 1\n  },\n  to: {\n    transform: 'scale(0.9)',\n    opacity: 0\n  }\n});\n\nconst animationStyles = css({\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  height: 0,\n  transition: `all ${ANIMATION_DURATION}ms ${animationEasing.deceleration}`,\n  '&[data-state=\"entering\"], &[data-state=\"entered\"]': {\n    animation: `${openAnimation} ${ANIMATION_DURATION}ms ${animationEasing.spring} both`\n  },\n  '&[data-state=\"exiting\"]': {\n    animation: `${closeAnimation} 120ms ${animationEasing.acceleration} both`\n  }\n});\n\nexport default class Toast extends React.PureComponent {\n  static propTypes = {\n    /**\n     * The z-index of the toast.\n     */\n    zIndex: PropTypes.number,\n\n    /**\n     * Duration of the toast.\n     */\n    duration: PropTypes.number,\n\n    /**\n     * Function called when the toast is all the way closed.\n     */\n    onRemove: PropTypes.func,\n\n    /**\n     * The type of the alert.\n     */\n    intent: PropTypes.oneOf(['none', 'success', 'warning', 'danger']).isRequired,\n\n    /**\n     * The title of the alert.\n     */\n    title: PropTypes.node,\n\n    /**\n     * Description of the alert.\n     */\n    children: PropTypes.node,\n\n    /**\n     * When true, show a close icon button inside of the toast.\n     */\n    hasCloseButton: PropTypes.bool,\n\n    /**\n     * When false, will close the Toast and call onRemove when finished.\n     */\n    isShown: PropTypes.bool\n  }\n\n  static defaultProps = {\n    intent: 'none'\n  }\n\n  state = {\n    isShown: true,\n    height: 0\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.isShown !== this.props.isShown) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({\n        isShown: this.props.isShown\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.startCloseTimer();\n  }\n\n  componentWillUnmount() {\n    this.clearCloseTimer();\n  }\n\n  close = () => {\n    this.clearCloseTimer();\n    this.setState({\n      isShown: false\n    });\n  }\n\n  startCloseTimer = () => {\n    if (this.props.duration) {\n      this.closeTimer = setTimeout(() => {\n        this.close();\n      }, this.props.duration * 1000);\n    }\n  }\n\n  clearCloseTimer = () => {\n    if (this.closeTimer) {\n      clearTimeout(this.closeTimer);\n      this.closeTimer = null;\n    }\n  }\n\n  handleMouseEnter = () => {\n    this.clearCloseTimer();\n  }\n\n  handleMouseLeave = () => {\n    this.startCloseTimer();\n  }\n\n  onRef = ref => {\n    if (ref === null) return;\n\n    const { height } = ref.getBoundingClientRect();\n\n    this.setState({\n      height\n    });\n  }\n\n  render() {\n    return (\n      <Transition\n        appear\n        unmountOnExit\n        timeout={ANIMATION_DURATION}\n        in={this.state.isShown}\n        onExited={this.props.onRemove}\n      >\n        {state => (\n          <div\n            data-state={state}\n            className={animationStyles}\n            onMouseEnter={this.handleMouseEnter}\n            onMouseLeave={this.handleMouseLeave}\n            style={{\n              height: this.state.height,\n              zIndex: this.props.zIndex,\n              marginBottom: this.state.isShown ? 0 : -this.state.height\n            }}\n          >\n            <div ref={this.onRef} style={{ padding: 8 }}>\n              <Alert\n                intent={this.props.intent}\n                title={this.props.title}\n                children={this.props.children}\n                isRemoveable={this.props.hasCloseButton}\n                onRemove={() => this.close()}\n              />\n            </div>\n          </div>\n        )}\n      </Transition>\n    );\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/toast/toast.js","import React from 'react';\nimport { css } from 'glamor';\n\nclass Alert extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.containerStyle = css({\n      borderRadius: '3px',\n      backgroundColor: '#fff',\n      padding: '10px 16px',\n      display: 'flex',\n      boxSizing: 'border-box',\n      boxShadow: 'rgba(67, 90, 111, 0.3) 0px 0px 1px, rgba(67, 90, 111, 0.47) 0px 8px 10px -4px',\n      justifyContent: 'space-between',\n      flexDirection: 'row',\n    });\n\n    this.containerBorderSuccess = css({\n      borderLeft: '3px solid rgb(71, 184, 129)'\n    });\n\n    this.containerBorderWarn = css({\n      borderLeft: '3px solid rgb(217, 130, 43)'\n    });\n\n    this.containerBorderDanger = css({\n      borderLeft: '3px solid rgb(236, 76, 71)'\n    });\n\n    this.containerBorderNotify = css({\n      borderLeft: '3px solid rgb(16, 112, 202)'\n    });\n\n\n    this.toastTextTitle = css({\n      fontWeight: '600',\n      fontSize: '14px',\n      color: '#435a6f',\n      margin: '0'\n    });\n\n    this.toastTextChild = css({\n      fontSize: '14px',\n      color: '#999',\n      margin: '0'\n    });\n    this.toastClose = css({\n      marginLeft: '15px',\n      height: '24px',\n      width: '24px',\n      lineHeight: '22px',\n      fontWeight: '700',\n      textAlign: 'center',\n      fontSize: '20px',\n      color: '#000',\n      cursor: 'pointer',\n      opacity: '0.5',\n      ':hover': {\n        opacity: 1\n      }\n    });\n\n    this.toastIcon = css({\n      marginRight: '10px',\n      width: '14px',\n      height: '20px',\n      lineHeight: '20px'\n    });\n  }\n\n  getContainerStyle(intent) {\n    switch (intent) {\n      case 'success':\n        return { borderStyle: this.containerBorderSuccess, iconColor: css({color: 'rgb(71, 184, 129)'}), iconClass: 'fa fa-check-circle' };\n      case 'warning':\n        return { borderStyle: this.containerBorderWarn, iconColor: css({color: 'rgb(217, 130, 43)'}) , iconClass: 'fa fa-exclamation-triangle' };\n      case 'none':\n        return { borderStyle: this.containerBorderNotify, iconColor: css({color: 'rgb(16, 112, 202)'}), iconClass: 'fa fa-exclamation-circle' };\n      case  'danger':\n        return { borderStyle: this.containerBorderDanger, iconColor: css({color: 'rgb(236, 76, 71)'}), iconClass: 'fa fa-exclamation-circle' };\n    }\n  }\n\n\n  render() {\n    const toastStyle = this.getContainerStyle(this.props.intent);\n    return (\n      <div {...css(toastStyle.borderStyle, this.containerStyle)}>\n        <div className={this.toastIcon} >\n          <i className={toastStyle.iconClass} {...toastStyle.iconColor}/>\n        </div>\n        <div className={this.toastTextContainer}>\n          <p className={this.toastTextTitle}>{this.props.title}</p>\n          {this.props.children ? <p className={this.toastTextChild}>{this.props.children}</p> : null}\n        </div>\n        <div onClick={this.props.onRemove} className={this.toastClose}>\n          <span>&times;</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Alert;\n\n\n// WEBPACK FOOTER //\n// ./src/components/toast/alert.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  permissions: PropTypes.array.isRequired,\n  currentPermission: PropTypes.string.isRequired,\n  onPermissionChanged: PropTypes.func.isRequired\n};\n\nclass SharePermissionEditor extends React.Component {\n\n  translatePermission = (permission) => {\n    return Utils.sharePerms(permission);\n  }\n\n  translateExplanation = (explanation) => {\n    return Utils.sharePermsExplanation(explanation);\n  }\n\n  render() {\n    return (\n      <SelectEditor \n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.permissions}\n        currentOption={this.props.currentPermission}\n        onOptionChanged={this.props.onPermissionChanged}\n        translateOption={this.translatePermission}\n        translateExplanation={this.translateExplanation}\n      />\n    );\n  }\n}\n\nSharePermissionEditor.propTypes = propTypes;\n\nexport default SharePermissionEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/select-editor/share-permission-editor.js","export const dirPath = '/';\nexport const gettext = window.gettext;\n\nexport const siteRoot = window.app.config.siteRoot;\nexport const loginUrl = window.app.config.loginUrl;\nexport const avatarInfo = window.app.config.avatarInfo;\nexport const logoPath =  window.app.config.logoPath;\nexport const mediaUrl = window.app.config.mediaUrl;\nexport const siteTitle = window.app.config.siteTitle;\nexport const siteName = window.app.config.siteName;\nexport const logoWidth = window.app.config.logoWidth;\nexport const logoHeight = window.app.config.logoHeight;\nexport const isPro = window.app.config.isPro === 'True';\nexport const isDocs = window.app.config.isDocs === 'True';\nexport const lang = window.app.config.lang;\nexport const fileServerRoot = window.app.config.fileServerRoot;\nexport const seafileVersion = window.app.config.seafileVersion;\nexport const serviceURL = window.app.config.serviceURL;\n\n//pageOptions\nexport const seafileCollabServer = window.app.pageOptions.seafileCollabServer;\nexport const name = window.app.pageOptions.name;\nexport const contactEmail = window.app.pageOptions.contactEmail;\nexport const username = window.app.pageOptions.username;\nexport const canAddRepo = window.app.pageOptions.canAddRepo;\nexport const canGenerateShareLink = window.app.pageOptions.canGenerateShareLink;\nexport const canGenerateUploadLink = window.app.pageOptions.canGenerateUploadLink ? true : false;\nexport const canViewOrg = window.app.pageOptions.canViewOrg === 'True';\nexport const fileAuditEnabled = window.app.pageOptions.fileAuditEnabled ? true : false;\nexport const enableFileComment = window.app.pageOptions.enableFileComment ? true : false;\nexport const folderPermEnabled = window.app.pageOptions.folderPermEnabled === 'True';\nexport const enableResetEncryptedRepoPassword = window.app.pageOptions.enableResetEncryptedRepoPassword === 'True';\nexport const isEmailConfigured = window.app.pageOptions.isEmailConfigured === 'True';\nexport const enableUploadFolder = window.app.pageOptions.enableUploadFolder === 'True';\nexport const enableResumableFileUpload = window.app.pageOptions.enableResumableFileUpload === 'True';\nexport const storages = window.app.pageOptions.storages; // storage backends\nexport const enableRepoSnapshotLabel = window.app.pageOptions.enableRepoSnapshotLabel;\nexport const shareLinkExpireDaysMin = window.app.pageOptions.shareLinkExpireDaysMin;\nexport const shareLinkExpireDaysMax = window.app.pageOptions.shareLinkExpireDaysMax;\nexport const maxFileName = window.app.pageOptions.maxFileName;\nexport const enableWiki = window.app.pageOptions.enableWiki;\nexport const enableEncryptedLibrary = window.app.pageOptions.enableEncryptedLibrary;\nexport const enableRepoHistorySetting = window.app.pageOptions.enableRepoHistorySetting;\nexport const isSystemStaff = window.app.pageOptions.isSystemStaff;\nexport const thumbnailSizeForOriginal = window.app.pageOptions.thumbnailSizeForOriginal;\nexport const repoPasswordMinLength = window.app.pageOptions.repoPasswordMinLength;\n\nexport const curNoteMsg = window.app.pageOptions.curNoteMsg;\nexport const curNoteID = window.app.pageOptions.curNoteID;\n\n// wiki\nexport const slug = window.wiki ? window.wiki.config.slug : '';\nexport const repoID = window.wiki ? window.wiki.config.repoId : '';\nexport const initialPath = window.wiki ? window.wiki.config.initial_path : '';\nexport const permission = window.wiki ? window.wiki.config.permission === 'True' : '';\nexport const isDir = window.wiki ? window.wiki.config.isDir : '';\nexport const serviceUrl = window.wiki ? window.wiki.config.serviceUrl : '';\nexport const isPublicWiki = window.wiki ? window.wiki.config.isPublicWiki === 'True': '';\n\n// file history\nexport const PER_PAGE = 25;\nexport const historyRepoID = window.fileHistory ? window.fileHistory.pageOptions.repoID : '';\nexport const repoName = window.fileHistory ? window.fileHistory.pageOptions.repoName : '';\nexport const filePath = window.fileHistory ? window.fileHistory.pageOptions.filePath : '';\nexport const fileName = window.fileHistory ? window.fileHistory.pageOptions.fileName : '';\n\n// Draft review\nexport const draftFilePath = window.draft ? window.draft.config.draftFilePath: '';\nexport const draftOriginFilePath = window.draft ? window.draft.config.draftOriginFilePath: '';\nexport const draftFileName = window.draft ? window.draft.config.draftFileName: '';\nexport const draftID = window.draft ? window.draft.config.draftID : '';\nexport const draftRepoID = window.draft ? window.draft.config.draftRepoID : '';\nexport const author = window.draft ? window.draft.config.author : '';\nexport const authorAvatar = window.draft ? window.draft.config.authorAvatar : '';\nexport const originFileExists = window.draft ? window.draft.config.originFileExists : '';\nexport const draftFileExists = window.draft ? window.draft.config.draftFileExists : '';\nexport const draftStatus = window.draft ? window.draft.config.draftStatus : '';\nexport const draftPublishVersion = window.draft ? window.draft.config.draftPublishVersion : '';\nexport const originFileVersion = window.draft ? window.draft.config.originFileVersion : '';\n\n// org admin\nexport const orgID = window.org ? window.org.pageOptions.orgID : '';\nexport const invitationLink = window.org ? window.org.pageOptions.invitationLink : '';\nexport const orgMemberQuotaEnabled = window.org ? window.org.pageOptions.orgMemberQuotaEnabled : '';\n\n// sys admin\nexport const constanceEnabled = window.sysadmin ? window.sysadmin.pageOptions.constance_enabled : '';\nexport const multiTenancy = window.sysadmin ? window.sysadmin.pageOptions.multi_tenancy : '';\nexport const multiInstitution = window.sysadmin ? window.sysadmin.pageOptions.multi_institution : '';\nexport const sysadminExtraEnabled = window.sysadmin ? window.sysadmin.pageOptions.sysadmin_extra_enabled : '';\nexport const enableGuestInvitation = window.sysadmin ? window.sysadmin.pageOptions.enable_guest_invitation : '';\nexport const enableTermsAndConditions = window.sysadmin ? window.sysadmin.pageOptions.enable_terms_and_conditions : '';\nexport const isDefaultAdmin = window.sysadmin ? window.sysadmin.pageOptions.is_default_admin : '';\nexport const enableFileScan = window.sysadmin ? window.sysadmin.pageOptions.enable_file_scan : '';\nexport const canViewSystemInfo = window.sysadmin ? window.sysadmin.pageOptions.admin_permissions.can_view_system_info : '';\nexport const canViewStatistic = window.sysadmin ? window.sysadmin.pageOptions.admin_permissions.can_view_statistic : '';\nexport const canConfigSystem = window.sysadmin ? window.sysadmin.pageOptions.admin_permissions.can_config_system : '';\nexport const canManageLibrary = window.sysadmin ? window.sysadmin.pageOptions.admin_permissions.can_manage_library : '';\nexport const canManageUser = window.sysadmin ? window.sysadmin.pageOptions.admin_permissions.can_manage_user : '';\nexport const canManageGroup = window.sysadmin ? window.sysadmin.pageOptions.admin_permissions.can_manage_group : '';\nexport const canViewUserLog = window.sysadmin ? window.sysadmin.pageOptions.admin_permissions.can_view_user_log : '';\nexport const canViewAdminLog = window.sysadmin ? window.sysadmin.pageOptions.admin_permissions.can_view_admin_log : '';\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/constants.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport AsyncSelect from 'react-select/lib/Async';\nimport { seafileAPI } from '../utils/seafile-api.js';\nimport { gettext } from '../utils/constants';\n\nconst propTypes = {\n  placeholder: PropTypes.string.isRequired,\n  onSelectChange: PropTypes.func.isRequired,\n  isMulti: PropTypes.bool.isRequired,\n  className: PropTypes.string,\n};\n\nconst NoOptionsMessage = (props) => {\n  return (\n    <div {...props.innerProps} style={{margin: '6px 10px', textAlign: 'center', color: 'hsl(0,0%,50%)'}}>{gettext('User not found')}</div>\n  );\n};\n\nclass UserSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.options = [];\n  }\n\n  handleSelectChange = (option) => {\n    this.options = [];\n    this.props.onSelectChange(option);\n  }\n\n  loadOptions = (input, callback) => {\n    const value = input.trim();\n    if (value.length > 0) {\n      seafileAPI.searchUsers(value).then((res) => {\n        this.options = [];\n        for (let i = 0 ; i < res.data.users.length; i++) {\n          const item = res.data.users[i];\n          let obj = {};\n          obj.value = item.name;\n          obj.email = item.email;\n          obj.label =\n            <React.Fragment>\n              <img src={item.avatar_url} className=\"select-module select-module-icon avatar\" alt=\"\"/>\n              <span className='select-module select-module-name'>{item.name}</span>\n            </React.Fragment>;\n          this.options.push(obj);\n        }\n        callback(this.options);\n      });\n    }\n  }\n\n  clearSelect = () => {\n    this.refs.userSelect.select.onChange([], { action: 'clear' });\n  }\n\n  render() {\n    return (\n      <AsyncSelect\n        isClearable\n        classNamePrefix\n        components={{ NoOptionsMessage }}\n        isMulti={this.props.isMulti}\n        loadOptions={this.loadOptions}\n        onChange={this.handleSelectChange}\n        placeholder={this.props.placeholder}\n        className={`user-select ${this.props.className}`}\n        ref=\"userSelect\"\n      />\n    );\n  }\n}\n\nUserSelect.propTypes = propTypes;\n\nexport default UserSelect;\n\n\n// WEBPACK FOOTER //\n// ./src/components/user-select.js","class FileTag {\n  constructor(object) {\n    this.id = object.file_tag_id;\n    this.repo_tag_id = object.repo_tag_id;\n    this.name = object.tag_name;\n    this.color = object.tag_color;\n  }\n}\n\nexport default FileTag;\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/file-tag.js","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap'; \nimport { gettext, canGenerateShareLink, canGenerateUploadLink } from '../../utils/constants';\nimport ShareToUser from './share-to-user';\nimport ShareToGroup from './share-to-group';\nimport GenerateShareLink from './generate-share-link';\nimport GenerateUploadLink from './generate-upload-link';\nimport '../../css/share-link-dialog.css';\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemType: PropTypes.string.isRequired, // there will be three choose: ['library', 'dir', 'file']\n  itemName: PropTypes.string.isRequired,\n  itemPath: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool,\n};\n\nclass ShareDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: this.getInitialActiveTab()\n    };\n  }\n\n  getInitialActiveTab = () => {\n    const {repoEncrypted, userPerm, enableDirPrivateShare} = this.props;\n    const enableShareLink = !repoEncrypted && canGenerateShareLink;\n    const enableUploadLink = !repoEncrypted && canGenerateUploadLink && userPerm == 'rw';\n\n    if (enableShareLink) {\n      return 'shareLink';\n    } else if (enableUploadLink) {\n      return 'uploadLink';\n    } else if (enableDirPrivateShare) {\n      return 'shareToUser';\n    }\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  }\n\n  renderDirContent = () => {\n    let activeTab = this.state.activeTab;\n\n    const {repoEncrypted, userPerm, enableDirPrivateShare} = this.props;\n    const enableShareLink = !repoEncrypted && canGenerateShareLink;\n    const enableUploadLink = !repoEncrypted && canGenerateUploadLink && userPerm == 'rw';\n    \n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills vertical>\n            {enableShareLink &&\n              <NavItem>\n                <NavLink className={activeTab === 'shareLink' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareLink')}>\n                  {gettext('Share Link')}\n                </NavLink>\n              </NavItem>\n            }\n            {enableUploadLink &&\n              <NavItem>\n                <NavLink className={activeTab === 'uploadLink' ? 'active' : ''} onClick={this.toggle.bind(this, 'uploadLink')}>\n                  {gettext('Upload Link')}\n                </NavLink>\n              </NavItem>\n            }\n            {enableDirPrivateShare &&\n              <Fragment>\n                <NavItem>\n                  <NavLink className={activeTab === 'shareToUser' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToUser')}>\n                    {gettext('Share to user')}\n                  </NavLink>\n                </NavItem>\n                <NavItem>\n                  <NavLink className={activeTab === 'shareToGroup' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToGroup')}>\n                    {gettext('Share to group')}\n                  </NavLink>\n                </NavItem>\n              </Fragment>\n            }\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            {enableShareLink &&\n              <TabPane tabId=\"shareLink\">\n                <GenerateShareLink \n                  itemPath={this.props.itemPath} \n                  repoID={this.props.repoID}\n                  closeShareDialog={this.props.toggleDialog} \n                />\n              </TabPane>\n            }\n            {enableUploadLink &&\n              <TabPane tabId=\"uploadLink\">\n                <GenerateUploadLink \n                  itemPath={this.props.itemPath} \n                  repoID={this.props.repoID} \n                  closeShareDialog={this.props.toggleDialog} \n                />\n              </TabPane>\n            }\n            {enableDirPrivateShare &&\n              <Fragment>\n                <TabPane tabId=\"shareToUser\">\n                  <ShareToUser itemType={this.props.itemType} isGroupOwnedRepo={this.props.isGroupOwnedRepo} itemPath={this.props.itemPath} repoID={this.props.repoID} />\n                </TabPane>\n                <TabPane tabId=\"shareToGroup\">\n                  <ShareToGroup itemType={this.props.itemType} isGroupOwnedRepo={this.props.isGroupOwnedRepo} itemPath={this.props.itemPath} repoID={this.props.repoID} />\n                </TabPane>\n              </Fragment>\n            }\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  }\n\n  renderFileContent = () => {\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills vertical>\n            <NavItem>\n              <NavLink\n                className=\"active\" onClick={() => {this.toggle.bind(this, 'shareLink');}}>\n                {gettext('Share Link')}\n              </NavLink>\n            </NavItem>\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"shareLink\">\n              <GenerateShareLink \n                itemPath={this.props.itemPath} \n                repoID={this.props.repoID} \n                closeShareDialog={this.props.toggleDialog}\n              />\n            </TabPane>\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const { itemType, itemName, repoEncrypted } = this.props;\n    const enableShareLink = !repoEncrypted && canGenerateShareLink;\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '720px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>{gettext('Share')} <span className=\"op-target\" title={itemName}>{itemName}</span></ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\">\n            {(itemType === 'library' || itemType === 'dir') && this.renderDirContent()}\n            {(itemType === 'file' && enableShareLink) && this.renderFileContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nShareDialog.propTypes = propTypes;\n\nexport default ShareDialog;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/dialog/share-dialog.js","import cookie from 'react-cookies';\nimport { SeafileAPI } from 'seafile-js';\nimport { siteRoot } from './constants';\n\nlet seafileAPI = new SeafileAPI();\nlet xcsrfHeaders = cookie.load('sfcsrftoken');\nseafileAPI.initForSeahubUsage({ siteRoot, xcsrfHeaders });\n\nexport { seafileAPI };\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/seafile-api.js","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport RepoInfo from '../../models/repo-info';\nimport RepoListView from './repo-list-view';\nimport Loading from '../loading';\nimport SearchedListView from './searched-list-view';\n\nimport '../../css/file-chooser.css';\n\nconst propTypes = {\n  isShowFile: PropTypes.bool,\n  repoID: PropTypes.string,\n  onDirentItemClick: PropTypes.func,\n  onRepoItemClick: PropTypes.func,\n  mode: PropTypes.oneOf(['current_repo_and_other_repos', 'only_all_repos', 'only_current_library']),\n};\n\nclass FileChooser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasRequest: false,\n      isCurrentRepoShow: true,\n      isOtherRepoShow: false,\n      repoList: [],\n      currentRepoInfo: null,\n      selectedRepo: null,\n      selectedPath: '',\n      isSearching: false,\n      isResultGot: false,\n      searchInfo: '',\n      searchResults: [],\n    };\n    this.inputValue = '';\n    this.timer = null;\n    this.source = null;\n  }\n\n  componentDidMount() {\n    if (this.props.repoID) {  // current_repo_and_other_repos, only_current_library\n      let repoID = this.props.repoID;\n      seafileAPI.getRepoInfo(repoID).then(res => {\n        // need to optimized\n        let repoInfo = new RepoInfo(res.data);\n        this.setState({\n          currentRepoInfo: repoInfo,\n          selectedRepo: repoInfo\n        });\n        this.props.onRepoItemClick(repoInfo);\n      });\n    } else { // only_all_repos\n      seafileAPI.listRepos().then(res => {\n        let repos = res.data.repos;\n        let repoList = [];\n        let repoIdList = [];\n        for(let i = 0; i < repos.length; i++) {\n          if (repos[i].permission !== 'rw') {\n            continue;\n          }\n          if (repoIdList.indexOf(repos[i].repo_id) > -1) {\n            continue;\n          }\n          repoList.push(repos[i]);\n          repoIdList.push(repos[i].repo_id);\n        }\n        repoList = Utils.sortRepos(repoList, 'name', 'asc');\n        this.setState({repoList: repoList});\n      });\n    }\n  }\n\n  onOtherRepoToggle = () => {\n    if (!this.state.hasRequest) {\n      let that = this;\n      seafileAPI.listRepos().then(res => {\n        // todo optimized code\n        let repos = res.data.repos;\n        let repoList = [];\n        let repoIdList = [];\n        for(let i = 0; i < repos.length; i++) {\n          if (repos[i].permission !== 'rw') {\n            continue;\n          }\n          if (that.props.repoID && (repos[i].repo_name === that.state.currentRepoInfo.repo_name)) {\n            continue;\n          }\n          if (repoIdList.indexOf(repos[i].repo_id) > -1) {\n            continue;\n          }\n          repoList.push(repos[i]);\n          repoIdList.push(repos[i].repo_id);\n        }\n        repoList = Utils.sortRepos(repoList, 'name', 'asc');\n        this.setState({\n          repoList: repoList,\n          isOtherRepoShow: !this.state.isOtherRepoShow,\n        });\n      });\n    }\n    else {\n      this.setState({isOtherRepoShow: !this.state.isOtherRepoShow});\n    }\n  }\n\n  onCurrentRepoToggle = () => [\n    this.setState({isCurrentRepoShow: !this.state.isCurrentRepoShow})\n  ]\n\n  onDirentItemClick = (repo, filePath, dirent) => {\n    this.props.onDirentItemClick(repo, filePath, dirent);\n    this.setState({\n      selectedRepo: repo,\n      selectedPath: filePath\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    if (this.props.onRepoItemClick) {\n      this.props.onRepoItemClick(repo);\n    }\n    this.setState({\n      selectedRepo: repo,\n      selectedPath: '',\n    });\n  }\n\n  onCloseSearching = () => {\n    this.setState({\n      isSearching: false,\n      isResultGot: false,\n      searchInfo: '',\n      searchResults: [],\n    });\n    this.inputValue = '';\n    this.timer = null;\n    this.source = null;\n  }\n\n  onSearchInfoChanged = (event) => {\n    let searchInfo = event.target.value.trim();\n\n    this.setState({searchInfo: searchInfo});\n\n    if (this.inputValue === searchInfo) {\n      return false;\n    }\n\n    this.inputValue = searchInfo;\n\n    if (searchInfo.length === 0) {\n      this.setState({\n        isSearching: false,\n        searchResults: [],\n      });\n      return false;\n    }\n\n    if (!this.state.searchResults.length && searchInfo.length > 0) {\n      this.setState({\n        isSearching: true,\n        isResultGot: false,\n      });\n    }\n\n    if (this.inputValue === '' || this.getValueLength(this.inputValue) < 3) {\n      this.setState({isResultGot: false});\n      return false;\n    }\n\n    let repoID = this.props.repoID;\n    let isShowFile = this.props.isShowFile;\n    let mode = this.props.mode;\n    let searchRepo = mode === 'only_current_library' ? repoID : 'all';\n\n    let queryData = {\n      q: searchInfo,\n      search_repo: searchRepo,\n      search_ftypes: 'all',\n      obj_type: isShowFile ? 'file' : 'dir',\n    };\n\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n\n    this.timer = setTimeout(this.getSearchResult(queryData), 500);\n  }\n\n  getSearchResult = (queryData) => {\n    if (this.source) {\n      this.cancelRequest();\n    }\n\n    this.setState({isResultGot: false});\n\n    this.source = seafileAPI.getSource();\n    this.sendRequest(queryData, this.source.token);\n  }\n\n  sendRequest = (queryData, cancelToken) => {\n    seafileAPI.searchFiles(queryData, cancelToken).then(res => {\n      if (!res.data.total) {\n        this.setState({\n          searchResults: [],\n          isResultGot: true\n        });\n        this.source = null;\n        return;\n      }\n\n      let items = this.formatResultItems(res.data.results);\n      this.setState({\n        searchResults: items,\n        isResultGot: true\n      });\n      this.source = null;\n    }).catch(res => {\n      /* eslint-disable */\n      console.log(res);\n      /* eslint-enable */\n    });\n  }\n\n  cancelRequest = () => {\n    this.source.cancel('prev request is cancelled');\n  }\n\n  getValueLength = (str) => {\n    var i = 0, code, len = 0;\n    for (; i < str.length; i++) {\n      code = str.charCodeAt(i);\n      if (code == 10) { //solve enter problem\n        len += 2;\n      } else if (code < 0x007f) {\n        len += 1;\n      } else if (code >= 0x0080 && code <= 0x07ff) {\n        len += 2;\n      } else if (code >= 0x0800 && code <= 0xffff) {\n        len += 3;\n      }\n    }\n    return len;\n  }\n\n  formatResultItems = (data) => {\n    let items = [];\n    let length = data.length > 10 ? 10 : data.length;\n    for (let i = 0; i < length; i++) {\n      items[i] = {};\n      items[i]['index'] = [i];\n      items[i]['name'] = data[i].name;\n      items[i]['path'] = data[i].fullpath;\n      items[i]['repo_id'] = data[i].repo_id;\n      items[i]['repo_name'] = data[i].repo_name;\n      items[i]['is_dir'] = data[i].is_dir;\n      items[i]['link_content'] = decodeURI(data[i].fullpath).substring(1);\n      items[i]['content'] = data[i].content_highlight;\n    }\n    return items;\n  }\n\n  onSearchedItemClick = (item) => {\n    item['type'] = item.is_dir ? 'dir' : 'file';\n    let repo = new RepoInfo(item);\n    this.props.onDirentItemClick(repo, item.path, item);\n  }\n\n  renderSearchedView = () => {\n    if (this.getValueLength(this.inputValue) < 3) {\n      return '';\n    }\n\n    if (!this.state.isResultGot) {\n      return (<Loading />);\n    }\n\n    if (this.state.isResultGot && this.state.searchResults.length === 0) {\n      return (<div className=\"search-result-none text-center\">{gettext('No results matching.')}</div>);\n    }\n\n    if (this.state.isResultGot && this.state.searchResults.length > 0) {\n      return (<SearchedListView searchResults={this.state.searchResults} onItemClick={this.onSearchedItemClick}/>);\n    }\n  }\n \n  renderRepoListView = () => {\n    return (\n      <div className=\"file-chooser-container\">\n        {this.props.mode === 'current_repo_and_other_repos' && (\n          <Fragment>\n            <div className=\"list-view\">\n              <div className=\"list-view-header\">\n                <span className={`item-toggle fa ${this.state.isCurrentRepoShow ? 'fa-caret-down' : 'fa-caret-right'}`} onClick={this.onCurrentRepoToggle}></span>\n                <span className=\"library\">{gettext('Current Library')}</span>\n              </div>\n              {\n                this.state.isCurrentRepoShow && this.state.currentRepoInfo &&\n                <RepoListView \n                  initToShowChildren={true}\n                  currentRepoInfo={this.state.currentRepoInfo}\n                  selectedRepo={this.state.selectedRepo}\n                  selectedPath={this.state.selectedPath}\n                  onRepoItemClick={this.onRepoItemClick} \n                  onDirentItemClick={this.onDirentItemClick}\n                  isShowFile={this.props.isShowFile}\n                />\n              }\n            </div>\n            <div className=\"list-view\">\n              <div className=\"list-view-header\">\n                <span className={`item-toggle fa ${this.state.isOtherRepoShow ? 'fa-caret-down' : 'fa-caret-right'}`} onClick={this.onOtherRepoToggle}></span>\n                <span className=\"library\">{gettext('Other Libraries')}</span>\n              </div>\n              {\n                this.state.isOtherRepoShow && \n                <RepoListView \n                  initToShowChildren={false}\n                  repoList={this.state.repoList}\n                  selectedRepo={this.state.selectedRepo}\n                  selectedPath={this.state.selectedPath}\n                  onRepoItemClick={this.onRepoItemClick} \n                  onDirentItemClick={this.onDirentItemClick}\n                  isShowFile={this.props.isShowFile}\n                /> \n              }\n            </div>\n          </Fragment>\n        )}\n        {this.props.mode === 'only_current_library' && (\n            <div className=\"list-view\">\n              <div className=\"list-view-header\">\n                <span className={`item-toggle fa ${this.state.isCurrentRepoShow ? 'fa-caret-down' : 'fa-caret-right'}`} onClick={this.onCurrentRepoToggle}></span>\n                <span className=\"library\">{gettext('Current Library')}</span>\n              </div>\n              {\n                this.state.isCurrentRepoShow && this.state.currentRepoInfo &&\n                <RepoListView \n                  initToShowChildren={true}\n                  currentRepoInfo={this.state.currentRepoInfo}\n                  selectedRepo={this.state.selectedRepo}\n                  selectedPath={this.state.selectedPath}\n                  onRepoItemClick={this.onRepoItemClick} \n                  onDirentItemClick={this.onDirentItemClick}\n                  isShowFile={this.props.isShowFile}\n                />\n              }\n            </div>\n        )}\n        {this.props.mode === 'only_all_repos' && (\n          <div className=\"file-chooser-container\">\n            <div className=\"list-view\">\n              <div className=\"list-view-header\">\n                <span className=\"item-toggle fa fa-caret-down\"></span>\n                <span className=\"library\">{gettext('Libraries')}</span>\n              </div>\n                <RepoListView \n                  initToShowChildren={false}\n                  repoList={this.state.repoList}\n                  selectedRepo={this.state.selectedRepo}\n                  selectedPath={this.state.selectedPath}\n                  onRepoItemClick={this.onRepoItemClick} \n                  onDirentItemClick={this.onDirentItemClick}\n                  isShowFile={this.props.isShowFile}\n                /> \n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  render() {\n    if (!this.state.selectedRepo && this.props.repoID) {\n      return '';\n    }\n\n    return (\n      <Fragment>\n        {isPro && (\n          <div className=\"file-chooser-search-input\">\n            <Input className=\"search-input\" placeholder={gettext('Search...')} className=\"mb-2\" type='text' value={this.state.searchInfo} onChange={this.onSearchInfoChanged}></Input>\n            {this.state.searchInfo.length !== 0 && (\n              <span className=\"search-control attr-action-icon fas fa-times\" onClick={this.onCloseSearching}></span>\n            )}\n          </div>\n        )}\n        {this.state.isSearching && (\n          <div className=\"file-chooser-search-container\">\n            {this.renderSearchedView()}\n          </div>\n        )}\n        {!this.state.isSearching && this.renderRepoListView()}\n      </Fragment>\n    );\n  }\n}\n\nFileChooser.propTypes = propTypes;\n\nexport default FileChooser;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/file-chooser/file-chooser.js","import { Utils } from '../utils/utils';\n\nclass RepoInfo {\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.permission = object.permission;\n    this.size = Utils.bytesToSize(object.size);\n    this.file_count = object.file_count;\n    this.owner_name = object.owner_name;\n    this.owner_email = object.owner_email;\n    this.owner_contact_email = object.owner_contact_email;\n    // is repo shared admin; \n    // is repo shared admin && is one of current ordinary group's admins; \n    // is one of current group owned group's admins;\n    this.is_admin = object.is_admin;\n    this.is_virtual = object.is_virtual;\n    this.no_quota = object.no_quota;\n    this.has_been_shared_out = object.has_been_shared_out;\n    this.encrypted = object.encrypted;\n    this.lib_need_decrypt = object.lib_need_decrypt;\n  }\n}\n\nexport default RepoInfo;\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/repo-info.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport Select from 'react-select';\nimport '../../css/select-editor.css';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired, // there will be two mode. first: text and select. second: just select\n  isEditIconShow: PropTypes.bool.isRequired,\n  options: PropTypes.array.isRequired,\n  currentOption: PropTypes.string.isRequired,\n  translateOption: PropTypes.func.isRequired,\n  translateExplanation: PropTypes.func,\n  onOptionChanged: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func,\n};\n\nclass SelectEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditing: false,\n    };\n    this.options = [];\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.onHideSelect);\n    this.setOptions();\n  }\n\n  setOptions = () => {\n    this.options = [];\n    const options = this.props.options;\n    for (let i = 0, length = options.length; i < length; i++) {\n      let option = {};\n      option.value = options[i];\n      option.label = <div>{this.props.translateOption(options[i])}{ this.props.translateExplanation && <div className=\"permission-editor-explanation\">{this.props.translateExplanation(options[i])}</div>}</div>;\n      this.options.push(option);\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onHideSelect);\n  }\n\n  onEditPermission = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({isEditing: true});\n    this.props.toggleItemFreezed && this.props.toggleItemFreezed(true);\n  }\n\n  onOptionChanged = (e) => {\n    let permission = e.value;\n    if (permission !== this.props.currentOption) {\n      this.props.onOptionChanged(permission);\n    }\n    this.setState({isEditing: false});\n    this.props.toggleItemFreezed && this.props.toggleItemFreezed(false);\n  }\n\n  onSelectHandler = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  onHideSelect = () => {\n    this.setState({isEditing: false});\n    this.props.toggleItemFreezed && this.props.toggleItemFreezed(false);\n  }\n\n  render() {\n    let { currentOption, isTextMode } = this.props;\n\n    // scence1: isTextMode (text)editor-icon --> select\n    // scence2: !isTextMode select\n    return (\n      <div className=\"permission-editor\" onClick={this.onSelectHandler}>\n        {(!isTextMode || this.state.isEditing) &&\n          <Select\n            options={this.options}\n            className=\"permission-editor-select\"\n            classNamePrefix=\"permission-editor\"\n            placeholder={this.props.translateOption(currentOption)}\n            onChange={this.onOptionChanged}\n            captureMenuScroll={false}\n          />\n        }\n        {(isTextMode && !this.state.isEditing) &&\n          <div>\n            {this.props.translateOption(currentOption)}\n            {this.props.isEditIconShow && (\n              <span \n                title={gettext('Edit')} \n                className=\"fa fa-pencil-alt attr-action-icon\" \n                onClick={this.onEditPermission}>\n              </span>\n            )}\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nSelectEditor.propTypes = propTypes;\n\nexport default SelectEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/select-editor/select-editor.js","import { mediaUrl, gettext, serviceURL } from './constants';\nimport { strChineseFirstPY } from './pinyin-by-unicode';\n\nexport const Utils = {\n\n  keyCodes:  {\n    esc:   27,\n    space: 32,\n    tab:   9,\n    up:    38,\n    down:  40\n  },\n\n  bytesToSize: function(bytes) {\n    if (typeof(bytes) == 'undefined') return ' ';\n\n    if(bytes < 0) return '--';\n    const sizes = ['bytes', 'KB', 'MB', 'GB', 'TB', 'PB'];\n\n    if (bytes === 0) return bytes + ' ' + sizes[0];\n\n    const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1000)), 10);\n    if (i === 0) return bytes + ' ' + sizes[i];\n    return (bytes / (1000 ** i)).toFixed(1) + ' ' + sizes[i];\n  },\n\n  isHiDPI: function() {\n    var pixelRatio = window.devicePixelRatio ? window.devicePixelRatio : 1;\n    if (pixelRatio > 1) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  FILEEXT_ICON_MAP: {\n\n    // text file\n    'md': 'txt.png',\n    'txt': 'txt.png',\n\n    // pdf file\n    'pdf' : 'pdf.png',\n\n    // document file\n    'doc' : 'word.png',\n    'docx' : 'word.png',\n    'odt' : 'word.png',\n    'fodt' : 'word.png',\n\n    'ppt' : 'ppt.png',\n    'pptx' : 'ppt.png',\n    'odp' : 'ppt.png',\n    'fodp' : 'ppt.png',\n\n    'xls' : 'excel.png',\n    'xlsx' : 'excel.png',\n    'ods' : 'excel.png',\n    'fods' : 'excel.png',\n\n    // video\n    'mp4': 'video.png',\n    'ogv': 'video.png',\n    'webm': 'video.png',\n    'mov': 'video.png',\n    'flv': 'video.png',\n    'wmv': 'video.png',\n    'rmvb': 'video.png',\n\n    // music file\n    'mp3' : 'music.png',\n    'oga' : 'music.png',\n    'ogg' : 'music.png',\n    'flac' : 'music.png',\n    'aac' : 'music.png',\n    'ac3' : 'music.png',\n    'wma' : 'music.png',\n\n    // image file\n    'jpg' : 'pic.png',\n    'jpeg' : 'pic.png',\n    'png' : 'pic.png',\n    'svg' : 'pic.png',\n    'gif' : 'pic.png',\n    'bmp' : 'pic.png',\n    'ico' : 'pic.png',\n\n    // default\n    'default' : 'file.png'\n  },\n\n  // check if a file is an image\n  imageCheck: function (filename) {\n    // no file ext\n    if (filename.lastIndexOf('.') == -1) {\n      return false;\n    }\n    var file_ext = filename.substr(filename.lastIndexOf('.') + 1).toLowerCase();\n    var image_exts = ['gif', 'jpeg', 'jpg', 'png', 'ico', 'bmp'];\n    if (image_exts.indexOf(file_ext) != -1) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  // check if a file is a video\n  videoCheck: function (filename) {\n    // no file ext\n    if (filename.lastIndexOf('.') == -1) {\n      return false;\n    }\n    var file_ext = filename.substr(filename.lastIndexOf('.') + 1).toLowerCase();\n    var exts = ['mp4', 'ogv', 'webm', 'mov'];\n    if (exts.indexOf(file_ext) != -1) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  encodePath: function(path) {\n    // IE8 does not support 'map()'\n    /*\n       return path.split('/').map(function(e) {\n       return encodeURIComponent(e);\n       }).join('/');\n       */\n    if (!path) {\n      return '';\n    }\n    var path_arr = path.split('/');\n    var path_arr_ = [];\n    for (var i = 0, len = path_arr.length; i < len; i++) {\n      path_arr_.push(encodeURIComponent(path_arr[i]));\n    }\n    return path_arr_.join('/');\n  },\n\n  HTMLescape: function(html) {\n    return document.createElement('div')\n      .appendChild(document.createTextNode(html))\n      .parentNode\n      .innerHTML;\n  },\n\n  generateDialogTitle: function(title, operationTarget) {\n    /*\n     * @param title: gettext('...{placeholder}...')\n     */\n    const targetStr = this.HTMLescape(operationTarget);\n    const str = `<span class=\"op-target ellipsis ellipsis-op-target\" title=${targetStr}>${targetStr}</span>`;\n    return title.replace('{placeholder}', str);\n  },\n\n  getFileName: function(filePath) {\n    let lastIndex = filePath.lastIndexOf('/');\n    return filePath.slice(lastIndex+1);\n  },\n\n  /**\n   * input: '/abc/bc/cb'\n   * output: ['/abc', '/abc/bc', '/abc/bc/cb'];\n   */\n  getPaths: function(path) {\n    let paths = path.split('/').slice(1);\n    let result = [];\n    while(paths.length) {\n      result.push('/' + paths.join('/'));\n      paths.pop();\n    }\n    return result.reverse();\n  },\n\n  /**\n   * input: \n   *  eg: /\n   *      ../abc/abc/\n   *      ../abc/bc\n   * output(return):\n   *  eg: /\n   *      abc\n   *      bc\n   */\n  getFolderName: function(path) {\n    if (path === '/') {\n      return path;\n    }\n    path = path[path.length - 1] !== '/' ? path : path.slice(0, path.length -2);\n    return path.slice(path.lastIndexOf('/') + 1);\n  },\n\n  /*\n    return dirname of a path.\n    if path is '/', return '/'.\n  */\n  getDirName: function(path) {\n    let dir = path.slice(0, path.lastIndexOf('/'));\n    if (dir === '') {\n      return '/';\n    } else {\n      return dir;\n    }\n  },\n\n  isChildPath: function(child, parent) {\n    let p = this.getDirName(child);\n    return p === parent;\n  },\n\n  isAncestorPath: function(ancestor, path) {\n    return path.indexOf(ancestor) > -1;\n  },\n\n  renameAncestorPath: function(path, ancestor, newAncestor) {\n    return path.replace(ancestor, newAncestor);\n  },\n\n  joinPath: function(pathA, pathB) {\n    if (pathA[pathA.length-1] === '/') {\n      return pathA + pathB;\n    } else {\n      return pathA + '/' + pathB;\n    }\n  },\n\n  isSupportUploadFolder: function() {\n    return navigator.userAgent.indexOf('Firefox')!=-1 ||\n      navigator.userAgent.indexOf('Chrome') > -1;\n  },\n\n  getDefaultLibIconUrl: function(isBig) {\n    let size = Utils.isHiDPI() ? 48 : 24;\n    size = isBig ? 256 : size;\n    let icon_name = 'lib.png';\n    return mediaUrl + 'img/lib/' + size + '/' + icon_name;\n  },\n\n  getLibIconUrl: function(repo, isBig) {\n    let permission = repo.permission || repo.share_permission; //Compatible with regular repo and repo shared\n    let size = Utils.isHiDPI() ? 48 : 24;\n    size = isBig ? 256 : size;\n    let icon_name = 'lib.png';\n    if (repo.encrypted) {\n      icon_name = 'lib-encrypted.png';\n    }\n    if (permission === 'r' || permission === 'perview') {\n      icon_name = 'lib-readonly.png';\n    }\n\n    return mediaUrl + 'img/lib/' + size + '/' + icon_name;\n  },\n\n  getDirentIcon: function (dirent, isBig) {\n    let size = this.isHiDPI() ? 48 : 24;\n    size = isBig ? 192 : size;\n    if (dirent.isDir()) {\n      let readonly = false;\n      if (dirent.permission && (dirent.permission === 'r' || dirent.permission === 'preview')) {\n        readonly = true;\n      }\n      return this.getFolderIconUrl(readonly, size);\n    } else {\n      return this.getFileIconUrl(dirent.name, size);\n    }\n  },\n\n  getFolderIconUrl: function(readonly = false, size) {\n    if (!size) {\n      size = Utils.isHiDPI() ? 48 : 24;\n    }\n    size = size > 24 ? 192 : 24;\n    return `${mediaUrl}img/folder${readonly ? '-read-only-' : '-'}${size}.png`;\n  },\n\n  getFileIconUrl: function(filename, size) {\n    if (!size) {\n      size = Utils.isHiDPI() ? 48 : 24;\n    }\n    size = size > 24 ? 192 : 24;\n    let file_ext = '';\n    if (filename.lastIndexOf('.') == -1) {\n      return mediaUrl + 'img/file/' + size + '/' + this.FILEEXT_ICON_MAP['default'];\n    } else {\n      file_ext = filename.substr(filename.lastIndexOf('.') + 1).toLowerCase();\n    }\n\n    if (this.FILEEXT_ICON_MAP[file_ext]) {\n      return mediaUrl + 'img/file/' + size + '/' + this.FILEEXT_ICON_MAP[file_ext];\n    } else {\n      return mediaUrl + 'img/file/' + size + '/' + this.FILEEXT_ICON_MAP['default'];\n    }\n  },\n\n  getLibIconTitle: function(repo) {\n    var title;\n    let permission = repo.permission || repo.share_permission; //Compatible with regular repo and repo shared\n    if (repo.encrypted) {\n      title = gettext('Encrypted library');\n    } else if (repo.is_admin) { // shared with 'admin' permission\n      title = gettext('Admin access');\n    } else {\n      switch(permission) {\n        case 'rw':\n          title = gettext('Read-Write library');\n          break;\n        case 'r':\n          title = gettext('Read-Only library');\n          break;\n        case 'cloud-edit':\n          title = gettext('Preview-Edit-on-Cloud library');\n          break;\n        case 'preview':\n          title = gettext('Preview-on-Cloud library');\n          break;\n      }\n    }\n    return title;\n  },\n\n  getFolderIconTitle: function(options) {\n    var title;\n    switch(options.permission) {\n      case 'rw':\n        title = gettext('Read-Write folder');\n        break;\n      case 'r':\n        title = gettext('Read-Only folder');\n        break;\n      case 'cloud-edit':\n        title = gettext('Preview-Edit-on-Cloud folder');\n        break;\n      case 'preview':\n        title = gettext('Preview-on-Cloud folder');\n        break;\n    }\n    return title;\n  },\n\n  sharePerms: function(permission) {\n    var title;\n    switch(permission) {\n      case 'rw':\n        title = gettext('Read-Write');\n        break;\n      case 'r':\n        title = gettext('Read-Only');\n        break;\n      case 'admin':\n        title = gettext('Admin');\n        break;\n      case 'cloud-edit':\n        title = gettext('Preview-Edit-on-Cloud');\n        break;\n      case 'preview':\n        title = gettext('Preview-on-Cloud');\n        break;\n    }\n    return title;\n  },\n\n  sharePermsExplanation: function(permission) {\n    var title;\n    switch(permission) {\n      case 'rw':\n        title = gettext('User can read, write, upload, download and sync files.');\n        break;\n      case 'r':\n        title = gettext('User can read, download and sync files.');\n        break;\n      case 'admin':\n        title = gettext('Besides Write permission, user can also share the library.');\n        break;\n      case 'cloud-edit':\n        title = gettext('Same as Preview on cloud. But user can also edit files online via browser.');\n        break;\n      case 'preview':\n        title = gettext('User can only view files online via browser. Files can\\'t be downloaded.');\n        break;\n    }\n    return title;\n  },\n\n  formatSize: function(options) {\n    /*\n     * param: {bytes, precision}\n     */\n    var bytes = options.bytes;\n    var precision = options.precision || 0;\n\n    var kilobyte = 1000;\n    var megabyte = kilobyte * 1000;\n    var gigabyte = megabyte * 1000;\n    var terabyte = gigabyte * 1000;\n\n    if ((bytes >= 0) && (bytes < kilobyte)) {\n      return bytes + ' B';\n\n    } else if ((bytes >= kilobyte) && (bytes < megabyte)) {\n      return (bytes / kilobyte).toFixed(precision) + ' KB';\n\n    } else if ((bytes >= megabyte) && (bytes < gigabyte)) {\n      return (bytes / megabyte).toFixed(precision) + ' MB';\n\n    } else if ((bytes >= gigabyte) && (bytes < terabyte)) {\n      return (bytes / gigabyte).toFixed(precision) + ' GB';\n\n    } else if (bytes >= terabyte) {\n      return (bytes / terabyte).toFixed(precision) + ' TB';\n\n    } else {\n      return bytes + ' B';\n    }\n  },\n\n  formatBitRate: function(bits) {\n    var Bs;\n    if (typeof bits !== 'number') {\n      return '';\n    }\n    Bs = bits / 8;\n    if (Bs >= 1000000000) {\n      return (Bs / 1000000000).toFixed(2) + ' GB/s';\n    }\n    if (Bs >= 1000000) {\n      return (Bs / 1000000).toFixed(2) + ' MB/s';\n    }\n    if (Bs >= 1000) {\n      return (Bs / 1000).toFixed(2) + ' kB/s';\n    }\n    return Bs.toFixed(2) + ' B/s';\n  },\n\n  isMarkdownFile: function(filePath) {\n    let index = filePath.lastIndexOf('.');\n    if (index === -1) {\n      return false;\n    } else {\n      let type = filePath.substring(index).toLowerCase();\n      if (type === '.md' || type === '.markdown') {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  isInternalMarkdownLink: function(url, repoID) {\n    var re = new RegExp(serviceURL + '/lib/' + repoID + '.*\\.md$');\n    return re.test(url);\n  },\n\n  isInternalDirLink: function(url, repoID) {\n    var re = new RegExp(serviceURL + '/library/' + repoID + '.*');\n    return re.test(url);\n  },\n\n  getPathFromInternalMarkdownLink: function(url, repoID) {\n    var re = new RegExp(serviceURL + '/lib/' + repoID + '/file' + '(.*\\.md)');\n    var array = re.exec(url);\n    var path = decodeURIComponent(array[1]);\n    return path;\n  },\n  \n  getPathFromInternalDirLink: function(url, repoID) {\n    var re = new RegExp(serviceURL + '/library/' + repoID + '(/.*)');\n    var array = re.exec(url);\n    var path = decodeURIComponent(array[1]);\n    path = path.slice(1);\n    path = path.slice(path.indexOf('/'));\n    return path;\n  },\n\n  isWikiInternalMarkdownLink: function(url, slug) {\n    slug = encodeURIComponent(slug);\n    var re = new RegExp(serviceURL + '/wikis/' + slug + '.*\\.md$');\n    return re.test(url);\n  },\n\n  isWikiInternalDirLink: function(url, slug) {\n    slug = encodeURIComponent(slug);\n    var re = new RegExp(serviceURL + '/wikis/' + slug + '.*');\n    return re.test(url);\n  },\n\n  getPathFromWikiInternalMarkdownLink: function(url, slug) {\n    slug = encodeURIComponent(slug);\n    var re = new RegExp(serviceURL + '/wikis/' + slug + '(.*\\.md)');\n    var array = re.exec(url);\n    var path = array[1];\n    try {\n      path = decodeURIComponent(path);\n    } catch(err) {\n      path = path.replace(/%/g, '%25');\n      path = decodeURIComponent(path);\n    }\n    return path;\n  },\n  \n  getPathFromWikiInternalDirLink: function(url, slug) {\n    slug = encodeURIComponent(slug);\n    var re = new RegExp(serviceURL + '/wikis/' + slug + '(/.*)');\n    var array = re.exec(url);\n    var path = array[1];\n    try {\n      path = decodeURIComponent(path);\n    } catch(err) {\n      path = path.replace(/%/g, '%25');\n      path = decodeURIComponent(path);\n    }\n    return path;\n  },\n\n  compareTwoWord: function(wordA, wordB) {\n    // compare wordA and wordB at lower case\n    // if wordA >= wordB, return 1\n    // if wordA < wordB, return -1\n\n    var a_val, b_val,\n      a_uni = wordA.charCodeAt(0),\n      b_uni = wordB.charCodeAt(0);\n\n    if ((19968 < a_uni && a_uni < 40869) && (19968 < b_uni && b_uni < 40869)) {\n      // both are chinese words\n      a_val = strChineseFirstPY.charAt(a_uni - 19968).toLowerCase();\n      b_val = strChineseFirstPY.charAt(b_uni - 19968).toLowerCase();\n    } else if ((19968 < a_uni && a_uni < 40869) && !(19968 < b_uni && b_uni < 40869)) {\n      // a is chinese and b is english\n      return 1;\n    } else if (!(19968 < a_uni && a_uni < 40869) && (19968 < b_uni && b_uni < 40869)) {\n      // a is english and b is chinese\n      return -1;\n    } else {\n      // both are english words\n      a_val = wordA.toLowerCase();\n      b_val = wordB.toLowerCase();\n      return this.compareStrWithNumbersIn(a_val, b_val);\n    }\n\n    return a_val >= b_val ? 1 : -1;\n  },\n\n  // compare two strings which may have digits in them\n  // and compare those digits as number instead of string\n  compareStrWithNumbersIn: function(a, b) {\n    var reParts = /\\d+|\\D+/g;\n    var reDigit = /\\d/;\n    var aParts = a.match(reParts);\n    var bParts = b.match(reParts);\n    var isDigitPart;\n    var len = Math.min(aParts.length, bParts.length);\n    var aPart, bPart;\n\n    if (aParts && bParts &&\n      (isDigitPart = reDigit.test(aParts[0])) == reDigit.test(bParts[0])) {\n      // Loop through each substring part to compare the overall strings.\n      for (var i = 0; i < len; i++) {\n        aPart = aParts[i];\n        bPart = bParts[i];\n\n        if (isDigitPart) {\n          aPart = parseInt(aPart, 10);\n          bPart = parseInt(bPart, 10);\n        }\n\n        if (aPart != bPart) {\n          return aPart < bPart ? -1 : 1;\n        }\n\n        // Toggle the value of isDigitPart since the parts will alternate.\n        isDigitPart = !isDigitPart;\n      }\n    }\n\n    // Use normal comparison.\n    return (a >= b) - (a <= b);\n  },\n\n  sortRepos: function(repos, sortBy, sortOrder) {\n    const _this = this;\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          if (!a.repo_name) {\n            return 1;\n          }\n          if (!b.repo_name) {\n            return -1;\n          }\n          var result = _this.compareTwoWord(a.repo_name, b.repo_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          if (!a.repo_name) {\n            return -1;\n          }\n          if (!b.repo_name) {\n            return 1;\n          }\n          var result = _this.compareTwoWord(a.repo_name, b.repo_name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.last_modified < b.last_modified ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.last_modified < b.last_modified ? 1 : -1;\n        };\n        break;\n    }\n\n    repos.sort(comparator);\n    return repos;\n  },\n\n  sortDirents: function(items, sortBy, sortOrder) {\n    const _this = this;\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = _this.compareTwoWord(a.name, b.name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = _this.compareTwoWord(a.name, b.name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.mtime < b.mtime ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.mtime < b.mtime ? 1 : -1;\n        };\n        break;\n    }\n\n    items.sort((a, b) => {\n      if (a.type == 'dir' && b.type == 'file') {\n        return -1;\n      } else if (a.type == 'file' && b.type == 'dir') {\n        return 1;\n      } else {\n        return comparator(a, b);\n      }\n    });\n    return items;\n  },\n\n  changeMarkdownNodes: function(nodes, fn) {\n    nodes.map((item) => {\n      fn(item); \n      if (item.nodes && item.nodes.length > 0){\n        Utils.changeMarkdownNodes(item.nodes, fn); \n      }\n    });\n\n    return nodes;\n  },\n\n  chooseLanguage: function(suffix) {\n    let mode;\n    switch(suffix) {\n      case 'py':\n        mode = 'python';\n        break;\n      case 'js':\n        mode = 'javascript';\n        break;\n      case 'c':\n        mode = 'text/x-csrc';\n        break;\n      case 'cpp':\n        mode = 'text/x-c++src';\n        break;\n      case 'java':\n        mode = 'text/x-java';\n        break;\n      case 'cs':\n        mode = 'text/x-csharp';\n        break;\n      case 'mdf':\n        mode = 'text/x-sql';\n        break;\n      case 'html':\n        mode = 'htmlmixed';\n        break;\n      default:\n        mode = suffix;\n    }\n    return mode;\n  },\n\n  DARK_COLOR_MAP: {\n    // old color\n    'red': '#D11507',\n    'orange': '#FF8C00',\n    'yellow': '#EDEF00',\n    'green': '#006400',\n    'cyan': '#00E0E1',\n    'blue': '#2510A3',\n    'indigo': '#350C56',\n    'purple': '#551054',\n    'pink': '#E3A5B0',\n    'azure': '#C4D0D0',\n    'lime': '#00E100',\n    'teal': '#006A6B',\n    'gray': '#545454',\n\n    // new color\n    '#FFA8A8': '#E49090',\n    '#FFA94D': '#E39136',\n    '#FFD43B': '#E0B815',\n    '#A0EC50': '#83CF32',\n    '#A9E34B': '#8DC72E',\n    '#63E6BE': '#43CAA4',\n    '#4FD2C9': '#2DB9B0',\n    '#72C3FC': '#57ABE3',\n    '#91A7FF': '#7A91E7',\n    '#E599F7': '#CC82DE',\n    '#B197FC': '#9B82E5',\n    '#F783AC': '#DF6D97',\n    '#CED4DA': '#A8ADB2',\n  },\n\n  getDarkColor: function(color) {\n    let darkColor;\n    darkColor = this.DARK_COLOR_MAP[color];\n    return darkColor;\n  },\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/utils.js","class SharedLinkInfo {\n\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.path = object.path;\n    this.obj_name = object.obj_name;\n    this.is_dir = object.is_dir;\n    this.permissions = object.permissions;\n    this.username = object.username;\n    this.is_expired = object.is_expired;\n    this.expire_date = object.expire_date;\n    this.token = object.token;\n    this.link = object.link;\n    this.view_cnt = object.view_cnt;\n    this.ctime = object.ctime;\n  }\n\n}\n\nexport default SharedLinkInfo;\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/shared-link-info.js","class SharedUploadInfo {\n   \n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.path = object.path;\n    this.link = object.link;\n    this.obj_name = object.obj_name;\n    this.username = object.username;\n    this.ctime = object.ctime;\n    this.token = object.token;\n    this.view_cnt = object.view_cnt;\n  }\n\n}\n\n\nexport default SharedUploadInfo;\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/shared-upload-info.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport RepoListItem from './repo-list-item';\n\nconst propTypes = {\n  currentRepoInfo: PropTypes.object,\n  isShowFile: PropTypes.bool,\n  repo: PropTypes.object,\n  repoList: PropTypes.array,\n  selectedRepo: PropTypes.object,\n  initToShowChildren: PropTypes.bool.isRequired,\n  selectedPath: PropTypes.string,\n  onDirentItemClick: PropTypes.func.isRequired,\n  onRepoItemClick: PropTypes.func.isRequired,\n};\n\nclass RepoListView extends React.Component {\n\n  render() {\n    let { currentRepoInfo, repoList } = this.props;\n    if (currentRepoInfo) {\n      repoList = [];\n      repoList.push(currentRepoInfo);\n    }\n    return (\n      <ul className=\"list-view-content file-chooser-item\">\n        {repoList.length > 0 && repoList.map((repoItem, index) => {\n          return (\n            <RepoListItem \n              key={index} \n              repo={repoItem}\n              initToShowChildren={this.props.initToShowChildren}\n              selectedRepo={this.props.selectedRepo}\n              selectedPath={this.props.selectedPath}\n              onRepoItemClick={this.props.onRepoItemClick} \n              onDirentItemClick={this.props.onDirentItemClick}\n              isShowFile={this.props.isShowFile}\n            />\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nRepoListView.propTypes = propTypes;\n\nexport default RepoListView;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/file-chooser/repo-list-view.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DirentListView from './dirent-list-view';\n\nconst propTypes = {\n  isShowFile: PropTypes.bool,\n  selectedPath: PropTypes.string,\n  selectedRepo: PropTypes.object,\n  repo: PropTypes.object.isRequired,\n  initToShowChildren: PropTypes.bool.isRequired,\n  onDirentItemClick: PropTypes.func.isRequired,\n  onRepoItemClick: PropTypes.func.isRequired,\n};\n\nclass RepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isShowChildren: this.props.initToShowChildren,\n    };\n  }\n\n  onToggleClick = () => {\n    this.setState({isShowChildren: !this.state.isShowChildren});\n  }\n\n  onDirentItemClick = (filePath, dirent) => {\n    let repo = this.props.repo;\n    this.props.onDirentItemClick(repo, filePath, dirent);\n  }\n\n  onRepoItemClick = () => {\n    if (!this.isCurrentRepo()) {\n      this.props.onRepoItemClick(this.props.repo);\n    } else {\n      this.onToggleClick();\n    }\n  }\n\n  isCurrentRepo = () => {\n    let { selectedRepo, repo } = this.props;\n    return selectedRepo && (repo.repo_id === selectedRepo.repo_id);\n  }\n\n  render() {\n    let repoActive = false;\n    let isCurrentRepo = this.isCurrentRepo();\n    if (isCurrentRepo && !this.props.selectedPath) {\n      repoActive = true;\n    }\n    return (\n      <li className=\"file-chooser-item\">\n        <span className={`item-toggle fa ${this.state.isShowChildren ? 'fa-caret-down' : 'fa-caret-right'}`} onClick={this.onToggleClick}></span>\n        <span className={`item-info ${repoActive ? 'item-active' : ''}`} onClick={this.onRepoItemClick}>\n          <span className=\"icon far fa-folder\"></span>\n          <span className=\"name user-select-none ellipsis\">{this.props.repo.repo_name}</span>\n        </span>\n        {this.state.isShowChildren && (\n          <DirentListView \n            repo={this.props.repo} \n            isShowChildren={this.state.isShowChildren} \n            onDirentItemClick={this.onDirentItemClick}\n            selectedRepo={this.props.selectedRepo}\n            selectedPath={this.props.selectedPath}\n            isShowFile={this.props.isShowFile}\n          />\n        )}\n      </li>\n    );\n  }\n}\n\nRepoListItem.propTypes = propTypes;\n\nexport default RepoListItem;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/file-chooser/repo-list-item.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport Dirent from '../../models/dirent';\nimport DirentListItem from './dirent-list-item';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  isShowFile: PropTypes.bool,\n  selectedPath: PropTypes.string,\n  selectedRepo: PropTypes.object,\n  repo: PropTypes.object.isRequired,\n  isShowChildren: PropTypes.bool.isRequired,\n  onDirentItemClick: PropTypes.func.isRequired\n};\n\nclass DirentListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      direntList: [],\n    };\n  }\n\n  componentDidMount() {\n    let repo = this.props.repo;\n    seafileAPI.listDir(repo.repo_id, '/').then(res => {\n      let direntList = [];\n      res.data.dirent_list.forEach(item => {\n        if (this.props.isShowFile === true) {\n          let dirent = new Dirent(item);\n          direntList.push(dirent);\n        } else {\n          if (item.type === 'dir') {\n            let dirent = new Dirent(item);\n            direntList.push(dirent);\n          }\n        }\n      });\n      direntList = Utils.sortDirents(direntList, 'name', 'asc');\n      this.setState({direntList: direntList});\n    });\n  }\n\n  render() {\n    let { direntList } = this.state;\n    return (\n      <ul className={`list-view-content ${this.props.isShowChildren ? '' : 'hide'}`}>\n        { direntList.map((dirent, index) => {\n          return (\n            <DirentListItem \n              key={index} \n              repo={this.props.repo} \n              dirent={dirent}\n              selectedRepo={this.props.selectedRepo}\n              onDirentItemClick={this.props.onDirentItemClick}\n              selectedPath={this.props.selectedPath}\n              isShowFile={this.props.isShowFile}\n            />\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nDirentListView.propTypes = propTypes;\n\nexport default DirentListView;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/file-chooser/dirent-list-view.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport Dirent from '../../models/dirent';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  isShowFile: PropTypes.bool,\n  filePath: PropTypes.string,\n  selectedPath: PropTypes.string,\n  selectedRepo: PropTypes.object,\n  dirent: PropTypes.object.isRequired,\n  repo: PropTypes.object.isRequired,\n  onDirentItemClick: PropTypes.func.isRequired,\n};\n\nclass DirentListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    let filePath = this.props.filePath ?  this.props.filePath +  '/' + this.props.dirent.name : '/' + this.props.dirent.name;\n    \n    this.state = {\n      isShowChildren: false,\n      hasRequest: false,\n      hasChildren: true,\n      filePath: filePath,\n      direntList: [],\n    };\n  }\n\n  onItemClick = (e) => {\n    e.stopPropagation();  // need prevent event popup\n    let isCurrentRepo = this.props.selectedRepo.repo_id === this.props.repo.repo_id;\n    if (isCurrentRepo) {\n      if (this.props.selectedPath !== this.state.filePath) {\n        this.props.onDirentItemClick(this.state.filePath, this.props.dirent);\n      } else {\n        if (this.props.dirent.type === 'dir') {\n          this.onToggleClick(e);\n        }\n      }\n    } else {\n      this.props.onDirentItemClick(this.state.filePath, this.props.dirent);\n    }\n  }\n  \n  onToggleClick = (e) => {\n    e.stopPropagation();  // need prevent event popup\n    if (!this.state.hasRequest) {\n      seafileAPI.listDir(this.props.repo.repo_id, this.state.filePath).then(res => {\n        let direntList = [];\n        res.data.dirent_list.forEach(item => {\n          if (this.props.isShowFile === true) { // show dir and file\n            let dirent = new Dirent(item);\n            direntList.push(dirent);\n          } else { // just show dir\n            if (item.type === 'dir') {\n              let dirent = new Dirent(item);\n              direntList.push(dirent);\n            }\n          }\n        });\n        direntList = Utils.sortDirents(direntList, 'name', 'asc');\n        this.setState({\n          hasRequest: true,\n          direntList: direntList,\n        });\n        if (res.data.length === 0 || direntList.length === 0) {\n          this.setState({hasChildren: false});\n        }\n      });\n    }\n    \n    this.setState({isShowChildren: !this.state.isShowChildren});\n  }\n\n  renderChildren = () => {\n    return (\n      <ul className=\"list-view-content\">\n        {this.state.direntList.map((dirent, index) => {\n          return (\n            <DirentListItem \n              key={index} \n              dirent={dirent}\n              repo={this.props.repo}\n              filePath={this.state.filePath}\n              onItemClick={this.onItemClick}\n              selectedPath={this.props.selectedPath}\n              selectedRepo={this.props.selectedRepo}\n              onDirentItemClick={this.props.onDirentItemClick}\n              isShowFile={this.props.isShowFile}\n            />\n          );\n        })}\n      </ul>\n    );\n  }\n\n  render() {\n    let isCurrentRepo = this.props.selectedRepo.repo_id === this.props.repo.repo_id;\n    let isCurrentPath = this.props.selectedPath === this.state.filePath;\n\n    return (\n      <li className=\"file-chooser-item\">\n        {\n          this.state.hasChildren && this.props.dirent.type !== 'file' &&\n          <span className={`item-toggle fa ${this.state.isShowChildren ? 'fa-caret-down' : 'fa-caret-right'}`} onClick={this.onToggleClick}></span>\n        }\n        <span className={`item-info ${(isCurrentRepo && isCurrentPath) ? 'item-active' : ''}`} onClick={this.onItemClick}>\n          <span className={`icon far ${this.props.dirent.type === 'dir' ? 'fa-folder' : 'fa-file'}`}></span>\n          <span className=\"name user-select-none ellipsis\">{this.props.dirent && this.props.dirent.name}</span>\n        </span>\n        {this.state.isShowChildren && this.renderChildren()}\n      </li>\n    );\n  }\n}\n\nDirentListItem.propTypes = propTypes;\n\nexport default DirentListItem;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/file-chooser/dirent-list-item.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport SearchedListItem from './searched-list-item';\n\nconst propTypes = {\n  searchResults: PropTypes.array.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n};\n\nclass SearchedListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentItem: null,\n    };\n  }\n\n  onItemClick = (item) => {\n    this.setState({currentItem: item});\n    this.props.onItemClick(item);\n  }\n\n  render() {\n    return (\n      <table className=\"table-thead-hidden\">\n        <thead>\n          <tr>\n            <th width=\"8%\"></th>\n            <th width=\"92%\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.props.searchResults.map((item, index) => {\n            return (<SearchedListItem key={index} item={item} currentItem={this.state.currentItem} onItemClick={this.onItemClick} />);\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nSearchedListView.propTypes = propTypes;\n\nexport default SearchedListView;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/file-chooser/searched-list-view.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentItem: PropTypes.object,\n  onItemClick: PropTypes.func.isRequired,\n};\n\nclass SearchedListItem extends React.Component {\n  \n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({highlight: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({highlight: false});\n  }\n\n  onClick = () => {\n    let item = this.props.item;\n    this.props.onItemClick(item);\n  }\n\n  render() {\n    let { item, currentItem } = this.props;\n    let fileIconUrl = item.is_dir ? Utils.getFolderIconUrl(false, 192) : Utils.getFileIconUrl(item.name, 192);\n    let trClass = this.state.highlight ? 'tr-highlight' : '';\n    if (currentItem) {\n      if (item.repo_id === currentItem.repo_id && item.path === currentItem.path) {\n        trClass = 'searched-active';\n      }\n    }\n    return (\n      <tr className={trClass} onClick={this.onClick} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"text-center\"><img className=\"item-img\" src={fileIconUrl} alt=\"\" width=\"24\"/></td>\n        <td><span className=\"item-link\">{item.repo_name}/{item.link_content}</span></td>\n      </tr>\n    );\n  }\n}\n\nSearchedListItem.propTypes = propTypes;\n\nexport default SearchedListItem;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/file-chooser/searched-list-item.js","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro } from '../../utils/constants';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport UserSelect from '../user-select';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n  \n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteShareItem = () => {\n    let item = this.props.item;\n    this.props.deleteShareItem(item.user_info.name);\n  }\n  \n  onChangeUserPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.is_admin ? 'admin' : item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">{item.user_info.nickname}</td>\n        <td>\n          <SharePermissionEditor \n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserPermission}\n          />\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteShareItem} \n            title={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass UserList extends React.Component {\n\n  render() {\n    let items = this.props.items;\n    return (\n      <tbody>\n        {items.map((item, index) => {\n          return (\n            <UserItem \n              key={index} \n              item={item} \n              permissions={this.props.permissions}\n              deleteShareItem={this.props.deleteShareItem}\n              onChangeUserPermission={this.props.onChangeUserPermission}\n            />\n          );\n        })}\n      </tbody>\n    );\n  }\n}\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemPath: PropTypes.string.isRequired,\n  itemType: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass ShareToUser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      sharedItems: []\n    };\n    this.options = [];\n    this.permissions = [];\n    if (this.props.itemType === 'library') {\n      this.permissions = ['rw', 'r', 'admin', 'cloud-edit', 'preview'];\n    } else if (this.props.itemType === 'dir') {\n      this.permissions = ['rw', 'r', 'cloud-edit', 'preview'];\n    }\n    if (this.props.isGroupOwnedRepo || !isPro) {\n      this.permissions = ['rw', 'r'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n    this.options = [];\n  }\n\n  componentDidMount() {\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID;\n    seafileAPI.listSharedItems(repoID, path, 'user').then((res) => {\n      if(res.data.length !== 0) {\n        this.setState({sharedItems: res.data});\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  shareToUser = () => {\n    let users = [];\n    let path = this.props.itemPath; \n    let repoID = this.props.repoID;\n    if (this.state.selectedOption && this.state.selectedOption.length > 0 ) {\n      for (let i = 0; i < this.state.selectedOption.length; i ++) {\n        users[i] = this.state.selectedOption[i].email;\n      }\n    }\n    if (this.props.isGroupOwnedRepo) {\n      seafileAPI.shareGroupOwnedRepoToUser(repoID, this.state.permission, users).then(res => {\n        let errorMsg = [];\n        if (res.data.failed.length > 0) {\n          for (let i = 0 ; i < res.data.failed.length ; i++) {\n            errorMsg[i] = res.data.failed[i];\n          }\n        }\n        // todo modify api\n        let items = res.data.success.map(item => {\n          let sharedItem = {\n            'user_info': { 'nickname': item.user_name, 'name': item.user_email},\n            'permission': item.permission,\n            'share_type': 'user',\n          };\n          return sharedItem;\n        });\n        this.setState({\n          errorMsg: errorMsg,\n          sharedItems: this.state.sharedItems.concat(items),\n          selectedOption: null,\n          permission: 'rw',\n        });\n        this.refs.userSelect.clearSelect();\n      }).catch(error => {\n        if (error.response) {\n          let message = gettext('Library can not be shared to owner.');\n          let errMessage = [];\n          errMessage.push(message);\n          this.setState({\n            errorMsg: errMessage,\n            selectedOption: null,\n          });\n        }\n      });\n    } else {\n      seafileAPI.shareFolder(repoID, path, 'user', this.state.permission, users).then(res => {\n        let errorMsg = [];\n        if (res.data.failed.length > 0) {\n          for (let i = 0 ; i < res.data.failed.length ; i++) {\n            errorMsg[i] = res.data.failed[i];\n          }\n        }\n        this.setState({\n          errorMsg: errorMsg,\n          sharedItems: this.state.sharedItems.concat(res.data.success),\n          selectedOption: null,\n          permission: 'rw',\n        });\n        this.refs.userSelect.clearSelect();\n      }).catch(error => {\n        if (error.response) {\n          let message = gettext('Library can not be shared to owner.');\n          let errMessage = [];\n          errMessage.push(message);\n          this.setState({\n            errorMsg: errMessage,\n            selectedOption: null,\n          });\n        }\n      });\n    }\n  } \n\n  deleteShareItem = (username) => {\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID;\n    if (this.props.isGroupOwnedRepo) {\n      seafileAPI.deleteGroupOwnedRepoSharedUserItem(repoID, username).then(res => {\n        this.setState({\n          sharedItems: this.state.sharedItems.filter( item => { return item.user_info.name !== username; }) \n        });\n      });\n    } else {\n      seafileAPI.deleteShareToUserItem(repoID, path, 'user', username).then(res => {\n        this.setState({\n          sharedItems: this.state.sharedItems.filter( item => { return item.user_info.name !== username; }) \n        });\n      });\n    }\n  }\n\n  onChangeUserPermission = (item, permission) => {\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID;\n    let username = item.user_info.name;\n    if (this.props.isGroupOwnedRepo) {\n      seafileAPI.modifyGroupOwnedRepoUserSharedPermission(repoID, permission, username).then(() => {\n        this.updateSharedItems(item, permission);\n      });\n    } else {\n      seafileAPI.updateShareToUserItemPermission(repoID, path, 'user', username, permission).then(() => {\n        this.updateSharedItems(item, permission);\n      });\n    }\n  }\n  \n  updateSharedItems = (item, permission) => {\n    let username = item.user_info.name;\n    let sharedItems = this.state.sharedItems.map(sharedItem => {\n      let sharedItemUsername = sharedItem.user_info.name;\n      if (username === sharedItemUsername) {\n        sharedItem.permission = permission;\n      }\n      sharedItem.is_admin = permission === 'admin' ? true : false;\n      return sharedItem;\n    });\n    this.setState({sharedItems: sharedItems});\n  }\n\n  render() {\n    let { sharedItems } = this.state;\n    return (\n      <Fragment>\n        <table>\n          <thead>\n            <tr>\n              <th width=\"50%\">{gettext('User')}</th>\n              <th width=\"35%\">{gettext('Permission')}</th>\n              <th width=\"15%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Select users...')}\n                  onSelectChange={this.handleSelectChange}\n                />\n              </td>\n              <td>\n                <SharePermissionEditor \n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.shareToUser}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.email) {\n                  errMessage = item.email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"50%\">{gettext('User')}</th>\n                <th width=\"35%\">{gettext('Permission')}</th>\n                <th width=\"15%\"></th>\n              </tr>\n            </thead>\n            <UserList \n              items={sharedItems}\n              permissions={this.permissions}\n              deleteShareItem={this.deleteShareItem} \n              onChangeUserPermission={this.onChangeUserPermission}\n            />\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nShareToUser.propTypes = propTypes;\n\nexport default ShareToUser;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/dialog/share-to-user.js","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport Select from 'react-select';\nimport makeAnimated from 'react-select/lib/animated';\nimport { gettext, isPro } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n  \n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteShareItem = () => {\n    let item = this.props.item;\n    this.props.deleteShareItem(item.group_info.id);\n  }\n\n  onChangeUserPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className='name'>{item.group_info.name}</td>\n        <td>\n          <SharePermissionEditor \n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserPermission}\n          />\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteShareItem} \n            title={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass GroupList extends React.Component {\n\n  render() {\n    let items = this.props.items;\n    return (\n      <tbody>\n        {items.map((item, index) => {\n          return (\n            <GroupItem \n              key={index} \n              item={item} \n              permissions={this.props.permissions}\n              deleteShareItem={this.props.deleteShareItem}\n              onChangeUserPermission={this.props.onChangeUserPermission}\n            />\n          );\n        })}\n      </tbody>\n    );\n  }\n}\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemPath: PropTypes.string.isRequired,\n  itemType: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nconst NoOptionsMessage = (props) => {\n  return (\n    <div {...props.innerProps} style={{margin: '6px 10px', textAlign: 'center', color: 'hsl(0,0%,50%)'}}>{gettext('Group not found')}</div>\n  );\n};\n\nclass ShareToGroup extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      sharedItems: []\n    };\n    this.options = [];\n    this.permissions = []\n    if (this.props.itemType === 'library') {\n      this.permissions = ['rw', 'r', 'admin', 'cloud-edit', 'preview'];\n    } else if (this.props.itemType === 'dir') {\n      this.permissions = ['rw', 'r', 'cloud-edit', 'preview'];\n    }\n    if (this.props.isGroupOwnedRepo || !isPro) {\n      this.permissions = ['rw', 'r'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  }\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listSharedGroups();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = [];\n      for (let i = 0 ; i < res.data.length; i++) {\n        let obj = {};\n        obj.value = res.data[i].name;\n        obj.id = res.data[i].id;\n        obj.label = res.data[i].name;\n        this.options.push(obj);\n      }\n    });\n  }\n\n  listSharedGroups = () => {\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID; \n    seafileAPI.listSharedItems(repoID, path, 'group').then((res) => {\n      if(res.data.length !== 0) {\n        this.setState({\n          sharedItems: res.data\n        });\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  shareToGroup = () => {\n    let groups = [];\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID; \n    let isGroupOwnedRepo = this.props.isGroupOwnedRepo;\n    if (this.state.selectedOption && this.state.selectedOption.length > 0 ) {\n      for (let i = 0; i < this.state.selectedOption.length; i ++) {\n        groups[i] = this.state.selectedOption[i].id;\n      }\n    }\n    if (isGroupOwnedRepo) {\n      seafileAPI.shareGroupOwnedRepoToGroup(repoID, this.state.permission, groups).then(res => {\n        let errorMsg = [];\n        if (res.data.failed.length > 0) {\n          for (let i = 0 ; i < res.data.failed.length ; i++) {\n            errorMsg[i] = res.data.failed[i];\n          }\n        }\n\n        // todo modify api\n        let items = res.data.success.map(item => {\n          let sharedItem = {\n            'group_info': { 'id': item.group_id, 'name': item.group_name},\n            'permission': item.permission,\n            'share_type': 'group',\n          };\n          return sharedItem;\n        });\n  \n        this.setState({\n          errorMsg: errorMsg,\n          sharedItems: this.state.sharedItems.concat(items),\n          selectedOption: null,\n          permission: 'rw',\n        });\n      });\n    } else {\n      seafileAPI.shareFolder(repoID, path, 'group', this.state.permission, groups).then(res => {\n        let errorMsg = [];\n        if (res.data.failed.length > 0) {\n          for (let i = 0 ; i < res.data.failed.length ; i++) {\n            errorMsg[i] = res.data.failed[i];\n          }\n        }\n  \n        this.setState({\n          errorMsg: errorMsg,\n          sharedItems: this.state.sharedItems.concat(res.data.success),\n          selectedOption: null,\n          permission: 'rw'\n        });\n      });\n    }\n  }\n\n  deleteShareItem = (groupID) => {\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID; \n    if (this.props.isGroupOwnedRepo) {\n      seafileAPI.deleteGroupOwnedRepoSharedGroupItem(repoID, groupID).then(() => {\n        this.setState({\n          sharedItems: this.state.sharedItems.filter(item => { return item.group_info.id !== groupID; }) \n        });\n      });\n    } else {\n      seafileAPI.deleteShareToGroupItem(repoID, path, 'group', groupID).then(() => {\n        this.setState({\n          sharedItems: this.state.sharedItems.filter(item => { return item.group_info.id !== groupID; }) \n        });\n      });\n    }\n  }\n\n  onChangeUserPermission = (item, permission) => {\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID;\n    let groupID = item.group_info.id;\n    if (this.props.isGroupOwnedRepo) {\n      seafileAPI.modifyGroupOwnedRepoGroupSharedPermission(repoID, permission, groupID).then(() => {\n        this.updateSharedItems(item, permission);\n      });\n    } else {\n      seafileAPI.updateShareToGroupItemPermission(repoID, path, 'group', groupID, permission).then(() => {\n        this.updateSharedItems(item, permission);\n      });\n    }\n  }\n  \n  updateSharedItems = (item, permission) => {\n    let groupID = item.group_info.id;\n    let sharedItems = this.state.sharedItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_info.id;\n      if (groupID === sharedItemGroupID) {\n        sharedItem.permission = permission;\n      }\n      return sharedItem;\n    });\n    this.setState({sharedItems: sharedItems});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <table>\n          <thead>\n            <tr>\n              <th width=\"50%\">{gettext('Group')}</th>\n              <th width=\"35%\">{gettext('Permission')}</th>\n              <th width=\"15%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <Select\n                  isMulti\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select a group')}\n                  components={makeAnimated()}\n                  maxMenuHeight={200}\n                  inputId={'react-select-2-input'}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage }}\n                />\n              </td>\n              <td>\n                <SharePermissionEditor \n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.shareToGroup}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&                  \n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_name + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })                                                \n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"50%\">{gettext('Group')}</th>\n                <th width=\"35%\">{gettext('Permission')}</th>\n                <th width=\"15%\"></th>\n              </tr>\n            </thead>\n            <GroupList \n              items={this.state.sharedItems}\n              permissions={this.permissions}\n              deleteShareItem={this.deleteShareItem} \n              onChangeUserPermission={this.onChangeUserPermission}\n            />\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nShareToGroup.propTypes = propTypes;\n\nexport default ShareToGroup;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/dialog/share-to-group.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport copy from 'copy-to-clipboard';\nimport { Button, Form, FormGroup, Label, Input, InputGroup, InputGroupAddon, Alert } from 'reactstrap';\nimport { gettext, shareLinkExpireDaysMin, shareLinkExpireDaysMax } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport SharedLinkInfo from '../../models/shared-link-info';\nimport toaster from '../toast';\n\nconst propTypes = {\n  itemPath: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  closeShareDialog: PropTypes.func.isRequired,\n};\n\nclass GenerateShareLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isValidate: false,\n      isShowPasswordInput: false,\n      isPasswordVisible: false,\n      isExpireChecked: false,\n      password: '',\n      passwdnew: '',\n      expireDays: '',\n      errorInfo: '',\n      sharedLinkInfo: null,\n      isNoticeMessageShow: false,\n    };\n    this.permissions = {\n      'can_edit': false, \n      'can_download': true\n    };\n    this.isExpireDaysNoLimit = (parseInt(shareLinkExpireDaysMin) === 0 && parseInt(shareLinkExpireDaysMax) === 0);\n  }\n\n  componentDidMount() {\n    this.getShareLink();\n  }\n\n  getShareLink = () => {\n    let path = this.props.itemPath; \n    let repoID = this.props.repoID;\n    seafileAPI.getShareLink(repoID, path).then((res) => {\n      if (res.data.length !== 0) {\n        let sharedLinkInfo = new SharedLinkInfo(res.data[0]);\n        this.setState({sharedLinkInfo: sharedLinkInfo});\n      }\n    });\n  } \n\n  onPasswordInputChecked = () => {\n    this.setState({\n      isShowPasswordInput: !this.state.isShowPasswordInput,\n      password: '',\n      passwdnew: '',\n      errorInfo: ''\n    });\n  }\n\n  togglePasswordVisible = () => {\n    this.setState({\n      isPasswordVisible: !this.state.isPasswordVisible\n    });\n  }\n\n  generatePassword = () => {\n    let val = Math.random().toString(36).substr(5);\n    this.setState({\n      password: val,\n      passwdnew: val\n    });\n  }\n\n  inputPassword = (e) => {\n    let passwd = e.target.value.trim();\n    this.setState({password: passwd});\n  }\n\n  inputPasswordNew = (e) => {\n    let passwd = e.target.value.trim();\n    this.setState({passwdnew: passwd});\n  }\n\n  setPermission = (permission) => {\n    if (permission == 'previewAndDownload') {\n      this.permissions = {\n        'can_edit': false,\n        'can_download': true\n      };\n    } else {\n      this.permissions = {\n        'can_edit': false,\n        'can_download': false\n      };     \n    }\n  }\n\n  generateShareLink = () => {\n    let isValid = this.validateParamsInput();\n    if (isValid) {\n      this.setState({errorInfo: ''});\n      let { itemPath, repoID } = this.props;\n      let { password, expireDays } = this.state;\n      let permissions = this.permissions;\n      permissions = JSON.stringify(permissions);\n      seafileAPI.createShareLink(repoID, itemPath, password, expireDays, permissions).then((res) => {\n        let sharedLinkInfo = new SharedLinkInfo(res.data);\n        this.setState({sharedLinkInfo: sharedLinkInfo});\n      });\n    }\n  }\n\n  onCopySharedLink = () => {\n    let sharedLink = this.state.sharedLinkInfo.link;\n    copy(sharedLink);\n    toaster.success(gettext('Share link is copied to the clipboard.'));\n    this.props.closeShareDialog();\n  }\n  \n  onCopyDownloadLink = () => {\n    let downloadLink = this.state.sharedLinkInfo.link + '?dl';\n    copy(downloadLink);\n    toaster.success(gettext('Direct download link is copied to the clipboard.'));\n    this.props.closeShareDialog();\n  }\n\n  deleteShareLink = () => {\n    let sharedLinkInfo = this.state.sharedLinkInfo;\n    seafileAPI.deleteShareLink(sharedLinkInfo.token).then(() => {\n      this.setState({\n        password: '',\n        passwordnew: '',\n        isShowPasswordInput: false,\n        expireDays: '',\n        isExpireChecked: false,\n        errorInfo: '',\n        sharedLinkInfo: null,\n        isNoticeMessageShow: false,\n      });\n      this.permissions = {\n        'can_edit': false,\n        'can_download': true\n      };\n    });\n  }\n\n  onExpireChecked = (e) => {\n    this.setState({isExpireChecked: e.target.checked});\n  }\n\n  onExpireDaysChanged = (e) => {\n    let day = e.target.value.trim();\n    this.setState({expireDays: day});\n  }\n\n  validateParamsInput = () => {\n    let { isShowPasswordInput , password, passwdnew, isExpireChecked, expireDays } = this.state;\n    // validate password\n    if (isShowPasswordInput) {\n      if (password.length === 0) {\n        this.setState({errorInfo: 'Please enter password'});\n        return false;\n      }\n      if (password.length < 8) {\n        this.setState({errorInfo: 'Password is too short'});\n        return false;\n      }\n      if (password !== passwdnew) {\n        this.setState({errorInfo: 'Passwords don\\'t match'});\n        return false;\n      }\n    }\n\n    // validate days\n    // no limit\n    let reg = /^\\d+$/;\n    if (this.isExpireDaysNoLimit) {\n      if (isExpireChecked) {\n        if (!expireDays) {\n          this.setState({errorInfo: 'Please enter days'});\n          return false;\n        }\n        let flag = reg.test(expireDays);\n        if (!flag) {\n          this.setState({errorInfo: 'Please enter a non-negative integer'});\n          return false;\n        }\n        this.setState({expireDays: parseInt(expireDays)});\n      }\n    } else {\n      if (!expireDays) {\n        this.setState({errorInfo: 'Please enter days'});\n        return false;\n      }\n      let flag = reg.test(expireDays);\n      if (!flag) {\n        this.setState({errorInfo: 'Please enter a non-negative integer'});\n        return false;\n      }\n\n      expireDays = parseInt(expireDays);\n      let minDays = parseInt(shareLinkExpireDaysMin);\n      let maxDays = parseInt(shareLinkExpireDaysMax);\n\n      if (minDays !== 0 && maxDays !== maxDays) {\n        if (expireDays < minDays) {\n          this.setState({errorInfo: 'Please enter valid days'});\n          return false;\n        }\n      }\n      \n      if (minDays === 0 && maxDays !== 0 ) {\n        if (expireDays > maxDays) {\n          this.setState({errorInfo: 'Please enter valid days'});\n          return false;\n        }\n      }\n      \n      if (minDays !== 0 && maxDays !== 0) {\n        if (expireDays < minDays || expireDays < maxDays) {\n          this.setState({errorInfo: 'Please enter valid days'});\n          return false;\n        }\n      }\n      this.setState({expireDays: expireDays});\n    }\n\n    return true;\n  }\n\n  onNoticeMessageToggle = () => {\n    this.setState({isNoticeMessageShow: !this.state.isNoticeMessageShow});\n  }\n\n  render() {\n    if (this.state.sharedLinkInfo) {\n      let sharedLinkInfo = this.state.sharedLinkInfo;\n      return (\n        <div>\n          <Form className=\"mb-4\">\n            <FormGroup className=\"mb-0\">\n              <dt className=\"text-secondary font-weight-normal\">{gettext('Link:')}</dt>\n              <dd className=\"d-flex\">\n                <span>{sharedLinkInfo.link}</span>{' '}\n                {sharedLinkInfo.is_expired ?\n                  <span className=\"err-message\">({gettext('Expired')})</span> :\n                  <span className=\"far fa-copy action-icon\" onClick={this.onCopySharedLink}></span>\n                }\n              </dd>\n            </FormGroup>\n            {!sharedLinkInfo.is_dir && (  //just for file\n              <FormGroup className=\"mb-0\">\n                <dt className=\"text-secondary font-weight-normal\">{gettext('Direct Download Link:')}</dt>\n                <dd className=\"d-flex\">\n                  <span>{sharedLinkInfo.link}?dl</span>{' '}\n                  {sharedLinkInfo.is_expired ?\n                    <span className=\"err-message\">({gettext('Expired')})</span> :\n                    <span className=\"far fa-copy action-icon\" onClick={this.onCopyDownloadLink}></span>\n                  }\n                </dd>\n              </FormGroup>\n            )}\n            {sharedLinkInfo.expire_date && (\n              <FormGroup className=\"mb-0\">\n                <dt className=\"text-secondary font-weight-normal\">{gettext('Expiration Date:')}</dt>\n                <dd>{moment(sharedLinkInfo.expire_date).format('YYYY-MM-DD hh:mm:ss')}</dd>\n              </FormGroup>\n            )}\n          </Form>\n          {!this.state.isNoticeMessageShow ?\n            <Button onClick={this.onNoticeMessageToggle}>{gettext('Delete')}</Button> :\n            <div className=\"alert alert-warning\">\n              <h4 className=\"alert-heading\">{gettext('Are you sure you want to delete the share link?')}</h4>\n              <p className=\"mb-4\">{gettext('If the share link is deleted, no one will be able to access it any more.')}</p>\n              <button className=\"btn btn-primary\" onClick={this.deleteShareLink}>{gettext('Delete')}</button>{' '}\n              <button className=\"btn btn-secondary\" onClick={this.onNoticeMessageToggle}>{gettext('Cancel')}</button>\n            </div>\n          }\n        </div>\n      );\n    } else {\n      return (\n        <Form className=\"generate-share-link\">\n          <FormGroup check>\n            <Label check>\n              <Input type=\"checkbox\" onChange={this.onPasswordInputChecked}/>{'  '}{gettext('Add password protection')} \n            </Label>\n          </FormGroup>\n          {this.state.isShowPasswordInput &&\n            <FormGroup className=\"link-operation-content\">\n              {/* todo translate  */}\n              <Label className=\"font-weight-bold\">{gettext('Password')}</Label>{' '}<span className=\"tip\">{gettext('(at least 8 characters)')}</span>\n              <InputGroup className=\"passwd\">\n                <Input type={this.state.isPasswordVisible ? 'text' : 'password'} value={this.state.password || ''} onChange={this.inputPassword}/>\n                <InputGroupAddon addonType=\"append\">\n                  <Button onClick={this.togglePasswordVisible}><i className={`link-operation-icon fas ${this.state.isPasswordVisible ? 'fa-eye': 'fa-eye-slash'}`}></i></Button>\n                  <Button onClick={this.generatePassword}><i className=\"link-operation-icon fas fa-magic\"></i></Button>\n                </InputGroupAddon>\n              </InputGroup>\n              <Label className=\"font-weight-bold\">{gettext('Password again')}</Label>\n              <Input className=\"passwd\" type={this.state.isPasswordVisible ? 'text' : 'password'} value={this.state.passwdnew || ''} onChange={this.inputPasswordNew} />\n            </FormGroup>\n          }\n          {this.isExpireDaysNoLimit && (\n            <FormGroup check>\n              <Label check>\n                <Input className=\"expire-checkbox\" type=\"checkbox\" onChange={this.onExpireChecked}/>{'  '}{gettext('Add auto expiration')}\n                <Input className=\"expire-input\" type=\"text\" value={this.state.expireDays} onChange={this.onExpireDaysChanged} readOnly={!this.state.isExpireChecked}/><span>{gettext('days')}</span>\n              </Label>\n            </FormGroup>\n          )}\n          {!this.isExpireDaysNoLimit && (\n            <FormGroup check>\n              <Label check>\n                <Input className=\"expire-checkbox\" type=\"checkbox\" onChange={this.onExpireChecked} checked readOnly/>{'  '}{gettext('Add auto expiration')}\n                <Input className=\"expire-input\" type=\"text\" value={this.state.expireDays} onChange={this.onExpireDaysChanged} /> <span>{gettext('days')}</span>\n                {(parseInt(shareLinkExpireDaysMin) !== 0 && parseInt(shareLinkExpireDaysMax) !== 0) && (\n                  <span> ({shareLinkExpireDaysMin} - {shareLinkExpireDaysMax}{' '}{gettext('days')})</span>\n                )}\n                {(parseInt(shareLinkExpireDaysMin) !== 0 && parseInt(shareLinkExpireDaysMax) === 0) && (\n                  <span> ({gettext('Greater than or equal to')} {shareLinkExpireDaysMin}{' '}{gettext('days')})</span>\n                )}\n                {(parseInt(shareLinkExpireDaysMin) === 0 && parseInt(shareLinkExpireDaysMax) !== 0) && (\n                  <span> ({gettext('Less than or equal to')} {shareLinkExpireDaysMax}{' '}{gettext('days')})</span>\n                )}\n              </Label>\n            </FormGroup>\n          )}\n          <FormGroup check>\n            <Label check>\n              <Input type=\"checkbox\" checked readOnly/>{'  '}{gettext('Set permission')}\n            </Label>\n          </FormGroup>\n          <FormGroup check className=\"permission\">\n            <Label check>\n              <Input type=\"radio\" name=\"radio1\" defaultChecked={true} onChange={() => this.setPermission('previewAndDownload')}/>{'  '}{gettext('Preview and download')}\n            </Label>\n          </FormGroup>\n          <FormGroup check className=\"permission\">\n            <Label check>\n              <Input type=\"radio\" name=\"radio1\" onChange={() => this.setPermission('preview')} />{'  '}{gettext('Preview only')}\n            </Label>\n          </FormGroup>\n          {this.state.errorInfo && <Alert color=\"danger\" className=\"mt-2\">{gettext(this.state.errorInfo)}</Alert>}\n          <Button onClick={this.generateShareLink}>{gettext('Generate')}</Button>\n        </Form>\n      );\n    }\n  }\n}\n\nGenerateShareLink.propTypes = propTypes;\n\nexport default GenerateShareLink;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/dialog/generate-share-link.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport copy from 'copy-to-clipboard';\nimport { Button, Form, FormGroup, FormText, Label, Input, InputGroup, InputGroupAddon, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport SharedUploadInfo from '../../models/shared-upload-info';\nimport toaster from '../toast';\n\nconst propTypes = {\n  itemPath: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  closeShareDialog: PropTypes.func.isRequired,\n};\n\nclass GenerateUploadLink extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showPasswordInput: false,\n      passwordVisible: false,\n      password: '',\n      passwdnew: '',\n      sharedUploadInfo: null,\n    };\n  }\n\n  componentDidMount() {\n    this.getUploadLink();\n  }\n\n  getUploadLink = () => {\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID; \n    seafileAPI.getUploadLinks(repoID, path).then((res) => {\n      if (res.data.length !== 0) {\n        let sharedUploadInfo = new SharedUploadInfo(res.data[0]);\n        this.setState({sharedUploadInfo: sharedUploadInfo});\n      }\n    });\n  }\n\n  addPassword = () => {\n    this.setState({\n      showPasswordInput: !this.state.showPasswordInput,\n      password: '',\n      passwdnew: '',\n      errorInfo: ''\n    });\n  }\n\n  togglePasswordVisible = () => {\n    this.setState({\n      passwordVisible: !this.state.passwordVisible\n    });\n  }\n\n  generatePassword = () => {\n    let val = Math.random().toString(36).substr(5);\n    this.setState({\n      password: val,\n      passwordnew: val\n    });\n  }\n\n  inputPassword = (e) => {\n    this.setState({\n      password: e.target.value\n    });\n  }\n\n  inputPasswordNew = (e) => {\n    this.setState({\n      passwordnew: e.target.value\n    });\n  }\n\n  generateUploadLink = () => {\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID; \n\n    if (this.state.showPasswordInput && (this.state.password == '')) {\n      this.setState({\n        errorInfo: gettext('Please enter password')\n      });\n    }\n    else if (this.state.showPasswordInput && (this.state.showPasswordInput && this.state.password.length < 8)) {\n      this.setState({\n        errorInfo: gettext('Password is too short')\n      });\n    }\n    else if (this.state.showPasswordInput && (this.state.password !== this.state.passwordnew)) {\n      this.setState({\n        errorInfo: gettext('Passwords don\\'t match')\n      });\n    } else {\n      seafileAPI.createUploadLink(repoID, path, this.state.password).then((res) => {\n        let sharedUploadInfo = new SharedUploadInfo(res.data);\n        this.setState({sharedUploadInfo: sharedUploadInfo}); \n      });\n    }\n  }\n\n  onCopyUploadLink = () => {\n    let uploadLink = this.state.sharedUploadInfo.link;\n    copy(uploadLink);\n    toaster.success(gettext('Upload link is copied to the clipboard.'));\n    this.props.closeShareDialog();\n  }\n\n  deleteUploadLink = () => {\n    let sharedUploadInfo = this.state.sharedUploadInfo;\n    seafileAPI.deleteUploadLink(sharedUploadInfo.token).then(() => {\n      this.setState({\n        showPasswordInput: false,\n        password: '',\n        passwordnew: '',\n        sharedUploadInfo: null,\n      });\n    });\n  }\n\n  render() {\n    if (this.state.sharedUploadInfo) {\n      let sharedUploadInfo = this.state.sharedUploadInfo;\n      return (\n        <div>\n          <Form className=\"mb-4\">\n            <FormGroup>\n              <dt className=\"text-secondary font-weight-normal\">{gettext('Upload Link:')}</dt>\n              <dd className=\"d-flex\">\n                <span>{sharedUploadInfo.link}</span>\n                <span className=\"far fa-copy action-icon\" onClick={this.onCopyUploadLink}></span>\n              </dd>\n            </FormGroup>\n          </Form>\n          <Button onClick={this.deleteUploadLink}>{gettext('Delete')}</Button>\n        </div>\n      );\n    }\n    return (\n      <Form className=\"generate-upload-link\">\n        <FormGroup>\n          <FormText className=\"tip\">{gettext('You can share the generated link to others and then they can upload files to this directory via the link.')}</FormText>\n        </FormGroup>\n        <FormGroup check>\n          <Label check>\n            <Input type=\"checkbox\" onChange={this.addPassword}/>{'  '}{gettext('Add password protection')} \n          </Label>\n        </FormGroup>\n        {this.state.showPasswordInput &&\n          <FormGroup className=\"link-operation-content\">\n            {/* todo translate  */}\n            <Label className=\"font-weight-bold\">{gettext('Password')}</Label>{' '}<span className=\"tip\">{gettext('(at least 8 characters)')}</span>\n            <InputGroup className=\"passwd\">\n              <Input type={this.state.passwordVisible ? 'text':'password'} value={this.state.password || ''} onChange={this.inputPassword}/>\n              <InputGroupAddon addonType=\"append\">\n                <Button onClick={this.togglePasswordVisible}><i className={`link-operation-icon fas ${this.state.passwordVisible ? 'fa-eye': 'fa-eye-slash'}`}></i></Button>\n                <Button onClick={this.generatePassword}><i className=\"link-operation-icon fas fa-magic\"></i></Button>\n              </InputGroupAddon>\n            </InputGroup>\n            <Label className=\"font-weight-bold\">{gettext('Password again')}</Label>\n            <Input className=\"passwd\" type={this.state.passwordVisible ? 'text' : 'password'} value={this.state.passwordnew || ''} onChange={this.inputPasswordNew} />\n          </FormGroup>\n        }\n        {this.state.errorInfo && <Alert color=\"danger\" className=\"mt-2\">{this.state.errorInfo}</Alert>}\n        <Button className=\"generate-link-btn\" onClick={this.generateUploadLink}>{gettext('Generate')}</Button>\n      </Form>\n    );\n  }\n}\n\nGenerateUploadLink.propTypes = propTypes;\n\nexport default GenerateUploadLink;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/dialog/generate-upload-link.js","// Import React!\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport MarkdownEditor from './markdown-editor';\nimport { I18nextProvider } from 'react-i18next';\nimport i18n from './i18n';\nimport './assets/css/fa-solid.css';\nimport './assets/css/fa-regular.css';\nimport './assets/css/fontawesome.css';\nimport './index.css';\n\nlet lang = window.app.pageOptions.lang;\n\nReactDOM.render(\n  <I18nextProvider i18n={ i18n } initialLanguage={ lang } >\n    <MarkdownEditor />\n  </I18nextProvider>,\n  document.getElementById('root')\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import React from 'react';\nimport SeafileEditor from '@seafile/seafile-editor';\nimport 'whatwg-fetch';\nimport { Value, Document, Block } from 'slate';\nimport { seafileAPI } from './utils/seafile-api';\nimport { Utils } from './utils/utils';\nimport { gettext, isDocs } from './utils/constants';\nimport io from 'socket.io-client';\nimport toaster from './components/toast';\nimport ModalPortal from './components/modal-portal';\nimport EditFileTagDialog from './components/dialog/edit-filetag-dialog';\nimport RelatedFileDialogs from './components/dialog/related-file-dialogs';\nimport ShareDialog from './components/dialog/share-dialog';\nimport CommentDialog from './components/markdown-view/comment-dialog';\nimport InsertFileDialog from './components/dialog/insert-file-dialog';\nimport MarkdownViewerSlate from '@seafile/seafile-editor/dist/viewer/markdown-viewer-slate';\nimport { serialize, deserialize } from '@seafile/seafile-editor/dist/utils/slate2markdown';\nimport LocalDraftDialog from './components/dialog/local-draft-dialog';\nimport DiffViewer from '@seafile/seafile-editor/dist/viewer/diff-viewer';\nimport MarkdownViewerToolbar from './components/toolbar/markdown-viewer-toolbar';\nimport HistoryList from './components/markdown-view/history-list';\nimport CommentPanel from './components/file-view/comment-panel';\nimport OutlineView from './components/markdown-view/outline';\nimport Loading from './components/loading';\nimport { findRange } from '@seafile/slate-react';\n\nimport './css/markdown-viewer/markdown-editor.css';\n\nconst CryptoJS = require('crypto-js');\nconst URL = require('url-parse');\nconst { repoID, repoName, filePath, fileName, mode, draftID, isDraft, hasDraft } = window.app.pageOptions;\nconst { siteRoot, serviceUrl, seafileCollabServer } = window.app.config;\nconst userInfo = window.app.userInfo;\nconst userName = userInfo.username;\nlet dirPath = '/';\n\nfunction getImageFileNameWithTimestamp() {\n  var d = Date.now();\n  return 'image-' + d.toString() + '.png';\n}\n\n\nclass EditorUtilities {\n\n  constructor () {\n    this.repoID = repoID;\n    this.filePath = filePath;\n    this.serviceUrl = serviceUrl;\n    this.name = userInfo.name;\n    this.contact_email = userInfo.contact_email;\n    this.fileName = fileName;\n    this.userName = userName;\n  }\n  \n  saveContent(content) {\n    return (\n      seafileAPI.getUpdateLink(repoID, dirPath).then((res) => {\n        const uploadLink = res.data;\n        return seafileAPI.updateFile(uploadLink, filePath, fileName, content);\n      })\n    );\n  }\n\n  unstarItem () {\n    return (\n      seafileAPI.unstarItem(this.repoID, this.filePath)\n    );\n  }\n\n  starItem() {\n    return (\n      seafileAPI.starItem(this.repoID, this.filePath)\n    );\n  }\n\n  getParentDectionaryUrl() {\n    let parentPath = this.filePath.substring(0, this.filePath.lastIndexOf('/'));\n    let libName = encodeURIComponent(repoName);\n    let path = Utils.encodePath(parentPath);\n    return this.serviceUrl + '/library/' + this.repoID + '/' + libName + path;\n  }\n  \n  _getImageURL(fileName) {\n    const url = this.serviceUrl + '/lib/' + repoID + '/file/images/auto-upload/' + fileName + '?raw=1';\n    return url;\n  }\n\n  uploadImage = (imageFile) => {\n    return (\n      seafileAPI.getUploadLink(repoID, dirPath).then((res) => {\n        let uploadLinkComponent = res.data;\n        const uploadLink = uploadLinkComponent + '?ret-json=1';\n        const name = getImageFileNameWithTimestamp();\n        const blob = imageFile.slice(0, -1, 'image/png');\n        const newFile = new File([blob], name, {type: 'image/png'});\n        const formData = new FormData();\n        formData.append('parent_dir', '/');\n        formData.append('relative_path', 'images/auto-upload');\n        formData.append('file', newFile);\n        return {uploadLink, formData};\n      }).then(({ uploadLink, formData}) => {\n        return seafileAPI.uploadImage(uploadLink, formData);\n      }).then ((res) => {\n        let resArr = res.data[0];\n        let filename = resArr.name;\n        return this._getImageURL(filename);\n      })\n    );\n  }\n\n  uploadLocalImage = (imageFile) => {\n    return (\n      seafileAPI.getUploadLink(repoID, dirPath).then((res) => {\n        const uploadLink = res.data + '?ret-json=1';\n        const newFile = new File([imageFile], imageFile.name, {type: imageFile.type});\n        const formData = new FormData();\n        formData.append('parent_dir', '/');\n        formData.append('relative_path', 'images/auto-upload');\n        formData.append('file', newFile);\n        return seafileAPI.uploadImage(uploadLink, formData);\n      }).then ((res) => {\n        return this._getImageURL(res.data[0].name);\n      })\n    );\n  }\n\n  getFileURL(fileNode) {\n    var url;\n    if (fileNode.type === 'file') {\n      if (fileNode.isImage()) {\n        url = serviceUrl + '/lib/' + repoID + '/file' + Utils.encodePath(fileNode.path()) + '?raw=1';\n      } else {\n        url = serviceUrl + '/lib/' + repoID + '/file' + Utils.encodePath(fileNode.path());\n      }\n    } else {\n      url = serviceUrl + '/library/' + repoID + '/' + encodeURIComponent(repoName) + Utils.encodePath(fileNode.path());\n    }\n    return url;\n  }\n  \n  isInternalFileLink(url) {\n    var re = new RegExp(this.serviceUrl + '/lib/[0-9a-f-]{36}/file.*');\n    return re.test(url);\n  }\n  \n  isInternalDirLink(url) {\n    var re = new RegExp(serviceUrl + '/library/' + '[0-9a-f\\-]{36}.*');\n    return re.test(url);\n  }\n\n  getFiles() {\n    return seafileAPI.listDir(repoID, dirPath, { recursive: true} ).then((response) => {\n      var files = response.data.dirent_list.map((item) => {\n        return {\n          name: item.name,\n          type: item.type === 'dir' ? 'dir' : 'file',\n          parent_path: item.parent_dir\n        };\n      });\n      return files;\n    });\n  }\n\n  getFileHistory() {\n    return seafileAPI.getFileHistory(repoID, filePath);\n  }\n\n  getFileInfo() {\n    return seafileAPI.getFileInfo(repoID, filePath);\n  }\n\n  getRepoInfo(newRepoID) {\n    return seafileAPI.getRepoInfo(newRepoID);\n  }\n\n  getInternalLink() {\n    return seafileAPI.getInternalLink(repoID, filePath);\n  }\n\n  getShareLink() {\n    return seafileAPI.getShareLink(repoID, filePath);\n  }\n\n  createShareLink (repoID, filePath, userPassword, userValidDays, permissions) {\n    return seafileAPI.createShareLink(repoID, filePath, userPassword, userValidDays, permissions);\n  }\n\n  deleteShareLink(token){\n    return seafileAPI.deleteShareLink(token);\n  }\n\n  getDraftKey() {\n    return (repoID + filePath);\n  }\n\n  getFileContent(url) {\n    return seafileAPI.getFileContent(url);\n  }\n\n  listFileHistoryRecords(page, perPage) {\n    return seafileAPI.listFileHistoryRecords(repoID, filePath, page, perPage);\n  }\n\n  getFileHistoryVersion(commitID, filePath) {\n    return seafileAPI.getFileRevision(repoID, commitID, filePath);\n  }\n\n  getCommentsNumber() {\n    return seafileAPI.getCommentsNumber(this.repoID, filePath);\n  }\n\n  postComment(comment, detail) {\n    return seafileAPI.postComment(this.repoID, this.filePath, comment, detail);\n  }\n\n  listComments() {\n    return seafileAPI.listComments(this.repoID, this.filePath);\n  }\n\n  updateComment(commentID, resolved, detail, newComment) {\n    return seafileAPI.updateComment(this.repoID, commentID, resolved, detail, newComment);\n  }\n\n  deleteComment(commentID) {\n    return seafileAPI.deleteComment(this.repoID, commentID);\n  }\n \n  getUserAvatar(size) {\n    return seafileAPI.getUserAvatar(userName, size);\n  }\n\n  goDraftPage() {\n    window.location.href = serviceUrl + '/drafts/' + draftID + '/'; \n  }\n\n  createDraftFile() {\n    return seafileAPI.createDraft(repoID, filePath).then(res => {\n      window.location.href = serviceUrl + '/lib/' + res.data.origin_repo_id + '/file' + Utils.encodePath(res.data.draft_file_path) + '?mode=edit';\n    });\n  }\n\n  publishDraftFile() {\n    return seafileAPI.publishDraft(draftID).then(res => {\n      window.location.href = serviceUrl + '/lib/' + repoID + '/file' + Utils.encodePath(res.data.published_file_path);\n    });\n  }\n\n  fileMetaData() {\n    return seafileAPI.fileMetaData(repoID, filePath);\n  }\n\n  listFileTags = () => {\n    return seafileAPI.listFileTags(repoID, filePath);\n  }\n\n  listRepoTags = () => {\n    return seafileAPI.listRepoTags(repoID);\n  }\n  \n  markdownLint(slateValue) {\n    return seafileAPI.markdownLint(slateValue);\n  }\n}\n\nconst editorUtilities = new EditorUtilities();\n\nclass MarkdownEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.timer = null;\n    this.localDraft = '';\n    this.autoSave = false;\n    this.draftRichValue = '';\n    this.draftPlainValue = '';\n    this.state = {\n      markdownContent: '',\n      oldMarkdownContent: '',\n      loading: true,\n      mode: 'editor',\n      fileInfo: {\n        repoID: repoID,\n        name: fileName,\n        path: filePath,\n        mtime: null,\n        size: 0,\n        starred: false,\n        permission: '',\n        lastModifier: '',\n        id: '',\n      },\n      editorMode: 'viewer',\n      collabServer: seafileCollabServer ? seafileCollabServer : null,\n      relatedFiles: [],\n      fileTagList: [],\n      localDraftDialog: false,\n      showRelatedFileDialog: false,\n      showEditFileTagDialog: false,\n      showMarkdownEditorDialog: false,\n      showShareLinkDialog: false,\n      showCommentDialog: false,\n      showInsertFileDialog: false,\n      showDraftSaved: false,\n      collabUsers: userInfo ?\n        [{user: userInfo, is_editing: false}] : [],\n      commentsNumber: null,\n      loadingDiff: false,\n      value: null,\n      isShowComments: false,\n      isShowHistory: false,\n      isShowOutline: true,\n      viewMode:'list_related_file',\n    };\n\n    if (this.state.collabServer) {\n      const socket = io(this.state.collabServer);\n      this.socket = socket;\n      socket.on('presence', (data) => this.receivePresenceData(data));\n      socket.on('repo_update', (data) => this.receiveUpdateData(data));\n      socket.on('connect', () => {\n        this.socket_id = socket.id;\n      });\n    }\n  }\n\n  emitSwitchEditor = (is_editing=false) => {\n    if (userInfo && this.state.collabServer) {\n      const { repoID, path } = this.state.fileInfo;\n      this.socket.emit('presence', {\n        request: 'editing',\n        doc_id: CryptoJS.MD5(repoID+path).toString(),\n        user: userInfo,\n        is_editing,\n      });\n    }\n  }\n\n  receiveUpdateData (data) {\n    let currentTime = new Date();\n    if ((parseFloat(currentTime - this.lastModifyTime)/1000) <= 5) {\n      return;\n    }\n    editorUtilities.fileMetaData().then((res) => {\n      if (res.data.id !== this.state.fileInfo.id) {\n        toaster.notify(\n          <span>\n            {gettext('This file has been updated.')}\n            <a href='' >{' '}{gettext('Refresh')}</a>\n          </span>,\n          {id: 'repo_updated', duration: 3600});\n      }\n    });\n  }\n\n\n  receivePresenceData(data) {\n    switch(data.response) {\n      case 'user_join':\n        toaster.notify(`user ${data.user.name} joined`, {\n          duration: 3\n        });\n        return;\n\n      case 'user_left':\n        toaster.notify(`user ${data.user.name} left`, {\n          duration: 3\n        });\n        return;\n      case 'update_users':\n        for (var prop in data.users) {\n          if (data.users.hasOwnProperty(prop)) {\n            if (prop === this.socket_id) {\n              data.users[prop]['myself'] = true;\n              break;\n            }\n          }\n        }\n        this.setState({collabUsers: Object.values(data.users)});\n        return;\n      case 'user_editing':\n        toaster.danger(`user ${data.user.name} is editing this file!`, {\n          duration: 3\n        });\n        return;\n      default:\n        console.log('unknown response type: ' + data.response);\n        return;\n    }\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showRelatedFileDialog: false,\n      showEditFileTagDialog: false,\n      showMarkdownEditorDialog: false,\n      showShareLinkDialog: false,\n      showCommentDialog: false,\n      showInsertFileDialog: false,\n    });\n  }\n\n  setEditorMode = (type) => {\n    this.setState({\n      editorMode: type\n    });\n  }\n\n  setDraftValue = (type, value) => {\n    if (type === 'rich') {\n      this.draftRichValue = value;\n    } else {\n      this.draftPlainValue = value;\n    }\n  }\n\n  setContent = (str) => {\n    let value = deserialize(str);\n    this.setState({\n      markdownContent: str,\n      value: value,\n    });\n  }\n\n  checkDraft = () => {\n    let draftKey = editorUtilities.getDraftKey();\n    let draft = localStorage.getItem(draftKey);\n    let that = this;\n    if (draft) {\n      that.setState({\n        localDraftDialog: true,\n      });\n      that.localDraft = draft;\n      localStorage.removeItem(draftKey);\n    }\n  }\n\n  useDraft = () => {\n    this.setState({\n      localDraftDialog: false,\n      loading: false,\n      markdownContent: this.localDraft,\n      editorMode: 'rich',\n    });\n    this.emitSwitchEditor(true);\n  }\n\n  deleteDraft = () => {\n    if (this.state.localDraftDialog) {\n      this.setState({\n        localDraftDialog: false,\n        loading: false,\n      });\n    } else {\n      let draftKey = editorUtilities.getDraftKey();\n      localStorage.removeItem(draftKey);\n    }\n  }\n\n  closeDraftDialog = () => {\n    this.setState({\n      localDraftDialog: false\n    });\n  }\n\n  clearTimer = () => {\n    clearTimeout(this.timer);\n    this.timer = null;\n  }\n\n  openDialogs = (option) => {\n    switch(option)\n    {\n      case 'related_files':\n          if (this.state.relatedFiles.length > 0) {\n            this.setState({\n              showRelatedFileDialog: true,\n              showMarkdownEditorDialog: true,\n              viewMode: 'list_related_file',\n            });\n          }\n          else {\n            this.setState({\n              showRelatedFileDialog: true,\n              showMarkdownEditorDialog: true,\n              viewMode: 'add_related_file',\n            });\n          }\n        break;\n      case 'tags':\n        this.setState({\n          showEditFileTagDialog: true,\n          showMarkdownEditorDialog: true,\n        });\n        break;\n      case 'share_link':\n        this.setState({\n          showMarkdownEditorDialog: true,\n          showShareLinkDialog: true,\n        });\n        break;\n      case 'comment':\n        this.setState({\n          showMarkdownEditorDialog: true,\n          showCommentDialog: true,\n        });\n        break;\n      case 'insert_file':\n        this.setState({\n          showMarkdownEditorDialog: true,\n          showInsertFileDialog: true,\n        });\n        break;\n      default:\n        return;\n    }\n  }\n\n  componentWillUnmount() {\n    this.socket.emit('repo_update', {\n      request: 'unwatch_update',\n      repo_id: this.props.c.repoID,\n      user: {\n      name: editorUtilities.name,\n        username: editorUtilities.username,\n        contact_email: editorUtilities.contact_email,\n      },\n    });\n    document.removeEventListener('selectionchange', this.setBtnPosition);\n  }\n\n  componentDidMount() {\n\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, size, starred, permission, last_modifier_name, id } = res.data;\n      let lastModifier = last_modifier_name;\n\n      this.setState((prevState, props) => ({\n        fileInfo: {\n          ...prevState.fileInfo,\n          mtime,\n          size,\n          starred,\n          permission,\n          lastModifier,\n          id\n        }\n      }));\n\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        const downLoadUrl = res.data;\n        seafileAPI.getFileContent(downLoadUrl).then((res) => {\n          const contentLength = res.data.length;\n          let isBlankFile =  (contentLength === 0 || contentLength === 1);\n          let hasPermission = (this.state.fileInfo.permission === 'rw');\n          let isEditMode = mode === 'edit' ? true : false;\n          let value = deserialize(res.data);\n          this.setState({\n            markdownContent: res.data,\n            loading: false,\n            // Goto rich edit page\n            // First, the user has the relevant permissions, otherwise he can only enter the viewer interface or cannot access\n            // case1: If file is draft file\n            // case2: If mode == 'edit' and the file has no draft\n            // case3: The length of markDownContent is 1 when clear all content in editor and the file has no draft\n            editorMode: (hasPermission && (isDraft || (isEditMode && !hasDraft) || (isBlankFile && !hasDraft))) ? 'rich' : 'viewer',\n            value: value,\n          });\n        });\n      });\n    });\n    if (userInfo && this.socket) {\n      const { repoID, path } = this.state.fileInfo;\n      this.socket.emit('presence', {\n        request: 'join_room',\n        doc_id: CryptoJS.MD5(repoID+path).toString(),\n        user: userInfo\n      });\n\n      this.socket.emit('repo_update', {\n        request: 'watch_update',\n        repo_id: editorUtilities.repoID,\n        user: {\n        name: editorUtilities.name,\n          username: editorUtilities.username,\n          contact_email: editorUtilities.contact_email,\n        },\n      });\n    }\n    this.checkDraft();\n    this.listRelatedFiles();\n    this.listFileTags();\n    this.getCommentsNumber();\n\n    document.addEventListener('selectionchange', this.setBtnPosition);\n    setTimeout(() => {\n      let url = new URL(window.location.href);\n      if (url.hash) {\n        window.location.href = window.location.href;\n      }\n    }, 100);\n  }\n\n  listRelatedFiles = () => {\n    seafileAPI.listRelatedFiles(repoID, filePath).then(res => {\n      this.setState({\n        relatedFiles: res.data.related_files\n      });\n    });\n  }\n\n  listFileTags = () => {\n    seafileAPI.listFileTags(repoID, filePath).then(res => {\n      let fileTagList = res.data.file_tags;\n      for (let i = 0, length = fileTagList.length; i < length; i++) {\n        fileTagList[i].id = fileTagList[i].file_tag_id;\n      }\n      this.setState({\n        fileTagList: fileTagList\n      });\n    });\n  }\n\n  onRelatedFileChange = () => {\n    this.listRelatedFiles();\n  }\n\n  onFileTagChanged = () => {\n    this.listFileTags();\n  }\n\n  setFileInfoMtime = (fileInfo) => {\n    this.setState({\n      fileInfo: Object.assign({}, this.state.fileInfo, { mtime: fileInfo.mtime, id: fileInfo.id, lastModifier: fileInfo.last_modifier_name })\n    });\n  };\n\n  toggleStar = () => {\n    let starrd = this.state.fileInfo.starred;\n    if (starrd) {\n      editorUtilities.unstarItem().then((response) => {\n        this.setState({\n          fileInfo: Object.assign({}, this.state.fileInfo, {starred: !starrd})\n        });\n      });\n    } else if (!starrd) {\n      editorUtilities.starItem().then((response) => {\n        this.setState({\n          fileInfo: Object.assign({}, this.state.fileInfo, {starred: !starrd})\n        });\n      });\n    }\n  }\n\n  autoSaveDraft = () => {\n    let that = this;\n    if (that.timer) {\n      return;\n    }\n    else {\n      that.timer = setTimeout(() => {\n        let str = '';\n        if (this.state.editorMode == 'rich') {\n          let value = this.draftRichValue;\n          str = serialize(value.toJSON());\n        }\n        else if (this.state.editorMode == 'plain') {\n          str = this.draftPlainValue;\n        }\n        let draftKey = editorUtilities.getDraftKey();\n        localStorage.setItem(draftKey, str);\n        that.setState({\n          showDraftSaved: true\n        });\n        setTimeout(() => {\n          that.setState({\n            showDraftSaved: false\n          });\n        }, 3000);\n        that.timer = null;\n          }, 60000);\n        }\n  }\n\n  backToParentDirectory = () => {\n    window.location.href = editorUtilities.getParentDectionaryUrl();\n  }\n\n  onEdit = (event) => {\n    event.preventDefault();\n    this.setEditorMode('rich');\n  }\n\n  toggleShareLinkDialog = () => {\n    this.openDialogs('share_link');\n  }\n\n  getCommentsNumber = () => {\n    editorUtilities.getCommentsNumber().then((res) => {\n      let commentsNumber = res.data[Object.getOwnPropertyNames(res.data)[0]];\n      this.setState({\n        commentsNumber: commentsNumber\n      });\n    });\n  }\n\n  onCommentAdded = () => {\n    this.getCommentsNumber();\n    this.toggleCancel();\n  }\n\n  showDiffViewer = () => {\n    this.setState({\n      loadingDiff: false,\n    });\n  }\n\n  setDiffViewerContent = (markdownContent, oldMarkdownContent) => {\n    this.setState({\n      markdownContent: markdownContent,\n      oldMarkdownContent: oldMarkdownContent\n    });\n    this.showDiffViewer();\n  }\n\n  reloadDiffContent = () =>{\n    this.setState({\n      loadingDiff: true,\n    });\n  }\n\n  setBtnPosition = (e) => {\n    if (!this.state.isShowComments) return;\n    const nativeSelection = window.getSelection();\n    if (!nativeSelection.rangeCount) {\n      this.range = null;\n      return;\n    }\n    if (nativeSelection.isCollapsed === false) {\n      const nativeRange = nativeSelection.getRangeAt(0);\n      const focusNode = nativeSelection.focusNode;\n      if ((focusNode.tagName === 'I') ||\n          (focusNode.nodeType !== 3 && focusNode.getAttribute('class') === 'language-type')) {\n        // fix select last paragraph\n        let fragment = nativeRange.cloneContents();\n        let startNode = fragment.firstChild.firstChild;\n        if (!startNode) return;\n        let newNativeRange = document.createRange();\n        newNativeRange.setStartBefore(startNode);\n        newNativeRange.setEndAfter(startNode);\n\n        let editor = {value: this.state.value};\n        this.range = findRange(nativeRange, editor);\n      }\n\n      else {\n        let editor = {value: this.state.value};\n        this.range = findRange(nativeRange, editor);\n      }\n      if (!this.range) return;\n      let rect = nativeRange.getBoundingClientRect();\n      // fix Safari bug\n      if (navigator.userAgent.indexOf('Chrome') < 0 && navigator.userAgent.indexOf('Safari') > 0) {\n        if (nativeRange.collapsed && rect.top == 0 && rect.height == 0) {\n          if (nativeRange.startOffset == 0) {\n            nativeRange.setEnd(nativeRange.endContainer, 1);\n          } else {\n            nativeRange.setStart(nativeRange.startContainer, nativeRange.startOffset - 1);\n          }\n          rect = nativeRange.getBoundingClientRect();\n          if (rect.top == 0 && rect.height == 0) {\n            if (nativeRange.getClientRects().length) {\n              rect = nativeRange.getClientRects()[0];\n            }\n          }\n        }\n      }\n      let style = this.refs.commentbtn.style;\n      style.top = `${rect.top - 63 + this.refs.markdownContainer.scrollTop}px`;\n      style.right = '0px';\n    }\n    else {\n      let style = this.refs.commentbtn.style;\n      style.top = '-1000px';\n    }\n  }\n\n  addComment = (e) => {\n    e.stopPropagation();\n    this.getQuote();\n    this.openDialogs('comment');\n  }\n\n  getQuote = () => {\n    let range = this.range;\n    if (!range) return;\n    const { document } = this.state.value;\n    let { anchor, focus } = range;\n    const anchorText = document.getNode(anchor.key);\n    const focusText = document.getNode(focus.key);\n    const anchorInline = document.getClosestInline(anchor.key);\n    const focusInline = document.getClosestInline(focus.key);\n    // COMPAT: If the selection is at the end of a non-void inline node, and\n    // there is a node after it, put it in the node after instead. This\n    // standardizes the behavior, since it's indistinguishable to the user.\n    if (anchorInline && anchor.offset == anchorText.text.length) {\n      const block = document.getClosestBlock(anchor.key);\n      const nextText = block.getNextText(anchor.key);\n      if (nextText) {\n        range = range.moveAnchorTo(nextText.key, 0);\n      }\n    }\n    if (focusInline && focus.offset == focusText.text.length) {\n      const block = document.getClosestBlock(focus.key);\n      const nextText = block.getNextText(focus.key);\n      if (nextText) {\n        range = range.moveFocusTo(nextText.key, 0); \n      }\n    }\n    let fragment = document.getFragmentAtRange(range);\n    let nodes = this.removeNullNode(fragment.nodes);\n    let newFragment = Document.create({\n      nodes: nodes\n    });\n    let newValue = Value.create({\n      document: newFragment\n    });\n    this.quote = serialize(newValue.toJSON());\n    let selection = document.createSelection(range);\n    selection = selection.setIsFocused(true);\n    this.setState({\n      commentPosition: selection.anchor.path\n    });\n  }\n\n  removeNullNode = (oldNodes) => {\n    let newNodes = [];\n    oldNodes.map((node) => {\n      const text = node.text.trim();\n      const childNodes = node.nodes;\n      if (!text) return;\n      if ((childNodes && childNodes.size === 1) || (!childNodes)) {\n        newNodes.push(node);\n      }\n      else if (childNodes.size > 1) {\n        let nodes = this.removeNullNode(childNodes);\n        let newNode = Block.create({\n          nodes: nodes,\n          data: node.data,\n          key: node.key,\n          type: node.type\n        });\n        newNodes.push(newNode);\n      }\n    });\n    return newNodes;\n  }\n\n  scrollToNode = (node) => {\n    let url = new URL(window.location.href);\n    url.set('hash', 'user-content-' + node.text);\n    window.location.href = url.toString();\n  }\n\n  findScrollContainer = (el, window) => {\n    let parent = el.parentNode;\n    const OVERFLOWS = ['auto', 'overlay', 'scroll'];\n    let scroller;\n    while (!scroller) {\n      if (!parent.parentNode) break;\n      const style = window.getComputedStyle(parent);\n      const { overflowY } = style;\n      if (OVERFLOWS.includes(overflowY)) {\n        scroller = parent;\n        break;\n      }\n      parent = parent.parentNode;\n    }\n    if (!scroller) {\n      return window.document.body;\n    }\n    return scroller;\n  }\n\n  scrollToQuote = (path) => {\n    if (!path) return;\n    const win = window;\n    if (path.length > 2) {\n      // deal with code block or chart\n      path[0] = path[0] > 1 ? path[0] - 1 : path[0] + 1;\n      path = path.slice(0, 1);\n    }\n    let node = this.state.value.document.getNode(path);\n    if (!node) {\n      path = path.slice(0, 1);\n      node = this.state.value.document.getNode(path);\n    }\n    if (node) {\n      let element = win.document.querySelector(`[data-key=\"${node.key}\"]`);\n      while (element.tagName === 'CODE') {\n        element = element.parentNode;\n      }\n      const scroller = this.findScrollContainer(element, win);\n      const isWindow = scroller == win.document.body || scroller == win.document.documentElement;\n      if (isWindow) {\n        win.scrollTo(0, element.offsetTop);\n      } else {\n        scroller.scrollTop = element.offsetTop;\n      }\n    }\n  }\n\n  toggleHistory = () => {\n    if (!isDocs) {\n      window.location.href = siteRoot + 'repo/file_revisions/' + repoID + '/?p=' + Utils.encodePath(filePath);\n      return; \n    }\n\n    if (this.state.isShowHistory) {\n      this.setState({\n        isShowHistory: false,\n        isShowOutline: true,\n        isShowComments: false,\n      });\n    } else {\n      this.setState({\n        isShowHistory: true,\n        isShowOutline: false,\n        isShowComments: false,\n      });\n    }\n  }\n\n  toggleCommentList = () => {\n    if (this.state.isShowComments) {\n      this.setState({\n        isShowHistory: false,\n        isShowOutline: true,\n        isShowComments: false,\n      });\n    } else {\n      this.setState({\n        isShowHistory: false,\n        isShowOutline: false,\n        isShowComments: true,\n      });\n    }\n  }\n\n  getInsertLink = (repoID, filePath) => {\n    seafileAPI.getShareLink(repoID, filePath).then((res) => {\n      if (res.data.length !== 0) {\n        let fileLink = res.data[0];\n        window.richMarkdownEditor.addLink(fileLink.obj_name, fileLink.link);\n      } else {\n        let permissions = { 'can_edit': false, 'can_download': true };\n        permissions = JSON.stringify(permissions);\n        seafileAPI.createShareLink(repoID, filePath, null, null, permissions).then((res) => {\n          let fileLink = res.data;\n          window.richMarkdownEditor.addLink(fileLink.obj_name, fileLink.link);\n        });\n      }\n    });\n  }\n\n  render() {\n    let component;\n    let sidePanel = this.state.isShowHistory ? true : false;\n    let markdownViewer = sidePanel ? \"seafile-md-viewer-slate side-panel-on\" :\n      (this.state.isShowComments ? \"seafile-md-viewer-slate comment-on\" : \"seafile-md-viewer-slate\");\n    if (this.state.loading) {\n      return (\n        <div className=\"empty-loading-page\">\n          <div className=\"lds-ripple page-centered\"><div></div><div></div></div>\n        </div>\n      );\n    } else if (this.state.mode === 'editor') {\n      if (this.state.editorMode === 'viewer') {\n        component = (\n          <div className=\"seafile-md-viewer d-flex flex-column\">\n            <MarkdownViewerToolbar\n              isDocs={isDocs}\n              hasDraft={hasDraft}\n              isDraft={isDraft}\n              editorUtilities={editorUtilities}\n              collabUsers={this.state.collabUsers}\n              fileInfo={this.state.fileInfo}\n              toggleStar={this.toggleStar}\n              backToParentDirectory={this.backToParentDirectory}\n              openDialogs={this.openDialogs}\n              fileTagList={this.state.fileTagList}\n              relatedFiles={this.state.relatedFiles}\n              toggleShareLinkDialog={this.toggleShareLinkDialog}\n              onEdit={this.onEdit}\n              toggleNewDraft={editorUtilities.createDraftFile}\n              commentsNumber={this.state.commentsNumber}\n              toggleCommentList={this.toggleCommentList}\n              showFileHistory={this.state.isShowHistory ? false : true }\n              toggleHistory={this.toggleHistory}\n            />\n            <div className=\"seafile-md-viewer d-flex\">\n              <div className={sidePanel ? \"seafile-md-viewer-container side-panel-on\":\"seafile-md-viewer-container\"} ref=\"markdownContainer\">\n                {\n                  this.state.isShowHistory ?\n                    <div className=\"diff-container\">\n                      <div className=\"diff-wrapper article\">\n                        { this.state.loadingDiff ?\n                          <Loading/> :\n                          <DiffViewer\n                            newMarkdownContent={this.state.markdownContent}\n                            oldMarkdownContent={this.state.oldMarkdownContent}\n                          />\n                        }\n                      </div>\n                    </div>\n                    :\n                    <div className={markdownViewer}>\n                      <MarkdownViewerSlate\n                        relatedFiles={this.state.relatedFiles}\n                        siteRoot={siteRoot}\n                        value={this.state.value}\n                      />\n                    {this.state.isShowComments &&\n                      <i className=\"fa fa-plus-square seafile-viewer-comment-btn\" ref=\"commentbtn\" onMouseDown={this.addComment}></i>}\n                    </div>\n                }\n                {\n                  this.state.isShowOutline &&\n                  <OutlineView\n                    isViewer={true}\n                    document={this.state.value.document}\n                    scrollToNode={this.scrollToNode}\n                  />\n                }\n                {this.state.isShowComments && \n                  <CommentPanel toggleCommentPanel={this.toggleCommentList} commentsNumber={this.state.commentsNumber}/>}\n              </div>\n              <div className=\"seafile-md-viewer-side-panel\">\n                {\n                  this.state.isShowHistory &&\n                  <HistoryList\n                    editorUtilities={editorUtilities}\n                    showDiffViewer={this.showDiffViewer}\n                    setDiffViewerContent={this.setDiffViewerContent}\n                    reloadDiffContent={this.reloadDiffContent}\n                    toggleHistoryPanel={this.toggleHistory}\n                  />\n                }\n              </div>\n            </div>\n          </div>\n        );\n      } else {\n        component = <SeafileEditor\n          fileInfo={this.state.fileInfo}\n          markdownContent={this.state.markdownContent}\n          editorUtilities={editorUtilities}\n          collabUsers={this.state.collabUsers}\n          setFileInfoMtime={this.setFileInfoMtime}\n          toggleStar={this.toggleStar}\n          showFileHistory={true}\n          setEditorMode={this.setEditorMode}\n          setContent={this.setContent}\n          draftID={draftID}\n          isDraft={isDraft}\n          mode={this.state.mode}\n          emitSwitchEditor={this.emitSwitchEditor}\n          hasDraft={hasDraft}\n          editorMode={this.state.editorMode}\n          relatedFiles={this.state.relatedFiles}\n          siteRoot={siteRoot}\n          autoSaveDraft={this.autoSaveDraft}\n          setDraftValue={this.setDraftValue}\n          clearTimer={this.clearTimer}\n          openDialogs={this.openDialogs}\n          fileTagList={this.state.fileTagList}\n          deleteDraft={this.deleteDraft}\n          showDraftSaved={this.state.showDraftSaved}\n        />\n      }\n\n      return (\n        <React.Fragment>\n          {this.state.localDraftDialog?\n            <ModalPortal>\n              <LocalDraftDialog\n                localDraftDialog={this.state.localDraftDialog}\n                deleteDraft={this.deleteDraft}\n                closeDraftDialog={this.closeDraftDialog}\n                useDraft={this.useDraft}\n              />\n            </ModalPortal>\n            : null}\n          {component}\n          {this.state.showMarkdownEditorDialog && (\n            <React.Fragment>\n              {this.state.showEditFileTagDialog &&\n                <ModalPortal>\n                  <EditFileTagDialog\n                    repoID={repoID}\n                    filePath={filePath}\n                    fileTagList={this.state.fileTagList}\n                    toggleCancel={this.toggleCancel}\n                    onFileTagChanged={this.onFileTagChanged}\n                  />\n                </ModalPortal>\n              }\n              {this.state.showRelatedFileDialog &&\n                <ModalPortal>\n                  <RelatedFileDialogs\n                    repoID={repoID}\n                    filePath={filePath}\n                    relatedFiles={this.state.relatedFiles}\n                    toggleCancel={this.toggleCancel}\n                    onRelatedFileChange={this.onRelatedFileChange}\n                    dirent={this.state.fileInfo}\n                    viewMode={this.state.viewMode}\n                  />\n                </ModalPortal>\n              }\n              {this.state.showInsertFileDialog &&\n                <ModalPortal>\n                  <InsertFileDialog\n                    repoID={repoID}\n                    filePath={filePath}\n                    toggleCancel={this.toggleCancel}\n                    getInsertLink={this.getInsertLink}\n                  />\n                </ModalPortal>\n              }\n              {this.state.showShareLinkDialog &&\n                <ModalPortal>\n                  <ShareDialog\n                    itemType=\"file\"\n                    itemName={this.state.fileInfo.name}\n                    itemPath={filePath}\n                    repoID={repoID}\n                    toggleDialog={this.toggleCancel}\n                    isGroupOwnedRepo={false}\n                    repoEncrypted={false}\n                  />\n                </ModalPortal>\n              }\n              {this.state.showCommentDialog &&\n                <ModalPortal>\n                  <CommentDialog\n                    toggleCommentDialog={this.toggleCancel}\n                    editorUtilities={editorUtilities}\n                    onCommentAdded={this.onCommentAdded}\n                    commentPosition={this.state.commentPosition}\n                    quote={this.quote}\n                  />\n                </ModalPortal>\n              }\n            </React.Fragment>\n          )}\n        </React.Fragment>\n      );\n    }   \n  }\n}\n\nexport default  MarkdownEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./src/markdown-editor.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { processor } from '@seafile/seafile-editor/dist/utils/seafile-markdown2html';\nimport { Button, Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport '../../css/comments-list.css';\n\nconst { username, repoID, filePath } = window.app.pageOptions;\n\nconst CommentPanelPropTypes = {\n  toggleCommentPanel: PropTypes.func.isRequired,\n  commentsNumber: PropTypes.number,\n};\n\nclass CommentPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      commentsList: [],\n      showResolvedComment: true,\n    };\n  }\n\n  toggleResolvedComment = () => {\n    this.setState({\n      showResolvedComment: !this.state.showResolvedComment\n    });\n  }\n\n  listComments = () => {\n    seafileAPI.listComments(repoID, filePath).then((res) => {\n      this.setState({\n        commentsList: res.data.comments\n      });\n    });\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({\n      comment: event.target.value,\n    });\n  }\n\n  submitComment = () => {\n    let comment = this.refs.commentTextarea.value;\n    if (comment.trim()) {\n      seafileAPI.postComment(repoID, filePath, comment).then(() => {\n        this.listComments();\n      });\n    }\n    this.refs.commentTextarea.value = '';\n  }\n\n  resolveComment = (event) => {\n    seafileAPI.updateComment(repoID, event.target.id, 'true').then(() => {\n      this.listComments();\n    });\n  }\n\n  deleteComment = (event) => {\n    seafileAPI.deleteComment(repoID, event.target.id).then(() => {\n      this.listComments();\n    });\n  }\n\n  editComment = (commentID, newComment) => {\n    seafileAPI.updateComment(repoID, commentID, null, null, newComment).then((res) => {\n      this.listComments();\n    });\n  }\n\n  componentDidMount() {\n    this.listComments();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.commentsNumber !== nextProps.commentsNumber) {\n      this.listComments();\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"seafile-comment\">\n        <div className=\"seafile-comment-title\">\n          <div onClick={this.props.toggleCommentPanel} className={'seafile-comment-title-close'}>\n            <i className={'fa fa-times-circle'}/>\n          </div>\n          <div className={'seafile-comment-title-text'}>{gettext('Comments')}</div>\n        </div>\n        <div className=\"seafile-comment-toggle-resolved\">\n          <div className={'seafile-comment-title-text'}>{gettext('Show resolved comments')}</div>\n          <div className={'seafile-comment-title-toggle d-flex'}>\n            <label className=\"custom-switch\" id=\"toggle-resolved-comments\">\n              <input type=\"checkbox\" name=\"option\" className=\"custom-switch-input\"\n                onChange={this.toggleResolvedComment}\n                checked={this.state.showResolvedComment && 'checked'}\n              />\n              <span className=\"custom-switch-indicator\"></span>\n            </label>\n          </div>\n        </div>\n        <ul className={'seafile-comment-list'}>\n          {this.state.commentsList.length > 0 &&\n            this.state.commentsList.map((item, index = 0, arr) => {\n              let oldTime = (new Date(item.created_at)).getTime();\n              let time = moment(oldTime).format('YYYY-MM-DD HH:mm');\n              return (\n                <React.Fragment key={item.id}>\n                  <CommentItem\n                    item={item} time={time}\n                    deleteComment={this.deleteComment}\n                    resolveComment={this.resolveComment}\n                    editComment={this.editComment}\n                    showResolvedComment={this.state.showResolvedComment}\n                  />\n                </React.Fragment>\n              );\n            })\n          }\n          {(this.state.commentsList.length == 0 ) &&\n            <li className=\"comment-vacant\">{gettext('No comment yet.')}</li>}\n        </ul>\n        <div className=\"seafile-comment-footer\">\n          <textarea\n            className=\"add-comment-input\" ref=\"commentTextarea\"\n            placeholder={gettext('Add a comment.')}\n            clos=\"100\" rows=\"3\" warp=\"virtual\"></textarea>\n          <Button\n            className=\"submit-comment\" color=\"success\"\n            size=\"sm\" onClick={this.submitComment} >\n            {gettext('Submit')}</Button>\n        </div>\n      </div>\n    );\n  }\n}\n\nCommentPanel.propTypes = CommentPanelPropTypes;\n\n\nconst commentItemPropTypes = {\n  time: PropTypes.string.isRequired,\n  item: PropTypes.object.isRequired,\n  deleteComment: PropTypes.func.isRequired,\n  resolveComment: PropTypes.func.isRequired,\n  showResolvedComment: PropTypes.bool.isRequired,\n  editComment: PropTypes.func.isRequired,\n};\n\nclass CommentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      dropdownOpen: false,\n      html: '',\n      newComment: this.props.item.comment,\n      editable: false,\n    };\n  }\n\n  toggleDropDownMenu = () => {\n    this.setState({\n      dropdownOpen: !this.state.dropdownOpen,\n    });\n  }\n\n  convertComment = (mdFile) => {\n    processor.process(mdFile).then(\n      (result) => {\n        let html = String(result);\n        this.setState({\n          html: html\n        });\n      }\n    );\n  }\n\n  toggleEditComment = () => {\n    this.setState({\n      editable: !this.state.editable\n    });\n  }\n\n  updateComment = (event) => {\n    const newComment = this.state.newComment;\n    if (this.props.item.comment !== newComment) {\n      this.props.editComment(event.target.id, newComment);\n    }\n    this.toggleEditComment();\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({\n      newComment: event.target.value,\n    });\n  }\n\n  componentWillMount() {\n    this.convertComment(this.props.item.comment);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.convertComment(nextProps.item.comment);\n  }\n\n  render() {\n    const item = this.props.item;\n    if (item.resolved && !this.props.showResolvedComment) {\n      return null;\n    }\n    if (this.state.editable) {\n      return(\n        <li className=\"seafile-comment-item\" id={item.id}>\n          <div className=\"seafile-comment-info\">\n            <img className=\"avatar\" src={item.avatar_url} alt=\"\"/>\n            <div className=\"reviewer-info\">\n              <div className=\"reviewer-name\">{item.user_name}</div>\n              <div className=\"review-time\">{this.props.time}</div>\n            </div>\n          </div>\n          <div className=\"seafile-edit-comment\">\n            <textarea className=\"edit-comment-input\" value={this.state.newComment} onChange={this.handleCommentChange} clos=\"100\" rows=\"3\" warp=\"virtual\"></textarea>\n            <Button className=\"comment-btn\" color=\"success\" size=\"sm\" onClick={this.updateComment} id={item.id}>{gettext('Update')}</Button>{' '}\n            <Button className=\"comment-btn\" color=\"secondary\" size=\"sm\" onClick={this.toggleEditComment}> {gettext('Cancel')}</Button>\n          </div>\n        </li>\n      );\n    }\n    return (\n      <li className={item.resolved ? 'seafile-comment-item seafile-comment-item-resolved'\n        : 'seafile-comment-item'} id={item.id}>\n        <div className=\"seafile-comment-info\">\n          <img className=\"avatar\" src={item.avatar_url} alt=\"\"/>\n          <div className=\"reviewer-info\">\n            <div className=\"reviewer-name\">{item.user_name}</div>\n            <div className=\"review-time\">{this.props.time}</div>\n          </div>\n          <Dropdown isOpen={this.state.dropdownOpen} size=\"sm\"\n            className=\"seafile-comment-dropdown\" toggle={this.toggleDropDownMenu}>\n            <DropdownToggle className=\"seafile-comment-dropdown-btn\">\n              <i className=\"fas fa-ellipsis-v\"></i>\n            </DropdownToggle>\n            <DropdownMenu>\n              {\n                (item.user_email === username) &&\n                <DropdownItem onClick={this.props.deleteComment} className=\"delete-comment\"\n                  id={item.id}>{gettext('Delete')}</DropdownItem>}\n              {\n                (item.user_email === username) &&\n                  <DropdownItem onClick={this.toggleEditComment}\n                    className=\"edit-comment\" id={item.id}>{gettext('Edit')}</DropdownItem>\n              }\n              {\n                !item.resolved &&\n                <DropdownItem onClick={this.props.resolveComment} className=\"seafile-comment-resolved\"\n                  id={item.id}>{gettext('Mark as resolved')}</DropdownItem>\n              }\n            </DropdownMenu>\n          </Dropdown>\n        </div>\n        <div className=\"seafile-comment-content\" dangerouslySetInnerHTML={{ __html: this.state.html }}></div>\n      </li>\n    );\n  }\n}\n\nCommentItem.propTypes = commentItemPropTypes;\n\nexport default CommentPanel;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/file-view/comment-panel.js","import Toaster from './toaster';\n\nconst toaster = new Toaster();\n\nexport default toaster;\n\n\n// WEBPACK FOOTER //\n// ./src/components/toast/index.js"],"sourceRoot":""}