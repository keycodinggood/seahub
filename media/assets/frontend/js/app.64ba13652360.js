webpackJsonp([0],{10:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(8),d=a(c),f=n(1),p=a(f),h={children:p.default.object.isRequired},m=document.getElementById("modal-wrapper"),g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.el=document.createElement("div"),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){m.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){m.removeChild(this.el)}},{key:"render",value:function(){return d.default.createPortal(this.props.children,this.el)}}]),t}(u.default.Component);g.propTypes=h,t.default=g},103:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){a(this,e),this.id=t.repo_tag_id,this.fileCount=t.files_count,this.name=t.tag_name,this.color=t.tag_color};t.default=r},104:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p={onCloseSidePanel:d.default.func.isRequired},h=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.closeSide=function(){a.props.onCloseSidePanel()},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"top-logo"},u.default.createElement("a",{href:f.siteRoot,id:"logo"},u.default.createElement("img",{src:f.mediaUrl+f.logoPath,height:f.logoHeight,width:f.logoWidth,title:f.siteTitle,alt:"logo"})),u.default.createElement("a",{className:"sf2-icon-x1 sf-popover-close side-panel-close action-icon d-md-none",onClick:this.closeSide,title:"Close","aria-label":"Close"}))}}]),t}(u.default.Component);h.propTypes=p,t.default=h},106:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(3),m=n(4),g=n(103),y=a(g);n(113);var b={repoID:d.default.string.isRequired,repoTag:d.default.object.isRequired,filePath:d.default.string.isRequired,fileTagList:d.default.array.isRequired,onEditFileTag:d.default.func.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.setState({showSelectedTag:!0})},n.onMouseLeave=function(){n.setState({showSelectedTag:!1})},n.getRepoTagIdList=function(){var e=[];return n.props.fileTagList.map(function(t){e.push(t.repo_tag_id)}),e},n.onEditFileTag=function(){var e=n.props,t=e.repoID,a=e.repoTag,r=e.filePath,o=n.getRepoTagIdList();if(-1===o.indexOf(a.id)){var i=a.id;h.seafileAPI.addFileTag(t,r,i).then(function(){o=n.getRepoTagIdList(),n.props.onEditFileTag()})}else{for(var l=null,s=n.props.fileTagList,u=0;u<s.length;u++)if(s[u].repo_tag_id===a.id){l=s[u];break}h.seafileAPI.deleteFileTag(t,l.id).then(function(){o=n.getRepoTagIdList(),n.props.onEditFileTag()})}},n.state={showSelectedTag:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.repoTag,t=this.getRepoTagIdList(),n=m.Utils.getDarkColor(e.color);return u.default.createElement("li",{key:e.id,className:"tag-list-item",onClick:this.onEditFileTag,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("div",{className:"tag-demo",style:{backgroundColor:e.color}},u.default.createElement("span",{className:this.state.showSelectedTag?"show-tag-selected":"",style:{backgroundColor:n}}),u.default.createElement("span",{className:"tag-name"},e.name),t.indexOf(e.id)>-1&&u.default.createElement("i",{className:"fas fa-check tag-operation"})))}}]),t}(u.default.Component);v.propTypes=b;var w={repoID:d.default.string.isRequired,filePath:d.default.string.isRequired,fileTagList:d.default.array.isRequired,onFileTagChanged:d.default.func.isRequired,toggleCancel:d.default.func.isRequired},S=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getRepoTagList=function(){var e=n.props.repoID;h.seafileAPI.listRepoTags(e).then(function(e){var t=[];e.data.repo_tags.forEach(function(e){var n=new y.default(e);t.push(n)}),n.setState({repotagList:t})})},n.toggle=function(){n.props.toggleCancel()},n.onEditFileTag=function(){n.props.onFileTagChanged()},n.state={repotagList:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.getRepoTagList()}},{key:"render",value:function(){var e=this;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("Select Tags")),u.default.createElement(f.ModalBody,null,u.default.createElement("ul",{className:"tag-list tag-list-container"},this.state.repotagList.map(function(t){return u.default.createElement(v,{key:t.id,repoTag:t,repoID:e.props.repoID,filePath:e.props.filePath,fileTagList:e.props.fileTagList,onEditFileTag:e.onEditFileTag})}))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{onClick:this.toggle},(0,p.gettext)("Close"))))}}]),t}(u.default.Component);S.propTypes=w,t.default=S},107:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(159),h=a(p),m=n(160),g=a(m),y=n(10),b=a(y),v={repoID:d.default.string.isRequired,filePath:d.default.string.isRequired,toggleCancel:d.default.func.isRequired,onRelatedFileChange:d.default.func.isRequired,dirent:d.default.object.isRequired,relatedFiles:d.default.array,viewMode:d.default.oneOf(["list_related_file","add_related_file"]).isRequired},w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onAddRelatedFileToggle=function(){n.setState({showListRelatedFileDialog:!1})},n.onCloseAddRelatedFileDialog=function(){n.setState({showListRelatedFileDialog:!0})},n.state={showListRelatedFileDialog:"list_related_file"===e.viewMode},n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(b.default,null,u.default.createElement(f.Modal,{isOpen:!0,toggle:this.props.toggleCancel,size:"lg",style:{width:"650px"}},this.state.showListRelatedFileDialog&&u.default.createElement(g.default,{filePath:this.props.filePath,relatedFiles:this.props.relatedFiles,repoID:this.props.repoID,toggleCancel:this.props.toggleCancel,addRelatedFileToggle:this.onAddRelatedFileToggle,onRelatedFileChange:this.props.onRelatedFileChange}),!this.state.showListRelatedFileDialog&&u.default.createElement(h.default,{filePath:this.props.filePath,repoID:this.props.repoID,toggleCancel:this.onCloseAddRelatedFileDialog,onRelatedFileChange:this.props.onRelatedFileChange,dirent:this.props.dirent,onClose:this.props.toggleCancel})))}}]),t}(u.default.Component);w.propTypes=v,t.default=w},11:function(e,t,n){"use strict";function a(){return o.default.createElement("span",{className:"loading-icon loading-tip"})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=a},113:function(e,t){},116:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(117),p=a(f),h=n(2),m=n(118),g=a(m),y=n(21),b=a(y),v=n(119),w=a(v),S={repoID:d.default.string,placeholder:d.default.string,onSearchedClick:d.default.func.isRequired},C=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFocusHandler=function(){n.setState({width:"30rem",isMaskShow:!0,isCloseShow:!0})},n.onCloseHandler=function(){n.resetToDefault()},n.onItemClickHandler=function(e){n.resetToDefault(),n.props.onSearchedClick(e)},n.onChangeHandler=function(e){var t=n;n.setState({value:e.target.value});var a=e.target.value;if(n.inputValue===a.trim())return!1;if(n.inputValue=a.trim(),""===n.inputValue||t.getValueLength(n.inputValue)<3)return n.setState({isResultShow:!1,isResultGetted:!1}),!1;var r=n.props.repoID,o={q:a,search_repo:r||"all",search_ftypes:"all"};n.timer&&clearTimeout(n.timer),n.timer=setTimeout(t.getSearchResult(o),500)},n.onShowMore=function(){var e=n.props.repoID,t=n.state.value,a={q:t,search_repo:e||"all",search_ftypes:"all"},r="";for(var o in a)r+=o+"="+a[o]+"&";window.location=h.siteRoot+"search/?"+r.slice(0,r.length-1)},n.onSearchToggle=function(){n.setState({isSearchInputShow:!n.state.isSearchInputShow,isMaskShow:!n.state.isMaskShow})},n.state={width:"default",value:"",resultItems:[],isMaskShow:!1,isResultShow:!1,isResultGetted:!1,isCloseShow:!1,isSearchInputShow:!1},n.inputValue="",n.source=null,n}return i(t,e),l(t,[{key:"getSearchResult",value:function(e){this.source&&this.cancelRequest(),this.setState({isResultShow:!0,isResultGetted:!1}),this.source=b.default.getSource(),this.sendRequest(e,this.source.token)}},{key:"sendRequest",value:function(e,t){var n=this;b.default.searchFiles(e,t).then(function(e){if(!e.data.total)return n.setState({resultItems:[],isResultGetted:!0}),void(n.source=null);var t=n.formatResultItems(e.data.results);n.setState({resultItems:t,isResultGetted:!0}),n.source=null}).catch(function(e){console.log(e)})}},{key:"cancelRequest",value:function(){this.source.cancel("prev request is cancelled")}},{key:"getValueLength",value:function(e){for(var t,n=0,a=0;n<e.length;n++)t=e.charCodeAt(n),10==t?a+=2:t<127?a+=1:t>=128&&t<=2047?a+=2:t>=2048&&t<=65535&&(a+=3);return a}},{key:"formatResultItems",value:function(e){for(var t=[],n=e.length>5?5:e.length,a=0;a<n;a++)t[a]={},t[a].index=[a],t[a].name=e[a].name,t[a].path=e[a].fullpath,t[a].repo_id=e[a].repo_id,t[a].repo_name=e[a].repo_name,t[a].is_dir=e[a].is_dir,t[a].link_content=decodeURI(e[a].fullpath).substring(1),t[a].content=e[a].content_highlight;return t}},{key:"resetToDefault",value:function(){this.inputValue=null,this.setState({width:"",value:"",isMaskShow:!1,isCloseShow:!1,isResultShow:!1,isResultGetted:!1,resultItems:[],isSearchInputShow:!1})}},{key:"renderSearchResult",value:function(){var e=this;if(this.state.isResultShow){if(!this.state.isResultGetted||this.getValueLength(this.inputValue)<3)return u.default.createElement("span",{className:"loading-icon loading-tip"});if(!this.state.resultItems.length)return u.default.createElement("div",{className:"search-result-none"},(0,h.gettext)("No results matching."));var t=this.state.resultItems.length>=5;return u.default.createElement("ul",{className:"search-result-list"},this.state.resultItems.map(function(t){return u.default.createElement(g.default,{key:t.index,item:t,onItemClickHandler:e.onItemClickHandler})}),t&&u.default.createElement(w.default,{onShowMore:this.onShowMore}))}}},{key:"render",value:function(){var e="default"!==this.state.width?this.state.width:"",t={width:e};return u.default.createElement(s.Fragment,null,u.default.createElement(p.default,{query:"(min-width: 768px)"},u.default.createElement("div",{className:"search"},u.default.createElement("div",{className:"search-mask "+(this.state.isMaskShow?"":"hide"),onClick:this.onCloseHandler}),u.default.createElement("div",{className:"search-container"},u.default.createElement("div",{className:"input-icon"},u.default.createElement("i",{className:"search-icon-left input-icon-addon fas fa-search"}),u.default.createElement("input",{type:"text",className:"form-control search-input",name:"query",placeholder:this.props.placeholder,style:t,value:this.state.value,onFocus:this.onFocusHandler,onChange:this.onChangeHandler,autoComplete:"off"}),this.state.isCloseShow&&u.default.createElement("i",{className:"search-icon-right input-icon-addon fas fa-times",onClick:this.onCloseHandler})),u.default.createElement("div",{className:"search-result-container"},this.renderSearchResult())))),u.default.createElement(p.default,{query:"(max-width: 768px)"},u.default.createElement("div",{className:"search-icon-container"},u.default.createElement("i",{className:"search-icon fas fa-search",onClick:this.onSearchToggle})),this.state.isSearchInputShow&&u.default.createElement("div",{className:"search"},u.default.createElement("div",{className:"search-mask "+(this.state.isMaskShow?"":"hide"),onClick:this.onCloseHandler}),u.default.createElement("div",{className:"search-container"},u.default.createElement("div",{className:"input-icon"},u.default.createElement("i",{className:"search-icon-left input-icon-addon fas fa-search"}),u.default.createElement("input",{type:"text",className:"form-control search-input",name:"query",placeholder:this.props.placeholder,style:t,value:this.state.value,onFocus:this.onFocusHandler,onChange:this.onChangeHandler,autoComplete:"off"}),this.state.isCloseShow&&u.default.createElement("i",{className:"search-icon-right input-icon-addon fas fa-times",onClick:this.onCloseHandler})),u.default.createElement("div",{className:"search-result-container"},this.renderSearchResult())))))}}]),t}(s.Component);C.propTypes=S,t.default=C},1177:function(e,t,n){n(12),e.exports=n(1178)},1178:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(8),d=a(c),f=n(60),p=n(2),h=n(4),m=n(1179),g=a(m),y=n(1181),b=a(y),v=n(1185),w=a(v),S=n(1186),C=a(S),E=n(1187),_=a(E),D=n(1190),P=a(D),L=n(1194),R=a(L),M=n(1195),T=a(M),k=n(21),N=a(k),Y=n(1196),I=a(Y),O=n(1198),Z=a(O),F=n(1200),x=a(F),X=n(1201),J=a(X),H=n(1202),j=a(H),B=n(1203),Q=a(B),G=n(1212),A=a(G),W=n(1213),U=a(W),q=n(1216),K=a(q),z=n(1225),V=a(z),$=n(1234),ee=a($),te=n(1238),ne=a(te),ae=n(1245),re=a(ae);n(89),n(90),n(122);var oe=(0,re.default)(P.default),ie=(0,re.default)(C.default),le=(0,re.default)(R.default),se=(0,re.default)(T.default),ue=(0,re.default)(j.default),ce=(0,re.default)(I.default),de=(0,re.default)(Z.default),fe=(0,re.default)(x.default),pe=(0,re.default)(J.default),he=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getDrafts=function(){N.default.listDrafts().then(function(e){n.setState({draftCounts:e.data.draft_counts,draftList:e.data.data,isLoadingDraft:!1})})},n.updateDraftsList=function(e){n.setState({draftCounts:n.state.draftCounts-1,draftList:n.state.draftList.filter(function(t){return t.id!=e})})},n.onCloseSidePanel=function(){n.setState({isSidePanelClosed:!n.state.isSidePanelClosed})},n.onShowSidePanel=function(){n.setState({isSidePanelClosed:!n.state.isSidePanelClosed})},n.onSearchedClick=function(e){if(!0===e.is_dir){n.setState({currentTab:"",pathPrefix:[]});var t=p.siteRoot+"library/"+e.repo_id+"/"+e.repo_name+e.path;(0,f.navigate)(t,{repalce:!0})}else{var a=p.siteRoot+"lib/"+e.repo_id+"/file"+h.Utils.encodePath(e.path);window.open("about:blank").location.href=a}},n.onGroupChanged=function(e){setTimeout(function(){var t=void 0;t=e?p.siteRoot+"group/"+e+"/":p.siteRoot+"groups/",window.location=t.toString()},1)},n.tabItemClick=function(e,t){var a=[];(t||n.dirViewPanels.indexOf(e)>-1)&&(a=n.generatorPrefix(e,t)),n.setState({currentTab:e,pathPrefix:a})},n.generatorPrefix=function(e,t){var a=[];if(t){var r={url:p.siteRoot+"groups/",showName:"Groups",name:"groups",id:null},o={url:p.siteRoot+"group/"+t+"/",showName:e,name:e,id:t};a.push(r),a.push(o)}else{var i={url:p.siteRoot+e+"/",showName:n.getTabShowName(e),name:e,id:null};a.push(i)}return a},n.getTabShowName=function(e){return"my-libs"===e?"Libraries":"shared-libs"===e?"Shared with me":"org"===e?"Shared with all":void 0},n.state={isOpen:!1,isSidePanelClosed:!1,draftCounts:0,draftList:[],isLoadingDraft:!0,currentTab:"/",pathPrefix:[]},n.dirViewPanels=["my-libs","shared-libs","org"],n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=window.location.href.split("/");this.getDrafts(),this.setState({currentTab:e[e.length-2]})}},{key:"render",value:function(){var e=this.state.currentTab,t=p.canAddRepo?u.default.createElement(Q.default,{path:p.siteRoot,onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick}):u.default.createElement(ue,{path:p.siteRoot,onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick});return u.default.createElement(u.default.Fragment,null,u.default.createElement(g.default,null),u.default.createElement("div",{id:"main"},u.default.createElement(b.default,{isSidePanelClosed:this.state.isSidePanelClosed,onCloseSidePanel:this.onCloseSidePanel,currentTab:e,tabItemClick:this.tabItemClick,draftCounts:this.state.draftCounts}),u.default.createElement(w.default,null,u.default.createElement(f.Router,{className:"reach-router"},t,u.default.createElement(oe,{path:p.siteRoot+"dashboard",onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick}),u.default.createElement(ie,{path:p.siteRoot+"drafts",onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick},u.default.createElement(_.default,{path:"/",getDrafts:this.getDrafts,isLoadingDraft:this.state.isLoadingDraft,draftList:this.state.draftList,updateDraftsList:this.updateDraftsList})),u.default.createElement(le,{path:p.siteRoot+"starred",onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick}),u.default.createElement(se,{path:p.siteRoot+"linked-devices",onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick}),u.default.createElement(ce,{path:p.siteRoot+"share-admin-libs",onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick}),u.default.createElement(de,{path:p.siteRoot+"share-admin-folders",onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick}),u.default.createElement(fe,{path:p.siteRoot+"share-admin-share-links",onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick}),u.default.createElement(pe,{path:p.siteRoot+"share-admin-upload-links",onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick}),u.default.createElement(ue,{path:p.siteRoot+"shared-libs",onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick}),u.default.createElement(Q.default,{path:p.siteRoot+"my-libs",onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick}),u.default.createElement(A.default,{path:p.siteRoot+"my-libs/deleted/",onSearchedClick:this.onSearchedClick}),u.default.createElement(K.default,{path:p.siteRoot+"library/:repoID/*",pathPrefix:this.state.pathPrefix,onMenuClick:this.onShowSidePanel,onTabNavClick:this.tabItemClick}),u.default.createElement(ee.default,{path:p.siteRoot+"groups",onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick}),u.default.createElement(V.default,{path:p.siteRoot+"group/:groupID",onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick,onTabNavClick:this.tabItemClick,onGroupChanged:this.onGroupChanged}),u.default.createElement(ne.default,{path:p.siteRoot+"wikis",onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick}),u.default.createElement(U.default,{path:p.siteRoot+"org/",onShowSidePanel:this.onShowSidePanel,onSearchedClick:this.onSearchedClick,onTabNavClick:this.tabItemClick})))))}}]),t}(s.Component);d.default.render(u.default.createElement(he,null),document.getElementById("wrapper"))},1179:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(l),u=n(2);n(1180);var c=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.close=function(){if(n.setState({isClosed:!0}),navigator.cookieEnabled){var e=new Date,t=document.cookie.split("; "),a=!1,r=u.curNoteID+"_";e.setTime(e.getTime()+12096e5),r+="; expires="+e.toGMTString()+"; path="+u.siteRoot;for(var o=0,i=t.length;o<i;o++)if("info_id"==t[o].split("=")[0]){a=!0,document.cookie="info_id="+t[o].split("=")[1]+r;break}a||(document.cookie="info_id="+r)}},n.state={isClosed:!1},n}return o(t,e),i(t,[{key:"render",value:function(){return!u.curNoteMsg||this.state.isClosed?null:s.default.createElement("div",{id:"info-bar"},s.default.createElement("p",{id:"info-bar-info"},u.curNoteMsg),s.default.createElement("span",{className:"close sf2-icon-x1",title:(0,u.gettext)("Close"),onClick:this.close}))}}]),t}(s.default.Component);t.default=c},118:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(4),p={item:d.default.object.isRequired,onItemClickHandler:d.default.func.isRequired},h=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.onClickHandler=function(){var e=a.props.item;a.props.onItemClickHandler(e)},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=e.is_dir?f.Utils.getFolderIconUrl(!1,192):f.Utils.getFileIconUrl(e.name,192);return u.default.createElement("li",{className:"search-result-item",onClick:this.onClickHandler},u.default.createElement("img",{className:"item-img",src:t,alt:""}),u.default.createElement("div",{className:"item-content"},u.default.createElement("div",{className:"item-name ellipsis"},e.name),u.default.createElement("div",{className:"item-link ellipsis"},e.repo_name,"/",e.link_content),u.default.createElement("div",{className:"item-text ellipsis",dangerouslySetInnerHTML:{__html:e.content}})))}}]),t}(u.default.Component);h.propTypes=p,t.default=h},1180:function(e,t){},1181:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(104),p=a(f),h=n(1182),m=a(h),g=n(1183),y=a(g),b={isSidePanelClosed:d.default.bool.isRequired,currentTab:d.default.oneOfType([d.default.string,d.default.number]).isRequired,onCloseSidePanel:d.default.func.isRequired,tabItemClick:d.default.func.isRequired,draftCounts:d.default.number},v=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"side-panel "+(this.props.isSidePanelClosed?"":"left-zero")},u.default.createElement("div",{className:"side-panel-north"},u.default.createElement(p.default,{onCloseSidePanel:this.props.onCloseSidePanel})),u.default.createElement("div",{className:"side-panel-center"},u.default.createElement(m.default,{tabItemClick:this.props.tabItemClick,currentTab:this.props.currentTab,draftCounts:this.props.draftCounts})),u.default.createElement("div",{className:"side-panel-footer"},u.default.createElement(y.default,null)))}}]),t}(u.default.Component);v.propTypes=b,t.default=v},1182:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(60),p=n(312),h=a(p),m=n(2),g=n(3),y=n(5),b={currentTab:d.default.oneOfType([d.default.string,d.default.number]).isRequired,tabItemClick:d.default.func.isRequired,draftCounts:d.default.number},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.grpsExtend=function(){n.setState({groupsExtended:!n.state.groupsExtended}),n.loadGroups()},n.shExtend=function(){n.setState({sharedExtended:!n.state.sharedExtended})},n.loadGroups=function(){var e=n;g.seafileAPI.listGroups().then(function(t){var a=t.data.map(function(e){return new h.default(e)});n.groupsHeight=(a.length+1)*e.listHeight,e.setState({groupItems:a})})},n.tabItemClick=function(e,t){n.props.tabItemClick(e,t)},n.getActiveClass=function(e){return n.props.currentTab===e?"active":""},n.state={groupsExtended:!1,sharedExtended:!1,closeSideBar:!1,groupItems:[]},n.listHeight=24,n.groupsHeight=0,n.adminHeight=0,n}return i(t,e),l(t,[{key:"renderSharedGroups",value:function(){var e=this,t={height:0};return this.state.groupsExtended&&(t={height:this.groupsHeight}),u.default.createElement("ul",{className:"nav sub-nav nav-pills flex-column grp-list "+(this.state.groupsExtended?"side-panel-slide":"side-panel-slide-up"),style:t},u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{to:m.siteRoot+"groups/",className:"nav-link ellipsis "+this.getActiveClass("groups"),onClick:function(){return e.tabItemClick("groups")}},u.default.createElement("span",{className:"sharp","aria-hidden":"true"},"#"),u.default.createElement("span",{className:"nav-text"},(0,m.gettext)("All Groups")))),this.state.groupItems.map(function(t){return u.default.createElement("li",{key:t.id,className:"nav-item"},u.default.createElement(f.Link,{to:m.siteRoot+"group/"+t.id+"/",className:"nav-link ellipsis "+e.getActiveClass(t.name),onClick:function(){return e.tabItemClick(t.name,t.id)}},u.default.createElement("span",{className:"sharp","aria-hidden":"true"},"#"),u.default.createElement("span",{className:"nav-text"},t.name)))}))}},{key:"renderSharedAdmin",value:function(){var e=this,t=0;this.state.sharedExtended&&(this.adminHeight||(this.adminHeight=3*this.listHeight),t=this.adminHeight);var n={height:t},a=null;return m.canGenerateShareLink?a=u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{to:m.siteRoot+"share-admin-share-links/",className:"nav-link ellipsis "+this.getActiveClass("share-admin-share-links"),title:(0,m.gettext)("Links"),onClick:function(){return e.tabItemClick("share-admin-share-links")}},u.default.createElement("span",{"aria-hidden":"true",className:"sharp"},"#"),u.default.createElement("span",{className:"nav-text"},(0,m.gettext)("Links")))):m.canGenerateUploadLink&&(a=u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{to:m.siteRoot+"share-admin-upload-links/",className:"nav-link ellipsis "+this.getActiveClass("share-admin-upload-links"),title:(0,m.gettext)("Links"),onClick:function(){return e.tabItemClick("share-admin-upload-links")}},u.default.createElement("span",{"aria-hidden":"true",className:"sharp"},"#"),u.default.createElement("span",{className:"nav-text"},(0,m.gettext)("Links"))))),u.default.createElement("ul",{className:"nav sub-nav nav-pills flex-column "+(this.state.sharedExtended?"side-panel-slide":"side-panel-slide-up"),style:n},m.canAddRepo&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{to:m.siteRoot+"share-admin-libs/",className:"nav-link ellipsis "+this.getActiveClass("share-admin-libs"),title:(0,m.gettext)("Libraries"),onClick:function(){return e.tabItemClick("share-admin-libs")}},u.default.createElement("span",{"aria-hidden":"true",className:"sharp"},"#"),u.default.createElement("span",{className:"nav-text"},(0,m.gettext)("Libraries")))),u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{to:m.siteRoot+"share-admin-folders/",className:"nav-link ellipsis "+this.getActiveClass("share-admin-folders"),title:(0,m.gettext)("Folders"),onClick:function(){return e.tabItemClick("share-admin-folders")}},u.default.createElement("span",{"aria-hidden":"true",className:"sharp"},"#"),u.default.createElement("span",{className:"nav-text"},(0,m.gettext)("Folders")))),a)}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{className:"side-nav"},u.default.createElement("div",{className:"side-nav-con"},u.default.createElement("h3",{className:"sf-heading"},(0,m.gettext)("Files")),u.default.createElement("ul",{className:"nav nav-pills flex-column nav-container"},m.canAddRepo&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{to:m.siteRoot+"my-libs/",className:"nav-link ellipsis "+(this.getActiveClass("my-libs")||this.getActiveClass("deleted")),title:(0,m.gettext)("My Libraries"),onClick:function(){return e.tabItemClick("my-libs")}},u.default.createElement("span",{className:"sf2-icon-user","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,m.gettext)("My Libraries")))),u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{to:m.siteRoot+"shared-libs/",className:"nav-link ellipsis "+this.getActiveClass("shared-libs"),title:(0,m.gettext)("Shared with me"),onClick:function(){return e.tabItemClick("shared-libs")}},u.default.createElement("span",{className:"sf2-icon-share","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,m.gettext)("Shared with me")))),m.canViewOrg&&u.default.createElement("li",{className:"nav-item",onClick:function(){return e.tabItemClick("org")}},u.default.createElement(f.Link,{to:m.siteRoot+"org/",className:"nav-link ellipsis "+this.getActiveClass("org"),title:(0,m.gettext)("Shared with all")},u.default.createElement("span",{className:"sf2-icon-organization","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,m.gettext)("Shared with all")))),u.default.createElement("li",{className:"nav-item flex-column",id:"group-nav"},u.default.createElement("a",{className:"nav-link ellipsis",title:(0,m.gettext)("Shared with groups"),onClick:this.grpsExtend},u.default.createElement("span",{className:"toggle-icon float-right fas "+(this.state.groupsExtended?"fa-caret-down":"fa-caret-left"),"aria-hidden":"true"}),u.default.createElement("span",{className:"sf2-icon-group","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,m.gettext)("Shared with groups"))),this.renderSharedGroups())),u.default.createElement("h3",{className:"sf-heading"},(0,m.gettext)("Tools")),u.default.createElement("ul",{className:"nav nav-pills flex-column nav-container"},u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("starred"),to:m.siteRoot+"starred/",title:(0,m.gettext)("Favorites"),onClick:function(){return e.tabItemClick("starred")}},u.default.createElement("span",{className:"sf2-icon-star","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,m.gettext)("Favorites")))),m.isDocs&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("dashboard"),to:m.siteRoot+"dashboard/",title:(0,m.gettext)("Activities"),onClick:function(){return e.tabItemClick("dashboard")}},u.default.createElement("span",{className:"sf2-icon-clock","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,m.gettext)("Activities")))),m.enableWiki&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("wikis"),to:m.siteRoot+"wikis/",title:(0,m.gettext)("Wikis"),onClick:function(){return e.tabItemClick("wikis")}},u.default.createElement("span",{className:"sf2-icon-wiki-view","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,m.gettext)("Wikis")))),m.isDocs&&u.default.createElement("li",{className:"nav-item",onClick:function(){return e.tabItemClick("drafts")}},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("drafts"),to:m.siteRoot+"drafts/",title:(0,m.gettext)("Drafts")},u.default.createElement("span",{className:"sf2-icon-edit","aria-hidden":"true"}),u.default.createElement("span",{className:"draft-info nav-text"},(0,m.gettext)("Drafts"),0===this.props.draftCounts?"":u.default.createElement(y.Badge,{color:"info",pill:!0},this.props.draftCounts)))),u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("linked-devices"),to:m.siteRoot+"linked-devices/",title:(0,m.gettext)("Linked Devices"),onClick:function(){return e.tabItemClick("linked-devices")}},u.default.createElement("span",{className:"sf2-icon-monitor","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,m.gettext)("Linked Devices")))),u.default.createElement("li",{className:"nav-item flex-column",id:"share-admin-nav"},u.default.createElement("a",{className:"nav-link ellipsis",title:(0,m.gettext)("Share Admin"),onClick:this.shExtend},u.default.createElement("span",{className:"toggle-icon float-right fas "+(this.state.sharedExtended?"fa-caret-down":"fa-caret-left"),"aria-hidden":"true"}),u.default.createElement("span",{className:"sf2-icon-wrench","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,m.gettext)("Share Admin"))),this.renderSharedAdmin()))))}}]),t}(u.default.Component);v.propTypes=b,t.default=v},1183:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=n(10),f=a(d),p=n(1184),h=a(p),m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onAboutDialogToggle=function(){n.setState({isAboutDialogShow:!n.state.isAboutDialogShow})},n.state={isAboutDialogShow:!1},n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"side-nav-footer"},u.default.createElement("a",{href:c.siteRoot+"help/",target:"_blank",rel:"noopener noreferrer",className:"item"},(0,c.gettext)("Help")),u.default.createElement("a",{className:"item",onClick:this.onAboutDialogToggle},(0,c.gettext)("About")),u.default.createElement("a",{href:c.siteRoot+"download_client_program/",className:"item last-item"},u.default.createElement("span",{"aria-hidden":"true",className:"sf2-icon-monitor vam"})," ",u.default.createElement("span",{className:"vam"},(0,c.gettext)("Clients"))),this.state.isAboutDialogShow&&u.default.createElement(f.default,null,u.default.createElement(h.default,{onCloseAboutDialog:this.onAboutDialogToggle})))}}]),t}(u.default.Component);t.default=m},1184:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h={onCloseAboutDialog:d.default.func.isRequired},m=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.toggle=function(){a.props.onCloseAboutDialog()},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=p.lang===p.lang=="zh-cn"?"http://seafile.com/about/":"http://seafile.com/en/about/";return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalBody,null,u.default.createElement("button",{type:"button",className:"close",onClick:this.toggle},u.default.createElement("span",{"aria-hidden":"true"},"\xd7")),u.default.createElement("div",{className:"about-content"},u.default.createElement("p",null,u.default.createElement("img",{src:p.mediaUrl+p.logoPath,height:p.logoHeight,width:p.logoWidth,title:p.siteTitle,alt:"logo"})),u.default.createElement("p",null,(0,p.gettext)("Server Version: "),p.seafileVersion,u.default.createElement("br",null),"\xa9 2019 ",(0,p.gettext)("Seafile")),u.default.createElement("p",null,u.default.createElement("a",{href:e,target:"_blank"},(0,p.gettext)("About Us"))))))}}]),t}(u.default.Component);m.propTypes=h,t.default=m},1185:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f={children:d.default.object.isRequired},p=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"main-panel o-hidden"},this.props.children)}}]),t}(s.Component);p.propTypes=f,t.default=p},1186:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p={children:d.default.oneOfType([d.default.array,d.default.object]).isRequired},h=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("div",{className:"path-container"},u.default.createElement("h3",{className:"sf-heading"},(0,f.gettext)("Drafts")))),this.props.children))}}]),t}(u.default.Component);h.propTypes=p,t.default=h},1187:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=n(21),f=a(d),p=n(4),h=n(1),m=a(h),g=n(7),y=a(g),b=n(11),v=a(b),w=n(1188),S=a(w),C={isLoadingDraft:m.default.bool.isRequired,updateDraftsList:m.default.func.isRequired,draftList:m.default.array.isRequired,getDrafts:m.default.func.isRequired},E=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.onDeleteHandler=function(e){var t=p.Utils.getFileName(e.draft_file_path);f.default.deleteDraft(e.id).then(function(n){a.props.updateDraftsList(e.id);var r=(0,c.gettext)("Successfully deleted draft %(draft)s.");r=r.replace("%(draft)s",t),y.default.success(r)}).catch(function(){var e=(0,c.gettext)("Failed to delete draft %(draft)s.");e=e.replace("%(draft)s",t),y.default.danger(e)})},a.onPublishHandler=function(e){var t=p.Utils.getFileName(e.draft_file_path);f.default.publishDraft(e.id).then(function(n){a.props.updateDraftsList(e.id);var r=(0,c.gettext)("Successfully published draft %(draft)s.");r=r.replace("%(draft)s",t),y.default.success(r)}).catch(function(){var e=(0,c.gettext)("Failed to publish draft %(draft)s.");e=e.replace("%(draft)s",t),y.default.danger(e)})},i=n,o(a,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.getDrafts()}},{key:"render",value:function(){return u.default.createElement("div",{className:"cur-view-content"},this.props.isLoadingDraft&&u.default.createElement(v.default,null),!this.props.isLoadingDraft&&u.default.createElement(s.Fragment,null,0===this.props.draftList.length&&u.default.createElement("div",{className:"message empty-tip"},u.default.createElement("h2",null,(0,c.gettext)("No draft yet")),u.default.createElement("p",null,(0,c.gettext)("Draft is a way to let you collaborate with others on files. You can create a draft from a file, edit the draft and then ask for a review. The original file will be updated only after the draft be reviewed."))),0!==this.props.draftList.length&&u.default.createElement(S.default,{draftList:this.props.draftList,onDeleteHandler:this.onDeleteHandler,onPublishHandler:this.onPublishHandler})))}}]),t}(u.default.Component);E.propTypes=C,t.default=E},1188:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(1189),h=a(p),m={draftList:d.default.array.isRequired,onDeleteHandler:d.default.func.isRequired,onPublishHandler:d.default.func.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props.draftList;return u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{style:{width:"4%"}}),u.default.createElement("th",{style:{width:"46%"}},(0,f.gettext)("Name")),u.default.createElement("th",{style:{width:"30%"}},(0,f.gettext)("Library")),u.default.createElement("th",{style:{width:"10%"}},(0,f.gettext)("Last Update")),u.default.createElement("th",{style:{width:"10%"}}))),u.default.createElement("tbody",null,t&&t.map(function(t){return u.default.createElement(h.default,{key:t.id,draft:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDeleteHandler:e.props.onDeleteHandler,onPublishHandler:e.props.onPublishHandler})})))}}]),t}(u.default.Component);g.propTypes=m,t.default=g},1189:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=a(c),f=n(1),p=a(f),h=n(5),m=n(2),g=n(4);d.default.locale(m.lang);var y={draft:p.default.object.isRequired,isItemFreezed:p.default.bool.isRequired,onFreezedItem:p.default.func.isRequired,onUnfreezedItem:p.default.func.isRequired,onDeleteHandler:p.default.func.isRequired,onPublishHandler:p.default.func.isRequired},b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.props.isItemFreezed||n.setState({isMenuIconShow:!0,highlight:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({isMenuIconShow:!1,highlight:!1})},n.onDropdownToggleClick=function(e){e.preventDefault(),n.toggleOperationMenu(e)},n.toggleOperationMenu=function(e){e.stopPropagation(),n.setState({isItemMenuShow:!n.state.isItemMenuShow},function(){n.state.isItemMenuShow?n.props.onFreezedItem():(n.setState({highlight:!1,isMenuIconShow:!1}),n.props.onUnfreezedItem())})},n.onDeleteHandler=function(){n.props.onDeleteHandler(n.props.draft)},n.onPublishHandler=function(){n.props.onPublishHandler(n.props.draft)},n.state={isMenuIconShow:!1,isItemMenuShow:!1,highlight:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.draft,t=e.origin_repo_id,n=e.draft_file_path,a=g.Utils.getFileName(n),r=m.siteRoot+"drafts/"+e.id+"/",o=m.siteRoot+"library/"+t+"/"+encodeURIComponent(e.repo_name)+"/",i=d.default.utc(e.updated_at).toDate();i=(0,d.default)(i).fromNow();var l=g.Utils.getFileIconUrl(a);return u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("td",{className:"text-center"},u.default.createElement("img",{src:l,width:"24",alt:""})),u.default.createElement("td",{className:"name"},u.default.createElement("a",{href:r,target:"_blank"},a)),u.default.createElement("td",{className:"library"},u.default.createElement("a",{href:o,target:"_blank"},e.repo_name)),u.default.createElement("td",{className:"update"},i),u.default.createElement("td",{className:"text-center"},this.state.isMenuIconShow&&u.default.createElement(h.Dropdown,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu},u.default.createElement(h.DropdownToggle,{tag:"i",className:"fas fa-ellipsis-v attr-action-icon",title:(0,m.gettext)("More Operations"),onClick:this.onDropdownToggleClick,"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow}),u.default.createElement(h.DropdownMenu,null,u.default.createElement(h.DropdownItem,{onClick:this.onDeleteHandler},(0,m.gettext)("Delete")),"open"==e.status&&u.default.createElement(h.DropdownItem,{onClick:this.onPublishHandler},(0,m.gettext)("Publish"))))))}}]),t}(u.default.Component);b.propTypes=y,t.default=b},119:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p={onShowMore:d.default.func.isRequired},h=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("li",{className:"list-show-more",onClick:this.props.onShowMore},u.default.createElement("span",{className:"more-message"},(0,f.gettext)("show more")))}}]),t}(u.default.Component);h.propTypes=p,t.default=h},1190:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),d=n(1),f=a(d),p=n(6),h=a(p),m=n(3),g=n(2),y=n(4),b=n(11),v=a(b),w=n(1191),S=a(w),C=n(1192),E=a(C),_=n(10),D=a(_);n(1193),h.default.locale(window.app.config.lang);var P={isLoadingMore:f.default.bool.isRequired,items:f.default.array.isRequired},L=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.isLoadingMore;return c.default.createElement(u.Fragment,null,c.default.createElement("table",{width:"100%",className:"table table-hover table-vcenter"},c.default.createElement("colgroup",null,c.default.createElement("col",{width:"8%"}),c.default.createElement("col",{width:"15%"}),c.default.createElement("col",{width:"20%"}),c.default.createElement("col",{width:"37%"}),c.default.createElement("col",{width:"20%"})),c.default.createElement("tbody",null,t.map(function(e,n){return c.default.createElement(M,{key:n,item:e,index:n,items:t})}))),n?c.default.createElement("span",{className:"loading-icon loading-tip"}):"")}}]),t}(u.Component);L.propTypes=P;var R={item:f.default.object.isRequired,index:f.default.number.isRequired,items:f.default.array.isRequired},M=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.setState({active:!0})},n.onMouseLeave=function(){n.setState({active:!1})},n.onListCreatedFilesToggle=function(){n.setState({isListCreatedFiles:!n.state.isListCreatedFiles})},n.state={isListCreatedFiles:!1,active:!1},n}return l(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.index,a=e.items,r=void 0,o=void 0,i=g.siteRoot+"profile/"+encodeURIComponent(t.author_email)+"/",l=g.siteRoot+"library/"+t.repo_id+"/"+encodeURIComponent(t.repo_name)+"/",s=c.default.createElement("a",{href:l},t.repo_name),d=c.default.createElement("a",{className:"small text-secondary",href:l},t.repo_name);if("repo"==t.obj_type)switch(t.op_type){case"create":r=(0,g.gettext)("Created library"),o=c.default.createElement("td",null,s);break;case"rename":r=(0,g.gettext)("Renamed library"),o=c.default.createElement("td",null,t.old_repo_name," => ",s);break;case"delete":r=(0,g.gettext)("Deleted library"),o=c.default.createElement("td",null,t.repo_name);break;case"recover":r=(0,g.gettext)("Restored library"),o=c.default.createElement("td",null,s);break;case"clean-up-trash":r=0==t.days?(0,g.gettext)("Removed all items from trash."):(0,g.gettext)("Removed items older than {n} days from trash.").replace("{n}",t.days),o=c.default.createElement("td",null,s)}else if("draft"==t.obj_type){var f=g.siteRoot+"lib/"+t.repo_id+"/file"+y.Utils.encodePath(t.path),p=c.default.createElement("a",{href:f,target:"_blank"},t.name);r=(0,g.gettext)("Publish draft"),o=c.default.createElement("td",null,p,c.default.createElement("br",null),d)}else if("files"==t.obj_type){var m=g.siteRoot+"lib/"+t.repo_id+"/file"+y.Utils.encodePath(t.path);t.name.endsWith("(draft).md")&&(m=g.serviceURL+"/drafts/"+t.draft_id+"/");var b="<a href="+m+' target="_blank">'+t.name+"</a>";t.name.endsWith("(draft).md")&&!t.draft_id&&(b=t.name);var v=t.createdFilesCount-1,w=(0,g.gettext)("{file} and {n} other files");w=w.replace("{file}",b),w=w.replace("{n}",v),r=(0,g.gettext)("Created {n} files").replace("{n}",t.createdFilesCount),o=c.default.createElement("td",null,c.default.createElement("div",{className:"activity-detail",dangerouslySetInnerHTML:{__html:w}})," ",this.state.active&&c.default.createElement("i",{className:"attr-action-icon fas fa-eye",onClick:this.onListCreatedFilesToggle}),c.default.createElement("br",null),d)}else if("file"==t.obj_type){var S=g.siteRoot+"lib/"+t.repo_id+"/file"+y.Utils.encodePath(t.path);t.name.endsWith("(draft).md")&&(S=g.serviceURL+"/drafts/"+t.draft_id+"/");var C=c.default.createElement("a",{href:S,target:"_blank"},t.name);switch(t.name.endsWith("(draft).md")&&!t.draft_id&&(C=t.name),t.op_type){case"create":if(t.name.endsWith("(draft).md")){r=(0,g.gettext)("Created draft"),o=c.default.createElement("td",null,C,c.default.createElement("br",null),d);break}r=(0,g.gettext)("Created file"),o=c.default.createElement("td",null,C,c.default.createElement("br",null),d);break;case"delete":if(t.name.endsWith("(draft).md")){r=(0,g.gettext)("Deleted draft"),o=c.default.createElement("td",null,t.name,c.default.createElement("br",null),d);break}r=(0,g.gettext)("Deleted file"),o=c.default.createElement("td",null,t.name,c.default.createElement("br",null),d);break;case"recover":r=(0,g.gettext)("Restored file"),o=c.default.createElement("td",null,C,c.default.createElement("br",null),d);break;case"rename":r=(0,g.gettext)("Renamed file"),o=c.default.createElement("td",null,t.old_name," => ",C,c.default.createElement("br",null),d);break;case"move":var _=c.default.createElement("a",{href:S},t.path);r=(0,g.gettext)("Moved file"),o=c.default.createElement("td",null,t.old_path," => ",_,c.default.createElement("br",null),d);break;case"edit":if(t.name.endsWith("(draft).md")){r=(0,g.gettext)("Updated draft"),o=c.default.createElement("td",null,C,c.default.createElement("br",null),d);break}r=(0,g.gettext)("Updated file"),o=c.default.createElement("td",null,C,c.default.createElement("br",null),d)}}else{var P=g.siteRoot+"library/"+t.repo_id+"/"+encodeURIComponent(t.repo_name)+y.Utils.encodePath(t.path),L=c.default.createElement("a",{href:P,target:"_blank"},t.name);switch(t.op_type){case"create":r=(0,g.gettext)("Created folder"),o=c.default.createElement("td",null,L,c.default.createElement("br",null),d);break;case"delete":r=(0,g.gettext)("Deleted folder"),o=c.default.createElement("td",null,t.name,c.default.createElement("br",null),d);break;case"recover":r=(0,g.gettext)("Restored folder"),o=c.default.createElement("td",null,L,c.default.createElement("br",null),d);break;case"rename":r=(0,g.gettext)("Renamed folder"),o=c.default.createElement("td",null,t.old_name," => ",L,c.default.createElement("br",null),d);break;case"move":var R=c.default.createElement("a",{href:P},t.path);r=(0,g.gettext)("Moved folder"),o=c.default.createElement("td",null,t.old_path," => ",R,c.default.createElement("br",null),d)}}var M=!0;if(n>0){var T=a[n-1].time;M=!(0,h.default)(t.time).isSame(T,"day")}return c.default.createElement(u.Fragment,null,M&&c.default.createElement("tr",null,c.default.createElement("td",{colSpan:"5",className:"activity-date"},(0,h.default)(t.time).format("YYYY-MM-DD"))),c.default.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},c.default.createElement("td",{className:"text-center"},c.default.createElement("img",{src:t.avatar_url,alt:"",width:"36px",height:"36px",className:"avatar"})),c.default.createElement("td",null,c.default.createElement("a",{href:i},t.author_name)),c.default.createElement("td",null,c.default.createElement("span",{className:"activity-op"},r)),o,c.default.createElement("td",{className:"text-secondary"},c.default.createElement("time",{datetime:t.time,is:"relative-time",title:(0,h.default)(t.time).format("llll")},(0,h.default)(t.time).fromNow()))),this.state.isListCreatedFiles&&c.default.createElement(D.default,null,c.default.createElement(E.default,{activity:t,toggleCancel:this.onListCreatedFilesToggle})))}}]),t}(u.Component);M.propTypes=R;var T=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mergePublishEvents=function(e){e.map(function(e){"publish"===e.op_type&&(n.curPathList.push(e.path),n.oldPathList.push(e.old_path))});for(var t=[],a=0;a<e.length;a++)"file"===e[a].obj_type?"delete"===e[a].op_type&&n.oldPathList.includes(e[a].path)?n.oldPathList.splice(n.oldPathList.indexOf(e[a].path),1):"edit"===e[a].op_type&&n.curPathList.includes(e[a].path)?n.curPathList.splice(n.curPathList.indexOf(e[a].path),1):"rename"===e[a].op_type&&n.oldPathList.includes(e[a].old_path)?n.oldPathList.splice(n.oldPathList.indexOf(e[a].old_path),1):t.push(e[a]):t.push(e[a]);return t},n.mergeFileCreateEvents=function(e){for(var t=[],n=null,a=0;a<e.length;a++){var r="file"===e[a].obj_type&&"create"===e[a].op_type&&e[a+1]&&"file"===e[a+1].obj_type&&"create"===e[a+1].op_type&&e[a+1].repo_name===e[a].repo_name&&e[a+1].author_email===e[a].author_email;if(null!=n){if(n.createdFilesCount++,n.createdFilesList.push(e[a]),r)continue;t.push(n),n=null}else r?(n=new S.default(e[a]),n.obj_type="files",n.createdFilesCount++,n.createdFilesList.push(e[a])):t.push(e[a])}return t},n.handleScroll=function(e){if(!n.state.isLoadingMore&&n.state.hasMore){var t=e.target.clientHeight,a=e.target.scrollHeight;t+e.target.scrollTop+1>=a&&n.setState({isLoadingMore:!0},function(){n.getMore()})}},n.state={errorMsg:"",isFirstLoading:!0,isLoadingMore:!1,currentPage:1,hasMore:!0,items:[]},n.avatarSize=72,n.curPathList=[],n.oldPathList=[],n}return l(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.currentPage;m.seafileAPI.listActivities(t,this.avatarSize).then(function(n){var a=e.mergePublishEvents(n.data.events);a=e.mergeFileCreateEvents(a),e.setState({items:a,currentPage:t+1,isFirstLoading:!1,hasMore:!0}),e.state.items.length<25&&e.getMore()}).catch(function(t){403==t.response.status&&e.setState({isFirstLoading:!1,errorMsg:(0,g.gettext)("Permission denied")})})}},{key:"getMore",value:function(){var e=this,t=this.state.currentPage;m.seafileAPI.listActivities(t,this.avatarSize).then(function(n){var a=e.mergePublishEvents(n.data.events);a=e.mergeFileCreateEvents(a),e.setState({isLoadingMore:!1,items:[].concat(r(e.state.items),r(a)),currentPage:t+1,hasMore:0!==n.data.events.length}),e.state.items.length<25&&e.state.hasMore&&e.getMore()}).catch(function(t){403==t.response.status&&e.setState({isLoadingMore:!1,errorMsg:(0,g.gettext)("Permission denied")})})}},{key:"render",value:function(){return c.default.createElement("div",{className:"main-panel-center"},c.default.createElement("div",{className:"cur-view-container",id:"activities"},c.default.createElement("div",{className:"cur-view-path"},c.default.createElement("h3",{className:"sf-heading"},(0,g.gettext)("Activities"))),c.default.createElement("div",{className:"cur-view-content",onScroll:this.handleScroll},this.state.isFirstLoading&&c.default.createElement(v.default,null),!this.state.isFirstLoading&&this.state.errorMsg&&c.default.createElement("p",{className:"error text-center"},this.state.errorMsg),!this.state.isFirstLoading&&c.default.createElement(L,{items:this.state.items,isLoadingMore:this.state.isLoadingMore}))))}}]),t}(u.Component);t.default=T},1191:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){a(this,e),this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.obj_type=t.obj_type,this.commit_id=t.commit_id,this.path=t.path,this.name=t.name,this.author_email=t.author_email,this.author_name=t.author_name,this.author_contact_email=t.author_contact_email,this.avatar_url=t.avatar_url,this.time=t.time,this.op_type=t.op_type,this.createdFilesCount=0,this.createdFilesList=[],"clean-up-trash"===t.op_type?this.days=t.days:"rename"===t.op_type&&"repo"===t.obj_type?this.old_repo_name=t.old_repo_name:"move"===t.op_type&&["dir","file"].includes(t.obj_type)?this.old_path=t.old_path:"rename"===t.op_type&&["dir","file"].includes(t.obj_type)?(this.old_path=t.old_path,this.old_name=t.old_name):"publish"===t.op_type?this.old_path=t.old_path:t.name.endsWith("(draft).md")&&(this.draft_id=t.draft_id)};t.default=r},1192:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(6),p=a(f),h=n(5),m=n(2),g=n(4),y={activity:d.default.object.isRequired,toggleCancel:d.default.func.isRequired},b=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.toggle=function(e){a.props.toggleCancel(e)},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.activity;return u.default.createElement(h.Modal,{isOpen:!0},u.default.createElement(h.ModalHeader,{toggle:this.toggle},(0,m.gettext)("Created Files")),u.default.createElement(h.ModalBody,null,u.default.createElement(h.Table,null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"75%"},(0,m.gettext)("Name")),u.default.createElement("th",{width:"25%"},(0,m.gettext)("Time")))),u.default.createElement("tbody",null,e.createdFilesList.map(function(e,t){var n=m.siteRoot+"lib/"+e.repo_id+"/file"+g.Utils.encodePath(e.path);e.name.endsWith("(draft).md")&&(n=m.serviceURL+"/drafts/"+e.draft_id+"/");var a=u.default.createElement("a",{href:n,target:"_blank"},e.name);return e.name.endsWith("(draft).md")&&!e.draft_id&&(a=e.name),u.default.createElement("tr",{key:t},u.default.createElement("td",null,a),u.default.createElement("td",null,(0,p.default)(e.time).fromNow()))})))),u.default.createElement(h.ModalFooter,null,u.default.createElement(h.Button,{color:"secondary",onClick:this.toggle.bind(this,e)},(0,m.gettext)("Close"))))}}]),t}(u.default.Component);b.propTypes=y,t.default=b},1193:function(e,t){},1194:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(60),d=n(6),f=a(d),p=n(3),h=n(4),m=n(2),g=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.data,t=e.loading,n=e.errorMsg,a=e.items;if(t)return u.default.createElement("span",{className:"loading-icon loading-tip"});if(n)return u.default.createElement("p",{className:"error text-center"},n);var r=u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"4%"}),u.default.createElement("th",{width:"40%"},(0,m.gettext)("File Name")),u.default.createElement("th",{width:"32%"},(0,m.gettext)("Library")),u.default.createElement("th",{width:"18%"},(0,m.gettext)("Last Update")),u.default.createElement("th",{width:"6%"}))),o=u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"4%"}),u.default.createElement("th",{width:"90%"},(0,m.gettext)("File Name")),u.default.createElement("th",{width:"6%"})));return u.default.createElement("table",{className:"table-hover"},window.innerWidth>=768?r:o,u.default.createElement(y,{items:a}))}}]),t}(s.Component),y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={items:n.props.items},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.getThumbnails()}},{key:"getThumbnails",value:function(){var e=this.state.items.filter(function(e){return h.Utils.imageCheck(e.obj_name)&&!e.repo_encrypted});if(0!=e.length){var t=e.length,n=this;!function a(r){var o=e[r];p.seafileAPI.createThumbnail(o.repo_id,o.path,48).then(function(e){o.encoded_thumbnail_src=e.data.encoded_thumbnail_src}).catch(function(e){}).then(function(){r<t-1?a(++r):n.setState({items:n.state.items})})}(0)}}},{key:"render",value:function(){var e=this.state.items.map(function(e,t){return"/"===e.path?e.item_icon_url=h.Utils.getDefaultLibIconUrl(!1):e.item_icon_url=e.is_dir?h.Utils.getFolderIconUrl(!1):h.Utils.getFileIconUrl(e.obj_name),e.encoded_path=h.Utils.encodePath(e.path),e.thumbnail_url=e.encoded_thumbnail_src?""+m.siteRoot+e.encoded_thumbnail_src:"",e.dirent_view_url=e.is_dir?m.siteRoot+"library/"+e.repo_id+"/"+e.repo_name+e.encoded_path:m.siteRoot+"lib/"+e.repo_id+"/file"+e.encoded_path,e.mtime_relative=(0,f.default)(e.mtime).fromNow(),u.default.createElement(b,{key:t,data:e})},this);return u.default.createElement("tbody",null,e)}}]),t}(s.Component),b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseOver=function(){n.setState({showOpIcon:!0})},n.handleMouseOut=function(){n.setState({showOpIcon:!1})},n.handleClick=function(e){e.preventDefault();var t=n.props.data;p.seafileAPI.unstarItem(t.repo_id,t.path).then(function(e){n.setState({unstarred:!0})}).catch(function(e){})},n.state={showOpIcon:!1,unstarred:!1},n}return i(t,e),l(t,[{key:"render",value:function(){if(this.state.unstarred)return null;var e=this.props.data,t="sf2-icon-x3 unstar action-icon";t+=this.state.showOpIcon?"":" invisible";var n=u.default.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},u.default.createElement("td",{className:"alc"},e.thumbnail_url?u.default.createElement("img",{className:"thumbnail",src:e.thumbnail_url,alt:""}):u.default.createElement("img",{src:e.item_icon_url,alt:(0,m.gettext)("icon"),width:"24"})),u.default.createElement("td",null,e.is_dir?u.default.createElement(c.Link,{to:e.dirent_view_url},e.obj_name):u.default.createElement("a",{className:"normal",href:e.dirent_view_url,target:"_blank"},e.obj_name)),u.default.createElement("td",null,e.repo_name),u.default.createElement("td",{dangerouslySetInnerHTML:{__html:e.mtime_relative}}),u.default.createElement("td",null,u.default.createElement("a",{href:"#",className:t,title:(0,m.gettext)("Unstar"),"aria-label":(0,m.gettext)("Unstar"),onClick:this.handleClick}))),a=u.default.createElement("tr",null,u.default.createElement("td",{className:"alc"},e.thumbnail_url?u.default.createElement("img",{className:"thumbnail",src:e.thumbnail_url,alt:""}):u.default.createElement("img",{src:e.item_icon_url,alt:(0,m.gettext)("icon"),width:"24"})),u.default.createElement("td",null,e.is_dir?u.default.createElement(c.Link,{to:e.dirent_view_url},e.obj_name):u.default.createElement("a",{className:"normal",href:e.dirent_view_url,target:"_blank"},e.obj_name),u.default.createElement("br",null),u.default.createElement("span",{className:"dirent-meta-info"},e.repo_name),u.default.createElement("span",{className:"dirent-meta-info",dangerouslySetInnerHTML:{__html:e.mtime_relative}})),u.default.createElement("td",null,u.default.createElement("a",{href:"#",className:"sf2-icon-delete unstar action-icon",title:(0,m.gettext)("Unstar"),"aria-label":(0,m.gettext)("Unstar"),onClick:this.handleClick})));return window.innerWidth>=768?n:a}}]),t}(s.Component),v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!0,errorMsg:"",items:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;p.seafileAPI.listStarredItems().then(function(t){e.setState({loading:!1,items:t.data.starred_item_list})}).catch(function(t){t.response?403==t.response.status?(e.setState({loading:!1,errorMsg:(0,m.gettext)("Permission denied")}),location.href=m.loginUrl+"?next="+encodeURIComponent(location.href)):e.setState({loading:!1,errorMsg:(0,m.gettext)("Error")}):e.setState({loading:!1,errorMsg:(0,m.gettext)("Please check the network.")})})}},{key:"render",value:function(){return u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container",id:"starred"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,m.gettext)("Favorites"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(g,{data:this.state}))))}}]),t}(s.Component);t.default=v},1195:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=a(c),f=n(3),p=n(2),h=n(7),m=a(h),g=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.data,t=e.loading,n=e.errorMsg,a=e.items;if(t)return u.default.createElement("span",{className:"loading-icon loading-tip"});if(n)return u.default.createElement("p",{className:"error text-center"},n);var r=u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"13%"},(0,p.gettext)("Platform")),u.default.createElement("th",{width:"30%"},(0,p.gettext)("Device Name")),u.default.createElement("th",{width:"30%"},(0,p.gettext)("IP")),u.default.createElement("th",{width:"17%"},(0,p.gettext)("Last Access")),u.default.createElement("th",{width:"10%"}))),o=u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"25%"},(0,p.gettext)("Platform")),u.default.createElement("th",{width:"70%"},(0,p.gettext)("Device Name")),u.default.createElement("th",{width:"5%"})));return u.default.createElement("table",null,window.innerWidth>=768?r:o,u.default.createElement(y,{items:a}))}}]),t}(s.Component),y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={items:n.props.items},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state.items.map(function(e,t){return u.default.createElement(b,{key:t,data:e})},this);return u.default.createElement("tbody",null,e)}}]),t}(s.Component),b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showOpIcon:!1,unlinked:!1},n.handleMouseOver=n.handleMouseOver.bind(n),n.handleMouseOut=n.handleMouseOut.bind(n),n.handleClick=n.handleClick.bind(n),n}return i(t,e),l(t,[{key:"handleMouseOver",value:function(){this.setState({showOpIcon:!0})}},{key:"handleMouseOut",value:function(){this.setState({showOpIcon:!1})}},{key:"handleClick",value:function(e){var t=this;e.preventDefault();var n=this.props.data;f.seafileAPI.unlinkDevice(n.platform,n.device_id).then(function(e){t.setState({unlinked:!0});var a=(0,p.gettext)("Successfully unlink %(name)s.");a=a.replace("%(name)s",n.device_name),m.default.success(a)}).catch(function(e){var t=(0,p.gettext)("Failed to unlink %(name)s");t=t.replace("%(name)s",n.device_name),m.default.danger(t)})}},{key:"render",value:function(){if(this.state.unlinked)return null;var e=this.props.data,t="sf2-icon-delete unlink-device action-icon";t+=this.state.showOpIcon?"":" invisible";var n=u.default.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},u.default.createElement("td",null,e.platform),u.default.createElement("td",null,e.device_name),u.default.createElement("td",null,e.last_login_ip),u.default.createElement("td",null,(0,d.default)(e.last_accessed).fromNow()),u.default.createElement("td",null,u.default.createElement("a",{href:"#",className:t,title:(0,p.gettext)("Unlink"),"aria-label":(0,p.gettext)("Unlink"),onClick:this.handleClick}))),a=u.default.createElement("tr",null,u.default.createElement("td",null,e.platform),u.default.createElement("td",null,e.device_name),u.default.createElement("td",null,u.default.createElement("a",{href:"#",className:t,title:(0,p.gettext)("Unlink"),"aria-label":(0,p.gettext)("Unlink"),onClick:this.handleClick})));return window.innerWidth>=768?n:a}}]),t}(s.Component),v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!0,errorMsg:"",items:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;f.seafileAPI.listLinkedDevices().then(function(t){e.setState({loading:!1,items:t.data})}).catch(function(t){t.response?403==t.response.status?(e.setState({loading:!1,errorMsg:(0,p.gettext)("Permission denied")}),location.href=p.loginUrl+"?next="+encodeURIComponent(location.href)):e.setState({loading:!1,errorMsg:(0,p.gettext)("Error")}):e.setState({loading:!1,errorMsg:(0,p.gettext)("Please check the network.")})})}},{key:"render",value:function(){return u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container",id:"linked-devices"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,p.gettext)("Linked Devices"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(g,{data:this.state}))))}}]),t}(s.Component);t.default=v},1196:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(60),d=n(3),f=n(4),p=n(2),h=n(19),m=a(h),g=n(1197),y=a(g),b=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.sortByName=function(e){e.preventDefault();var t="asc"==a.props.sortOrder?"desc":"asc";a.props.sortItems("name",t)},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items,o=t.sortBy,i=t.sortOrder;if(n)return u.default.createElement("span",{className:"loading-icon loading-tip"});if(a)return u.default.createElement("p",{className:"error text-center"},a);var l=u.default.createElement("div",{className:"empty-tip"},u.default.createElement("h2",null,(0,p.gettext)("You have not shared any libraries")),u.default.createElement("p",null,(0,p.gettext)("You can share libraries with your friends and colleagues by clicking the share icon of your own libraries in your home page or creating a new library in groups you are in."))),s="name"==o,c="asc"==i?u.default.createElement("span",{className:"fas fa-caret-up"}):u.default.createElement("span",{className:"fas fa-caret-down"}),d=u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"4%"}),u.default.createElement("th",{width:"34%"},u.default.createElement("a",{className:"d-block table-sort-op",href:"#",onClick:this.sortByName},(0,p.gettext)("Name")," ",s&&c)),u.default.createElement("th",{width:"30%"},(0,p.gettext)("Share To")),u.default.createElement("th",{width:"24%"},(0,p.gettext)("Permission")),u.default.createElement("th",{width:"8%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(v,{key:n,item:t,unshareFolder:e.props.unshareFolder})})));return r.length?d:l}}]),t}(s.Component),v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));w.call(n);var a=n.props.item;return n.state={share_permission:a.share_permission,is_admin:a.is_admin,showOpIcon:!1,unshared:!1},n.permissions=["rw","r"],p.isPro&&(n.permissions=["rw","r","cloud-edit","preview"]),n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.getRepoParams(),t=e.iconUrl,n=e.iconTitle,a=e.repoUrl,r=this.props.item,o=this.state,i=o.share_permission,l=o.is_admin,s=void 0,d=r.share_type;"personal"==d?s=u.default.createElement("td",{title:r.contact_email},r.user_name):"group"==d?s=u.default.createElement("td",null,r.group_name):"public"==d&&(s=u.default.createElement("td",null,(0,p.gettext)("all members")));var f=p.isPro&&"public"!==r.share_type;f&&l&&(i="admin");var h=this.state.showOpIcon?"":" invisible",g="unshare action-icon sf2-icon-x3"+h;return f&&-1===this.permissions.indexOf("admin")&&this.permissions.splice(2,0,"admin"),u.default.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("td",null,u.default.createElement("img",{src:t,title:n,alt:n,width:"24"})),u.default.createElement("td",null,u.default.createElement(c.Link,{to:a},r.repo_name)),s,u.default.createElement("td",null,u.default.createElement(m.default,{isTextMode:!0,isEditIconShow:this.state.showOpIcon,currentPermission:i,permissions:this.permissions,onPermissionChanged:this.changePerm})),u.default.createElement("td",null,u.default.createElement("a",{href:"#",className:g,title:(0,p.gettext)("Unshare"),onClick:this.unshare})))}}]),t}(s.Component),w=function(){var e=this;this.onMouseEnter=function(){e.setState({showOpIcon:!0})},this.onMouseLeave=function(){e.setState({showOpIcon:!1})},this.changePerm=function(t){var n=e.props.item,a=n.share_type,r={share_type:a,permission:t};"personal"==a?r.user=n.user_email:"group"==a&&(r.group_id=n.group_id),d.seafileAPI.updateRepoSharePerm(n.repo_id,r).then(function(){e.setState({share_permission:"admin"==t?"rw":t,is_admin:"admin"==t})}).catch(function(e){})},this.unshare=function(){e.props.unshareFolder(e.props.item)},this.getRepoParams=function(){var t=e.props.item;return{iconUrl:f.Utils.getLibIconUrl(t),iconTitle:f.Utils.getLibIconTitle(t),repoUrl:p.siteRoot+"library/"+t.repo_id+"/"+t.repo_name}}},S=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.unshareFolder=function(e){var t=e.share_type,a={share_type:t};"personal"==t?a.user=e.user_email:"group"==t&&(a.group_id=e.group_id),d.seafileAPI.unshareRepo(e.repo_id,a).then(function(t){var a=[];"personal"===e.share_type?a=n.state.items.filter(function(t){return!(t.user_email===e.user_email&&t.repo_id===e.repo_id)}):"group"===e.share_type?a=n.state.items.filter(function(t){return!(t.group_id===e.group_id&&t.repo_id===e.repo_id)}):"public"===e.share_type&&(a=n.state.items.filter(function(t){return!("public"===t.share_type&&t.repo_id===e.repo_id)})),n.setState({items:a})}).catch(function(e){})},n.sortItems=function(e,t){n.setState({sortBy:e,sortOrder:t,items:f.Utils.sortRepos(n.state.items,e,t)})},n.state={loading:!0,errorMsg:"",items:[],sortBy:"name",sortOrder:"asc"},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;d.seafileAPI.listSharedRepos().then(function(t){var n=t.data.map(function(e){return new y.default(e)});e.setState({loading:!1,items:f.Utils.sortRepos(n,e.state.sortBy,e.state.sortOrder)})}).catch(function(t){t.response?403==t.response.status?(e.setState({loading:!1,errorMsg:(0,p.gettext)("Permission denied")}),location.href=p.loginUrl+"?next="+encodeURIComponent(location.href)):e.setState({loading:!1,errorMsg:(0,p.gettext)("Error")}):e.setState({loading:!1,errorMsg:(0,p.gettext)("Please check the network.")})})}},{key:"render",value:function(){return u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container",id:"share-admin-libs"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,p.gettext)("Libraries"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(b,{errorMsg:this.state.errorMsg,loading:this.state.loading,items:this.state.items,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortItems:this.sortItems,unshareFolder:this.unshareFolder}))))}}]),t}(s.Component);t.default=S},1197:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){a(this,e),this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.share_type=t.share_type,this.share_permission=t.share_permission,this.modifier_name=t.modifier_name,this.modifier_email=t.modifier_email,this.modifier_contact_email=t.modifier_contact_email,this.encrypted=t.encrypted,"personal"===this.share_type?(this.is_admin=t.is_admin,this.user_name=t.user_name,this.user_email=t.user_email,this.contact_email=this.contact_email):"group"===this.share_type&&(this.is_admin=t.is_admin,this.group_id=t.group_id,this.group_name=t.group_name)};t.default=r},1198:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(60),d=n(3),f=n(4),p=n(2),h=n(19),m=a(h),g=n(1199),y=a(g),b=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.sortByName=function(e){e.preventDefault();var t="asc"==a.props.sortOrder?"desc":"asc";a.props.sortItems("name",t)},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items,o=t.sortBy,i=t.sortOrder;if(n)return u.default.createElement("span",{className:"loading-icon loading-tip"});if(a)return u.default.createElement("p",{className:"error text-center"},a);var l=u.default.createElement("div",{className:"empty-tip"},u.default.createElement("h2",null,(0,p.gettext)("You have not shared any folders")),u.default.createElement("p",null,(0,p.gettext)("You can share a single folder with a registered user if you don't want to share a whole library."))),s="name"==o,c="asc"==i?u.default.createElement("span",{className:"fas fa-caret-up"}):u.default.createElement("span",{className:"fas fa-caret-down"}),d=u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"4%"}),u.default.createElement("th",{width:"34%"},u.default.createElement("a",{className:"d-block table-sort-op",href:"#",onClick:this.sortByName},(0,p.gettext)("Name")," ",s&&c)),u.default.createElement("th",{width:"30%"},(0,p.gettext)("Share To")),u.default.createElement("th",{width:"24%"},(0,p.gettext)("Permission")),u.default.createElement("th",{width:"8%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(v,{key:n,item:t,unshareFolder:e.props.unshareFolder})})));return r.length?d:l}}]),t}(s.Component),v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.setState({showOpIcon:!0})},n.onMouseLeave=function(){n.setState({showOpIcon:!1})},n.unshare=function(e){e.preventDefault();var t=n.props.item;n.props.unshareFolder(t)},n.changePerm=function(e){var t=e,a={permission:t},r=n.props.item,o={p:r.path,share_type:r.share_type};"user"==r.share_type?o.username=r.user_email:o.group_id=r.group_id,d.seafileAPI.updateFolderSharePerm(r.repo_id,a,o).then(function(e){n.setState({share_permission:t})}).catch(function(e){})},n.getFolderParams=function(){var e=n.props.item,t=n.state.share_permission,a=!1;return"r"!=t&&"preview"!=t||(a=!0),{iconUrl:f.Utils.getFolderIconUrl(a),iconTitle:f.Utils.getFolderIconTitle({permission:t}),folderUrl:p.siteRoot+"library/"+e.repo_id+"/"+e.repo_name+f.Utils.encodePath(e.path)}},n.state={share_permission:n.props.item.share_permission,showOpIcon:!1,unshared:!1},n.permissions=["rw","r"],p.isPro&&(n.permissions=["rw","r","cloud-edit","preview"]),n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.getFolderParams(),n=t.iconUrl,a=t.iconTitle,r=t.folderUrl,o=void 0,i=e.share_type;"user"==i?o=u.default.createElement("td",{title:e.contact_email},e.user_name):"group"==i&&(o=u.default.createElement("td",null,e.group_name));var l=this.state.showOpIcon?"":" invisible",s="unshare action-icon sf2-icon-x3"+l;return u.default.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("td",null,u.default.createElement("img",{src:n,title:a,alt:a,width:"24"})),u.default.createElement("td",null,u.default.createElement(c.Link,{to:r},e.folder_name)),o,u.default.createElement("td",null,u.default.createElement(m.default,{isTextMode:!0,isEditIconShow:this.state.showOpIcon,currentPermission:this.state.share_permission,permissions:this.permissions,onPermissionChanged:this.changePerm})),u.default.createElement("td",null,u.default.createElement("a",{href:"#",className:s,title:(0,p.gettext)("Unshare"),onClick:this.unshare})))}}]),t}(s.Component),w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._sortItems=function(e,t,n){var a=void 0;switch(t+"-"+n){case"name-asc":a=function(e,t){return f.Utils.compareTwoWord(e.folder_name,t.folder_name)};break;case"name-desc":a=function(e,t){return-f.Utils.compareTwoWord(e.folder_name,t.folder_name)}}return e.sort(a),e},n.sortItems=function(e,t){n.setState({sortBy:e,sortOrder:t,items:n._sortItems(n.state.items,e,t)})},n.unshareFolder=function(e){var t={};t.p=e.path,t.share_type=e.share_type,"user"==e.share_type?t.username=e.user_email:t.group_id=e.group_id,d.seafileAPI.unshareFolder(e.repo_id,t).then(function(t){var a=n.state.items.filter(function(t){return"user"===e.share_type?t.user_email!==e.user_email:t.group_id!==e.group_id});n.setState({items:a})}).catch(function(e){})},n.state={loading:!0,errorMsg:"",items:[],sortBy:"name",sortOrder:"asc"},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;d.seafileAPI.listSharedFolders().then(function(t){var n=t.data.map(function(e){return new y.default(e)});e.setState({loading:!1,items:e._sortItems(n,e.state.sortBy,e.state.sortOrder)})}).catch(function(t){t.response?403==t.response.status?(e.setState({loading:!1,errorMsg:(0,p.gettext)("Permission denied")}),location.href=p.loginUrl+"?next="+encodeURIComponent(location.href)):e.setState({loading:!1,errorMsg:(0,p.gettext)("Error")}):e.setState({loading:!1,errorMsg:(0,p.gettext)("Please check the network.")})})}},{key:"render",value:function(){return u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container",id:"share-admin-libs"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,p.gettext)("Folders"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(b,{errorMsg:this.state.errorMsg,loading:this.state.loading,items:this.state.items,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortItems:this.sortItems,unshareFolder:this.unshareFolder}))))}}]),t}(s.Component);t.default=w},1199:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){a(this,e),this.path=t.path,this.folder_name=t.folder_name,this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.share_type=t.share_type,this.share_permission=t.share_permission,"group"===t.share_type?(this.group_id=t.group_id,this.group_name=t.group_name):(this.share_type="user",this.user_name=t.user_name,this.user_email=t.user_email,this.contact_email=t.contact_email)};t.default=r},12:function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(33).enable(),window.Promise=n(34)),n(28),Object.assign=n(20)},120:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(3),d=n(2),f=n(121),p=a(f),h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=function(){n.state.showNotice?(c.seafileAPI.updateNotifications(),n.setState({showNotice:!1,unseenCount:0})):(n.loadNotices(),n.setState({showNotice:!0}))},n.loadNotices=function(){c.seafileAPI.listPopupNotices(1,5).then(function(e){var t=e.data.notification_list;n.setState({noticeList:t})})},n.onNoticeItemClick=function(e){var t=n.state.noticeList.map(function(t){return t.id===e.id&&(t.seen=!0),t});c.seafileAPI.markNoticeAsRead(e.id);var a=0===n.state.unseenCount?0:n.state.unseenCount-1;n.setState({noticeList:t,unseenCount:a})},n.state={showNotice:!1,unseenCount:0,noticeList:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;c.seafileAPI.getUnseenNotificationCount().then(function(t){e.setState({unseenCount:t.data.unseen_count})})}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{id:"notifications"},u.default.createElement("a",{href:"#",onClick:this.onClick,className:"no-deco",id:"notice-icon",title:"Notifications","aria-label":"Notifications"},u.default.createElement("span",{className:"sf2-icon-bell"}),u.default.createElement("span",{className:"num "+(this.state.unseenCount?"":"hide")},this.state.unseenCount)),u.default.createElement("div",{id:"notice-popover",className:"sf-popover "+(this.state.showNotice?"":"hide")},u.default.createElement("div",{className:"outer-caret up-outer-caret"},u.default.createElement("div",{className:"inner-caret"})),u.default.createElement("div",{className:"sf-popover-hd ovhd"},u.default.createElement("h3",{className:"sf-popover-title title"},(0,d.gettext)("Notifications")),u.default.createElement("a",{href:"#",onClick:this.onClick,title:(0,d.gettext)("Close"),"aria-label":(0,d.gettext)("Close"),className:"sf-popover-close js-close sf2-icon-x1 action-icon float-right"})),u.default.createElement("div",{className:"sf-popover-con"},u.default.createElement("ul",{className:"notice-list"},this.state.noticeList.map(function(t){return u.default.createElement(p.default,{key:t.id,noticeItem:t,onNoticeItemClick:e.onNoticeItemClick})})),u.default.createElement("a",{href:d.siteRoot+"notification/list/",className:"view-all"},(0,d.gettext)("See All Notifications")))))}}]),t}(u.default.Component);t.default=h},1200:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(60),d=n(6),f=a(d),p=n(5),h=n(3),m=n(4),g=n(2),y=n(40),b=a(y),v=n(75),w=a(v),S=n(7),C=a(S),E=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.sortByName=function(e){e.preventDefault();var t="asc"==n.props.sortOrder?"desc":"asc";n.props.sortItems("name",t)},n.sortByTime=function(e){e.preventDefault();var t="asc"==n.props.sortOrder?"desc":"asc";n.props.sortItems("time",t)},n.toggleModal=function(){n.setState({modalOpen:!n.state.modalOpen})},n.showModal=function(e){n.toggleModal(),n.setState({modalContent:e.content})},n.copyToClipboard=function(){(0,w.default)(n.state.modalContent),n.setState({modalOpen:!1});var e=(0,g.gettext)("Share link is copied to the clipboard.");C.default.success(e)},n.state={modalOpen:!1,modalContent:""},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items,o=t.sortBy,i=t.sortOrder;if(n)return u.default.createElement("span",{className:"loading-icon loading-tip"});if(a)return u.default.createElement("p",{className:"error text-center"},a);var l=u.default.createElement("div",{className:"empty-tip"},u.default.createElement("h2",null,(0,g.gettext)("You don't have any share links")),u.default.createElement("p",null,(0,g.gettext)("You can generate a share link for a folder or a file. Anyone who receives this link can view the folder or the file online."))),s="name"==o,c="time"==o,d="asc"==i?u.default.createElement("span",{className:"fas fa-caret-up"}):u.default.createElement("span",{className:"fas fa-caret-down"}),f=u.default.createElement(u.default.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"4%"}),u.default.createElement("th",{width:"36%"},u.default.createElement("a",{className:"d-block table-sort-op",href:"#",onClick:this.sortByName},(0,g.gettext)("Name")," ",s&&d)),u.default.createElement("th",{width:"24%"},(0,g.gettext)("Library")),u.default.createElement("th",{width:"12%"},(0,g.gettext)("Visits")),u.default.createElement("th",{width:"14%"},u.default.createElement("a",{className:"d-block table-sort-op",href:"#",onClick:this.sortByTime},(0,g.gettext)("Expiration")," ",c&&d)),u.default.createElement("th",{width:"10%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(_,{key:n,item:t,showModal:e.showModal,onRemoveLink:e.props.onRemoveLink})}))),u.default.createElement(p.Modal,{isOpen:this.state.modalOpen,toggle:this.toggleModal,centered:!0},u.default.createElement(p.ModalHeader,{toggle:this.toggleModal},(0,g.gettext)("Link")),u.default.createElement(p.ModalBody,null,u.default.createElement("a",{href:this.state.modalContent},this.state.modalContent)),u.default.createElement(p.ModalFooter,null,u.default.createElement(p.Button,{color:"primary",onClick:this.copyToClipboard},(0,g.gettext)("Copy"))," ",u.default.createElement(p.Button,{color:"secondary",onClick:this.toggleModal},(0,g.gettext)("Close")))));return r.length?f:l}}]),t}(s.Component),_=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseOver=function(){n.setState({showOpIcon:!0})},n.handleMouseOut=function(){n.setState({showOpIcon:!1})},n.viewLink=function(e){e.preventDefault(),n.props.showModal({content:n.props.item.link})},n.removeLink=function(e){e.preventDefault(),n.props.onRemoveLink(n.props.item)},n.getLinkParams=function(){var e=n.props.item,t="",a="";return e.is_dir?(t=m.Utils.getFolderIconUrl(!1),a=g.siteRoot+"library/"+e.repo_id+"/"+e.repo_name+m.Utils.encodePath(e.path)):(t=m.Utils.getFileIconUrl(e.obj_name),a=g.siteRoot+"lib/"+e.repo_id+"/file"+m.Utils.encodePath(e.path)),{iconUrl:t,linkUrl:a}},n.renderExpriedData=function(){var e=n.props.item;if(!e.expire_date)return u.default.createElement(s.Fragment,null,"--");var t=(0,f.default)(e.expire_date).format("YYYY-MM-DD");return u.default.createElement(s.Fragment,null,e.is_expired?u.default.createElement("span",{className:"error"},t):t)},n.state={showOpIcon:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.getLinkParams(),n=t.iconUrl,a=t.linkUrl,r=this.state.showOpIcon?"":" invisible",o="sf2-icon-link action-icon"+r,i="sf2-icon-delete action-icon"+r;return u.default.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},u.default.createElement("td",null,u.default.createElement("img",{src:n,width:"24"})),u.default.createElement("td",null,e.is_dir?u.default.createElement(c.Link,{to:a},e.obj_name):u.default.createElement("a",{href:a,target:"_blank"},e.obj_name)),u.default.createElement("td",null,u.default.createElement(c.Link,{to:g.siteRoot+"library/"+e.repo_id+"/"+e.repo_name+"/"},e.repo_name)),u.default.createElement("td",null,e.view_cnt),u.default.createElement("td",null,this.renderExpriedData()),u.default.createElement("td",null,u.default.createElement("a",{href:"#",className:o,title:(0,g.gettext)("View"),onClick:this.viewLink}),u.default.createElement("a",{href:"#",className:i,title:(0,g.gettext)("Remove"),onClick:this.removeLink})))}}]),t}(s.Component),D=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._sortItems=function(e,t,n){var a=void 0;switch(t+"-"+n){case"name-asc":a=function(e,t){return m.Utils.compareTwoWord(e.obj_name,t.obj_name)};break;case"name-desc":a=function(e,t){return-m.Utils.compareTwoWord(e.obj_name,t.obj_name)};break;case"time-asc":a=function(e,t){return e.expire_date<t.expire_date?-1:1};break;case"time-desc":a=function(e,t){return e.expire_date<t.expire_date?1:-1}}return e.sort(function(e,t){return e.is_dir&&!t.is_dir?-1:!e.is_dir&&t.is_dir?1:a(e,t)}),e},n.sortItems=function(e,t){n.setState({sortBy:e,sortOrder:t,items:n._sortItems(n.state.items,e,t)})},n.onRemoveLink=function(e){h.seafileAPI.deleteShareLink(e.token).then(function(){var t=n.state.items.filter(function(t){return t.token!==e.token});n.setState({items:t})}).catch(function(e){})},n.state={loading:!0,errorMsg:"",items:[],sortBy:"name",sortOrder:"asc"},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;h.seafileAPI.listShareLinks().then(function(t){var n=t.data.map(function(e){return new b.default(e)});e.setState({loading:!1,items:e._sortItems(n,e.state.sortBy,e.state.sortOrder)})}).catch(function(t){t.response?403==t.response.status?(e.setState({loading:!1,errorMsg:(0,g.gettext)("Permission denied")}),location.href=g.loginUrl+"?next="+encodeURIComponent(location.href)):e.setState({loading:!1,errorMsg:(0,g.gettext)("Error")}):e.setState({loading:!1,errorMsg:(0,g.gettext)("Please check the network.")})})}},{key:"render",value:function(){return u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path share-upload-nav"},u.default.createElement("ul",{className:"nav"},u.default.createElement("li",{className:"nav-item"},u.default.createElement(c.Link,{to:g.siteRoot+"share-admin-share-links/",className:"nav-link active"},(0,g.gettext)("Share Links"))),g.canGenerateUploadLink&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(c.Link,{to:g.siteRoot+"share-admin-upload-links/",className:"nav-link"},(0,g.gettext)("Upload Links"))))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(E,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.items,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortItems:this.sortItems,onRemoveLink:this.onRemoveLink}))))}}]),t}(s.Component);t.default=D},1201:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(60),d=n(5),f=n(2),p=n(3),h=n(4),m=n(41),g=a(m),y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleModal=function(){n.setState({modalOpen:!n.state.modalOpen})},n.showModal=function(e){n.toggleModal(),n.setState({modalContent:e.content})},n.state={modalOpen:!1,modalContent:""},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items;if(n)return u.default.createElement("span",{className:"loading-icon loading-tip"});if(a)return u.default.createElement("p",{className:"error text-center"},a);var o=u.default.createElement("div",{className:"empty-tip"},u.default.createElement("h2",null,(0,f.gettext)("You don't have any upload links")),u.default.createElement("p",null,(0,f.gettext)("You can generate an upload link from any folder. Anyone who receives this link can upload files to this folder."))),i=u.default.createElement(u.default.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"4%"}),u.default.createElement("th",{width:"42%"},(0,f.gettext)("Name")),u.default.createElement("th",{width:"30%"},(0,f.gettext)("Library")),u.default.createElement("th",{width:"14%"},(0,f.gettext)("Visits")),u.default.createElement("th",{width:"10%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(b,{key:n,item:t,showModal:e.showModal,onRemoveLink:e.props.onRemoveLink})}))),u.default.createElement(d.Modal,{isOpen:this.state.modalOpen,toggle:this.toggleModal,centered:!0},u.default.createElement(d.ModalHeader,{toggle:this.toggleModal},(0,f.gettext)("Link")),u.default.createElement(d.ModalBody,null,this.state.modalContent)));return r.length?i:o}}]),t}(s.Component),b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseOver=function(){n.setState({showOpIcon:!0})},n.handleMouseOut=function(){n.setState({showOpIcon:!1})},n.viewLink=function(e){e.preventDefault(),n.props.showModal({content:n.props.item.link})},n.removeLink=function(e){e.preventDefault(),n.props.onRemoveLink(n.props.item)},n.getUploadParams=function(){var e=n.props.item;return{iconUrl:h.Utils.getFolderIconUrl(!1),uploadUrl:f.siteRoot+"library/"+e.repo_id+"/"+e.repo_name+h.Utils.encodePath(e.path)}},n.state={showOpIcon:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.getUploadParams(),n=t.iconUrl,a=t.uploadUrl,r=this.state.showOpIcon?"":" invisible",o="sf2-icon-link action-icon"+r,i="sf2-icon-delete action-icon"+r;return u.default.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},u.default.createElement("td",null,u.default.createElement("img",{src:n,width:"24"})),u.default.createElement("td",null,u.default.createElement(c.Link,{to:a},e.obj_name)),u.default.createElement("td",null,u.default.createElement(c.Link,{to:f.siteRoot+"library/"+e.repo_id+"/"+e.repo_name},e.repo_name)),u.default.createElement("td",null,e.view_cnt),u.default.createElement("td",null,u.default.createElement("a",{href:"#",className:o,title:(0,f.gettext)("View"),onClick:this.viewLink}),u.default.createElement("a",{href:"#",className:i,title:(0,f.gettext)("Remove"),onClick:this.removeLink})))}}]),t}(s.Component),v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onRemoveLink=function(e){p.seafileAPI.deleteUploadLink(e.token).then(function(){var t=n.state.items.filter(function(t){return t.token!==e.token});n.setState({items:t})}).catch(function(e){})},n.state={loading:!0,errorMsg:"",items:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;p.seafileAPI.listUploadLinks().then(function(t){var n=t.data.map(function(e){return new g.default(e)});e.setState({loading:!1,items:n})}).catch(function(t){t.response?403==t.response.status?(e.setState({loading:!1,errorMsg:(0,f.gettext)("Permission denied")}),location.href=f.loginUrl+"?next="+encodeURIComponent(location.href)):e.setState({loading:!1,errorMsg:(0,f.gettext)("Error")}):e.setState({loading:!1,errorMsg:(0,f.gettext)("Please check the network.")})})}},{key:"render",value:function(){return u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path share-upload-nav"},u.default.createElement("ul",{className:"nav"},f.canGenerateShareLink&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(c.Link,{to:f.siteRoot+"share-admin-share-links/",className:"nav-link"},(0,f.gettext)("Share Links"))),u.default.createElement("li",{className:"nav-item"},u.default.createElement(c.Link,{to:f.siteRoot+"share-admin-upload-links/",className:"nav-link active"},(0,f.gettext)("Upload Links"))))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(y,{errorMsg:this.state.errorMsg,items:this.state.items,loading:this.state.loading,onRemoveLink:this.onRemoveLink}))))}}]),t}(s.Component);t.default=v},1202:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(6),p=a(f),h=n(22),m=a(h),g=n(60),y=n(3),b=n(4),v=n(125),w=a(v),S=n(2),C=n(11),E=a(C),_=n(10),D=a(_),P=n(25),L=a(P),R=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.sortByName=function(e){e.preventDefault();var t="asc"==a.props.sortOrder?"desc":"asc";a.props.sortItems("name",t)},a.sortByTime=function(e){e.preventDefault();var t="asc"==a.props.sortOrder?"desc":"asc";a.props.sortItems("time",t)},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,a=e.items,r=e.sortBy,o=e.sortOrder,i=u.default.createElement("div",{className:"empty-tip"},u.default.createElement("h2",null,(0,S.gettext)("No libraries have been shared with you")),u.default.createElement("p",null,(0,S.gettext)('No libraries have been shared directly with you. You can find more shared libraries at "Shared with groups".')));if(t)return u.default.createElement(E.default,null);if(n)return u.default.createElement("p",{className:"error text-center"},n);var l="name"==r,s="time"==r,c="asc"==o?u.default.createElement("span",{className:"fas fa-caret-up"}):u.default.createElement("span",{className:"fas fa-caret-down"}),d=u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"4%"}),u.default.createElement("th",{width:"4%"},u.default.createElement("span",{className:"sr-only"},(0,S.gettext)("Library Type"))),u.default.createElement("th",{width:"34%"},u.default.createElement("a",{className:"d-block table-sort-op",href:"#",onClick:this.sortByName},(0,S.gettext)("Name")," ",l&&c)),u.default.createElement("th",{width:"10%"},u.default.createElement("span",{className:"sr-only"},(0,S.gettext)("Actions"))),u.default.createElement("th",{width:"14%"},(0,S.gettext)("Size")),u.default.createElement("th",{width:"18%"},u.default.createElement("a",{className:"d-block table-sort-op",href:"#",onClick:this.sortByTime},(0,S.gettext)("Last Update")," ",s&&c)),u.default.createElement("th",{width:"16%"},(0,S.gettext)("Owner")))),f=u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"18%"},u.default.createElement("span",{className:"sr-only"},(0,S.gettext)("Library Type"))),u.default.createElement("th",{width:"76%"},(0,S.gettext)("Sort:"),u.default.createElement("a",{className:"table-sort-op",href:"#",onClick:this.sortByName},(0,S.gettext)("name")," ",l&&c),u.default.createElement("a",{className:"table-sort-op",href:"#",onClick:this.sortByTime},(0,S.gettext)("last update")," ",s&&c)),u.default.createElement("th",{width:"6%"},u.default.createElement("span",{className:"sr-only"},(0,S.gettext)("Actions"))))),p=u.default.createElement("table",null,window.innerWidth>=768?d:f,u.default.createElement(M,{items:a}));return a.length?p:i}}]),t}(s.Component);R.propTypes={loading:d.default.bool.isRequired,errorMsg:d.default.string.isRequired,items:d.default.array.isRequired,sortBy:d.default.string.isRequired,sortOrder:d.default.string.isRequired,sortItems:d.default.func.isRequired};var M=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.items.map(function(e,t){return u.default.createElement(T,{key:t,data:e})},this);return u.default.createElement("tbody",null,e)}}]),t}(s.Component);M.propTypes={items:d.default.array.isRequired};var T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleShareDialog=function(){n.setState({isShowSharedDialog:!1})},n.onStarRepo=function(){n.state.isStarred?y.seafileAPI.unstarItem(n.props.data.repo_id,"/").then(function(){n.setState({isStarred:!n.state.isStarred})}):y.seafileAPI.starItem(n.props.data.repo_id,"/").then(function(){n.setState({isStarred:!n.state.isStarred})})},n.state={showOpIcon:!1,unshared:!1,isShowSharedDialog:!1,isStarred:n.props.data.starred},n.handleMouseOver=n.handleMouseOver.bind(n),n.handleMouseOut=n.handleMouseOut.bind(n),n.share=n.share.bind(n),n.leaveShare=n.leaveShare.bind(n),n}return i(t,e),l(t,[{key:"handleMouseOver",value:function(){this.setState({showOpIcon:!0})}},{key:"handleMouseOut",value:function(){this.setState({showOpIcon:!1})}},{key:"share",value:function(e){e.preventDefault(),this.setState({isShowSharedDialog:!0})}},{key:"leaveShare",value:function(e){var t=this;e.preventDefault();var n=this.props.data,a=void 0;if(-1==n.owner_email.indexOf("@seafile_group")){var r={share_type:"personal",from:n.owner_email};a=y.seafileAPI.leaveShareRepo(n.repo_id,r)}else a=y.seafileAPI.leaveShareGroupOwnedRepo(n.repo_id);a.then(function(e){t.setState({unshared:!0})}).catch(function(e){})}},{key:"render",value:function(){if(this.state.unshared)return null;var e=this.props.data;e.icon_url=b.Utils.getLibIconUrl(e),e.icon_title=b.Utils.getLibIconTitle(e),e.url=S.siteRoot+"#shared-libs/lib/"+e.repo_id+"/";var t=this.state.showOpIcon?"":" invisible",n="op-icon sf2-icon-share repo-share-btn"+t,a="op-icon sf2-icon-x3"+t,r=u.default.createElement(s.Fragment,null,u.default.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},u.default.createElement("td",{className:"text-center"},!this.state.isStarred&&u.default.createElement("i",{className:"far fa-star star-empty cursor-pointer",onClick:this.onStarRepo}),this.state.isStarred&&u.default.createElement("i",{className:"fas fa-star cursor-pointer",onClick:this.onStarRepo})),u.default.createElement("td",null,u.default.createElement("img",{src:e.icon_url,title:e.icon_title,alt:e.icon_title,width:"24"})),u.default.createElement("td",null,u.default.createElement(g.Link,{to:S.siteRoot+"library/"+e.repo_id+"/"+e.repo_name+"/"},e.repo_name)),u.default.createElement("td",null,S.isPro&&e.is_admin&&u.default.createElement("a",{href:"#",className:n,title:(0,S.gettext)("Share"),onClick:this.share}),u.default.createElement("a",{href:"#",className:a,title:(0,S.gettext)("Leave Share"),onClick:this.leaveShare})),u.default.createElement("td",null,e.size),u.default.createElement("td",{title:(0,p.default)(e.last_modified).format("llll")},(0,p.default)(e.last_modified).fromNow()),u.default.createElement("td",{title:e.owner_contact_email},e.owner_name)),this.state.isShowSharedDialog&&u.default.createElement(D.default,null,u.default.createElement(L.default,{itemType:"library",itemName:e.repo_name,itemPath:"/",repoID:e.repo_id,repoEncrypted:e.encrypted,enableDirPrivateShare:!0,userPerm:e.permission,isAdmin:!0,toggleDialog:this.toggleShareDialog}))),o=u.default.createElement(s.Fragment,null,u.default.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},u.default.createElement("td",null,u.default.createElement("img",{src:e.icon_url,title:e.icon_title,alt:e.icon_title,width:"24"})),u.default.createElement("td",null,u.default.createElement(g.Link,{to:S.siteRoot+"library/"+e.repo_id+"/"+e.repo_name+"/"},e.repo_name),u.default.createElement("br",null),u.default.createElement("span",{className:"item-meta-info",title:e.owner_contact_email},e.owner_name),u.default.createElement("span",{className:"item-meta-info"},e.size),u.default.createElement("span",{className:"item-meta-info",title:(0,p.default)(e.last_modified).format("llll")},(0,p.default)(e.last_modified).fromNow())),u.default.createElement("td",null,S.isPro&&e.is_admin&&u.default.createElement("a",{href:"#",className:n,title:(0,S.gettext)("Share"),onClick:this.share}),u.default.createElement("a",{href:"#",className:a,title:(0,S.gettext)("Leave Share"),onClick:this.leaveShare}))),this.state.isShowSharedDialog&&u.default.createElement(D.default,null,u.default.createElement(L.default,{itemType:"library",itemName:e.repo_name,itemPath:"/",repoID:e.repo_id,repoEncrypted:e.encrypted,enableDirPrivateShare:!0,userPerm:e.permission,isAdmin:!0,toggleDialog:this.toggleShareDialog})));return window.innerWidth>=768?r:o}}]),t}(s.Component);T.propTypes={data:d.default.object.isRequired};var k=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.sortItems=function(e,t){m.default.save("seafile-repo-sort-by",e),m.default.save("seafile-repo-sort-order",t),n.setState({sortBy:e,sortOrder:t,items:b.Utils.sortRepos(n.state.items,e,t)})},n.state={loading:!0,errorMsg:"",items:[],sortBy:m.default.load("seafile-repo-sort-by")||"name",sortOrder:m.default.load("seafile-repo-sort-order")||"asc"},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;y.seafileAPI.listRepos({type:"shared"}).then(function(t){var n=t.data.repos.map(function(e){return new w.default(e)});e.setState({loading:!1,items:b.Utils.sortRepos(n,e.state.sortBy,e.state.sortOrder)})}).catch(function(t){t.response?403==t.response.status?(e.setState({loading:!1,errorMsg:(0,S.gettext)("Permission denied")}),location.href=S.loginUrl+"?next="+encodeURIComponent(location.href)):e.setState({loading:!1,errorMsg:(0,S.gettext)("Error")}):e.setState({loading:!1,errorMsg:(0,S.gettext)("Please check the network.")})})}},{key:"render",value:function(){return u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,S.gettext)("Shared with me"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(R,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.items,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortItems:this.sortItems}))))}}]),t}(s.Component);t.default=k},1203:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(22),d=a(c),f=n(3),p=n(2),h=n(4),m=n(125),g=a(m),y=n(11),b=a(y),v=n(80),w=a(v),S=n(1204),C=a(S),E=n(314),_=a(E),D=n(1205),P=a(D),L=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onCreateRepo=function(e){var t=e.permission;f.seafileAPI.createMineRepo(e).then(function(e){var a={repo_id:e.data.repo_id,repo_name:e.data.repo_name,size:e.data.repo_size,mtime:e.data.mtime,owner_email:e.data.email,encrypted:e.data.encrypted,permission:t};n.state.repoList.unshift(a),n.setState({repoList:n.state.repoList})})},n.sortRepoList=function(e,t){d.default.save("seafile-repo-sort-by",e),d.default.save("seafile-repo-sort-order",t),n.setState({sortBy:e,sortOrder:t,repoList:h.Utils.sortRepos(n.state.repoList,e,t)})},n.onTransferRepo=function(e){var t=n.state.repoList.filter(function(t){return t.repo_id!==e});n.setState({repoList:t})},n.onRenameRepo=function(e,t){var a=n.state.repoList.map(function(n){return n.repo_id===e.repo_id&&(n.repo_name=t),n});n.setState({repoList:a})},n.onDeleteRepo=function(e){var t=n.state.repoList.filter(function(t){return t.repo_id!==e.repo_id});n.setState({repoList:t})},n.onRepoClick=function(e){n.state.isShowDetails&&n.onRepoDetails(e)},n.onRepoDetails=function(e){n.setState({currentRepo:e,isShowDetails:!0})},n.closeDetails=function(){n.setState({isShowDetails:!n.state.isShowDetails})},n.state={errorMsg:"",isLoading:!0,repoList:[],isShowDetails:!1,sortBy:d.default.load("seafile-repo-sort-by")||"name",sortOrder:d.default.load("seafile-repo-sort-order")||"asc"},n.emptyMessage=u.default.createElement("div",{className:"empty-tip"},u.default.createElement("h2",null,(0,p.gettext)("You have not created any libraries")),u.default.createElement("p",null,(0,p.gettext)("You can create a library to organize your files. For example, you can create one for each of your projects. Each library can be synchronized and shared separately."))),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;f.seafileAPI.listRepos({type:"mine"}).then(function(t){var n=t.data.repos.map(function(e){return new g.default(e)});e.setState({isLoading:!1,repoList:h.Utils.sortRepos(n,e.state.sortBy,e.state.sortOrder)})}).catch(function(t){t.response?403==t.response.status?(e.setState({isLoading:!1,errorMsg:(0,p.gettext)("Permission denied")}),location.href=p.loginUrl+"?next="+encodeURIComponent(location.href)):e.setState({isLoading:!1,errorMsg:(0,p.gettext)("Error")}):e.setState({isLoading:!1,errorMsg:(0,p.gettext)("Please check the network.")})})}},{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"main-panel-north border-left-show"},u.default.createElement(C.default,{onShowSidePanel:this.props.onShowSidePanel,onCreateRepo:this.onCreateRepo,libraryType:"mine"}),u.default.createElement(w.default,{onSearchedClick:this.props.onSearchedClick})),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,p.gettext)("My Libraries"))),u.default.createElement("div",{className:"cur-view-content"},this.state.isLoading&&u.default.createElement(b.default,null),!this.state.isLoading&&this.state.errorMsg&&u.default.createElement("p",{className:"error text-center"},this.state.errorMsg),!this.state.isLoading&&0===this.state.repoList.length&&this.emptyMessage,!this.state.isLoading&&this.state.repoList.length>0&&u.default.createElement(P.default,{sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,repoList:this.state.repoList,onRenameRepo:this.onRenameRepo,onDeleteRepo:this.onDeleteRepo,onTransferRepo:this.onTransferRepo,onRepoDetails:this.onRepoDetails,onRepoClick:this.onRepoClick,sortRepoList:this.sortRepoList}))),this.state.isShowDetails&&u.default.createElement("div",{className:"cur-view-detail"},u.default.createElement(_.default,{currentRepo:this.state.currentRepo,closeDetails:this.closeDetails}))))}}]),t}(s.Component);t.default=L},1204:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(117),p=a(f),h=n(60),m=n(2),g=n(10),y=a(g),b=n(313),v=a(b),w=n(5),S={libraryType:d.default.string.isRequired,onCreateRepo:d.default.func.isRequired,onShowSidePanel:d.default.func.isRequired},C=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onCreateRepo=function(e){n.props.onCreateRepo(e),n.onCreateToggle()},n.onCreateToggle=function(){n.setState({isCreateRepoDialogShow:!n.state.isCreateRepoDialogShow})},n.toggleMore=function(){n.setState({isOpen:!n.state.isOpen})},n.state={isCreateRepoDialogShow:!1,isOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"cur-view-toolbar"},u.default.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu",onClick:this.props.onShowSidePanel}),u.default.createElement(p.default,{query:"(min-width: 768px)"},u.default.createElement("div",{className:"operation"},u.default.createElement("button",{className:"btn btn-secondary operation-item",title:(0,m.gettext)("New Library"),onClick:this.onCreateToggle},u.default.createElement("i",{className:"fas fa-plus-square text-secondary mr-1"}),(0,m.gettext)("New Library")),"group"!==this.props.libraryType&&u.default.createElement(w.Dropdown,{isOpen:this.state.isOpen,toggle:this.toggleMore},u.default.createElement(w.DropdownToggle,{className:"btn btn-secondary operation-item"},(0,m.gettext)("More")),u.default.createElement(w.DropdownMenu,null,u.default.createElement(w.DropdownItem,{className:"link-dropdown-container"},u.default.createElement(h.Link,{className:"link-dropdown-item",to:m.siteRoot+"my-libs/deleted/"},(0,m.gettext)("Deleted Libraries"))))))),u.default.createElement(p.default,{query:"(max-width: 768px)"},u.default.createElement("span",{className:"sf2-icon-plus mobile-toolbar-icon",title:(0,m.gettext)("New Library"),onClick:this.onCreateToggle}))),this.state.isCreateRepoDialogShow&&u.default.createElement(y.default,null,u.default.createElement(v.default,{libraryType:this.props.libraryType,onCreateRepo:this.onCreateRepo,onCreateToggle:this.onCreateToggle})))}}]),t}(u.default.Component);C.propTypes=S,t.default=C},1205:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(117),p=a(f),h=n(2),m=n(1206),g=a(m),y={sortBy:d.default.string.isRequired,sortOrder:d.default.string.isRequired,repoList:d.default.array.isRequired,sortRepoList:d.default.func.isRequired,onRenameRepo:d.default.func.isRequired,onDeleteRepo:d.default.func.isRequired,onTransferRepo:d.default.func.isRequired,onRepoDetails:d.default.func.isRequired,onRepoClick:d.default.func.isRequired},b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.sortByName=function(e){e.preventDefault();var t="asc"==n.props.sortOrder?"desc":"asc";n.props.sortRepoList("name",t)},n.sortByTime=function(e){e.preventDefault();var t="asc"==n.props.sortOrder?"desc":"asc";n.props.sortRepoList("time",t)},n.renderRepoListView=function(){return u.default.createElement(s.Fragment,null,n.props.repoList.map(function(e){return u.default.createElement(g.default,{key:e.repo_id,repo:e,isItemFreezed:n.state.isItemFreezed,onFreezedItem:n.onFreezedItem,onUnfreezedItem:n.onUnfreezedItem,onRenameRepo:n.props.onRenameRepo,onDeleteRepo:n.props.onDeleteRepo,onTransferRepo:n.props.onTransferRepo,onRepoDetails:n.props.onRepoDetails,onRepoClick:n.props.onRepoClick})}))},n.renderPCUI=function(){var e=h.storages.length>0,t="asc"===n.props.sortOrder?u.default.createElement("span",{className:"fas fa-caret-up"}):u.default.createElement("span",{className:"fas fa-caret-down"});return u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"4%"}),u.default.createElement("th",{width:"4%"},u.default.createElement("span",{className:"sr-only"},(0,h.gettext)("Library Type"))),u.default.createElement("th",{width:"38%"},u.default.createElement("a",{className:"d-block table-sort-op",href:"#",onClick:n.sortByName},(0,h.gettext)("Name")," ","name"===n.props.sortBy&&t)),u.default.createElement("th",{width:"14%"},u.default.createElement("span",{className:"sr-only"},(0,h.gettext)("Actions"))),u.default.createElement("th",{width:e?"15%":"20%"},(0,h.gettext)("Size")),e?u.default.createElement("th",{width:"10%"},(0,h.gettext)("Storage backend")):null,u.default.createElement("th",{width:e?"15%":"20%"},u.default.createElement("a",{className:"d-block table-sort-op",href:"#",onClick:n.sortByTime},(0,h.gettext)("Last Update")," ","time"===n.props.sortBy&&t)))),u.default.createElement("tbody",null,n.renderRepoListView()))},n.renderMobileUI=function(){var e="asc"===n.props.sortOrder?u.default.createElement("span",{className:"fas fa-caret-up"}):u.default.createElement("span",{className:"fas fa-caret-down"});return u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"10%"},u.default.createElement("span",{className:"sr-only"},(0,h.gettext)("Library Type"))),u.default.createElement("th",{width:"84%"},(0,h.gettext)("Sort:"),u.default.createElement("a",{className:"table-sort-op",href:"#",onClick:n.sortByName},(0,h.gettext)("name")," ","name"===n.props.sortBy&&e),u.default.createElement("a",{className:"table-sort-op",href:"#",onClick:n.sortByTime},(0,h.gettext)("last update")," ","time"===n.props.sortBy&&e)),u.default.createElement("th",{width:"6%"},u.default.createElement("span",{className:"sr-only"},(0,h.gettext)("Actions"))))),u.default.createElement("tbody",null,n.renderRepoListView()))},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement(p.default,{query:"(min-width: 768px)"},this.renderPCUI()),u.default.createElement(p.default,{query:"(max-width: 768px)"},this.renderMobileUI()))}}]),t}(u.default.Component);b.propTypes=y,t.default=b},1206:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(117),p=a(f),h=n(6),m=a(h),g=n(60),y=n(4),b=n(3),v=n(2),w=n(10),S=a(w),C=n(25),E=a(C),_=n(7),D=a(_),P=n(1207),L=a(P),R=n(315),M=a(R),T=n(1208),k=a(T),N=n(1209),Y=a(N),I=n(1210),O=a(I),Z=n(143),F=a(Z),x=n(1211),X=a(x),J={repo:d.default.object.isRequired,isItemFreezed:d.default.bool.isRequired,onFreezedItem:d.default.func.isRequired,onUnfreezedItem:d.default.func.isRequired,onRenameRepo:d.default.func.isRequired,onDeleteRepo:d.default.func.isRequired,onTransferRepo:d.default.func.isRequired,onRepoDetails:d.default.func.isRequired,onRepoClick:d.default.func.isRequired},H=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShow:!0,highlight:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShow:!1,highlight:!1})},n.onMenuItemClick=function(e){switch(e){case"Share":n.onShareToggle();break;case"Delete":n.onDeleteToggle();break;case"Rename":n.onRenameToggle();break;case"Transfer":n.onTransferToggle();break;case"History Setting":n.onHistorySettingToggle();break;case"Change Password":n.onChangePasswordToggle();break;case"Reset Password":n.onResetPasswordToggle();break;case"Folder Permission":break;case"Details":n.onRepoDetails();break;case"Label current state":n.onLabel()}},n.onRepoClick=function(){n.props.onRepoClick(n.props.repo)},n.onStarRepo=function(){n.state.isStarred?b.seafileAPI.unstarItem(n.props.repo.repo_id,"/").then(function(){n.setState({isStarred:!n.state.isStarred})}):b.seafileAPI.starItem(n.props.repo.repo_id,"/").then(function(){n.setState({isStarred:!n.state.isStarred})})},n.onShareToggle=function(){n.setState({isShareDialogShow:!n.state.isShareDialogShow})},n.onDeleteToggle=function(){n.setState({isDeleteDialogShow:!n.state.isDeleteDialogShow})},n.onRenameToggle=function(){n.props.onFreezedItem(),n.setState({isRenaming:!n.state.isRenaming})},n.onTransferToggle=function(){n.setState({isTransferDialogShow:!n.state.isTransferDialogShow})},n.onHistorySettingToggle=function(){n.setState({isHistorySettingDialogShow:!n.state.isHistorySettingDialogShow})},n.onChangePasswordToggle=function(){n.setState({isChangePasswordDialogShow:!n.state.isChangePasswordDialogShow})},n.onResetPasswordToggle=function(){n.setState({isResetPasswordDialogShow:!n.state.isResetPasswordDialogShow})},n.onRepoDetails=function(){n.props.onRepoDetails(n.props.repo)},n.onLabel=function(){},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.onRenameConfirm=function(e){var t=n.props.repo,a=t.repo_id;b.seafileAPI.renameRepo(a,e).then(function(){n.props.onRenameRepo(t,e),n.onRenameCancel()})},n.onRenameCancel=function(){n.props.onUnfreezedItem(),n.setState({isRenaming:!n.state.isRenaming})},n.onTransferRepo=function(e){var t=n.props.repo.repo_id;b.seafileAPI.transferRepo(t,e.email).then(function(e){n.props.onTransferRepo(t);var a=(0,v.gettext)("Successfully transferred the library.");D.default.success(a)}).catch(function(e){var t=(0,v.gettext)("Failed. Please check the network.");D.default.danger(t)}),n.onTransferToggle()},n.onDeleteRepo=function(e){b.seafileAPI.deleteRepo(e.repo_id).then(function(t){n.props.onDeleteRepo(e)}).catch(function(e){})},n.renderPCUI=function(){var e=n.props.repo,t=y.Utils.getLibIconUrl(e),a=y.Utils.getLibIconTitle(e),r=v.siteRoot+"library/"+e.repo_id+"/"+y.Utils.encodePath(e.repo_name)+"/";return u.default.createElement("tr",{className:n.state.highlight?"tr-highlight":"",onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,onClick:n.onRepoClick},u.default.createElement("td",{className:"text-center"},!n.state.isStarred&&u.default.createElement("i",{className:"far fa-star star-empty cursor-pointer",onClick:n.onStarRepo}),n.state.isStarred&&u.default.createElement("i",{className:"fas fa-star cursor-pointer",onClick:n.onStarRepo})),u.default.createElement("td",null,u.default.createElement("img",{src:t,title:a,alt:a,width:"24"})),u.default.createElement("td",null,n.state.isRenaming&&u.default.createElement(F.default,{name:e.repo_name,onRenameConfirm:n.onRenameConfirm,onRenameCancel:n.onRenameCancel}),!n.state.isRenaming&&e.repo_name&&u.default.createElement(g.Link,{to:r},e.repo_name),!n.state.isRenaming&&!e.repo_name&&(0,v.gettext)("Broken (please contact your administrator to fix this library)")),u.default.createElement("td",null,e.repo_name&&n.state.isOpIconShow&&u.default.createElement("div",null,u.default.createElement("a",{href:"#",className:"op-icon sf2-icon-share",title:(0,v.gettext)("Share"),onClick:n.onShareToggle}),u.default.createElement("a",{href:"#",className:"op-icon sf2-icon-delete",title:(0,v.gettext)("Delete"),onClick:n.onDeleteToggle}),u.default.createElement(X.default,{isPC:!0,repo:n.props.repo,onMenuItemClick:n.onMenuItemClick,onFreezedItem:n.props.onFreezedItem,onUnfreezedItem:n.onUnfreezedItem}))),u.default.createElement("td",null,e.size),v.storages.length>0&&u.default.createElement("td",null,e.storage_name),u.default.createElement("td",{title:(0,m.default)(e.last_modified).format("llll")},(0,m.default)(e.last_modified).fromNow()))},n.renderMobileUI=function(){var e=n.props.repo,t=y.Utils.getLibIconUrl(e),a=y.Utils.getLibIconTitle(e),r=v.siteRoot+"library/"+e.repo_id+"/"+y.Utils.encodePath(e.repo_name)+"/";return u.default.createElement("tr",{className:n.state.highlight?"tr-highlight":"",onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,onClick:n.onRepoClick},u.default.createElement("td",null,u.default.createElement("img",{src:t,title:a,alt:a,width:"24"})),u.default.createElement("td",null,n.state.isRenaming&&u.default.createElement(F.default,{name:e.repo_name,onRenameConfirm:n.onRenameConfirm,onRenameCancel:n.onRenameCancel}),!n.state.isRenaming&&e.repo_name&&u.default.createElement("div",null,u.default.createElement(g.Link,{to:r},e.repo_name)),!n.state.isRenaming&&!e.repo_name&&u.default.createElement("div",null,"(gettext('Broken (please contact your administrator to fix this library)'))"),u.default.createElement("span",{className:"item-meta-info"},e.size),u.default.createElement("span",{className:"item-meta-info",title:(0,m.default)(e.last_modified).format("llll")},(0,m.default)(e.last_modified).fromNow())),u.default.createElement("td",null,e.repo_name&&u.default.createElement(X.default,{repo:n.props.repo,onMenuItemClick:n.onMenuItemClick,onFreezedItem:n.props.onFreezedItem,onUnfreezedItem:n.onUnfreezedItem})))},n.state={isOpIconShow:!1,isStarred:n.props.repo.starred,isRenaming:!1,isShareDialogShow:!1,isDeleteDialogShow:!1,isTransferDialogShow:!1,isHistorySettingDialogShow:!1,isChangePasswordDialogShow:!1,isResetPasswordDialogShow:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.repo;return u.default.createElement(s.Fragment,null,u.default.createElement(p.default,{query:"(min-width: 768px)"},this.renderPCUI()),u.default.createElement(p.default,{query:"(max-width: 768px)"},this.renderMobileUI()),this.state.isShareDialogShow&&u.default.createElement(S.default,null,u.default.createElement(E.default,{itemType:"library",itemName:e.repo_name,itemPath:"/",repoID:e.repo_id,repoEncrypted:e.encrypted,enableDirPrivateShare:!0,userPerm:e.permission,toggleDialog:this.onShareToggle})),this.state.isDeleteDialogShow&&u.default.createElement(S.default,null,u.default.createElement(L.default,{repo:e,onDeleteRepo:this.onDeleteRepo,toggle:this.onDeleteToggle})),this.state.isTransferDialogShow&&u.default.createElement(S.default,null,u.default.createElement(M.default,{itemName:e.repo_name,submit:this.onTransferRepo,toggleDialog:this.onTransferToggle})),this.state.isHistorySettingDialogShow&&u.default.createElement(S.default,null,u.default.createElement(k.default,{repoID:e.repo_id,itemName:e.repo_name,toggleDialog:this.onHistorySettingToggle})),this.state.isChangePasswordDialogShow&&u.default.createElement(S.default,null,u.default.createElement(Y.default,{repoID:e.repo_id,repoName:e.repo_name,toggleDialog:this.onChangePasswordToggle})),this.state.isResetPasswordDialogShow&&u.default.createElement(S.default,null,u.default.createElement(O.default,{repoID:e.repo_id,toggleDialog:this.onResetPasswordToggle})))}}]),t}(u.default.Component);H.propTypes=J,t.default=H},1207:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(4),m={repo:d.default.object.isRequired,toggle:d.default.func.isRequired,onDeleteRepo:d.default.func.isRequired},g=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.toggle=function(){a.props.toggle()},a.onDeleteRepo=function(){a.props.onDeleteRepo(a.props.repo)},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.repo,t='<span class="op-target">'+h.Utils.HTMLescape(e.repo_name)+"</span>",n=(0,p.gettext)("Are you sure you want to delete %s ?");return n=n.replace("%s",t),u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("Delete Library")),u.default.createElement(f.ModalBody,null,u.default.createElement("p",{dangerouslySetInnerHTML:{__html:n}})),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"primary",onClick:this.onDeleteRepo},(0,p.gettext)("Delete")),u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel"))))}}]),t}(s.Component);g.propTypes=m,t.default=g},1208:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(7),h=a(p),m=n(5),g=n(3),y={itemName:d.default.string.isRequired,toggleDialog:d.default.func.isRequired,repoID:d.default.string.isRequired},b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.submit=function(){var e=n.state.keepDays;n.state.autoHistory&&(e=n.state.expireDays);var t=n.props.repoID;if(/^-?\d+$/.test(e)){var a=(0,f.gettext)("Successfully set library history.");g.seafileAPI.setRepoHistoryLimit(t,e).then(function(e){h.default.success(a),n.setState({keepDays:e.data.keep_days}),n.props.toggleDialog()})}else n.setState({errorInfo:(0,f.gettext)("Please enter a non-negative integer")})},n.onChange=function(e){var t=e.target.value;n.setState({keepDays:t,expireDays:t})},n.setLimitDays=function(e){"allHistory"===e?n.setState({keepDays:-1}):"noHistory"===e?n.setState({keepDays:0}):n.setState({disabled:!1}),n.setState({allHistory:"allHistory"===e,noHistory:"noHistory"===e,autoHistory:"autoHistory"===e})},n.state={keepDays:-1,expireDays:30,disabled:!0,allHistory:!0,noHistory:!1,autoHistory:!1,errorInfo:""},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;g.seafileAPI.getRepoHistoryLimit(this.props.repoID).then(function(t){e.setState({keepDays:t.data.keep_days,allHistory:t.data.keep_days<0,noHistory:0===t.data.keep_days,autoHistory:t.data.keep_days>0,disabled:!(t.data.keep_days>0),expireDays:t.data.keep_days>0?t.data.keep_days:30})})}},{key:"render",value:function(){var e=this,t=this.props.itemName;return u.default.createElement(m.Modal,{isOpen:!0,centered:!0},u.default.createElement(m.ModalHeader,{toggle:this.props.toggleDialog},u.default.createElement("span",{className:"op-target",title:t},t)," ",(0,f.gettext)("History Setting")),u.default.createElement(m.ModalBody,null,u.default.createElement(m.Form,null,!f.enableRepoHistorySetting&&u.default.createElement(m.FormGroup,null,u.default.createElement(m.Label,{className:"error"},(0,f.gettext)("Setting library history is disabled by Admin."))),u.default.createElement(m.FormGroup,{check:!0},u.default.createElement(m.Input,{type:"radio",name:"radio1",checked:this.state.allHistory,disabled:!f.enableRepoHistorySetting,onChange:function(){e.setLimitDays("allHistory")}})," ",u.default.createElement(m.Label,null,(0,f.gettext)("Keep full history"))),u.default.createElement(m.FormGroup,{check:!0},u.default.createElement(m.Input,{type:"radio",name:"radio1",checked:this.state.noHistory,disabled:!f.enableRepoHistorySetting,onChange:function(){e.setLimitDays("noHistory")}})," ",u.default.createElement(m.Label,null,(0,f.gettext)("Don't keep history"))),u.default.createElement(m.FormGroup,{check:!0},u.default.createElement(m.Input,{type:"radio",name:"radio1",checked:this.state.autoHistory,disabled:!f.enableRepoHistorySetting,onChange:function(){e.setLimitDays("autoHistory")}})," ",u.default.createElement(m.Label,null,(0,f.gettext)("Only keep a period of history:")),u.default.createElement(m.Input,{type:"text",className:"expire-input",value:this.state.expireDays,onChange:this.onChange,disabled:this.state.disabled})," ",u.default.createElement(m.Label,null,u.default.createElement("span",null,(0,f.gettext)("days")))),this.state.errorInfo&&u.default.createElement(m.Alert,{color:"danger"},this.state.errorInfo))),u.default.createElement(m.ModalFooter,null,u.default.createElement(m.Button,{color:"secondary",onClick:this.props.toggleDialog},(0,f.gettext)("Cancel")),u.default.createElement(m.Button,{color:"primary",onClick:this.submit},(0,f.gettext)("Submit"))))}}]),t}(u.default.Component);b.propTypes=y,t.default=b},1209:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(4),m=n(3),g=n(7),y=a(g),b={repoID:d.default.string.isRequired,repoName:d.default.string.isRequired,toggleDialog:d.default.func.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleOldPasswordInputChange=function(e){n.setState({oldPassword:e.target.value})},n.handleNewPasswordInputChange=function(e){n.setState({newPassword:e.target.value})},n.handleNewPasswordAgainInputChange=function(e){n.setState({newPasswordAgain:e.target.value})},n.formSubmit=function(e){var t=n.state,a=t.oldPassword,r=t.newPassword,o=t.newPasswordAgain;return a?r?r.length<p.repoPasswordMinLength?(n.setState({errorMsg:(0,p.gettext)("New password is too short")}),!1):o?r!=o?(n.setState({errorMsg:(0,p.gettext)("New passwords don't match")}),!1):(n.setState({submitBtnDisabled:!0}),void m.seafileAPI.changeEncryptedRepoPassword(n.props.repoID,a,r).then(function(){n.props.toggleDialog(),y.default.success((0,p.gettext)("Successfully changed library password."))}).catch(function(e){var t="";t=e.response?e.response.data?e.response.data.error_msg:(0,p.gettext)("Error"):(0,p.gettext)("Please check the network."),n.setState({errorMsg:t,submitBtnDisabled:!1})})):(n.setState({errorMsg:(0,p.gettext)("Please enter the new password again")}),!1):(n.setState({errorMsg:(0,p.gettext)("Please enter a new password")}),!1):(n.setState({errorMsg:(0,p.gettext)("Please enter the old password")}),!1)},n.state={oldPassword:"",newPassword:"",newPasswordAgain:"",submitBtnDisabled:!1,errorMsg:""},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=(e.repoID,e.repoName),n=e.toggleDialog;return u.default.createElement(f.Modal,{isOpen:!0,centered:!0,style:{height:"auto"}},u.default.createElement(f.ModalHeader,{toggle:n},u.default.createElement("span",{dangerouslySetInnerHTML:{__html:h.Utils.generateDialogTitle((0,p.gettext)("Change Password of Library {placeholder}"),t)}})),u.default.createElement(f.ModalBody,null,u.default.createElement("form",{id:"repo-change-passwd-form",action:"",method:"post"},u.default.createElement("label",{htmlFor:"passwd"},(0,p.gettext)("Old Password")),u.default.createElement("br",null),u.default.createElement("input",{type:"password",name:"old_passwd",className:"form-control",id:"passwd",value:this.state.oldPassword,onChange:this.handleOldPasswordInputChange}),u.default.createElement("br",null),u.default.createElement("label",{htmlFor:"new-passwd"},(0,p.gettext)("New Password")),u.default.createElement("span",{className:"tip"},(0,p.gettext)("(at least {placeholder} characters)").replace("{placeholder}",p.repoPasswordMinLength)),u.default.createElement("br",null),u.default.createElement("input",{type:"password",name:"new_passwd",className:"form-control",id:"new-passwd",value:this.state.newPassword,onChange:this.handleNewPasswordInputChange}),u.default.createElement("br",null),u.default.createElement("label",{htmlFor:"new-passwd-again"},(0,p.gettext)("New Password Again")),u.default.createElement("br",null),u.default.createElement("input",{type:"password",name:"new_passwd_again",className:"form-control",id:"new-passwd-again",value:this.state.newPasswordAgain,onChange:this.handleNewPasswordAgainInputChange}),u.default.createElement("br",null),this.state.errorMsg&&u.default.createElement(f.Alert,{color:"danger"},this.state.errorMsg))),u.default.createElement(f.ModalFooter,null,u.default.createElement("button",{className:"btn btn-primary",disabled:this.state.submitBtnDisabled,onClick:this.formSubmit},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);v.propTypes=b,t.default=v},121:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(6),p=a(f),h=n(2),m=n(4),g={noticeItem:d.default.object.isRequired,onNoticeItemClick:d.default.func.isRequired},y=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.onNoticeItemClick=function(){var e=a.props.noticeItem;!0!==e.seen&&a.props.onNoticeItemClick(e)},i=n,o(a,i)}return i(t,e),l(t,[{key:"generatorNoticeInfo",value:function(){var e=this.props.noticeItem,t=e.type,n=e.detail;if("add_user_to_group"===t){var a=n.group_staff_avatar_url,r=n.group_staff_name,o=h.siteRoot+"profile/"+n.group_staff_email+"/",i=h.siteRoot+"group/"+n.group_id+"/",l=n.group_name,s=(0,h.gettext)("User {user_link} has added you to {group_link}"),u="<a href="+o+">"+r+"</a>",c="<a href="+i+">"+l+"</a>";return s=s.replace("{user_link}",u),s=s.replace("{group_link}",c),{avatar_url:a,notice:s}}if("repo_share"===t){var d=n.share_from_user_avatar_url,f=n.share_from_user_name,p=n.repo_name,g=h.siteRoot+"library/"+n.repo_id+"/"+p+"/",y=n.path,b="",v="<a href="+g+">"+p+"</a>";return b="/"===y?(0,h.gettext)("{share_from} has shared a library named {repo_link} to you."):(0,h.gettext)("{share_from} has shared a folder named {repo_link} to you."),b=b.replace("{share_from}",f),b=b.replace("{repo_link}",v),{avatar_url:d,notice:b}}if("repo_share_to_group"===t){var w=n.share_from_user_avatar_url,S=n.share_from_user_name,C=n.repo_name,E=h.siteRoot+"library/"+n.repo_id+"/"+C+"/",_=h.siteRoot+"group/"+n.group_id+"/",D=n.group_name,P=n.path,L="",R="<a href="+E+">"+C+"</a>",M="<a href="+_+">"+D+"</a>";return L="/"===P?(0,h.gettext)("{share_from} has shared a library named {repo_link} to group {group_link}."):(0,h.gettext)("{share_from} has shared a folder named {repo_link} to group {group_link}."),L=L.replace("{share_from}",S),L=L.replace("{repo_link}",R),L=L.replace("{group_link}",M),{avatar_url:w,notice:L}}if("repo_transfer"===t){var T=n.transfer_from_user_avatar_url,k=n.transfer_from_user_name,N=n.repo_name,Y=h.siteRoot+"library/"+n.repo_id+"/"+N+"/",I=(0,h.gettext)("{user} has transfered a library named {repo_link} to you."),O="<a href="+Y+">"+N+"</a>";return I=I.replace("{user}",k),I=I.replace("{repo_link}",O),{avatar_url:T,notice:I}}if("file_uploaded"===t){var Z=n.uploaded_user_avatar_url,F=n.file_name,x=h.siteRoot+"lib/"+n.repo_id+"/file"+m.Utils.encodePath(n.file_path),X=n.folder_name,J=h.siteRoot+"library/"+n.repo_id+"/"+n.repo_name+m.Utils.encodePath(n.folder_path),H="";if(n.repo_id){var j="<a href="+x+">"+F+"</a>",B="<a href="+J+">"+X+"</a>";H=(0,h.gettext)("A file named {upload_file_link} is uploaded to {uploaded_link}."),H=H.replace("{upload_file_link}",j),H=H.replace("{uploaded_link}",B)}else H=(0,h.gettext)("A file name {file_name} is uploaded to {dest}."),H=H.replace("{file_name}",F),H=H.replace("{dest}","<strong>Deleted Library</strong>");return{avatar_url:Z,notice:H}}if("file_comment"===t){var Q=n.author_avatar_url,G=n.author_name,A=n.file_name,W=h.siteRoot+"lib/"+n.repo_id+"/file"+n.file_path,U=(0,h.gettext)("File {file_link} has a new comment form user {author}."),q="<a href="+W+">"+A+"</a>";return U=U.replace("{file_link}",q),U=U.replace("{author}",G),{avatar_url:Q,notice:U}}if("draft_comment"===t){var K=n.author_avatar_url,z=n.author_name,V=n.draft_id,$=h.siteRoot+"drafts/"+V+"/",ee=(0,h.gettext)("{draft_link} has a new comment from user {author}."),te="<a href="+$+">"+(0,h.gettext)("Draft")+"#"+V+"</a>";return ee=ee.replace("{draft_link}",te),ee=ee.replace("{author}",z),{avatar_url:K,notice:ee}}if("draft_reviewer"===t){var ne=n.request_user_avatat_url,ae=n.request_user_name,re=n.draft_id,oe=h.siteRoot+"drafts/"+re+"/",ie=(0,h.gettext)("{from_user} has sent you a request for {draft_link}."),le="<a href="+oe+">"+(0,h.gettext)("Draft")+"#"+re+"</a>";return ie=ie.replace("{from_user}",ae),ie=ie.replace("{draft_link}",le),{avatar_url:ne,notice:ie}}return{avatar_url:null,notice:null}}},{key:"render",value:function(){var e=this.props.noticeItem,t=this.generatorNoticeInfo(),n=t.avatar_url,a=t.notice;return n||a?u.default.createElement("li",{onClick:this.onNoticeItemClick,className:e.seen?"read":"unread"},u.default.createElement("div",{className:"notice-item"},u.default.createElement("div",{className:"main-info"},u.default.createElement("img",{src:n,width:"32",height:"32",className:"avatar"}),u.default.createElement("p",{className:"brief",dangerouslySetInnerHTML:{__html:a}})),u.default.createElement("p",{className:"time"},(0,p.default)(e.timestamp).fromNow()))):""}}]),t}(u.default.Component);y.propTypes=g,t.default=y},1210:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(7),p=(a(f),n(5)),h=n(2),m=(n(4),n(3)),g={repoID:d.default.string.isRequired,toggleDialog:d.default.func.isRequired},y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={errMessage:"",showLoading:!0,showSuccess:!1,showError:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;m.seafileAPI.resetAndSendEncryptedRepoPassword(this.props.repoID).then(function(t){e.setState({showLoading:!1}),e.setState({showSuccess:!0})}).catch(function(t){t.response&&(e.setState({errMessage:t.response.data.error_msg}),e.setState({showLoading:!1}),e.setState({showError:!0}))})}},{key:"render",value:function(){var e="<strong>"+h.contactEmail+"</strong>",t=(0,h.gettext)("New password has been sent to your email {mail}. Please check your mailbox. If you don\u2019t receive the password, please check if your email address is properly configured.").replace("{mail}",e);return u.default.createElement(p.Modal,{isOpen:!0,centered:!0},u.default.createElement(p.ModalHeader,{toggle:this.props.toggleDialog},(0,h.gettext)("Reset library password")),u.default.createElement(p.ModalBody,null,this.state.showLoading&&u.default.createElement("span",null,(0,h.gettext)("Sending new password...")),this.state.showSuccess&&u.default.createElement("div",{dangerouslySetInnerHTML:{__html:t}}),this.state.showError&&u.default.createElement("span",{className:"err-message"},this.state.errMessage)))}}]),t}(u.default.Component);y.propTypes=g,t.default=y},1211:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h={isPC:d.default.bool,repo:d.default.object.isRequired,onFreezedItem:d.default.func.isRequired,onUnfreezedItem:d.default.func.isRequired,onMenuItemClick:d.default.func.isRequired},m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMenuItemClick=function(e){var t=e.target.dataset.toggle;n.props.onMenuItemClick(t)},n.onDropdownToggleClick=function(e){n.toggleOperationMenu(e)},n.toggleOperationMenu=function(e){var t=e.target?e.target.dataset:null;if(t&&t.toggle&&"Rename"===t.toggle)return void n.setState({isItemMenuShow:!n.state.isItemMenuShow});n.setState({isItemMenuShow:!n.state.isItemMenuShow},function(){n.state.isItemMenuShow?n.props.onFreezedItem():n.props.onUnfreezedItem()})},n.generatorOperations=function(){var e=n.props.repo,t=e.encrypted&&p.enableResetEncryptedRepoPassword&&p.isEmailConfigured,a=["Rename","Transfer","History Setting"];return e.encrypted&&a.push("Change Password"),t&&a.push("Reset Password"),p.folderPermEnabled&&a.push("Folder Permission"),a.push("Details"),n.props.isPC&&p.enableRepoSnapshotLabel&&a.push("Label current state"),a},n.translateOperations=function(e){var t="";switch(e){case"Share":t=(0,p.gettext)("Share");break;case"Delete":t=(0,p.gettext)("Delete");break;case"Rename":t=(0,p.gettext)("Rename");break;case"Transfer":t=(0,p.gettext)("Transfer");break;case"History Setting":t=(0,p.gettext)("History Setting");break;case"Change Password":t=(0,p.gettext)("Change Password");break;case"Reset Password":t=(0,p.gettext)("Reset Password");break;case"Folder Permission":t=(0,p.gettext)("Folder Permission");break;case"Details":t=(0,p.gettext)("Details");break;case"Label current state":t=(0,p.gettext)("Label current state")}return t},n.state={isItemMenuShow:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.generatorOperations();return this.props.isPC?u.default.createElement(f.Dropdown,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu},u.default.createElement(f.DropdownToggle,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down",title:(0,p.gettext)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow}),u.default.createElement(f.DropdownMenu,null,t.map(function(t,n){return u.default.createElement(f.DropdownItem,{key:n,"data-toggle":t,onClick:e.onMenuItemClick},e.translateOperations(t))}))):(t.unshift("Share"),t.unshift("Delete"),u.default.createElement(f.Dropdown,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu},u.default.createElement(f.DropdownToggle,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down ml-0",title:(0,p.gettext)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow}),u.default.createElement("div",{className:this.state.isItemMenuShow?"":"d-none",onClick:this.toggleOperationMenu},u.default.createElement("div",{className:"mobile-operation-menu-bg-layer"}),u.default.createElement("div",{className:"mobile-operation-menu"},t.map(function(t,n){return u.default.createElement(f.DropdownItem,{key:n,className:"mobile-menu-item","data-toggle":t,onClick:e.onMenuItemClick},e.translateOperations(t))})))))}}]),t}(u.default.Component);m.propTypes=h,t.default=m},1212:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(60),d=n(6),f=a(d),p=n(2),h=n(3),m=n(7),g=a(m),y=n(80),b=a(y),v=n(11),w=a(v);f.default.locale(p.lang);var S=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refreshDeletedRepoList=function(e){var t=n.state.deletedRepoList.filter(function(t){return t.repo_id!==e});n.setState({deletedRepoList:t})},n.state={deletedRepoList:[],isLoading:!0},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;h.seafileAPI.listDeletedRepo().then(function(t){e.setState({deletedRepoList:t.data,isLoading:!1})})}},{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"main-panel-north"},u.default.createElement(b.default,{onSearchedClick:this.props.onSearchedClick})),u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("div",{className:"path-container"},u.default.createElement(c.Link,{to:p.siteRoot+"my-libs/"},(0,p.gettext)("My Libraries")),u.default.createElement("span",{className:"path-split"},"/"),u.default.createElement("span",null,(0,p.gettext)("Deleted Libraries")))),u.default.createElement("div",{className:"cur-view-content"},this.state.isLoading&&u.default.createElement(w.default,null),!this.state.isLoading&&0===this.state.deletedRepoList.length&&u.default.createElement("div",{className:"message empty-tip"},u.default.createElement("h2",null,(0,p.gettext)("No deleted libraries."))),0!==this.state.deletedRepoList.length&&u.default.createElement("div",null,u.default.createElement("p",{className:"tip"},(0,p.gettext)("Tip: libraries deleted 30 days ago will be cleaned automatically.")),u.default.createElement(C,{deletedRepoList:this.state.deletedRepoList,refreshDeletedRepoList:this.refreshDeletedRepoList}))))))}}]),t}(s.Component),C=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props.deletedRepoList;return u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{style:{width:"4%"}}),u.default.createElement("th",{style:{width:"52%"}},(0,p.gettext)("Name")),u.default.createElement("th",{style:{width:"30%"}},(0,p.gettext)("Deleted Time")),u.default.createElement("th",{style:{width:"14%"}}))),u.default.createElement("tbody",null,t&&t.map(function(t){return u.default.createElement(E,{key:t.repo_id,repo:t,refreshDeletedRepoList:e.props.refreshDeletedRepoList})})))}}]),t}(s.Component),E=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.props.isItemFreezed||n.setState({hideRestoreMenu:!1,highlight:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({hideRestoreMenu:!0,highlight:!1})},n.restoreDeletedRepo=function(){var e=n.props.repo.repo_id,t=n.props.repo.repo_name;h.seafileAPI.restoreDeletedRepo(e).then(function(a){var r=(0,p.gettext)("Successfully restored the library.")+"  "+t;g.default.success(r),n.props.refreshDeletedRepoList(e)}).catch(function(e){var t=(0,p.gettext)("Failed. Please check the network.");g.default.danger(t)})},n.state={hideRestoreMenu:!0,highlight:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=f.default.utc(this.props.repo.del_time).toDate();return e=(0,f.default)(e).fromNow(),u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("td",{className:"text-center"},u.default.createElement("img",{src:p.siteRoot+"media/img/lib/48/lib.png",alt:""})),u.default.createElement("td",{className:"name"},this.props.repo.repo_name),u.default.createElement("td",{className:"update"},e),u.default.createElement("td",null,this.state.highlight&&u.default.createElement("a",{href:"#",onClick:this.restoreDeletedRepo,className:"op-icon sf2-icon-reply repo-share-btn",title:(0,p.gettext)("Restore"),"aria-label":(0,p.gettext)("Restore")})))}}]),t}(s.Component);t.default=S},1213:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(22),p=a(f),h=n(5),m=n(3),g=n(2),y=n(4),b=n(125),v=a(b),w=n(7),S=a(w),C=n(11),E=a(C),_=n(10),D=a(_),P=n(80),L=a(P),R=n(313),M=a(R),T=n(1214),k=a(T),N=n(316),Y=a(N),I={onShowSidePanel:d.default.func.isRequired,onSearchedClick:d.default.func.isRequired},O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onCreateRepo=function(e){m.seafileAPI.createPublicRepo(e).then(function(e){var t={repo_id:e.data.id,repo_name:e.data.name,permission:e.data.permission,size:e.data.size,owner_name:e.data.owner_name,owner_email:e.data.owner,mtime:e.data.mtime,encrypted:e.data.encrypted},a=new v.default(t),r=n.addRepoItem(a);n.setState({repoList:r}),n.onCreateRepoToggle()}).catch(function(){})},n.onRepoSelectedHandler=function(e){e.forEach(function(e){m.seafileAPI.selectOwnedRepoToPublic(e.repo_id,{share_type:"public",permission:e.sharePermission}).then(function(){var t=n.addRepoItem(e);n.setState({repoList:t})}).catch(function(){})})},n.onItemUnshare=function(e){m.seafileAPI.unshareRepo(e.repo_id,{share_type:"public"}).then(function(){var t=n.state.repoList.filter(function(t){return t.repo_id!==e.repo_id});n.setState({repoList:t}),S.default.success("Successfully unshared 1 item.")})},n.onItemDelete=function(){},n.addRepoItem=function(e){for(var t=!1,a=0,r=n.state.repoList,o=0;o<r.length;o++)if(e.repo_id===r[o].repo_id){t=!0,a=o;break}t&&n.state.repoList.splice(a,1);var i=n.state.repoList.map(function(e){return e});return i.unshift(e),i},n.onAddRepoToggle=function(){n.setState({isCreateMenuShow:!n.state.isCreateMenuShow})},n.onCreateRepoToggle=function(){n.setState({isCreateRepoDialogShow:!n.state.isCreateRepoDialogShow})},n.onSelectRepoToggle=function(){n.setState({isSelectRepoDialpgShow:!n.state.isSelectRepoDialpgShow})},n.sortItems=function(e,t){p.default.save("seafile-repo-sort-by",e),p.default.save("seafile-repo-sort-order",t),n.setState({sortBy:e,sortOrder:t,repoList:y.Utils.sortRepos(n.state.repoList,e,t)})},n.state={isLoading:!0,errMessage:"",emptyTip:"",repoList:[],sortBy:p.default.load("seafile-repo-sort-by")||"name",sortOrder:p.default.load("seafile-repo-sort-order")||"asc",libraryType:"public",isCreateMenuShow:!1,isCreateRepoDialogShow:!1,isSelectRepoDialpgShow:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;m.seafileAPI.listRepos({type:"public"}).then(function(t){var n=t.data.repos.map(function(e){return new v.default(e)});e.setState({isLoading:!1,repoList:y.Utils.sortRepos(n,e.state.sortBy,e.state.sortOrder)})}).catch(function(t){t.response?403==t.response.status?(e.setState({isLoading:!1,errMessage:(0,g.gettext)("Permission denied")}),location.href=g.loginUrl+"?next="+encodeURIComponent(location.href)):e.setState({isLoading:!1,errMessage:(0,g.gettext)("Error")}):e.setState({isLoading:!1,errMessage:(0,g.gettext)("Please check the network.")})})}},{key:"render",value:function(){var e=this.state.errMessage,t=u.default.createElement("div",{className:"empty-tip"},u.default.createElement("h2",null,(0,g.gettext)("No public libraries")),u.default.createElement("p",null,(0,g.gettext)('You can create a public library by clicking the "New Library" button, others can view and download this library.')));return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"main-panel-north border-left-show"},u.default.createElement("div",{className:"cur-view-toolbar"},u.default.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu",onClick:this.props.onShowSidePanel}),u.default.createElement("div",{className:"operation"},u.default.createElement(h.Dropdown,{isOpen:this.state.isCreateMenuShow,toggle:this.onAddRepoToggle},u.default.createElement(h.DropdownToggle,{className:"btn btn-secondary operation-item"},u.default.createElement("i",{className:"fas fa-plus-square text-secondary mr-1"}),(0,g.gettext)("Add Library")),u.default.createElement(h.DropdownMenu,null,u.default.createElement(h.DropdownItem,{onClick:this.onSelectRepoToggle},(0,g.gettext)("Share existing libraries")),u.default.createElement(h.DropdownItem,{onClick:this.onCreateRepoToggle},(0,g.gettext)("New Library")))))),u.default.createElement(L.default,{onSearchedClick:this.props.onSearchedClick})),u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,g.gettext)("Shared with all"))),u.default.createElement("div",{className:"cur-view-content"},this.state.isLoading&&u.default.createElement(E.default,null),!this.state.isLoading&&e&&e,!this.state.isLoading&&0===this.state.repoList.length&&t,!this.state.isLoading&&this.state.repoList.length>0&&u.default.createElement(Y.default,{libraryType:this.state.libraryType,repoList:this.state.repoList,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortItems:this.sortItems,onItemUnshare:this.onItemUnshare,onItemDelete:this.onItemDelete})))),this.state.isCreateRepoDialogShow&&u.default.createElement(D.default,null,u.default.createElement(M.default,{libraryType:this.state.libraryType,onCreateToggle:this.onCreateRepoToggle,onCreateRepo:this.onCreateRepo})),this.state.isSelectRepoDialpgShow&&u.default.createElement(D.default,null,u.default.createElement(k.default,{onRepoSelectedHandler:this.onRepoSelectedHandler,onShareRepoDialogClose:this.onSelectRepoToggle})))}}]),t}(u.default.Component);O.propTypes=I,t.default=O},1214:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(6),p=a(f),h=n(5),m=n(3),g=n(2),y=n(4),b=n(125),v=a(b),w={repo:d.default.object.isRequired,onRepoSelect:d.default.func.isRequired,onPermissionChange:d.default.func.isRequired},S=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.onRepoSelect=function(e){var t=e.target.checked;a.props.onRepoSelect(a.props.repo,t)},a.onPermissionChange=function(e){var t=e.target.value,n=a.props.repo;a.props.onPermissionChange(n,t)},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.repo,t=y.Utils.getLibIconUrl(e);return u.default.createElement("tr",null,u.default.createElement("td",{className:"text-center"},u.default.createElement("input",{type:"checkbox",className:"vam",name:"repo",onChange:this.onRepoSelect})),u.default.createElement("td",{className:"text-center"},u.default.createElement("img",{src:t,width:"24",alt:(0,g.gettext)("icon")})),u.default.createElement("td",{className:"name"},e.repo_name),u.default.createElement("td",null,(0,p.default)(e.last_modified).fromNow()),u.default.createElement("td",null,u.default.createElement(h.Input,{style:{height:"1.5rem",padding:0},type:"select",name:"select",onChange:this.onPermissionChange,value:e.sharePermission},u.default.createElement("option",{value:"rw"},(0,g.gettext)("Read-Write")),u.default.createElement("option",{value:"r"},(0,g.gettext)("Read-Only")))))}}]),t}(u.default.Component);S.propTypes=w;var C={onRepoSelectedHandler:d.default.func.isRequired,onShareRepoDialogClose:d.default.func.isRequired},E=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onRepoSelect=function(e,t){var a=[];t?(n.state.selectedRepoList.push(e),a=n.state.selectedRepoList):a=n.state.selectedRepoList.filter(function(t){return t.repo_id!==e.repo_id}),n.setState({selectedRepoList:a})},n.onPermissionChange=function(e,t){var a=n.state.repoList.map(function(n){return n.repo_id===e.repo_id&&(n.sharePermission=t),n});n.setState({repoList:a})},n.handleSubmit=function(){if(0===n.state.selectedRepoList.length){var e=(0,g.gettext)("Please select a library to share.");return void n.setState({errMessage:e})}n.props.onRepoSelectedHandler(n.state.selectedRepoList),n.onCloseDialog()},n.onCloseDialog=function(){n.props.onShareRepoDialogClose()},n.state={repoList:[],currentRepo:null,permission:"rw",selectedRepoList:[],errMessage:""},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;m.seafileAPI.listRepos({type:"mine"}).then(function(t){var n=t.data.repos.map(function(e){var t=new v.default(e);return t.sharePermission="rw",t});e.setState({repoList:n})})}},{key:"render",value:function(){var e=this;return u.default.createElement(h.Modal,{isOpen:!0},u.default.createElement(h.ModalHeader,{toggle:this.toggle},(0,g.gettext)("Select libraries to share")),u.default.createElement(h.ModalBody,{className:"dialog-list-container"},u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"4%"}),u.default.createElement("th",{width:"6%"}),u.default.createElement("th",{width:"35%"},(0,g.gettext)("Name")),u.default.createElement("th",{width:"25%"},(0,g.gettext)("Last Update")),u.default.createElement("th",{width:"30%"},(0,g.gettext)("Permission")))),u.default.createElement("tbody",null,this.state.repoList.map(function(t,n){return u.default.createElement(S,{key:n,repo:t,onRepoSelect:e.onRepoSelect,onPermissionChange:e.onPermissionChange})})))),this.state.errMessage&&u.default.createElement(h.Alert,{color:"danger",className:"mt-2"},this.state.errMessage),u.default.createElement(h.ModalFooter,null,u.default.createElement(h.Button,{color:"secondary",onClick:this.onCloseDialog},(0,g.gettext)("Close")),u.default.createElement(h.Button,{color:"primary",onClick:this.handleSubmit},(0,g.gettext)("Submit"))))}}]),t}(u.default.Component);E.propTypes=C,t.default=E},1215:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(6),p=a(f),h=n(5),m=n(60),g=n(4),y=n(2),b=n(10),v=a(b),w=n(25),S=a(w),C=n(143),E=a(C),_=n(3),D={currentGroup:d.default.object,libraryType:d.default.string,repo:d.default.object.isRequired,isItemFreezed:d.default.bool.isRequired,onFreezedItem:d.default.func.isRequired,onUnfreezedItem:d.default.func.isRequired,onItemUnshare:d.default.func.isRequired,onItmeDetails:d.default.func,onItemRename:d.default.func},P=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.props.isItemFreezed||n.setState({highlight:!0,isOperationShow:!0})},n.onMouseOver=function(){n.props.isItemFreezed||n.setState({highlight:!0,isOperationShow:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({highlight:!1,isOperationShow:!1})},n.clickOperationMenuToggle=function(e){n.toggleOperationMenu(e)},n.toggleOperationMenu=function(e){var t=e.target?e.target.dataset:null;if(t&&t.toggle&&"Rename"===t.toggle)return void n.setState({isItemMenuShow:!n.state.isItemMenuShow});n.setState({isItemMenuShow:!n.state.isItemMenuShow},function(){n.state.isItemMenuShow?n.props.onFreezedItem():(n.props.onUnfreezedItem(),n.setState({highlight:!1,isOperationShow:!1}))})},n.getRepoComputeParams=function(){var e=n.props.repo;return{iconUrl:g.Utils.getLibIconUrl(e),iconTitle:g.Utils.getLibIconTitle(e),libPath:y.siteRoot+"library/"+e.repo_id+"/"+g.Utils.encodePath(e.repo_name)+"/"}},n.onMenuItemClick=function(e){switch(e.target.dataset.toggle){case"Rename":n.onItemRenameToggle();break;case"Folder Permission":n.onItemPermisionChanged();break;case"Details":n.onItemDetails();break;case"Share":n.onItemShare();break;case"Unshare":n.onItemUnshare()}},n.onItemRenameToggle=function(){n.props.onFreezedItem(),n.setState({isRenaming:!n.state.isRenaming,isOperationShow:!n.state.isOperationShow})},n.onRenameConfirm=function(e){n.props.onItemRename(n.props.repo,e),n.onRenameCancel()},n.onRenameCancel=function(){n.props.onUnfreezedItem(),n.setState({isRenaming:!n.state.isRenaming})},n.onItemPermisionChanged=function(){},n.onItemDetails=function(){n.props.onItemDetails(n.props.repo)},n.onItemShare=function(){n.setState({isShowSharedDialog:!0})},n.onItemUnshare=function(){n.props.onItemUnshare(n.props.repo)},n.onItemDelete=function(){n.props.onItemDelete(n.props.repo)},n.toggleShareDialog=function(){n.setState({isShowSharedDialog:!1})},n.translateMenuItem=function(e){var t="";switch(e){case"Rename":t=(0,y.gettext)("Rename");break;case"Folder Permission":t=(0,y.gettext)("Folder Premission");break;case"Details":t=(0,y.gettext)("Details");break;case"Unshare":t=(0,y.gettext)("Unshare");break;case"Share":t=(0,y.gettext)("Share")}return t},n.generatorOperations=function(){var e=n.props,t=e.repo,a=e.currentGroup,r=a&&a.admins&&a.admins.indexOf(y.username)>-1,o=t.owner_email===y.username,i=t.is_admin,l=[];return y.isPro?-1!=t.owner_email.indexOf("@seafile_group")?r&&t.owner_email==a.id+"@seafile_group"?(n.isDeparementOnwerGroupMember=!0,l=y.folderPermEnabled?["Rename","Folder Permission","Details"]:["Rename","Details"]):l.push("Unshare"):((o||i)&&l.push("Share"),(r||o||i)&&l.push("Unshare")):(o&&l.push("Share"),(r||o)&&l.push("Unshare")),l},n.generatorMobileMenu=function(){var e=[];if(n.props.libraryType&&"public"===n.props.libraryType){var t=n.props.repo.owner_email===y.username;(y.isSystemStaff||t)&&e.push("Unshare")}else e=n.generatorOperations(),n.isDeparementOnwerGroupMember&&(e.unshift("Unshare"),e.unshift("Share"));return u.default.createElement(h.Dropdown,{isOpen:n.state.isItemMenuShow,toggle:n.toggleOperationMenu},u.default.createElement(h.DropdownToggle,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down",title:(0,y.gettext)("More Operations"),"data-toggle":"dropdown","aria-expanded":n.state.isItemMenuShow,onClick:n.clickOperationMenuToggle}),u.default.createElement("div",{className:n.state.isItemMenuShow?"":"d-none",onClick:n.toggleOperationMenu},u.default.createElement("div",{className:"mobile-operation-menu-bg-layer"}),u.default.createElement("div",{className:"mobile-operation-menu"},e.map(function(e,t){return u.default.createElement(h.DropdownItem,{key:t,"data-toggle":e,onClick:n.onMenuItemClick},n.translateMenuItem(e))}))))},n.generatorPCMenu=function(){var e=[];if(n.props.libraryType&&"public"===n.props.libraryType){var t=n.props.repo.owner_email===y.username;(y.isSystemStaff||t)&&e.push("unshare")}else e=n.generatorOperations();var a=u.default.createElement("a",{href:"#",className:"op-icon sf2-icon-share",title:(0,y.gettext)("Share"),onClick:n.onItemShare}),r=u.default.createElement("a",{href:"#",className:"op-icon sf2-icon-x3",title:(0,y.gettext)("Unshare"),onClick:n.onItemUnshare}),o=u.default.createElement("a",{href:"#",className:"op-icon sf2-icon-delete",title:(0,y.gettext)("Delete"),onClick:n.onItemDelete});return n.isDeparementOnwerGroupMember?u.default.createElement(s.Fragment,null,a,o,u.default.createElement(h.Dropdown,{isOpen:n.state.isItemMenuShow,toggle:n.toggleOperationMenu},u.default.createElement(h.DropdownToggle,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down",title:(0,y.gettext)("More Operations"),"data-toggle":"dropdown","aria-expanded":n.state.isItemMenuShow,onClick:n.clickOperationMenuToggle}),u.default.createElement(h.DropdownMenu,null,e.map(function(e,t){return u.default.createElement(h.DropdownItem,{key:t,"data-toggle":e,onClick:n.onMenuItemClick},n.translateMenuItem(e))})))):2==e.length?u.default.createElement(s.Fragment,null,a,r):1==e.length&&"share"===e[0]?a:1==e.length&&"unshare"===e[0]?r:null},n.onStarRepo=function(){n.state.isStarred?_.seafileAPI.unstarItem(n.props.repo.repo_id,"/").then(function(){n.setState({isStarred:!n.state.isStarred})}):_.seafileAPI.starItem(n.props.repo.repo_id,"/").then(function(){n.setState({isStarred:!n.state.isStarred})})},n.renderPCUI=function(){var e=n.getRepoComputeParams(),t=e.iconUrl,a=e.iconTitle,r=e.libPath,o=n.props.repo,i=o.owner_email.indexOf("@seafile_group")>-1;return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{className:n.state.highlight?"tr-highlight":"",onMouseEnter:n.onMouseEnter,onMouseOver:n.onMouseOver,onMouseLeave:n.onMouseLeave},u.default.createElement("td",{className:"text-center"},!n.state.isStarred&&u.default.createElement("i",{className:"far fa-star star-empty cursor-pointer",onClick:n.onStarRepo}),n.state.isStarred&&u.default.createElement("i",{className:"fas fa-star cursor-pointer",onClick:n.onStarRepo})),u.default.createElement("td",null,u.default.createElement("img",{src:t,title:o.iconTitle,alt:a,width:"24"})),u.default.createElement("td",null,n.state.isRenaming?u.default.createElement(E.default,{name:o.repo_name,onRenameConfirm:n.onRenameConfirm,onRenameCancel:n.onRenameCancel}):u.default.createElement(m.Link,{to:r},o.repo_name)),u.default.createElement("td",null,n.state.isOperationShow&&n.generatorPCMenu()),u.default.createElement("td",null,o.size),u.default.createElement("td",{title:(0,p.default)(o.last_modified).format("llll")},(0,p.default)(o.last_modified).fromNow()),u.default.createElement("td",{title:o.owner_contact_email},o.owner_name)),n.state.isShowSharedDialog&&u.default.createElement(v.default,null,u.default.createElement(S.default,{itemType:"library",itemName:o.repo_name,itemPath:"/",repoID:o.repo_id,repoEncrypted:o.encrypted,enableDirPrivateShare:!0,userPerm:o.permission,isAdmin:o.is_admin,isGroupOwnedRepo:i,toggleDialog:n.toggleShareDialog})))},n.renderMobileUI=function(){var e=n.getRepoComputeParams(),t=e.iconUrl,a=e.iconTitle,r=e.libPath,o=n.props.repo,i=o.owner_email.indexOf("@seafile_group")>-1;return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{className:n.state.highlight?"tr-highlight":"",onMouseEnter:n.onMouseEnter,onMouseOver:n.onMouseOver,onMouseLeave:n.onMouseLeave},u.default.createElement("td",null,u.default.createElement("img",{src:t,title:a,width:"24",alt:a})),u.default.createElement("td",null,n.state.isRenaming?u.default.createElement(E.default,{name:o.repo_name,onRenameConfirm:n.onRenameConfirm,onRenameCancel:n.onRenameCancel}):u.default.createElement(m.Link,{to:r},o.repo_name),u.default.createElement("br",null),u.default.createElement("span",{className:"item-meta-info",title:o.owner_contact_email},o.owner_name),u.default.createElement("span",{className:"item-meta-info"},o.size),u.default.createElement("span",{className:"item-meta-info",title:(0,p.default)(o.last_modified).format("llll")},(0,p.default)(o.last_modified).fromNow())),u.default.createElement("td",null,n.generatorMobileMenu())),n.state.isShowSharedDialog&&u.default.createElement(v.default,null,u.default.createElement(S.default,{itemType:"library",itemName:o.repo_name,itemPath:"/",repoID:o.repo_id,repoEncrypted:o.encrypted,enableDirPrivateShare:!0,userPerm:o.permission,isAdmin:o.is_admin,isGroupOwnedRepo:i,toggleDialog:n.toggleShareDialog})))},n.state={highlight:!1,isOperationShow:!1,isItemMenuShow:!1,isShowSharedDialog:!1,isRenaming:!1,isStarred:n.props.repo.starred},n.isDeparementOnwerGroupMember=!1,n}return i(t,e),l(t,[{key:"render",value:function(){return window.innerWidth>=768?this.renderPCUI():this.renderMobileUI()}}]),t}(u.default.Component);P.propTypes=D,t.default=P},1216:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),d=n(1),f=a(d),p=n(22),h=a(p),m=n(6),g=a(m),y=n(2),b=n(3),v=n(4),w=n(276),S=a(w),C=n(14),E=a(C),_=n(24),D=a(_),P=n(103),L=a(P),R=n(31),M=a(R),T=n(95),k=a(T),N=n(162),Y=a(N),I=n(7),O=a(I),Z=n(10),F=a(Z),x=n(309),X=a(x),J=n(1217),H=a(J),j=n(1219),B=a(j),Q=n(299),G=a(Q),A={pathPrefix:f.default.array.isRequired,onTabNavClick:f.default.func.isRequired,onMenuClick:f.default.func.isRequired,repoID:f.default.string},W=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showDirentDetail=function(){n.setState({isDirentDetailShow:!0})},n.closeDirentDetail=function(){n.setState({isDirentDetailShow:!1})},n.onpopstate=function(e){if(e.state&&e.state.key){if("/"===n.state.path)return;n.loadDirentList("/"),n.setState({path:"/",isViewFile:!1})}else if(e.state&&e.state.path){var t=e.state.path;if("column"===n.state.currentMode&&v.Utils.isMarkdownFile(t))return void n.showFile(t);n.loadDirentList(t),n.setState({path:t,isViewFile:!1})}},n.onRepoUpdateEvent=function(){var e=new Date;if(!(parseFloat(e-n.lastModifyTime)/1e3<=5)){var t=n.props.repoID,a=n.state,r=a.path,o=a.dirID;b.seafileAPI.dirMetaData(t,r).then(function(e){e.data.id!==o&&O.default.notify(c.default.createElement("span",null,(0,y.gettext)("This folder has been updated. "),c.default.createElement("a",{href:""},(0,y.gettext)("Refresh"))),{id:"repo_updated",duration:3600})})}},n.updateUsedRepoTags=function(){var e=n.props.repoID;b.seafileAPI.listRepoTags(e).then(function(e){var t=[];e.data.repo_tags.forEach(function(e){var n=new L.default(e);n.fileCount>0&&t.push(n)}),n.setState({usedRepoTags:t})})},n.updateReadmeMarkdown=function(e){n.setState({readmeMarkdown:null}),e.some(function(e){var t=e.name.toLowerCase();if("readme.md"===t||"readme.markdown"===t)return n.setState({readmeMarkdown:e}),!0})},n.loadDirData=function(e){var t=n.props.repoID;S.default.watchRepo(t,n.onRepoUpdateEvent),n.updateUsedRepoTags(),b.seafileAPI.getRepoDraftCounts(t).then(function(e){n.setState({draftCounts:e.data.draft_counts})}),v.Utils.isMarkdownFile(e)?b.seafileAPI.getFileInfo(n.props.repoID,e).then(function(){"column"!==n.state.currentMode&&(h.default.save("seafile-view-mode","column"),n.setState({currentMode:"column"})),n.loadSidePanel(e),n.showFile(e)}).catch(function(){"column"===n.state.currentMode?(n.loadSidePanel(e),n.showDir(e)):n.showDir(e)}):"column"===n.state.currentMode?(n.loadSidePanel(e),n.showDir(e)):n.showDir(e)},n.loadSidePanel=function(e){var t=n.props.repoID;"/"===e?b.seafileAPI.listDir(t,"/").then(function(e){var t=n.state.treeData;n.addResponseListToNode(e.data.dirent_list,t.root),n.setState({isTreeDataLoading:!1,treeData:t})}).catch(function(){n.setState({isTreeDataLoading:!1})}):n.loadNodeAndParentsByPath(e)},n.showDir=function(e){var t=n.props.repoID;if(n.setState({isDirentListLoading:!0,path:e,isViewFile:!1}),n.loadDirentList(e),!n.isNeedUpdateHistoryState)return void(n.isNeedUpdateHistoryState=!0);var a=n.state.currentRepoInfo,r=y.siteRoot+"library/"+t+"/"+encodeURIComponent(a.repo_name)+v.Utils.encodePath(e);window.history.pushState({url:r,path:e},e,r)},n.showFile=function(e){var t=n.props.repoID;"column"===n.state.currentMode&&(b.seafileAPI.listFileTags(t,e).then(function(e){var t=e.data.file_tags.map(function(e){return new D.default(e)});n.setState({fileTags:t})}),b.seafileAPI.listRelatedFiles(t,e).then(function(e){var t=e.data.related_files.map(function(e){return e});n.setState({relatedFiles:t})}).catch(function(e){500===e.response.status&&n.setState({relatedFiles:[]})})),n.setState({isFileLoading:!0,path:e,isViewFile:!0}),b.seafileAPI.getFileInfo(t,e).then(function(a){var r=a.data,o=r.mtime,i=r.permission,l=r.last_modifier_name,s=r.is_draft,u=r.has_draft,c=r.draft_id;b.seafileAPI.getFileDownloadLink(t,e).then(function(e){b.seafileAPI.getFileContent(e.data).then(function(e){n.setState({content:e.data,filePermission:"rw"===i,latestContributor:l,lastModified:g.default.unix(o).fromNow(),isFileLoading:!1,isFileLoadedErr:!1,isDraft:s,hasDraft:u,draftID:c})})})}).catch(function(){n.setState({isFileLoading:!1,isFileLoadedErr:!0})});var a=n.state.currentRepoInfo,r=y.siteRoot+"library/"+t+"/"+encodeURIComponent(a.repo_name)+v.Utils.encodePath(e);window.history.pushState({url:r,path:e},e,r)},n.loadDirentList=function(e){var t=n.props.repoID;b.seafileAPI.listDir(t,e,{with_thumbnail:!0}).then(function(a){var r=[],o=null;a.data.dirent_list.forEach(function(e){var t=e.name.toLowerCase();"readme.md"!==t&&"readme.markdown"!==t||(o=e);var n=new E.default(e);r.push(n)}),n.setState({pathExist:!0,userPerm:a.data.user_perm,isDirentListLoading:!1,direntList:v.Utils.sortDirents(r,n.state.sortBy,n.state.sortOrder),dirID:a.data.dir_id,readmeMarkdown:o}),!n.state.repoEncrypted&&r.length&&n.getThumbnails(t,e,n.state.direntList)}).catch(function(){n.setState({isDirentListLoading:!1,pathExist:!1})})},n.getThumbnails=function(e,t,a){var r=a.filter(function(e){return v.Utils.imageCheck(e.name)&&!e.encoded_thumbnail_src});if(0!=r.length){var o=n,i=r.length;!function n(l){var s=r[l],u=[t,s.name].join("/");b.seafileAPI.createThumbnail(e,u,48).then(function(e){s.encoded_thumbnail_src=e.data.encoded_thumbnail_src}).catch(function(e){}).then(function(){l<i-1?n(++l):o.setState({direntList:a})})}(0)}},n.onMoveItems=function(e,t){var a=n.props.repoID,r=n.getSelectedDirentPaths(),o=n.getSelectedDirentNames();b.seafileAPI.moveDir(a,e.repo_id,t,n.state.path,o).then(function(a){var i=a.data.map(function(e){return e.obj_name});r.forEach(function(a,r){"column"===n.state.currentMode&&n.moveTreeNode(a,t,e,i[r]),n.moveDirent(a)});var l=(0,y.gettext)("Successfully moved %(name)s.");l=l.replace("%(name)s",o),O.default.success(l)}).catch(function(){var e=(0,y.gettext)("Failed to move %(name)s");e=e.replace("%(name)s",o),O.default.danger(e)})},n.onCopyItems=function(e,t){var a=n.props.repoID,r=n.getSelectedDirentPaths(),o=n.getSelectedDirentNames();b.seafileAPI.copyDir(a,e.repo_id,t,n.state.path,o).then(function(a){var i=a.data.map(function(e){return e.obj_name});"column"===n.state.currentMode&&r.forEach(function(a,r){n.copyTreeNode(a,t,e,i[r])});var l=(0,y.gettext)("Successfully copied %(name)s.");l=l.replace("%(name)s",o),O.default.success(l)}).catch(function(){var e=(0,y.gettext)("Failed to copy %(name)s");e=e.replace("%(name)s",o),O.default.danger(e)})},n.onDeleteItems=function(){var e=n.props.repoID,t=n.getSelectedDirentPaths(),a=n.getSelectedDirentNames();b.seafileAPI.deleteMutipleDirents(e,n.state.path,a).then(function(e){t.forEach(function(e){"column"===n.state.currentMode&&n.deleteTreeNode(e),n.deleteDirent(e)})})},n.onAddFolder=function(e){var t=n.props.repoID;b.seafileAPI.createDir(t,e).then(function(){var t=v.Utils.getFileName(e),a=v.Utils.getDirName(e);"column"===n.state.currentMode&&n.addNodeToTree(t,a,"dir"),a!==n.state.path||n.state.isViewFile||n.addDirent(t,"dir")}).catch(function(){})},n.onAddFile=function(e,t){var a=n.props.repoID;b.seafileAPI.createFile(a,e,t).then(function(t){var a=v.Utils.getFileName(e),r=v.Utils.getDirName(e);"column"===n.state.currentMode&&n.addNodeToTree(a,r,"file"),r!==n.state.path||n.state.isViewFile||n.addDirent(a,"file",t.data.size)}).catch(function(){})},n.switchViewMode=function(e){if(e!==n.state.currentMode){h.default.save("seafile-view-mode",e);var t=n.state.path;if("column"===n.state.currentMode&&n.state.isViewFile){t=v.Utils.getDirName(t),n.setState({path:t,isViewFile:!1});var a=n.state.currentRepoInfo,r=y.siteRoot+"library/"+a.repo_id+"/"+encodeURIComponent(a.repo_name)+v.Utils.encodePath(t);window.history.pushState({url:r,path:t},t,r)}"column"===e&&n.loadSidePanel(n.state.path),n.isNeedUpdateHistoryState=!1,n.setState({currentMode:e}),n.showDir(t)}},n.onSearchedClick=function(e){var t=e.is_dir?e.path.slice(0,e.path.length-1):e.path;if(n.state.currentPath!==t){if("column"===n.state.currentMode){for(var a=-1,r=v.Utils.getPaths(t),o=0;o<r.length;o++){var i=n.state.treeData.getNodeByPath(i);if(!i){a=o;break}}if(-1===a){var l=n.state.treeData.getNodeByPath(t);n.setState({currentNode:l})}else n.loadNodeAndParentsByPath(t)}if(e.is_dir)n.showDir(t);else if(v.Utils.isMarkdownFile(t))n.showFile(t);else{var s=y.siteRoot+"lib/"+e.repo_id+"/file"+v.Utils.encodePath(t),u=window.open("about:blank");u.location.href=s}}},n.onMainNavBarClick=function(e){if(n.resetSelected(),"column"===n.state.currentMode){var t=n.state.treeData.clone(),a=t.getNodeByPath(e);t.expandNode(a),n.setState({treeData:t,currentNode:a})}n.showDir(e)},n.onLinkClick=function(e){var t=e,a=n.props.repoID;if(v.Utils.isInternalMarkdownLink(t,a)){var r=v.Utils.getPathFromInternalMarkdownLink(t,a);n.showFile(r)}else if(v.Utils.isInternalDirLink(t,a)){var o=v.Utils.getPathFromInternalDirLink(t,a);n.showDir(o)}else window.open(t)},n.onMainPanelItemRename=function(e,t){var a=v.Utils.joinPath(n.state.path,e.name);n.renameItem(a,e.isDir(),t)},n.onMainPanelItemDelete=function(e){var t=v.Utils.joinPath(n.state.path,e.name);n.deleteItem(t,e.isDir())},n.onRenameTreeNode=function(e,t){n.renameItem(e.path,e.object.isDir(),t)},n.onDeleteTreeNode=function(e){n.deleteItem(e.path,e.object.isDir())},n.renameItem=function(e,t,a){var r=n.props.repoID;t?b.seafileAPI.renameDir(r,e,a).then(function(){n.renameItemAjaxCallback(e,a)}).catch(function(){}):b.seafileAPI.renameFile(r,e,a).then(function(){n.renameItemAjaxCallback(e,a)}).catch(function(){})},n.onMoveItem=function(e,t,a,r){var o=n.props.repoID,i=t.name;r||(r=n.state.path);var l=v.Utils.joinPath(r,i);b.seafileAPI.moveDir(o,e.repo_id,a,r,i).then(function(t){var r=t.data[0].obj_name;"column"===n.state.currentMode&&n.moveTreeNode(l,a,e,r),n.moveDirent(l);var o=(0,y.gettext)("Successfully moved %(name)s.");o=o.replace("%(name)s",i),O.default.success(o)}).catch(function(){var e=(0,y.gettext)("Failed to move %(name)s");e=e.replace("%(name)s",i),O.default.danger(e)})},n.onCopyItem=function(e,t,a,r){var o=n.props.repoID,i=t.name;r||(r=n.state.path);var l=v.Utils.joinPath(r,i);b.seafileAPI.copyDir(o,e.repo_id,a,r,i).then(function(t){var r=t.data[0].obj_name;"column"===n.state.currentMode&&n.copyTreeNode(l,a,e,r);var o=(0,y.gettext)("Successfully copied %(name)s.");o=o.replace("%(name)s",i),O.default.success(o)}).catch(function(){var e=(0,y.gettext)("Failed to copy %(name)s");e=e.replace("%(name)s",i),O.default.danger(e)})},n.onDirentClick=function(e){n.resetSelected();var t=n.props.repoID,a=v.Utils.joinPath(n.state.path,e.name);if(e.isDir())"column"===n.state.currentMode&&n.loadTreeNodeByPath(a),n.showDir(a);else if("column"===n.state.currentMode&&v.Utils.isMarkdownFile(a))n.showFile(a);else{var r=window.open("about:blank"),o=y.siteRoot+"lib/"+t+"/file"+v.Utils.encodePath(a);r.location.href=o}},n.onDirentSelected=function(e){var t=n.state.direntList.map(function(t){return t.name===e.name&&(t.isSelected=!t.isSelected),t}),a=t.filter(function(e){return e.isSelected});a.length?(n.setState({isDirentSelected:!0}),a.length===t.length?n.setState({isAllDirentSelected:!0,direntList:t,selectedDirentList:a}):n.setState({isAllDirentSelected:!1,direntList:t,selectedDirentList:a})):n.setState({isDirentSelected:!1,isAllDirentSelected:!1,direntList:t,selectedDirentList:[]})},n.onAllDirentSelected=function(){if(n.state.isAllDirentSelected){var e=n.state.direntList.map(function(e){return e.isSelected=!1,e});n.setState({isDirentSelected:!1,isAllDirentSelected:!1,direntList:e,selectedDirentList:[]})}else{var t=n.state.direntList.map(function(e){return e.isSelected=!0,e});n.setState({isDirentSelected:!0,isAllDirentSelected:!0,direntList:t,selectedDirentList:t})}},n.onFileTagChanged=function(e,t){var a=n.props.repoID;b.seafileAPI.listFileTags(a,t).then(function(t){var a=t.data.file_tags.map(function(e){return new D.default(e)});n.updateDirent(e,"file_tags",a)}),n.updateUsedRepoTags()},n.onFileUploadSuccess=function(e){if(n.state.direntList.some(function(t){return t.name===e.name&&t.type===e.type}))for(var t=n.state.direntList,a=0;a<t.length;a++){var o=t[a];if(o.name===e.name&&o.type===e.type){var i=g.default.unix(e.mtime).fromNow();n.updateDirent(o,"mtime",i);break}}else{e.permission="rw";var l=new E.default(e);"column"===n.state.currentMode&&n.addNodeToTree(l.name,n.state.path,l.type),"dir"===e.type?n.setState({direntList:[l].concat(r(n.state.direntList))}):(n.setState({direntList:[].concat(r(n.state.direntList),[l])}),n.updateReadmeMarkdown(n.state.direntList))}},n.addDirent=function(e,t,a){var r=n.createDirent(e,t,a),o=n.state.direntList;if("dir"===t)o.unshift(r);else{var i=o.length;if(0===i||"dir"===o[i-1].type)o.push(r);else{for(var l=0,s=0;s<=i;s++)if("file"===o[s].type){l=s;break}o.splice(l,0,r)}}n.setState({direntList:o}),n.updateReadmeMarkdown(o)},n.renameDirent=function(e,t){var a=n.props.repoID,r=v.Utils.getDirName(e),o=v.Utils.joinPath(r,t);if(e===n.state.path){n.setState({path:o});var i=n.state.currentRepoInfo,l=y.siteRoot+"library/"+a+"/"+encodeURIComponent(i.repo_name)+o;window.history.replaceState({url:l,path:o},o,l)}else if(v.Utils.isChildPath(e,n.state.path)){var s=v.Utils.getFileName(e),u=n.state.direntList.map(function(e){return e.name===s&&(e.name=t),e});n.setState({direntList:u}),n.updateReadmeMarkdown(u)}else if(v.Utils.isAncestorPath(e,n.state.path)){var c=v.Utils.renameAncestorPath(n.state.path,e,o);n.setState({path:c});var d=n.state.currentRepoInfo,f=y.siteRoot+"library/"+a+"/"+encodeURIComponent(d.repo_name)+c;window.history.replaceState({url:f,path:c},c,f)}},n.moveDirent=function(e){var t=e.slice(e.lastIndexOf("/")+1),a=n.state.direntList.filter(function(e){return e.name!==t});n.setState({direntList:a}),n.updateReadmeMarkdown(a)},n.updateDirent=function(e,t,a){var r=n.state.direntList.map(function(n){return n.name===e.name&&(n[t]=a),n});n.setState({direntList:r})},n.loadTreeNodeByPath=function(e){var t=n.props.repoID,a=n.state.treeData.clone(),r=a.getNodeByPath(e);if(r.isLoaded){a.getNodeByPath(r.parentNode.path).isExpanded=!0,n.setState({treeData:a,currentNode:r})}else b.seafileAPI.listDir(t,r.path).then(function(e){n.addResponseListToNode(e.data.dirent_list,r),a.getNodeByPath(r.parentNode.path).isExpanded=!0,n.setState({treeData:a,currentNode:r})})},n.loadNodeAndParentsByPath=function(e){var t=n.props.repoID,a=n.state.treeData.clone();v.Utils.isMarkdownFile(e)&&(e=v.Utils.getDirName(e)),b.seafileAPI.listDir(t,e,{with_parents:!0}).then(function(e){for(var t=e.data.dirent_list,r={},o=0;o<t.length;o++){var i=t[o],l=i.parent_dir;r[l]||(r[l]=[]),r[l].push(i)}for(var s in r){var u=a.getNodeByPath(s);u.isLoaded||n.addResponseListToNode(r[s],u)}n.setState({isTreeDataLoading:!1,treeData:a})}).catch(function(){n.setState({isLoadFailed:!0})})},n.onTreeNodeClick=function(e){n.resetSelected();var t=n.props.repoID;if(n.state.pathExist||n.setState({pathExist:!0}),e.object.isDir()){var a=e.isLoaded;if(!e.isLoaded){var r=n.state.treeData.clone();e=r.getNodeByPath(e.path),b.seafileAPI.listDir(t,e.path).then(function(t){n.addResponseListToNode(t.data.dirent_list,e),r.collapseNode(e),n.setState({treeData:r})})}if(a&&e.path===n.state.path)if(e.isExpanded){var o=Y.default.collapseNode(n.state.treeData,e);n.setState({treeData:o})}else{var i=n.state.treeData.clone();e=i.getNodeByPath(e.path),i.expandNode(e),n.setState({treeData:i})}}if(e.path!==n.state.path)if(e.object.isDir())n.showDir(e.path);else if(v.Utils.isMarkdownFile(e.path))e.path!==n.state.path&&n.showFile(e.path);else{var l=window.open("about:blank"),s=y.siteRoot+"lib/"+t+"/file"+v.Utils.encodePath(e.path);l.location.href=s}},n.onTreeNodeCollapse=function(e){var t=Y.default.collapseNode(n.state.treeData,e);n.setState({treeData:t})},n.onTreeNodeExpanded=function(e){var t=n.props.repoID,a=n.state.treeData.clone();e=a.getNodeByPath(e.path),e.isLoaded?(a.expandNode(e),n.setState({treeData:a})):b.seafileAPI.listDir(t,e.path).then(function(t){n.addResponseListToNode(t.data.dirent_list,e),n.setState({treeData:a})})},n.addNodeToTree=function(e,t,a){var r=n.createTreeNode(e,a),o=Y.default.addNodeToParentByPath(n.state.treeData,r,t);n.setState({treeData:o})},n.renameTreeNode=function(e,t){var a=Y.default.renameNodeByPath(n.state.treeData,e,t);n.setState({treeData:a})},n.deleteTreeNode=function(e){var t=Y.default.deleteNodeByPath(n.state.treeData,e);n.setState({treeData:t})},n.moveTreeNode=function(e,t,a,r){if(n.props.repoID!==a.repo_id){var o=Y.default.deleteNodeByPath(n.state.treeData,e);return void n.setState({treeData:o})}var i=Y.default.moveNodeByPath(n.state.treeData,e,t,r);n.setState({treeData:i})},n.copyTreeNode=function(e,t,a,r){if(n.props.repoID===a.repo_id){var o=Y.default.copyNodeByPath(n.state.treeData,e,t,r);n.setState({treeData:o})}},n.addResponseListToNode=function(e,t){t.isLoaded=!0,t.isExpanded=!0;var n=e.map(function(e){return new E.default(e)});n=v.Utils.sortDirents(n,"name","asc");var a=n.map(function(e){return new k.default({object:e})});t.addChildren(a)},n.getSelectedDirentPaths=function(){var e=[];return n.state.selectedDirentList.forEach(function(t){e.push(v.Utils.joinPath(n.state.path,t.name))}),e},n.getSelectedDirentNames=function(){var e=[];return n.state.selectedDirentList.forEach(function(t){e.push(t.name)}),e},n.resetSelected=function(){n.setState({isDirentSelected:!1,isAllDirentSelected:!1})},n.onLibDecryptDialog=function(){n.setState({libNeedDecrypt:!1}),n.loadDirData(n.state.path)},n.goDraftPage=function(){window.location.href=y.siteRoot+"drafts/"+n.state.draftID+"/"},n.sortItems=function(e,t){h.default.save("seafile-dir-sort-by",e),h.default.save("seafile-dir-sort-order",t),n.setState({sortBy:e,sortOrder:t,items:v.Utils.sortDirents(n.state.direntList,e,t)})},n.onUploadFile=function(e){e.nativeEvent.stopImmediatePropagation(),n.uploader.onFileUpload()},n.onUploadFolder=function(e){e.nativeEvent.stopImmediatePropagation(),n.uploader.onFolderUpload()},n.onToolbarFileTagChanged=function(){var e=n.props.repoID,t=n.state.path;b.seafileAPI.listFileTags(e,t).then(function(e){var t=e.data.file_tags.map(function(e){return new D.default(e)});n.setState({fileTags:t})})},n.onToolbarRelatedFileChange=function(){var e=n.props.repoID,t=n.state.path;b.seafileAPI.listRelatedFiles(e,t).then(function(e){var t=e.data.related_files.map(function(e){return e});n.setState({relatedFiles:t})}).catch(function(e){500===e.response.status&&n.setState({relatedFiles:[]})})},n.unSelectDirent=function(){n.setState({isDirentSelected:!1,selectedDirentList:[]});var e={};n.onDirentSelected(e)},n.onDeleteRepoTag=function(e){var t=n.state.direntList.map(function(t){if(t.file_tags){var n=t.file_tags.filter(function(t){return t.repo_tag_id!==e});t.file_tags=n}return t});n.setState({direntList:t}),n.updateUsedRepoTags()},n.state={currentMode:h.default.load("seafile-view-mode")||"list",path:"",pathExist:!0,isViewFile:!1,hash:"",currentRepoInfo:null,repoName:"",repoPermission:!0,repoEncrypted:!1,libNeedDecrypt:!1,isGroupOwnedRepo:!1,userPerm:"",selectedDirentList:[],isDraft:!1,hasDraft:!1,fileTags:[],relatedFiles:[],draftID:"",draftCounts:0,usedRepoTags:[],readmeMarkdown:null,isTreeDataLoading:!0,treeData:Y.default.buildTree(),currentNode:null,isFileLoading:!0,isFileLoadedErr:!1,filePermission:!0,content:"",lastModified:"",latestContributor:"",isDirentListLoading:!0,direntList:[],isDirentSelected:!1,sortBy:h.default.load("seafile-dir-sort-by")||"name",sortOrder:h.default.load("seafile-dir-sort-order")||"asc",isAllDirentSelected:!1,dirID:"",errorMsg:"",isDirentDetailShow:!1},window.onpopstate=n.onpopstate,n.lastModifyTime=new Date,n.isNeedUpdateHistoryState=!0,n}return l(t,e),s(t,[{key:"componentWillMount",value:function(){var e=window.location.hash;"#"===e.slice(0,1)&&this.setState({hash:e})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.repoID,n=window.location.href.split("#")[0];n=decodeURIComponent(n),b.seafileAPI.getRepoInfo(t).then(function(t){var a=new M.default(t.data);e.setState({currentRepoInfo:a,repoName:a.repo_name,libNeedDecrypt:a.lib_need_decrypt,repoEncrypted:a.encrypted,repoPermission:"rw"===a.permission});var r=a.repo_id,o=n.slice(n.indexOf(r)+r.length+1);o=o.slice(o.indexOf("/")),e.isNeedUpdateHistoryState=!1,e.setState({path:o}),a.lib_need_decrypt||e.loadDirData(o)}).catch(function(t){t.response?403==t.response.status?e.setState({isDirentListLoading:!1,errorMsg:(0,y.gettext)("Permission denied")}):e.setState({isDirentListLoading:!1,errorMsg:(0,y.gettext)("Error")}):e.setState({isDirentListLoading:!1,errorMsg:(0,y.gettext)("Please check the network.")})})}},{key:"componentWillUnmount",value:function(){S.default.unwatchRepo(this.props.repoID,this.onRepoUpdateEvent)}},{key:"componentDidUpdate",value:function(){this.lastModifyTime=new Date}},{key:"renameItemAjaxCallback",value:function(e,t){"column"===this.state.currentMode&&this.renameTreeNode(e,t),this.renameDirent(e,t)}},{key:"deleteItem",value:function(e,t){var n=this,a=this.props.repoID;t?b.seafileAPI.deleteDir(a,e).then(function(){n.deleteItemAjaxCallback(e,t)}).catch(function(){}):b.seafileAPI.deleteFile(a,e).then(function(){n.deleteItemAjaxCallback(e,t)}).catch(function(){})}},{key:"deleteItemAjaxCallback",value:function(e){"column"===this.state.currentMode&&this.deleteTreeNode(e),this.deleteDirent(e)}},{key:"deleteDirent",value:function(e){if(e===this.state.path){var t=v.Utils.getDirName(e);this.showDir(t)}else if(v.Utils.isChildPath(e,this.state.path)){var n=v.Utils.getFileName(e),a=this.state.direntList.filter(function(e){return e.name!==n});this.setState({direntList:a}),this.updateReadmeMarkdown(a)}else if(v.Utils.isAncestorPath(e,this.state.path)){var r=v.Utils.getDirName(e);this.showDir(r)}}},{key:"createTreeNode",value:function(e,t){var n=this.createDirent(e,t);return new k.default({object:n})}},{key:"createDirent",value:function(e,t,n){var a=(new Date).getTime()/1e3;return new E.default({name:e,type:t,mtime:a,size:n})}},{key:"render",value:function(){var e=this;if(this.state.libNeedDecrypt)return c.default.createElement(F.default,null,c.default.createElement(X.default,{repoID:this.props.repoID,onLibDecryptDialog:this.onLibDecryptDialog}));if(!this.state.currentRepoInfo)return"";var t=!1,n=!1,a=this.state,r=a.currentRepoInfo,o=a.repoEncrypted,i=a.userPerm,l=r.is_admin,s=r.is_virtual,u=r.owner_email===y.username;if(!o){var d=!1;!y.canGenerateShareLink||"rw"!=i&&"r"!=i||(d=!0);var f=!1;y.canGenerateUploadLink&&"rw"==i&&(f=!0),s||!u&&!l||(n=!0),(d||f||n)&&(t=!0)}return c.default.createElement("div",{className:"main-panel o-hidden"},c.default.createElement("div",{className:"main-panel-north border-left-show"},c.default.createElement(H.default,{isViewFile:this.state.isViewFile,filePermission:this.state.filePermission,isDraft:this.state.isDraft,hasDraft:this.state.hasDraft,fileTags:this.state.fileTags,relatedFiles:this.state.relatedFiles,onFileTagChanged:this.onToolbarFileTagChanged,onRelatedFileChange:this.onToolbarRelatedFileChange,onSideNavMenuClick:this.props.onMenuClick,repoID:this.props.repoID,path:this.state.path,isDirentSelected:this.state.isDirentSelected,selectedDirentList:this.state.selectedDirentList,onItemsMove:this.onMoveItems,onItemsCopy:this.onCopyItems,onItemsDelete:this.onDeleteItems,direntList:this.state.direntList,repoName:this.state.repoName,repoEncrypted:this.state.repoEncrypted,isGroupOwnedRepo:this.state.isGroupOwnedRepo,userPerm:this.state.userPerm,showShareBtn:t,enableDirPrivateShare:n,onAddFile:this.onAddFile,onAddFolder:this.onAddFolder,onUploadFile:this.onUploadFile,onUploadFolder:this.onUploadFolder,currentMode:this.state.currentMode,switchViewMode:this.switchViewMode,onSearchedClick:this.onSearchedClick,isRepoOwner:u,currentRepoInfo:this.state.currentRepoInfo,updateDirent:this.updateDirent,onDirentSelected:this.onDirentSelected,showDirentDetail:this.showDirentDetail,listRelatedFiles:this.listRelatedFiles,unSelectDirent:this.unSelectDirent,onFilesTagChanged:this.onFileTagChanged})),c.default.createElement("div",{className:"main-panel-center flex-row"},c.default.createElement(B.default,{pathPrefix:this.props.pathPrefix,currentMode:this.state.currentMode,path:this.state.path,pathExist:this.state.pathExist,currentRepoInfo:this.state.currentRepoInfo,repoID:this.props.repoID,repoPermission:this.state.repoPermission,enableDirPrivateShare:n,userPerm:i,isGroupOwnedRepo:this.state.isGroupOwnedRepo,onTabNavClick:this.props.onTabNavClick,onMainNavBarClick:this.onMainNavBarClick,isViewFile:this.state.isViewFile,hash:this.state.hash,isDraft:this.state.isDraft,hasDraft:this.state.hasDraft,fileTags:this.state.fileTags,relatedFiles:this.state.relatedFiles,goDraftPage:this.goDraftPage,isFileLoading:this.state.isFileLoading,isFileLoadedErr:this.state.isFileLoadedErr,filePermission:this.state.filePermission,content:this.state.content,lastModified:this.state.lastModified,latestContributor:this.state.latestContributor,onLinkClick:this.onLinkClick,isTreeDataLoading:this.state.isTreeDataLoading,treeData:this.state.treeData,currentNode:this.state.currentNode,onNodeClick:this.onTreeNodeClick,onNodeCollapse:this.onTreeNodeCollapse,onNodeExpanded:this.onTreeNodeExpanded,onAddFolderNode:this.onAddFolder,onAddFileNode:this.onAddFile,onRenameNode:this.onRenameTreeNode,onDeleteNode:this.onDeleteTreeNode,draftCounts:this.state.draftCounts,usedRepoTags:this.state.usedRepoTags,readmeMarkdown:this.state.readmeMarkdown,updateUsedRepoTags:this.updateUsedRepoTags,isDirentListLoading:this.state.isDirentListLoading,direntList:this.state.direntList,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortItems:this.sortItems,updateDirent:this.updateDirent,onItemClick:this.onDirentClick,onItemSelected:this.onDirentSelected,onItemDelete:this.onMainPanelItemDelete,onItemRename:this.onMainPanelItemRename,onItemMove:this.onMoveItem,onItemCopy:this.onCopyItem,onAddFolder:this.onAddFolder,onAddFile:this.onAddFile,onFileTagChanged:this.onFileTagChanged,isDirentSelected:this.state.isDirentSelected,isAllDirentSelected:this.state.isAllDirentSelected,onAllDirentSelected:this.onAllDirentSelected,isDirentDetailShow:this.state.isDirentDetailShow,selectedDirent:this.state.selectedDirentList&&this.state.selectedDirentList[0],closeDirentDetail:this.closeDirentDetail,showDirentDetail:this.showDirentDetail,onDeleteRepoTag:this.onDeleteRepoTag}),this.state.pathExist&&!this.state.isViewFile&&c.default.createElement(G.default,{ref:function(t){return e.uploader=t},dragAndDrop:!0,path:this.state.path,repoID:this.props.repoID,direntList:this.state.direntList,onFileUploadSuccess:this.onFileUploadSuccess})))}}]),t}(c.default.Component);W.propTypes=A,t.default=W},1217:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(80),h=a(p),m=n(279),g=a(m),y=n(280),b=a(y),v=n(281),w=a(v),S=n(1218),C=a(S),E={isViewFile:d.default.bool.isRequired,filePermission:d.default.bool.isRequired,isDraft:d.default.bool.isRequired,hasDraft:d.default.bool.isRequired,fileTags:d.default.array.isRequired,relatedFiles:d.default.array.isRequired,onFileTagChanged:d.default.func.isRequired,onRelatedFileChange:d.default.func.isRequired,onSideNavMenuClick:d.default.func.isRequired,isDirentSelected:d.default.bool.isRequired,repoID:d.default.string.isRequired,path:d.default.string.isRequired,selectedDirentList:d.default.array.isRequired,onItemsMove:d.default.func.isRequired,onItemsCopy:d.default.func.isRequired,onItemsDelete:d.default.func.isRequired,direntList:d.default.array.isRequired,repoName:d.default.string.isRequired,repoEncrypted:d.default.bool.isRequired,isGroupOwnedRepo:d.default.bool.isRequired,userPerm:d.default.string.isRequired,showShareBtn:d.default.bool.isRequired,enableDirPrivateShare:d.default.bool.isRequired,onAddFile:d.default.func.isRequired,onAddFolder:d.default.func.isRequired,onUploadFile:d.default.func.isRequired,onUploadFolder:d.default.func.isRequired,currentMode:d.default.string.isRequired,switchViewMode:d.default.func.isRequired,onSearchedClick:d.default.func.isRequired,isRepoOwner:d.default.bool.isRequired,onDirentSelected:d.default.func.isRequired,showDirentDetail:d.default.func.isRequired,onFilesTagChanged:d.default.func.isRequired,updateDirent:d.default.func.isRequired},_=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return this.props.isViewFile?u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"cur-view-toolbar"},u.default.createElement("span",{className:"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle",title:(0,f.gettext)("Side Nav Menu"),onClick:this.props.onSideNavMenuClick}),u.default.createElement(C.default,{path:this.props.path,repoID:this.props.repoID,userPerm:this.props.userPerm,repoEncrypted:this.props.repoEncrypted,enableDirPrivateShare:this.props.enableDirPrivateShare,isGroupOwnedRepo:this.props.isGroupOwnedRepo,filePermission:this.props.filePermission,isDraft:this.props.isDraft,hasDraft:this.props.hasDraft,fileTags:this.props.fileTags,relatedFiles:this.props.relatedFiles,onFileTagChanged:this.props.onFileTagChanged,onRelatedFileChange:this.props.onRelatedFileChange}),u.default.createElement(g.default,{currentMode:this.props.currentMode,switchViewMode:this.props.switchViewMode})),u.default.createElement(h.default,{repoID:this.props.repoID,onSearchedClick:this.props.onSearchedClick,searchPlaceholder:(0,f.gettext)("Search files in this library")})):u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"cur-view-toolbar"},u.default.createElement("span",{className:"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle",title:(0,f.gettext)("Side Nav Menu"),onClick:this.props.onSideNavMenuClick}),u.default.createElement("div",{className:"dir-operation"},this.props.isDirentSelected?u.default.createElement(w.default,{repoID:this.props.repoID,path:this.props.path,repoEncrypted:this.props.repoEncrypted,selectedDirentList:this.props.selectedDirentList,onItemsMove:this.props.onItemsMove,onItemsCopy:this.props.onItemsCopy,onItemsDelete:this.props.onItemsDelete,isRepoOwner:this.props.isRepoOwner,currentRepoInfo:this.props.currentRepoInfo,enableDirPrivateShare:this.props.enableDirPrivateShare,updateDirent:this.props.updateDirent,onDirentSelected:this.props.onDirentSelected,showDirentDetail:this.props.showDirentDetail,relatedFiles:this.props.relatedFiles,unSelectDirent:this.props.unSelectDirent,onFilesTagChanged:this.props.onFilesTagChanged}):u.default.createElement(b.default,{path:this.props.path,repoID:this.props.repoID,repoName:this.props.repoName,repoEncrypted:this.props.repoEncrypted,direntList:this.props.direntList,showShareBtn:this.props.showShareBtn,enableDirPrivateShare:this.props.enableDirPrivateShare,userPerm:this.props.userPerm,isGroupOwnedRepo:this.props.isGroupOwnedRepo,onAddFile:this.props.onAddFile,onAddFolder:this.props.onAddFolder,onUploadFile:this.props.onUploadFile,onUploadFolder:this.props.onUploadFolder})),u.default.createElement(g.default,{currentMode:this.props.currentMode,switchViewMode:this.props.switchViewMode})),u.default.createElement(h.default,{repoID:this.props.repoID,onSearchedClick:this.props.onSearchedClick,searchPlaceholder:(0,f.gettext)("Search files in this library")}))}}]),t}(u.default.Component);_.propTypes=E,t.default=_},1218:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(4),h=n(2),m=n(3),g=n(10),y=a(g),b=n(25),v=a(b),w=n(106),S=a(w),C=n(107),E=a(C),_={path:d.default.string.isRequired,repoID:d.default.string.isRequired,userPerm:d.default.string.isRequired,repoEncrypted:d.default.bool.isRequired,enableDirPrivateShare:d.default.bool.isRequired,isGroupOwnedRepo:d.default.bool.isRequired,filePermission:d.default.bool.isRequired,isDraft:d.default.bool.isRequired,hasDraft:d.default.bool.isRequired,fileTags:d.default.array.isRequired,relatedFiles:d.default.array.isRequired,onFileTagChanged:d.default.func.isRequired,onRelatedFileChange:d.default.func.isRequired},D=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onEditClick=function(e){e.preventDefault();var t=n.props,a=t.path,r=t.repoID,o=h.siteRoot+"lib/"+r+"/file"+p.Utils.encodePath(a)+"?mode=edit";window.open(o)},n.onNewDraft=function(e){e.preventDefault();var t=n.props,a=t.path,r=t.repoID;m.seafileAPI.createDraft(r,a).then(function(e){window.location.href=h.siteRoot+"lib/"+e.data.origin_repo_id+"/file"+e.data.draft_file_path+"?mode=edit"})},n.onDraftHover=function(){n.setState({isDraftMessageShow:!n.state.isDraftMessageShow})},n.toggleMore=function(){n.setState({isMoreMenuShow:!n.state.isMoreMenuShow})},n.onShareToggle=function(){n.setState({isShareDialogShow:!n.state.isShareDialogShow})},n.onEditFileTagToggle=function(){n.setState({isEditTagDialogShow:!n.state.isEditTagDialogShow})},n.onListRelatedFileToggle=function(){n.setState({isRelatedFileDialogShow:!0,showRelatedFileDialog:!0})},n.toggleCancel=function(){n.setState({isRelatedFileDialogShow:!1,showRelatedFileDialog:!1})},n.state={isDraftMessageShow:!1,isMoreMenuShow:!1,isShareDialogShow:!1,isEditTagDialogShow:!1,isRelatedFileDialogShow:!1,showRelatedFileDialog:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=p.Utils.getFileName(this.props.path),t={name:e};return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"dir-operation"},this.props.filePermission&&!this.props.hasDraft&&u.default.createElement(s.Fragment,null,u.default.createElement("button",{className:"btn btn-secondary operation-item",title:(0,h.gettext)("Edit File"),onClick:this.onEditClick},(0,h.gettext)("Edit"))),!this.props.isDraft&&!this.props.hasDraft&&u.default.createElement(s.Fragment,null,u.default.createElement("button",{id:"new-draft",className:"btn btn-secondary operation-item",onClick:this.onNewDraft},(0,h.gettext)("New Draft")),u.default.createElement(f.Tooltip,{target:"new-draft",placement:"bottom",isOpen:this.state.isDraftMessageShow,toggle:this.onDraftHover},(0,h.gettext)("Create a draft from this file, instead of editing it directly."))),this.props.filePermission&&u.default.createElement(f.Dropdown,{isOpen:this.state.isMoreMenuShow,toggle:this.toggleMore},u.default.createElement(f.DropdownToggle,{className:"btn btn-secondary operation-item"},(0,h.gettext)("More")),u.default.createElement(f.DropdownMenu,null,u.default.createElement(f.DropdownItem,{onClick:this.onShareToggle},(0,h.gettext)("Share")),u.default.createElement(f.DropdownItem,{onClick:this.onEditFileTagToggle},(0,h.gettext)("Tags")),u.default.createElement(f.DropdownItem,{onClick:this.onListRelatedFileToggle},(0,h.gettext)("Related Files"))))),this.state.isShareDialogShow&&u.default.createElement(y.default,null,u.default.createElement(v.default,{itemType:"file",itemName:p.Utils.getFileName(this.props.path),itemPath:this.props.path,repoID:this.props.repoID,repoEncrypted:this.props.repoEncrypted,enableDirPrivateShare:this.props.enableDirPrivateShare,userPerm:this.props.userPerm,isGroupOwnedRepo:this.props.isGroupOwnedRepo,toggleDialog:this.onShareToggle})),this.state.isEditTagDialogShow&&u.default.createElement(y.default,null,u.default.createElement(S.default,{filePath:this.props.path,repoID:this.props.repoID,fileTagList:this.props.fileTags,toggleCancel:this.onEditFileTagToggle,onFileTagChanged:this.props.onFileTagChanged})),this.state.showRelatedFileDialog&&u.default.createElement(y.default,null,u.default.createElement(E.default,{repoID:this.props.repoID,filePath:this.props.path,relatedFiles:this.props.relatedFiles,toggleCancel:this.toggleCancel,onRelatedFileChange:this.props.onRelatedFileChange,dirent:t,viewMode:"list_related_file"})))}}]),t}(u.default.Component);D.propTypes=_,t.default=D},1219:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(284),h=a(p),m=n(297),g=a(m),y=n(524),b=a(y),v=n(1220),w=a(v),S=n(1221),C=a(S),E={pathPrefix:d.default.array.isRequired,currentMode:d.default.string.isRequired,path:d.default.string.isRequired,pathExist:d.default.bool.isRequired,currentRepoInfo:d.default.object.isRequired,repoID:d.default.string.isRequired,repoPermission:d.default.bool.isRequired,enableDirPrivateShare:d.default.bool.isRequired,userPrem:d.default.bool,isGroupOwnedRepo:d.default.bool.isRequired,onTabNavClick:d.default.func.isRequired,onMainNavBarClick:d.default.func.isRequired,isViewFile:d.default.bool.isRequired,isFileLoadedErr:d.default.bool.isRequired,hash:d.default.string,isDraft:d.default.bool.isRequired,hasDraft:d.default.bool.isRequired,fileTags:d.default.array.isRequired,goDraftPage:d.default.func.isRequired,isFileLoading:d.default.bool.isRequired,filePermission:d.default.bool.isRequired,content:d.default.string,lastModified:d.default.string,latestContributor:d.default.string,onLinkClick:d.default.func.isRequired,isTreeDataLoading:d.default.bool.isRequired,treeData:d.default.object.isRequired,currentNode:d.default.object,onNodeClick:d.default.func.isRequired,onNodeCollapse:d.default.func.isRequired,onNodeExpanded:d.default.func.isRequired,onRenameNode:d.default.func.isRequired,onDeleteNode:d.default.func.isRequired,onAddFileNode:d.default.func.isRequired,onAddFolderNode:d.default.func.isRequired,draftCounts:d.default.number,usedRepoTags:d.default.array.isRequired,readmeMarkdown:d.default.object,updateUsedRepoTags:d.default.func.isRequired,isDirentListLoading:d.default.bool.isRequired,direntList:d.default.array.isRequired,sortBy:d.default.string.isRequired,sortOrder:d.default.string.isRequired,sortItems:d.default.func.isRequired,updateDirent:d.default.func.isRequired,onItemClick:d.default.func.isRequired,onItemSelected:d.default.func.isRequired,onItemDelete:d.default.func.isRequired,onItemRename:d.default.func.isRequired,onItemMove:d.default.func.isRequired,onItemCopy:d.default.func.isRequired,onAddFolder:d.default.func.isRequired,onAddFile:d.default.func.isRequired,onFileTagChanged:d.default.func.isRequired,isDirentSelected:d.default.bool.isRequired,isAllDirentSelected:d.default.bool.isRequired,onAllDirentSelected:d.default.func.isRequired,isDirentDetailShow:d.default.bool.isRequired,selectedDirent:d.default.object,closeDirentDetail:d.default.func.isRequired,showDirentDetail:d.default.func.isRequired,onDeleteRepoTag:d.default.func.isRequired},_=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPathClick=function(e){n.props.onMainNavBarClick(e),n.props.closeDirentDetail()},n.onItemClick=function(e){n.props.onItemClick(e),n.props.closeDirentDetail()},n.onDirentClick=function(e){n.props.isDirentDetailShow&&n.onItemDetails(e)},n.onItemDetails=function(e){n.setState({currentDirent:e}),n.props.showDirentDetail()},n.onItemDetailsClose=function(){n.props.closeDirentDetail()},n.state={currentDirent:null},n.errMessage=u.default.createElement("div",{className:"message err-tip"},(0,f.gettext)("Folder does not exist.")),n}return i(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){e.isDirentDetailShow&&this.setState({isDirentDetailShow:e.isDirentDetailShow}),e.selectedDirent&&e.isDirentDetailShow&&this.setState({currentDirent:e.selectedDirent})}},{key:"render",value:function(){var e=this.props,t=e.path,n=e.repoID,a=e.usedRepoTags,r=e.readmeMarkdown,o=e.draftCounts,i=!1;return"/"===t&&(0===a.length&&null===r&&0===o||(i=!0)),u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement(h.default,{repoID:n,repoName:this.props.currentRepoInfo.repo_name,pathPrefix:this.props.pathPrefix,currentPath:this.props.path,permission:this.props.repoPermission,isViewFile:this.props.isViewFile,onTabNavClick:this.props.onTabNavClick,onPathClick:this.onPathClick,updateUsedRepoTags:this.props.updateUsedRepoTags,fileTags:this.props.fileTags,onDeleteRepoTag:this.props.onDeleteRepoTag})),u.default.createElement("div",{className:"cur-view-content "+("column"===this.props.currentMode?"view-mode-container":"")},!this.props.pathExist&&this.errMessage,this.props.pathExist&&u.default.createElement(s.Fragment,null,"list"===this.props.currentMode&&u.default.createElement(b.default,{path:this.props.path,repoID:n,currentRepoInfo:this.props.currentRepoInfo,isGroupOwnedRepo:this.props.isGroupOwnedRepo,enableDirPrivateShare:this.props.enableDirPrivateShare,isRepoInfoBarShow:i,usedRepoTags:this.props.usedRepoTags,readmeMarkdown:this.props.readmeMarkdown,draftCounts:this.props.draftCounts,updateUsedRepoTags:this.props.updateUsedRepoTags,isDirentListLoading:this.props.isDirentListLoading,direntList:this.props.direntList,sortBy:this.props.sortBy,sortOrder:this.props.sortOrder,sortItems:this.props.sortItems,onAddFile:this.props.onAddFile,onItemClick:this.onItemClick,onItemSelected:this.props.onItemSelected,onItemDelete:this.props.onItemDelete,onItemRename:this.props.onItemRename,onItemMove:this.props.onItemMove,onItemCopy:this.props.onItemCopy,onDirentClick:this.onDirentClick,onItemDetails:this.onItemDetails,updateDirent:this.props.updateDirent,isAllItemSelected:this.props.isAllDirentSelected,onAllItemSelected:this.props.onAllDirentSelected}),"grid"===this.props.currentMode&&u.default.createElement(w.default,null),"column"===this.props.currentMode&&u.default.createElement(C.default,{path:this.props.path,repoID:n,currentRepoInfo:this.props.currentRepoInfo,repoPermission:this.props.repoPermission,isGroupOwnedRepo:this.props.isGroupOwnedRepo,enableDirPrivateShare:this.props.enableDirPrivateShare,isTreeDataLoading:this.props.isTreeDataLoading,treeData:this.props.treeData,currentNode:this.props.currentNode,onNodeClick:this.props.onNodeClick,onNodeCollapse:this.props.onNodeCollapse,onNodeExpanded:this.props.onNodeExpanded,onAddFolderNode:this.props.onAddFolder,onAddFileNode:this.props.onAddFile,onRenameNode:this.props.onRenameNode,onDeleteNode:this.props.onDeleteNode,isViewFile:this.props.isViewFile,isFileLoading:this.props.isFileLoading,isFileLoadedErr:this.props.isFileLoadedErr,hash:this.props.hash,isDraft:this.props.isDraft,hasDraft:this.props.hasDraft,goDraftPage:this.props.goDraftPage,filePermission:this.props.filePermission,content:this.props.content,lastModified:this.props.lastModified,latestContributor:this.props.latestContributor,onLinkClick:this.props.onLinkClick,isRepoInfoBarShow:i,usedRepoTags:this.props.usedRepoTags,readmeMarkdown:this.props.readmeMarkdown,draftCounts:this.props.draftCounts,updateUsedRepoTags:this.props.updateUsedRepoTags,isDirentListLoading:this.props.isDirentListLoading,direntList:this.props.direntList,sortBy:this.props.sortBy,sortOrder:this.props.sortOrder,sortItems:this.props.sortItems,onAddFile:this.props.onAddFile,onItemClick:this.onItemClick,onItemSelected:this.props.onItemSelected,onItemDelete:this.props.onItemDelete,onItemRename:this.props.onItemRename,onItemMove:this.props.onItemMove,onItemCopy:this.props.onItemCopy,onDirentClick:this.onDirentClick,onItemDetails:this.onItemDetails,updateDirent:this.props.updateDirent,isAllItemSelected:this.props.isAllDirentSelected,onAllItemSelected:this.props.onAllDirentSelected})))),this.props.isDirentDetailShow&&u.default.createElement("div",{className:"cur-view-detail"},u.default.createElement(g.default,{repoID:n,path:this.props.path,dirent:this.state.currentDirent,onItemDetailsClose:this.onItemDetailsClose,onFileTagChanged:this.props.onFileTagChanged})))}}]),t}(u.default.Component);_.propTypes=E,t.default=_},122:function(e,t){},1220:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(l),u={},c=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){return s.default.createElement("div",null,"\u8868\u683c\u5e03\u5c40")}}]),t}(s.default.Component);c.propTypes=u,t.default=c},1221:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(1222),p=a(f),h=n(1223),m=a(h),g=n(524),y=a(g);n(1224);var b={path:d.default.string.isRequired,repoID:d.default.string.isRequired,currentRepoInfo:d.default.object.isRequired,repoPermission:d.default.bool.isRequired,enableDirPrivateShare:d.default.bool.isRequired,userPrem:d.default.bool,isGroupOwnedRepo:d.default.bool.isRequired,isTreeDataLoading:d.default.bool.isRequired,treeData:d.default.object.isRequired,currentNode:d.default.object,onNodeClick:d.default.func.isRequired,onNodeCollapse:d.default.func.isRequired,onNodeExpanded:d.default.func.isRequired,onRenameNode:d.default.func.isRequired,onDeleteNode:d.default.func.isRequired,onAddFileNode:d.default.func.isRequired,onAddFolderNode:d.default.func.isRequired,isViewFile:d.default.bool.isRequired,isFileLoading:d.default.bool.isRequired,isFileLoadedErr:d.default.bool.isRequired,hash:d.default.string,isDraft:d.default.bool.isRequired,hasDraft:d.default.bool.isRequired,goDraftPage:d.default.func.isRequired,filePermission:d.default.bool.isRequired,content:d.default.string,lastModified:d.default.string,latestContributor:d.default.string,onLinkClick:d.default.func.isRequired,isRepoInfoBarShow:d.default.bool.isRequired,draftCounts:d.default.number.isRequired,usedRepoTags:d.default.array.isRequired,readmeMarkdown:d.default.object,updateUsedRepoTags:d.default.func.isRequired,isDirentListLoading:d.default.bool.isRequired,direntList:d.default.array.isRequired,sortBy:d.default.string.isRequired,sortOrder:d.default.string.isRequired,sortItems:d.default.func.isRequired,onAddFile:d.default.func.isRequired,updateDirent:d.default.func.isRequired,onItemClick:d.default.func.isRequired,onItemSelected:d.default.func.isRequired,onItemDelete:d.default.func.isRequired,onItemRename:d.default.func.isRequired,onItemMove:d.default.func.isRequired,onItemCopy:d.default.func.isRequired,onItemDetails:d.default.func.isRequired,onDirentClick:d.default.func.isRequired,isAllItemSelected:d.default.bool.isRequired,onAllItemSelected:d.default.func.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onResizeMouseUp=function(){n.state.inResizing&&n.setState({inResizing:!1}),n.setCookie("navRate",n.state.navRate)},n.onResizeMouseDown=function(){n.containerWidth=n.refs.viewModeContainer.clientWidth,n.setState({inResizing:!0})},n.onResizeMouseMove=function(e){var t=n.containerWidth/.78*.22+3,a=(e.nativeEvent.clientX-t)/n.containerWidth;a<.1?n.setState({inResizing:!1,navRate:.12}):a>.4?n.setState({inResizing:!1,navRate:.38}):n.setState({navRate:a})},n.setCookie=function(e,t){var n=e+"="+t+";";document.cookie=n},n.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0,r=n.length;a<r;a++){var o=n[a].trim();if(0==o.indexOf(t))return 1*o.substring(t.length,o.length)}return""},n.state={inResizing:!1,navRate:.25},n.containerWidth=null,n}return i(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this.getCookie("navRate");e&&this.setState({navRate:e})}},{key:"render",value:function(){var e=this.state.inResizing?this.onResizeMouseMove:null,t=this.state.inResizing?"none":"",n="1 0 "+100*(1-this.state.navRate)+"%";return u.default.createElement("div",{className:"dir-colunm-view",onMouseMove:e,onMouseUp:this.onResizeMouseUp,ref:"viewModeContainer"},u.default.createElement(p.default,{currentPath:this.props.path,repoPermission:this.props.repoPermission,isTreeDataLoading:this.props.isTreeDataLoading,treeData:this.props.treeData,currentNode:this.props.currentNode,onNodeClick:this.props.onNodeClick,onNodeCollapse:this.props.onNodeCollapse,onNodeExpanded:this.props.onNodeExpanded,onAddFolderNode:this.props.onAddFolderNode,onAddFileNode:this.props.onAddFileNode,onRenameNode:this.props.onRenameNode,onDeleteNode:this.props.onDeleteNode,repoID:this.props.repoID,navRate:this.state.navRate,inResizing:this.state.inResizing,currentRepoInfo:this.props.currentRepoInfo,onItemMove:this.props.onItemMove,onItemCopy:this.props.onItemCopy}),u.default.createElement("div",{className:"dir-content-resize",onMouseDown:this.onResizeMouseDown}),u.default.createElement("div",{className:"dir-content-main",style:{userSelect:t,flex:n}},this.props.isViewFile?u.default.createElement(m.default,{path:this.props.path,repoID:this.props.repoID,hash:this.props.hash,isDraft:this.props.isDraft,hasDraft:this.props.hasDraft,goDraftPage:this.props.goDraftPage,isFileLoading:this.props.isFileLoading,isFileLoadedErr:this.props.isFileLoadedErr,filePermission:this.props.filePermission,content:this.props.content,lastModified:this.props.lastModified,latestContributor:this.props.latestContributor,onLinkClick:this.props.onLinkClick}):u.default.createElement(y.default,{path:this.props.path,repoID:this.props.repoID,currentRepoInfo:this.props.currentRepoInfo,isGroupOwnedRepo:this.props.isGroupOwnedRepo,enableDirPrivateShare:this.props.enableDirPrivateShare,isRepoInfoBarShow:this.props.isRepoInfoBarShow,usedRepoTags:this.props.usedRepoTags,readmeMarkdown:this.props.readmeMarkdown,draftCounts:this.props.draftCounts,updateUsedRepoTags:this.props.updateUsedRepoTags,isDirentListLoading:this.props.isDirentListLoading,direntList:this.props.direntList,sortBy:this.props.sortBy,sortOrder:this.props.sortOrder,sortItems:this.props.sortItems,onAddFile:this.props.onAddFile,onItemClick:this.props.onItemClick,onItemSelected:this.props.onItemSelected,onItemDelete:this.props.onItemDelete,onItemRename:this.props.onItemRename,onItemMove:this.props.onItemMove,onItemCopy:this.props.onItemCopy,onDirentClick:this.props.onDirentClick,onItemDetails:this.props.onItemDetails,updateDirent:this.props.updateDirent,isAllItemSelected:this.props.isAllItemSelected,onAllItemSelected:this.props.onAllItemSelected})))}}]),t}(u.default.Component);v.propTypes=b,t.default=v},1222:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(164),p=a(f),h=n(11),m=a(h),g=n(10),y=a(g),b=n(277),v=a(b),w=n(278),S=a(w),C=n(142),E=a(C),_=n(141),D=a(_),P=n(170),L=a(P),R=n(123),M=a(R),T=n(2),k=n(4),N=n(294),Y=a(N);n(207);var I={currentPath:d.default.string.isRequired,repoPermission:d.default.bool.isRequired,isTreeDataLoading:d.default.bool.isRequired,treeData:d.default.object.isRequired,currentNode:d.default.object,onNodeClick:d.default.func.isRequired,onNodeCollapse:d.default.func.isRequired,onNodeExpanded:d.default.func.isRequired,onRenameNode:d.default.func.isRequired,onDeleteNode:d.default.func.isRequired,onAddFileNode:d.default.func.isRequired,onAddFolderNode:d.default.func.isRequired,repoID:d.default.string.isRequired,navRate:d.default.number,inResizing:d.default.bool.isRequired,currentRepoInfo:d.default.object.isRequired},O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onNodeClick=function(e){if(n.setState({opNode:e}),k.Utils.imageCheck(e.object.name))return void n.showNodeImagePopup(e);n.props.onNodeClick(e)},n.onMenuItemClick=function(e,t){switch(n.setState({opNode:t}),e){case"New Folder":t?n.onAddFolderToggle():n.onAddFolderToggle("root");break;case"New File":t?n.onAddFileToggle():n.onAddFileToggle("root");break;case"Rename":n.onRenameToggle();break;case"Delete":n.onDeleteToggle();break;case"Copy":n.onCopyToggle();break;case"Move":n.onMoveToggle();break;case"Open in New Tab":n.onOpenFile(t)}},n.onAddFileToggle=function(e){if("root"===e){var t=n.props.treeData.root;n.setState({isAddFileDialogShow:!n.state.isAddFileDialogShow,opNode:t})}else n.setState({isAddFileDialogShow:!n.state.isAddFileDialogShow})},n.onAddFolderToggle=function(e){if("root"===e){var t=n.props.treeData.root;n.setState({isAddFolderDialogShow:!n.state.isAddFolderDialogShow,opNode:t})}else n.setState({isAddFolderDialogShow:!n.state.isAddFolderDialogShow})},n.onRenameToggle=function(){n.setState({isRenameDialogShow:!n.state.isRenameDialogShow})},n.onDeleteToggle=function(){n.setState({isDeleteDialogShow:!n.state.isDeleteDialogShow})},n.onCopyToggle=function(){n.setState({isCopyDialogShow:!n.state.isCopyDialogShow})},n.onMoveToggle=function(){n.setState({isMoveDialogShow:!n.state.isMoveDialogShow})},n.onAddFolderNode=function(e){n.setState({isAddFolderDialogShow:!n.state.isAddFolderDialogShow}),n.props.onAddFolderNode(e)},n.onAddFileNode=function(e,t){n.setState({isAddFileDialogShow:!n.state.isAddFileDialogShow}),n.props.onAddFileNode(e,t)},n.onRenameNode=function(e){n.setState({isRenameDialogShow:!n.state.isRenameDialogShow});var t=n.state.opNode;n.props.onRenameNode(t,e)},n.onDeleteNode=function(){n.setState({isDeleteDialogShow:!n.state.isDeleteDialogShow});var e=n.state.opNode;n.props.onDeleteNode(e)},n.onOpenFile=function(e){var t=T.siteRoot+"lib/"+n.props.repoID+"/file"+k.Utils.encodePath(e.path);window.open(t,"_blank")},n.checkDuplicatedName=function(e){var t=n.state.opNode;return(t.parentNode?t.parentNode:t).children.map(function(e){return e.object}).some(function(t){return t.name===e})},n.showNodeImagePopup=function(e){var t=e.parentNode.children,a=t.filter(function(e){return k.Utils.imageCheck(e.object.name)}),r=a.map(function(e){return e.object.name});n.setState({isNodeImagePopupOpen:!0,imageNodeItems:n.prepareImageItems(e),imageIndex:r.indexOf(e.object.name)})},n.prepareImageItems=function(e){var t=e.parentNode.children,a=t.filter(function(e){return k.Utils.imageCheck(e.object.name)}),r=!n.props.currentRepoInfo.encrypted,o=function(t){var a=t.object.name,o=k.Utils.encodePath(k.Utils.joinPath(e.parentNode.path,a)),i=a.substr(a.lastIndexOf(".")+1).toLowerCase(),l="gif"===i,s=n.props.repoID,u="";return u=r&&!l?T.siteRoot+"thumbnail/"+s+"/"+T.thumbnailSizeForOriginal+o:T.siteRoot+"repo/"+s+"/raw"+o,{name:a,url:T.siteRoot+"lib/"+s+"/file"+o,src:u}};return a.map(function(e){return o(e)})},n.closeNodeImagePopup=function(){n.setState({isNodeImagePopupOpen:!1})},n.moveToPrevImage=function(){var e=n.state.imageNodeItems.length;n.setState(function(t){return{imageIndex:(t.imageIndex+e-1)%e}})},n.moveToNextImage=function(){var e=n.state.imageNodeItems.length;n.setState(function(t){return{imageIndex:(t.imageIndex+1)%e}})},n.state={opNode:null,isDeleteDialogShow:!1,isAddFileDialogShow:!1,isAddFolderDialogShow:!1,isRenameDialogShow:!1,isNodeImagePopupOpen:!1,imageNodeItems:[],imageIndex:0,isCopyDialogShow:!1,isMoveDialogShow:!1,isMutipleOperation:!1},n.isNodeMenuShow=!0,n}return i(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({opNode:e.currentNode})}},{key:"render",value:function(){var e=this.props.navRate?"0 0 "+100*this.props.navRate+"%":"0 0 25%",t=this.props.inResizing?"none":"",n=this.state.imageNodeItems,a=this.state.imageIndex,r=n.length,o=r&&u.default.createElement(s.Fragment,null,u.default.createElement("span",null,(0,T.gettext)("%curr% of %total%").replace("%curr%",a+1).replace("%total%",r)),u.default.createElement("br",null),u.default.createElement("a",{href:n[a].url,target:"_blank"},(0,T.gettext)("Open in New Tab")));return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"dir-content-nav",role:"navigation",style:{flex:e,userSelect:t}},this.props.isTreeDataLoading?u.default.createElement(m.default,null):u.default.createElement(p.default,{repoPermission:this.props.repoPermission,isNodeMenuShow:this.isNodeMenuShow,treeData:this.props.treeData,currentPath:this.props.currentPath,onNodeClick:this.onNodeClick,onNodeExpanded:this.props.onNodeExpanded,onNodeCollapse:this.props.onNodeCollapse,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.onFreezedItem,onUnFreezedItem:this.onUnFreezedItem,onItemMove:this.props.onItemMove,currentRepoInfo:this.props.currentRepoInfo})),this.state.isAddFolderDialogShow&&u.default.createElement(y.default,null,u.default.createElement(L.default,{parentPath:this.state.opNode.path,onAddFolder:this.onAddFolderNode,checkDuplicatedName:this.checkDuplicatedName,addFolderCancel:this.onAddFolderToggle})),this.state.isAddFileDialogShow&&u.default.createElement(y.default,null,u.default.createElement(M.default,{parentPath:this.state.opNode.path,onAddFile:this.onAddFileNode,checkDuplicatedName:this.checkDuplicatedName,addFileCancel:this.onAddFileToggle})),this.state.isRenameDialogShow&&u.default.createElement(y.default,null,u.default.createElement(S.default,{currentNode:this.state.opNode,onRename:this.onRenameNode,checkDuplicatedName:this.checkDuplicatedName,toggleCancel:this.onRenameToggle})),this.state.isDeleteDialogShow&&u.default.createElement(y.default,null,u.default.createElement(v.default,{currentNode:this.state.opNode,handleSubmit:this.onDeleteNode,toggleCancel:this.onDeleteToggle})),this.state.isCopyDialogShow&&u.default.createElement(y.default,null,u.default.createElement(E.default,{path:this.state.opNode.parentNode.path,repoID:this.props.repoID,dirent:this.state.opNode.object,onItemCopy:this.props.onItemCopy,repoEncrypted:this.props.currentRepoInfo.encrypted,onCancelCopy:this.onCopyToggle,isMutipleOperation:this.state.isMutipleOperation})),this.state.isMoveDialogShow&&u.default.createElement(y.default,null,u.default.createElement(D.default,{path:this.state.opNode.parentNode.path,repoID:this.props.repoID,dirent:this.state.opNode.object,onItemMove:this.props.onItemMove,repoEncrypted:this.props.currentRepoInfo.encrypted,onCancelMove:this.onMoveToggle,isMutipleOperation:this.state.isMutipleOperation})),this.state.isNodeImagePopupOpen&&u.default.createElement(Y.default,{mainSrc:n[a].src,imageCaption:o,imageTitle:n[a].name,nextSrc:n[(a+1)%r].src,prevSrc:n[(a+r-1)%r].src,onCloseRequest:this.closeNodeImagePopup,onMovePrevRequest:this.moveToPrevImage,onMoveNextRequest:this.moveToNextImage,imagePadding:70,imageLoadErrorMessage:(0,T.gettext)("The image could not be loaded."),prevLabel:(0,T.gettext)("Previous (Left arrow key)"),nextLabel:(0,T.gettext)("Next (Right arrow key)"),closeLabel:(0,T.gettext)("Close (Esc)"),zoomInLabel:(0,T.gettext)("Zoom in"),zoomOutLabel:(0,T.gettext)("Zoom out")}))}}]),t}(u.default.Component);O.defaultProps={navRate:.25},O.propTypes=I,t.default=O},1223:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(4),p=n(2),h=n(3),m=n(169),g=a(m),y={path:d.default.string.isRequired,repoID:d.default.string.isRequired,hash:d.default.string,isDraft:d.default.bool,hasDraft:d.default.bool,goDraftPage:d.default.func.isRequired,isFileLoading:d.default.bool.isRequired,isFileLoadedErr:d.default.bool.isRequired,filePermission:d.default.bool,content:d.default.string,lastModified:d.default.string,latestContributor:d.default.string,onLinkClick:d.default.func.isRequired},b=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.onEditClick=function(e){e.preventDefault();var t=a.props,n=t.path,r=t.repoID,o=p.siteRoot+"lib/"+r+"/file"+f.Utils.encodePath(n)+"?mode=edit";window.open(o)},a.onNewDraft=function(e){e.preventDefault();var t=a.props,n=t.path,r=t.repoID;h.seafileAPI.createDraft(r,n).then(function(e){window.location.href=p.siteRoot+"lib/"+e.data.origin_repo_id+"/file"+e.data.draft_file_path+"?mode=edit"})},a.onOpenFile=function(e){e.preventDefault();var t=a.props,n=t.path,r=t.repoID,o=p.siteRoot+"lib/"+r+"/file"+f.Utils.encodePath(n);window.open(o,"_blank")},a.goDraftPage=function(e){e.preventDefault(),a.props.goDraftPage()},i=n,o(a,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){if(this.props.hash){var e=this.props.hash;setTimeout(function(){window.location.hash=e},500)}}},{key:"render",value:function(){return this.props.isFileLoadedErr?u.default.createElement("div",{className:"message err-tip"},(0,p.gettext)("File does not exist.")):u.default.createElement(g.default,{isTOCShow:!1,isFileLoading:this.props.isFileLoading,markdownContent:this.props.content,lastModified:this.props.lastModified,latestContributor:this.props.latestContributor,onLinkClick:this.props.onLinkClick},u.default.createElement(s.Fragment,null,u.default.createElement("span",{className:"wiki-open-file position-fixed",onClick:this.onOpenFile},u.default.createElement("i",{className:"fas fa-expand-arrows-alt"})),!this.props.isDraft&&this.props.hasDraft&&u.default.createElement("div",{className:"seafile-btn-view-review text-center mt-2"},u.default.createElement("div",{className:"tag tag-green"},(0,p.gettext)("This file is in draft stage."),u.default.createElement("span",{className:"ml-2",onClick:this.goDraftPage},(0,p.gettext)("View Draft"))))))}}]),t}(u.default.Component);b.propTypes=y,t.default=b},1224:function(e,t){},1225:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(5),d=n(1),f=a(d),p=n(22),h=a(p),m=n(2),g=n(60),y=n(3),b=n(4),v=n(11),w=a(v),S=n(10),C=a(S),E=n(312),_=a(E),D=n(125),P=a(D),L=n(80),R=a(L),M=n(313),T=a(M),k=n(1226),N=a(k),Y=n(1227),I=a(Y),O=n(1228),Z=a(O),F=n(1229),x=a(F),X=n(1231),J=a(X),H=n(316),j=a(H),B=n(314),Q=a(B);n(1233);var G={onShowSidePanel:f.default.func.isRequired,onSearchedClick:f.default.func.isRequired,onGroupChanged:f.default.func.isRequired,onTabNavClick:f.default.func.isRequired,groupID:f.default.string},A=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.loadGroup=function(e){y.seafileAPI.getGroup(e).then(function(t){var a=new _.default(t.data),r=n.getEmptyTip(a),o=a.admins.indexOf(m.username)>-1,i=a.owner===m.username,l=0!==a.parent_group_id;n.setState({emptyTip:r,currentGroup:a,isStaff:o,isDepartmentGroup:l,isOwner:i}),n.loadRepos(e)}).catch(function(e){e.response?403==e.response.status?(n.setState({isLoading:!1,errMessage:(0,m.gettext)("Permission denied")}),location.href=m.loginUrl+"?next="+encodeURIComponent(location.href)):n.setState({isLoading:!1,errMessage:(0,m.gettext)("Error")}):n.setState({isLoading:!1,errMessage:(0,m.gettext)("Please check the network.")})})},n.loadRepos=function(e){n.setState({isLoading:!0}),y.seafileAPI.listGroupRepos(e).then(function(e){var t=e.data.map(function(e){return new P.default(e)});n.setState({isLoading:!1,repoList:b.Utils.sortRepos(t,n.state.sortBy,n.state.sortOrder)})}).catch(function(e){e.response?403==e.response.status?(n.setState({isLoading:!1,errMessage:(0,m.gettext)("Permission denied")}),location.href=m.loginUrl+"?next="+encodeURIComponent(location.href)):n.setState({isLoading:!1,errMessage:(0,m.gettext)("Error")}):n.setState({isLoading:!1,errMessage:(0,m.gettext)("Please check the network.")})})},n.getEmptyTip=function(e){var t=null;return e&&(t=0===e.parent_group_id?u.default.createElement("div",{className:"empty-tip"},u.default.createElement("h2",null,(0,m.gettext)("No library is shared to this group")),u.default.createElement("p",null,(0,m.gettext)('You can share libraries by clicking the "New Library" button above or the "Share" icon on your libraries list.')),u.default.createElement("p",null,(0,m.gettext)("Libraries shared as writable can be downloaded and synced by other group members. Read only libraries can only be downloaded, updates by others will not be uploaded."))):-1==e.admins.indexOf(m.username)?u.default.createElement("div",{className:"empty-tip"},u.default.createElement("h2",null,(0,m.gettext)("No libraries"))):u.default.createElement("div",{className:"empty-tip"},u.default.createElement("h2",null,(0,m.gettext)("No libraries")),u.default.createElement("p",null,(0,m.gettext)('You can create libraries by clicking the "New Library" button above.')))),t},n.onCreateRepoToggle=function(){n.setState({isCreateRepoDialogShow:!n.state.isCreateRepoDialogShow})},n.onCreateRepo=function(e,t){var a=n.props.groupID;t&&"department"===t?y.seafileAPI.createGroupOwnedLibrary(a,e).then(function(e){var t={repo_id:e.data.id,repo_name:e.data.name,owner_name:e.data.group_name,owner_email:e.data.owner,permission:e.data.permission,mtime:e.data.mtime,size:e.data.size,encrypted:e.data.encrypted},a=new P.default(t),r=n.addRepoItem(a);n.setState({repoList:r})}).then(function(){}):y.seafileAPI.createGroupRepo(a,e).then(function(e){var t=new P.default(e.data),a=n.addRepoItem(t);n.setState({repoList:a})}).catch(function(){}),n.onCreateRepoToggle()},n.onItemDelete=function(e){var t=n.props.groupID;y.seafileAPI.deleteGroupOwnedLibrary(t,e.repo_id).then(function(){var t=n.state.repoList.filter(function(t){return t.repo_id!==e.repo_id});n.setState({repoList:t})}).catch(function(){})},n.addRepoItem=function(e){var t=n.state.repoList.map(function(e){return e});return t.unshift(e),t},n.onItemUnshare=function(e){var t=n.state.currentGroup;y.seafileAPI.unshareRepo(e.repo_id,{share_type:"group",group_id:t.id}).then(function(){var t=n.state.repoList.filter(function(t){return t.repo_id!==e.repo_id});n.setState({repoList:t})})},n.onItemRename=function(e,t){y.seafileAPI.renameGroupOwnedLibrary(n.props.groupID,e.repo_id,t).then(function(a){var r=n.state.repoList.map(function(n){return n.repo_id===e.repo_id&&(n.repo_name=t),n});n.setState({repoList:r})}).catch(function(){})},n.onTabNavClick=function(e){n.props.onTabNavClick(e)},n.toggleGroupDropdown=function(){n.setState({showGroupDropdown:!n.state.showGroupDropdown})},n.toggleDismissGroupDialog=function(){n.setState({showDismissGroupDialog:!n.state.showDismissGroupDialog,showGroupDropdown:!1})},n.toggleRenameGroupDialog=function(){n.setState({showRenameGroupDialog:!n.state.showRenameGroupDialog,showGroupDropdown:!1})},n.toggleTransferGroupDialog=function(){n.setState({showTransferGroupDialog:!n.state.showTransferGroupDialog,showGroupDropdown:!1})},n.toggleManageMembersDialog=function(){n.setState({showManageMembersDialog:!n.state.showManageMembersDialog,showGroupDropdown:!1})},n.listGroupMembers=function(){y.seafileAPI.listGroupMembers(n.props.groupID).then(function(e){n.setState({groupMembers:e.data})})},n.toggleGroupMembersPopover=function(e){"open"===e?(n.listGroupMembers(),n.setState({showGroupMembersPopover:!0})):n.setState({showGroupMembersPopover:!1})},n.onItemDetails=function(e){n.setState({isShowDetails:!0,currentRepo:e})},n.closeDetails=function(){n.setState({isShowDetails:!1})},n.sortItems=function(e,t){h.default.save("seafile-repo-sort-by",e),h.default.save("seafile-repo-sort-order",t),n.setState({sortBy:e,sortOrder:t,repoList:b.Utils.sortRepos(n.state.repoList,e,t)})},n.translateRole=function(e){return"Admin"===e?(0,m.gettext)("Admin"):"Member"===e?(0,m.gettext)("Member"):"Owner"===e?(0,m.gettext)("Owner"):void 0},n.state={isLoading:!0,errMessage:"",emptyTip:null,currentGroup:null,currentRepo:null,isStaff:!1,isOwner:!1,sortBy:h.default.load("seafile-repo-sort-by")||"name",sortOrder:h.default.load("seafile-repo-sort-order")||"asc",repoList:[],libraryType:"group",isCreateRepoDialogShow:!1,isDepartmentGroup:!1,showGroupDropdown:!1,showGroupMembersPopover:!1,showRenameGroupDialog:!1,showDismissGroupDialog:!1,showTransferGroupDialog:!1,showManageMembersDialog:!1,groupMembers:[],isShowDetails:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.groupID;this.loadGroup(e)}},{key:"componentWillReceiveProps",value:function(e){e.groupID!==this.props.groupID&&this.loadGroup(e.groupID)}},{key:"render",value:function(){var e=this,t=this.state,n=t.errMessage,a=t.emptyTip,r=t.currentGroup,o=!(r&&0!==r.parent_group_id&&-1===r.admins.indexOf(m.username)),i=this;return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"main-panel-north border-left-show"},u.default.createElement("div",{className:"cur-view-toolbar"},u.default.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu",onClick:this.props.onShowSidePanel}),u.default.createElement("div",{className:"operation"},m.canAddRepo&&u.default.createElement("button",{className:"btn btn-secondary operation-item",title:(0,m.gettext)("New Library"),onClick:this.onCreateRepoToggle},u.default.createElement("i",{className:"fas fa-plus-square text-secondary mr-1"}),(0,m.gettext)("New Library")))),u.default.createElement(R.default,{onSearchedClick:this.props.onSearchedClick})),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},r&&u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"path-container"},u.default.createElement(g.Link,{to:m.siteRoot+"groups/",onClick:function(){return e.onTabNavClick("groups")}},(0,m.gettext)("Groups")),u.default.createElement("span",{className:"path-split"},"/"),u.default.createElement("span",null,r.name),0!==r.parent_group_id&&u.default.createElement("span",{className:"department-group-icon fas fa-building",title:(0,m.gettext)("This is a special group representing a department.")})),u.default.createElement("div",{className:"path-tool"},o&&this.state.isStaff&&u.default.createElement(u.default.Fragment,null,u.default.createElement("a",{href:"#",className:"sf2-icon-cog1 action-icon group-top-action-icon",title:"Settings",id:"settings",onClick:this.toggleGroupDropdown}),u.default.createElement(c.Popover,{placement:"bottom",isOpen:this.state.showGroupDropdown,target:"settings",toggle:this.toggleGroupDropdown,hideArrow:!0,className:"sf-popover"},u.default.createElement("div",{className:"sf-popover-hd sf-popover-title"},u.default.createElement("span",null,(0,m.gettext)("Settings")),u.default.createElement("a",{href:"#",className:"sf-popover-close js-close sf2-icon-x1 action-icon",onClick:this.toggleGroupDropdown})),u.default.createElement("div",{className:"sf-popover-con"},u.default.createElement("ul",{className:"sf-popover-list"},u.default.createElement("li",null,u.default.createElement("a",{href:"#",className:"sf-popover-item",onClick:this.toggleRenameGroupDialog},(0,m.gettext)("Rename"))),this.state.isOwner&&u.default.createElement("li",null,u.default.createElement("a",{href:"#",className:"sf-popover-item",onClick:this.toggleTransferGroupDialog},(0,m.gettext)("Transfer")))),u.default.createElement("ul",{className:"sf-popover-list"},u.default.createElement("li",null,u.default.createElement("a",{href:"#",className:"sf-popover-item",onClick:this.toggleManageMembersDialog},(0,m.gettext)("Manage Members")))),this.state.isOwner&&u.default.createElement("ul",{className:"sf-popover-list"},u.default.createElement("li",null,u.default.createElement("a",{href:"#",className:"sf-popover-item",onClick:this.toggleDismissGroupDialog},(0,m.gettext)("Dismiss"))))))),u.default.createElement("a",{href:"#",className:"sf2-icon-user2 action-icon group-top-action-icon",title:(0,m.gettext)("Members"),id:"groupMembers",onClick:function(){return e.toggleGroupMembersPopover("open")}}),u.default.createElement(c.Popover,{placement:"bottom",isOpen:this.state.showGroupMembersPopover,target:"groupMembers",toggle:this.toggleGroupMembersPopover,hideArrow:!0,className:"sf-popover"},u.default.createElement("div",{className:"sf-popover-hd sf-popover-title group-member-list-header"},u.default.createElement("span",null,(0,m.gettext)("Members")),u.default.createElement("a",{href:"#",className:"sf-popover-close js-close sf2-icon-x1 action-icon",onClick:this.toggleGroupMembersPopover})),u.default.createElement("div",{className:"sf-popover-con"},u.default.createElement("ul",{className:"sf-popover-list group-member-list"},this.state.groupMembers.map(function(e,t){return u.default.createElement("li",{key:t},u.default.createElement("a",{href:"#",className:"sf-popover-item user-item"},u.default.createElement("img",{src:e.avatar_url,alt:"",className:"group-member-avatar avatar"}),u.default.createElement("span",{className:"txt-item ellipsis"},u.default.createElement("span",{className:"group-member-name"},e.name),u.default.createElement("span",{className:"group-member-admin"},i.translateRole(e.role)))))}))))))),u.default.createElement("div",{className:"cur-view-content"},this.state.isLoading&&u.default.createElement(w.default,null),!this.state.isLoading&&n&&n,!this.state.isLoading&&0===this.state.repoList.length&&a,!this.state.isLoading&&this.state.repoList.length>0&&u.default.createElement(j.default,{repoList:this.state.repoList,currentGroup:this.state.currentGroup,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortItems:this.sortItems,onItemUnshare:this.onItemUnshare,onItemDelete:this.onItemDelete,onItemDetails:this.onItemDetails,onItemRename:this.onItemRename}))),this.state.isShowDetails&&u.default.createElement("div",{className:"cur-view-detail"},u.default.createElement(Q.default,{currentRepo:this.state.currentRepo,closeDetails:this.closeDetails}))),this.state.isCreateRepoDialogShow&&!this.state.isDepartmentGroup&&u.default.createElement(C.default,null,u.default.createElement(T.default,{libraryType:this.state.libraryType,onCreateToggle:this.onCreateRepoToggle,onCreateRepo:this.onCreateRepo})),this.state.isCreateRepoDialogShow&&this.state.isDepartmentGroup&&u.default.createElement(N.default,{isAdmin:this.state.isAdmin,onCreateToggle:this.onCreateRepoToggle,onCreateRepo:this.onCreateRepo}),this.state.showRenameGroupDialog&&u.default.createElement(Z.default,{showRenameGroupDialog:this.state.showRenameGroupDialog,toggleRenameGroupDialog:this.toggleRenameGroupDialog,loadGroup:this.loadGroup,groupID:this.props.groupID,onGroupChanged:this.props.onGroupChanged,currentGroupName:r.name}),this.state.showDismissGroupDialog&&u.default.createElement(I.default,{showDismissGroupDialog:this.state.showDismissGroupDialog,toggleDismissGroupDialog:this.toggleDismissGroupDialog,loadGroup:this.loadGroup,groupID:this.props.groupID,onGroupChanged:this.props.onGroupChanged}),this.state.showTransferGroupDialog&&u.default.createElement(x.default,{toggleTransferGroupDialog:this.toggleTransferGroupDialog,groupID:this.props.groupID,onGroupChanged:this.props.onGroupChanged}),this.state.showManageMembersDialog&&u.default.createElement(J.default,{toggleManageMembersDialog:this.toggleManageMembersDialog,groupID:this.props.groupID,onGroupChanged:this.props.onGroupChanged,isOwner:this.state.isOwner}))}}]),t}(u.default.Component);A.propTypes=G,t.default=A},1226:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h={onCreateRepo:d.default.func.isRequired,onCreateToggle:d.default.func.isRequired},m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){n.setState({repoName:e.target.value})},n.handleSubmit=function(){if(n.validateRepoName()){var e=n.createRepo(n.state.repoName);n.props.onCreateRepo(e,"department")}},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.toggle=function(){n.props.onCreateToggle()},n.componentDidMount=function(){n.newInput.focus()},n.validateRepoName=function(){var e="",t=n.state.repoName.trim();return t.length?!(t.indexOf("/")>-1)||(e=(0,p.gettext)("Name should not include '/'."),n.setState({errMessage:e}),!1):(e=(0,p.gettext)("Name is required"),n.setState({errMessage:e}),!1)},n.createRepo=function(e){return{repo_name:e}},n.state={repoName:"",errMessage:""},n.newInput=u.default.createRef(),n}return i(t,e),l(t,[{key:"render",value:function(){var e=this;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("New Department Library")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,{for:"repo-name"},(0,p.gettext)("Name")),u.default.createElement(f.Input,{id:"repo-name",onKeyPress:this.handleKeyPress,innerRef:function(t){e.newInput=t},value:this.state.repoName,onChange:this.handleChange,maxLength:p.maxFileName}))),this.state.errMessage&&u.default.createElement(f.Alert,{color:"danger"},this.state.errMessage)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);m.propTypes=h,t.default=m},1227:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(3),h=n(5),m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.dismissGroup=function(){var e=n;p.seafileAPI.deleteGroup(n.props.groupID).then(function(t){e.props.onGroupChanged()})},n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(h.Modal,{isOpen:this.props.showDismissGroupDialog,toggle:this.props.toggleDismissGroupDialog},u.default.createElement(h.ModalHeader,null,(0,f.gettext)("Dismiss Group")),u.default.createElement(h.ModalBody,null,u.default.createElement("span",null,(0,f.gettext)("Really want to dismiss this group?"))),u.default.createElement(h.ModalFooter,null,u.default.createElement(h.Button,{color:"secondary",onClick:this.props.toggleDismissGroupDialog},(0,f.gettext)("Cancel")),u.default.createElement(h.Button,{color:"primary",onClick:this.dismissGroup},(0,f.gettext)("Dismiss"))))}}]),t}(u.default.Component),g={showDismissGroupDialog:d.default.bool.isRequired,toggleDismissGroupDialog:d.default.func.isRequired,loadGroup:d.default.func.isRequired,groupID:d.default.string.isRequired,onGroupChanged:d.default.func.isRequired};m.propTypes=g,t.default=m},1228:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(3),h=n(5),m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleGroupNameChange=function(e){var t=e.target.value;n.setState({newGroupName:t})},n.renameGroup=function(){var e=n.state.newGroupName.trim();if(e){var t=n;p.seafileAPI.renameGroup(n.props.groupID,e).then(function(e){t.props.loadGroup(n.props.groupID),t.props.onGroupChanged(e.data.id)})}n.setState({newGroupName:""}),n.props.toggleRenameGroupDialog()},n.handleKeyDown=function(e){13===e.keyCode&&n.renameGroup()},n.state={newGroupName:n.props.currentGroupName},n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(h.Modal,{isOpen:this.props.showRenameGroupDialog,toggle:this.props.toggleRenameGroupDialog},u.default.createElement(h.ModalHeader,null,(0,f.gettext)("Rename Group")),u.default.createElement(h.ModalBody,null,u.default.createElement("label",{htmlFor:"newGroupName"},(0,f.gettext)("Rename group to")),u.default.createElement(h.Input,{type:"text",id:"newGroupName",value:this.state.newGroupName,onChange:this.handleGroupNameChange,onKeyDown:this.handleKeyDown})),u.default.createElement(h.ModalFooter,null,u.default.createElement(h.Button,{color:"secondary",onClick:this.props.toggleRenameGroupDialog},(0,f.gettext)("Cancel")),u.default.createElement(h.Button,{color:"primary",onClick:this.renameGroup},(0,f.gettext)("Submit"))))}}]),t}(u.default.Component),g={showRenameGroupDialog:d.default.bool.isRequired,toggleRenameGroupDialog:d.default.func.isRequired,loadGroup:d.default.func.isRequired,groupID:d.default.string.isRequired,onGroupChanged:d.default.func.isRequired,currentGroupName:d.default.string.isRequired};m.propTypes=g,t.default=m},1229:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(3),m=n(23),g=a(m);n(1230);var y={groupID:d.default.string.isRequired,toggleTransferGroupDialog:d.default.func.isRequired,onGroupChanged:d.default.func.isRequired},b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectChange=function(e){n.setState({selectedOption:e,errMessage:""}),n.options=[]},n.transferGroup=function(){var e=n.state.selectedOption&&n.state.selectedOption.email;e&&h.seafileAPI.transferGroup(n.props.groupID,e).then(function(e){n.props.toggleTransferGroupDialog()}).catch(function(e){e.response&&n.setState({errMessage:e.response.data.error_msg})})},n.toggle=function(){n.props.toggleTransferGroupDialog()},n.state={selectedOption:null,errMessage:""},n.options=[],n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("Transfer Group")),u.default.createElement(f.ModalBody,null,u.default.createElement("p",null,(0,p.gettext)("Transfer group to")),u.default.createElement(g.default,{ref:"userSelect",isMulti:!1,className:"reviewer-select",placeholder:(0,p.gettext)("Please enter 1 or more character"),onSelectChange:this.handleSelectChange}),u.default.createElement("div",{className:"error"},this.state.errMessage)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Close")),u.default.createElement(f.Button,{color:"primary",onClick:this.transferGroup},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);b.propTypes=y,t.default=b},123:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(4),m={fileType:d.default.string,parentPath:d.default.string.isRequired,onAddFile:d.default.func.isRequired,checkDuplicatedName:d.default.func.isRequired,addFileCancel:d.default.func.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){n.setState({childName:e.target.value})},n.handleSubmit=function(){var e=n.checkDuplicatedName(),t=n.state.childName;if(e){var a=(0,p.gettext)('The name "{name}" is already taken. Please choose a different name.');a=a.replace("{name}",h.Utils.HTMLescape(t)),n.setState({errMessage:a})}else{var r=n.state.parentPath+t,o=n.state.isDraft;n.props.onAddFile(r,o)}},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.handleCheck=function(){var e=n.state.childName.lastIndexOf(".");if(n.state.isDraft){var t=n.state.childName.substring(e-7,e),a=n.state.childName.substring(0,e-7),r=n.state.childName.substring(e);"(draft)"===t?n.setState({childName:a+r,isDraft:!n.state.isDraft}):n.setState({isDraft:!n.state.isDraft})}if(!n.state.isDraft)if(e>0){var o=n.state.childName.substring(0,e),i=n.state.childName.substring(e);n.setState({childName:o+"(draft)"+i,isDraft:!n.state.isDraft})}else 0===e?n.setState({childName:"(draft)"+n.state.childName,isDraft:!n.state.isdraft}):n.setState({isDraft:!n.state.isdraft})},n.toggle=function(){n.props.addFileCancel()},n.checkDuplicatedName=function(){return n.props.checkDuplicatedName(n.state.childName)},n.state={parentPath:"",childName:e.fileType,isDraft:!1,errMessage:""},n.newInput=u.default.createRef(),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.parentPath;"/"===e[e.length-1]?this.setState({parentPath:e}):this.setState({parentPath:e+"/"}),this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("New File")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,{for:"fileName"},(0,p.gettext)("Name")),u.default.createElement(f.Input,{id:"fileName",onKeyPress:this.handleKeyPress,innerRef:function(t){e.newInput=t},value:this.state.childName,onChange:this.handleChange})),".md"==this.props.fileType&&p.isDocs&&u.default.createElement(f.FormGroup,{check:!0},u.default.createElement(f.Label,{check:!0},u.default.createElement(f.Input,{type:"checkbox",onChange:this.handleCheck}),"  ",(0,p.gettext)("This is a draft")))),this.state.errMessage&&u.default.createElement(f.Alert,{color:"danger",className:"mt-2"},this.state.errMessage)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);g.propTypes=m,t.default=g},1230:function(e,t){},1231:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(5),h=n(3),m=n(317),g=a(m),y=n(23),b=a(y);n(1232);var v={groupID:d.default.string.isRequired,toggleManageMembersDialog:d.default.func.isRequired,onGroupChanged:d.default.func.isRequired,isOwner:d.default.bool.isRequired},w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSelectChange=function(e){n.setState({selectedOption:e,errMessage:[]})},n.addGroupMember=function(){for(var e=[],t=0;t<n.state.selectedOption.length;t++)e.push(n.state.selectedOption[t].email);h.seafileAPI.addGroupMembers(n.props.groupID,e).then(function(e){n.onGroupMembersChange(),n.setState({selectedOption:null}),n.refs.userSelect.clearSelect(),e.data.failed.length>0&&n.setState({errMessage:e.data.failed})})},n.listGroupMembers=function(){h.seafileAPI.listGroupMembers(n.props.groupID).then(function(e){n.setState({groupMembers:e.data})})},n.onGroupMembersChange=function(){n.listGroupMembers()},n.toggleItemFreezed=function(e){n.setState({isItemFreezed:e})},n.toggle=function(){n.props.toggleManageMembersDialog()},n.state={groupMembers:[],selectedOption:null,errMessage:[],isItemFreezed:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.listGroupMembers()}},{key:"render",value:function(){var e=this;return u.default.createElement(p.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(p.ModalHeader,{toggle:this.toggle},(0,f.gettext)("Manage group members")),u.default.createElement(p.ModalBody,null,u.default.createElement("p",null,(0,f.gettext)("Add group member")),u.default.createElement("div",{className:"add-members"},u.default.createElement(b.default,{placeholder:(0,f.gettext)("Select users..."),onSelectChange:this.onSelectChange,ref:"userSelect",isMulti:!0,className:"add-members-select"}),this.state.selectedOption?u.default.createElement(p.Button,{color:"secondary",onClick:this.addGroupMember},(0,f.gettext)("Submit")):u.default.createElement(p.Button,{color:"secondary",disabled:!0},(0,f.gettext)("Submit"))),this.state.errMessage.length>0&&this.state.errMessage.map(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return u.default.createElement("div",{className:"group-error error",key:t},e.error_msg)}),u.default.createElement("div",{className:"manage-members"},u.default.createElement(p.Table,{size:"sm",className:"manage-members-table"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"15%"}),u.default.createElement("th",{width:"45%"},(0,f.gettext)("Name")),u.default.createElement("th",{width:"30%"},(0,f.gettext)("Role")),u.default.createElement("th",{width:"10%"}))),u.default.createElement("tbody",null,this.state.groupMembers.length>0&&this.state.groupMembers.map(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return u.default.createElement(u.default.Fragment,{key:n},u.default.createElement(C,{item:t,onGroupMembersChange:e.onGroupMembersChange,groupID:e.props.groupID,isOwner:e.props.isOwner,isItemFreezed:e.state.isItemFreezed,toggleItemFreezed:e.toggleItemFreezed}))}))))),u.default.createElement(p.ModalFooter,null,u.default.createElement(p.Button,{color:"secondary",onClick:this.toggle},(0,f.gettext)("Close"))))}}]),t}(u.default.Component);w.propTypes=v;var S={item:d.default.object.isRequired,onGroupMembersChange:d.default.func.isRequired,groupID:d.default.string.isRequired,isOwner:d.default.bool.isRequired},C=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChangeUserRole=function(e){var t="Admin"===e?"True":"False";h.seafileAPI.setGroupAdmin(n.props.groupID,n.props.item.email,t).then(function(e){n.props.onGroupMembersChange()}),n.setState({highlight:!1})},n.deleteMember=function(e){h.seafileAPI.deleteGroupMember(n.props.groupID,e).then(function(e){n.props.onGroupMembersChange()})},n.handleMouseOver=function(){n.props.isItemFreezed||n.setState({highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({highlight:!1})},n.translateRole=function(e){return"Admin"===e?(0,f.gettext)("Admin"):"Member"===e?(0,f.gettext)("Member"):"Owner"===e?(0,f.gettext)("Owner"):void 0},n.roles=["Admin","Member"],n.state={highlight:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.isOwner,a="Owner"!==t.role&&!0===n||"Member"===t.role&&!1===n;return u.default.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseLeave,className:this.state.highlight?"editing":""},u.default.createElement("th",{scope:"row"},u.default.createElement("img",{className:"avatar",src:t.avatar_url,alt:""})),u.default.createElement("td",null,t.name),u.default.createElement("td",null,(!1===n||!0===n&&"Owner"===t.role)&&u.default.createElement("span",{className:"group-admin"},this.translateRole(t.role)),!0===n&&"Owner"!==t.role&&u.default.createElement(g.default,{isTextMode:!0,isEditIconShow:this.state.highlight,currentRole:t.role,roles:this.roles,onRoleChanged:this.onChangeUserRole,toggleItemFreezed:this.props.toggleItemFreezed})),u.default.createElement("td",null,a&&!this.props.isItemFreezed&&u.default.createElement("i",{className:"fa fa-times delete-group-member-icon",name:t.email,onClick:this.deleteMember.bind(this,t.email)})))}}]),t}(u.default.PureComponent);C.propTypes=S,t.default=w},1232:function(e,t){},1233:function(e,t){},1234:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(3),h=n(11),m=a(h),g=n(312),y=a(g),b=n(125),v=a(b),w=n(1235),S=a(w),C=n(316),E=a(C),_=n(1236),D=a(_),P=n(314),L=a(P);n(1237);var R={group:d.default.object.isRequired,onItemDetails:d.default.func.isRequired},M=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onItemUnshare=function(e){var t=n.props.group;p.seafileAPI.unshareRepo(e.repo_id,{share_type:"group",group_id:t.id}).then(function(){var t=n.state.repoList.filter(function(t){return t.repo_id!==e.repo_id});n.setState({repoList:t})})},n.onItemDelete=function(e){var t=n.props.group;p.seafileAPI.deleteGroupOwnedLibrary(t.id,e.repo_id).then(function(){var t=n.state.repoList.filter(function(t){return t.repo_id!==e.repo_id});n.setState({repoList:t})}).catch(function(){})},n.onItemRename=function(e,t){var a=n.props.group;p.seafileAPI.renameGroupOwnedLibrary(a.id,e.repo_id,t).then(function(a){var r=n.state.repoList.map(function(n){return n.repo_id===e.repo_id&&(n.repo_name=t),n});n.setState({repoList:r})}).catch(function(){})},n.state={repoList:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.group,t=e.repos.map(function(e){return new v.default(e)});this.setState({repoList:t})}},{key:"render",value:function(){var e=this.props.group,t=u.default.createElement("p",{className:"group-item-empty-tip"},(0,f.gettext)("No libraries"));return u.default.createElement("div",{className:"group-list-panel"},u.default.createElement("h4",{className:"group-item-heading ellipsis"},u.default.createElement("a",{href:f.siteRoot+"group/"+e.id+"/",title:e.name},e.name)),0===this.state.repoList.length?t:u.default.createElement(E.default,{isShowTableThread:!1,isShowRepoOwner:!1,currentGroup:this.props.group,repoList:this.state.repoList,onItemUnshare:this.onItemUnshare,onItemDelete:this.onItemDelete,onItemDetails:this.props.onItemDetails,onItemRename:this.onItemRename}))}}]),t}(u.default.Component);M.propTypes=R;var T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.listGroups=function(){p.seafileAPI.listGroups(!0).then(function(e){var t=e.data.map(function(e){return new y.default(e)});n.setState({isLoading:!1,groupList:t})}).catch(function(e){e.response?403==e.response.status?(n.setState({isLoading:!1,errorMsg:(0,f.gettext)("Permission denied")}),location.href=f.loginUrl+"?next="+encodeURIComponent(location.href)):n.setState({isLoading:!1,errorMsg:(0,f.gettext)("Error")}):n.setState({isLoading:!1,errorMsg:(0,f.gettext)("Please check the network.")})})},n.toggleAddGroupModal=function(){n.setState({showAddGroupModal:!n.state.showAddGroupModal})},n.onCreateGroup=function(){n.setState({showAddGroupModal:!1,isLoading:!0,groupList:[]}),n.listGroups()},n.onItemDetails=function(e){n.setState({isShowDetails:!0,currentRepo:e})},n.closeDetails=function(){n.setState({isShowDetails:!1})},n.state={isLoading:!0,errorMsg:"",groupList:[],showAddGroupModal:!1,isShowDetails:!1,currentRepo:null},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.listGroups()}},{key:"render",value:function(){var e=this;return u.default.createElement(s.Fragment,null,u.default.createElement(S.default,{onShowSidePanel:this.props.onShowSidePanel,onSearchedClick:this.props.onSearchedClick,toggleAddGroupModal:this.toggleAddGroupModal}),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,f.gettext)("My Groups"))),u.default.createElement("div",{className:"cur-view-content cur-view-content-groups"},this.state.isLoading&&u.default.createElement(m.default,null),!this.state.isLoading&&""!==this.state.errorMsg&&this.state.errorMsg,!this.state.isLoading&&this.state.groupList.map(function(t,n){return u.default.createElement(M,{key:n,group:t,onItemDetails:e.onItemDetails})}))),this.state.isShowDetails&&u.default.createElement("div",{className:"cur-view-detail"},u.default.createElement(L.default,{currentRepo:this.state.currentRepo,closeDetails:this.closeDetails}))),this.state.showAddGroupModal&&u.default.createElement(D.default,{toggleAddGroupModal:this.toggleAddGroupModal,onCreateGroup:this.onCreateGroup,showAddGroupModal:this.state.showAddGroupModal}))}}]),t}(u.default.Component),k={onShowSidePanel:d.default.func.isRequired,onSearchedClick:d.default.func.isRequired};T.propTypes=k,t.default=T},1235:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(80),p=a(f),h=n(5),m=n(2),g={searchPlaceholder:d.default.string,onShowSidePanel:d.default.func.isRequired,onSearchedClick:d.default.func.isRequired,toggleAddGroupModal:d.default.func.isRequired},y=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.onShowSidePanel,n=e.onSearchedClick;return u.default.createElement("div",{className:"main-panel-north border-left-show"},u.default.createElement("div",{className:"cur-view-toolbar"},u.default.createElement("div",{className:"operation"},u.default.createElement(h.Button,{color:"btn btn-secondary operation-item",onClick:this.props.toggleAddGroupModal},u.default.createElement("i",{className:"fas fa-plus-square text-secondary mr-1"}),(0,m.gettext)("New Group"))),u.default.createElement("span",{title:"Side Nav Menu",onClick:t,className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none"})),u.default.createElement(p.default,{searchPlaceholder:this.props.searchPlaceholder,onSearchedClick:n}))}}]),t}(u.default.Component);y.propTypes=g,t.default=y},1236:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(3),h=n(5),m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleGroupChange=function(e){var t=e.target.value.trim();n.setState({groupName:t}),n.state.errorMsg&&n.setState({errorMsg:""})},n.handleSubmitGroup=function(){var e=n.state.groupName.trim();if(e){var t=n;p.seafileAPI.createGroup(e).then(function(e){t.props.onCreateGroup()}).catch(function(e){var t=(0,f.gettext)(e.response.data.error_msg);n.setState({errorMsg:t})})}n.setState({groupName:""})},n.handleKeyDown=function(e){13===e.keyCode&&n.handleSubmitGroup()},n.state={groupName:"",errorMsg:""},n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(h.Modal,{isOpen:this.props.showAddGroupModal,toggle:this.props.toggleAddGroupModal},u.default.createElement(h.ModalHeader,{toggle:this.props.toggleAddGroupModal},(0,f.gettext)("New Group")),u.default.createElement(h.ModalBody,null,u.default.createElement("label",{htmlFor:"groupName"},(0,f.gettext)("Name")),u.default.createElement(h.Input,{type:"text",id:"groupName",value:this.state.groupName,onChange:this.handleGroupChange,onKeyDown:this.handleKeyDown}),u.default.createElement("span",{className:"error"},this.state.errorMsg)),u.default.createElement(h.ModalFooter,null,u.default.createElement(h.Button,{color:"secondary",onClick:this.props.toggleAddGroupModal},(0,f.gettext)("Cancel")),u.default.createElement(h.Button,{color:"primary",onClick:this.handleSubmitGroup},(0,f.gettext)("Submit"))))}}]),t}(u.default.Component),g={toggleAddGroupModal:d.default.func.isRequired,onCreateGroup:d.default.func.isRequired,showAddGroupModal:d.default.bool.isRequired};m.propTypes=g,t.default=m},1237:function(e,t){},1238:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(5),d=n(3),f=n(2),p=n(7),h=a(p),m=n(10),g=a(m),y=n(80),b=a(y),v=n(1239),w=a(v),S=n(1240),C=a(S),E=n(1241),_=a(E),D=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getWikis=function(){d.seafileAPI.listWikis().then(function(e){n.setState({loading:!1,wikis:e.data.data})}).catch(function(e){e.response?403==e.response.status?(n.setState({loading:!1,errorMsg:(0,f.gettext)("Permission denied")}),location.href=f.loginUrl+"?next="+encodeURIComponent(location.href)):n.setState({loading:!1,errorMsg:(0,f.gettext)("Error")}):n.setState({loading:!1,errorMsg:(0,f.gettext)("Please check the network.")})})},n.clickMenuToggle=function(e){e.preventDefault(),n.onMenuToggle()},n.onMenuToggle=function(){n.setState({isShowAddWikiMenu:!n.state.isShowAddWikiMenu})},n.onSelectToggle=function(){n.setState({isShowSelectDialog:!n.state.isShowSelectDialog})},n.onCreateToggle=function(){n.setState({isShowCreateDialog:!n.state.isShowCreateDialog})},n.addWiki=function(e,t,a){d.seafileAPI.addWiki(e,t,a).then(function(e){n.state.wikis.push(e.data),n.setState({wikis:n.state.wikis})}).catch(function(e){if(e.response){var t=e.response.data.error_msg;h.default.danger(t)}})},n.renameWiki=function(e,t){d.seafileAPI.renameWiki(e.slug,t).then(function(t){var a=n.state.wikis.map(function(n){return n.name===e.name&&(n=t.data),n});n.setState({wikis:a})}).catch(function(e){if(e.response){var t=e.response.data.error_msg;h.default.danger(t)}})},n.deleteWiki=function(e){d.seafileAPI.deleteWiki(e.slug).then(function(){var t=n.state.wikis.filter(function(t){return t.name!==e.name});n.setState({wikis:t})}).catch(function(e){if(e.response){var t=e.response.data.error_msg;h.default.danger(t)}})},n.state={loading:!0,errorMsg:"",wikis:[],isShowAddWikiMenu:!1,isShowSelectDialog:!1,isShowCreateDialog:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.getWikis()}},{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"main-panel-north border-left-show"},u.default.createElement("div",{className:"cur-view-toolbar"},u.default.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu",onClick:this.props.onShowSidePanel}),u.default.createElement("div",{className:"operation"},u.default.createElement(c.Dropdown,{tag:"div",isOpen:this.state.isShowAddWikiMenu,toggle:this.onMenuToggle},u.default.createElement(c.DropdownToggle,{className:"btn btn-secondary operation-item"},u.default.createElement("i",{className:"fa fa-plus-square text-secondary mr-1"}),(0,f.gettext)("Add Wiki")),u.default.createElement(c.DropdownMenu,null,u.default.createElement(c.DropdownItem,{onClick:this.onCreateToggle},(0,f.gettext)("New Wiki")),u.default.createElement(c.DropdownItem,{onClick:this.onSelectToggle},(0,f.gettext)("Choose a library as Wiki")))))),u.default.createElement(b.default,{onSearchedClick:this.props.onSearchedClick})),u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container",id:"wikis"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("div",{className:"path-container"},u.default.createElement("h3",{className:"sf-heading"},(0,f.gettext)("Wikis")))),u.default.createElement("div",{className:"cur-view-content"},(this.state.loading||0!==this.state.wikis.length)&&u.default.createElement(_.default,{data:this.state,renameWiki:this.renameWiki,deleteWiki:this.deleteWiki}),!this.state.loading&&0===this.state.wikis.length&&u.default.createElement("div",{className:"message empty-tip"},u.default.createElement("h2",null,(0,f.gettext)("You do not have any wiki")),u.default.createElement("p",null,(0,f.gettext)("Seafile Wiki enables you to organize your knowledge in a simple way. The contents of wiki is stored in a normal library with pre-defined file/folder structure. This enables you to edit your wiki in your desktop and then sync back to the server.")))))),this.state.isShowCreateDialog&&u.default.createElement(g.default,null,u.default.createElement(w.default,{toggleCancel:this.onCreateToggle,addWiki:this.addWiki})),this.state.isShowSelectDialog&&u.default.createElement(g.default,null,u.default.createElement(C.default,{toggleCancel:this.onSelectToggle,addWiki:this.addWiki})))}}]),t}(s.Component);t.default=D},1239:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(5),h={toggleCancel:d.default.func.isRequired,addWiki:d.default.func.isRequired},m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.inputNewName=function(e){n.setState({name:e.target.value})},n.handleKeyPress=function(e){"Enter"===e.key&&n.handleSubmit()},n.handleSubmit=function(){var e=n.state,t=e.isExist,a=e.name,r=e.repoID;n.props.addWiki(t,a,r),n.props.toggleCancel()},n.toggle=function(){n.props.toggleCancel()},n.state={isExist:!1,name:"",repoID:""},n.newName=u.default.createRef(),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.newName.focus(),this.newName.setSelectionRange(0,-1)}},{key:"render",value:function(){var e=this;return u.default.createElement(p.Modal,{isOpen:!0},u.default.createElement(p.ModalHeader,{toggle:this.toggle},(0,f.gettext)("New Wiki")),u.default.createElement(p.ModalBody,null,u.default.createElement("label",{className:"form-label"},(0,f.gettext)("Name")),u.default.createElement(p.Input,{onKeyPress:this.handleKeyPress,innerRef:function(t){e.newName=t},value:this.state.name,onChange:this.inputNewName})),u.default.createElement(p.ModalFooter,null,u.default.createElement(p.Button,{color:"secondary",onClick:this.toggle},(0,f.gettext)("Cancel")),u.default.createElement(p.Button,{color:"primary",onClick:this.handleSubmit},(0,f.gettext)("Submit"))))}}]),t}(u.default.Component);m.propTypes=h,t.default=m},124:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(2),i=n(4),l=function(){function e(){a(this,e)}return r(e,null,[{key:"getUrl",value:function(e){var t="",n="";switch(e.type){case"download_historic_file":n="p="+e.filePath,t=o.siteRoot+"repo/"+o.historyRepoID+"/"+e.objID+"/download?"+n;break;case"download_dir_zip_url":t=o.fileServerRoot+"zip/"+e.token;break;case"download_file_url":t=o.siteRoot+"lib/"+e.repoID+"/file"+i.Utils.encodePath(e.filePath)+"?dl=1";break;case"file_revisions":n="p="+i.Utils.encodePath(e.filePath),t=o.siteRoot+"repo/file_revisions/"+e.repoID+"/?"+n;break;case"open_via_client":t="seafile://openfile?repo_id="+e.repoID+"&path="+i.Utils.encodePath(e.filePath);break;case"draft_view":t=o.siteRoot+"lib/"+e.repoID+"/file"+e.filePath+"?mode=edit&draft_id="+e.draftId;break;default:t=""}return t}}]),e}();t.default=l},1240:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(5),h=n(3),m=n(6),g=a(m),y=n(125),b=a(y),v=n(4),w={toggleCancel:d.default.func.isRequired,addWiki:d.default.func.isRequired},S=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=function(e){n.setState({name:e.repo_name,repoID:e.repo_id})},n.handleSubmit=function(){var e=n.state,t=e.isExist,a=e.name,r=e.repoID;n.props.addWiki(t,a,r),n.props.toggleCancel()},n.toggle=function(){n.props.toggleCancel()},n.state={repos:[],isExist:!0,name:"",repoID:""},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;h.seafileAPI.listRepos().then(function(t){var n=t.data.repos.map(function(e){return new b.default(e)});n=v.Utils.sortRepos(n,"name","asc"),e.setState({repos:n})})}},{key:"render",value:function(){var e=this;return u.default.createElement(p.Modal,{isOpen:!0},u.default.createElement(p.ModalHeader,{toggle:this.toggle},(0,f.gettext)("Choose a library as Wiki")),u.default.createElement(p.ModalBody,{className:"dialog-list-container"},u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"12%"}),u.default.createElement("th",{width:"13%"}),u.default.createElement("th",{width:"50%"},(0,f.gettext)("Name")),u.default.createElement("th",{width:"25%"},(0,f.gettext)("Last Update")))),u.default.createElement("tbody",null,this.state.repos.map(function(t,n){return u.default.createElement("tr",{key:n},u.default.createElement("td",{className:"text-center"},u.default.createElement("input",{type:"radio",className:"vam",name:"repo",value:t.repo_id,onChange:e.onChange.bind(e,t)})),u.default.createElement("td",{className:"text-center"},u.default.createElement("img",{src:f.siteRoot+"media/img/lib/48/lib.png",width:"24",alt:(0,f.gettext)("icon")})),u.default.createElement("td",null,t.repo_name),u.default.createElement("td",null,(0,g.default)(t.last_modified).fromNow()))})))),u.default.createElement(p.ModalFooter,null,u.default.createElement(p.Button,{color:"secondary",onClick:this.toggle},(0,f.gettext)("Cancel")),u.default.createElement(p.Button,{color:"primary",onClick:this.handleSubmit},(0,f.gettext)("Submit"))))}}]),t}(u.default.Component);S.propTypes=w,t.default=S},1241:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(1242),h=a(p),m={data:d.default.object.isRequired,renameWiki:d.default.func.isRequired,deleteWiki:d.default.func.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props.data,n=t.loading,a=t.errorMsg,r=t.wikis;return n?u.default.createElement("span",{className:"loading-icon loading-tip"}):a?u.default.createElement("p",{className:"error text-center"},a):u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"35%"},(0,f.gettext)("Name")),u.default.createElement("th",{width:"20%"},(0,f.gettext)("Owner")),u.default.createElement("th",{width:"20%"},(0,f.gettext)("Last Update")),u.default.createElement("th",{width:"15%"},(0,f.gettext)("Permission")),u.default.createElement("th",{width:"10%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(h.default,{key:n,wiki:t,renameWiki:e.props.renameWiki,deleteWiki:e.props.deleteWiki,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem})})))}}]),t}(s.Component);g.propTypes=m,t.default=g},1242:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(6),p=a(f),h=n(5),m=n(2),g=n(3),y=n(1243),b=a(y),v=n(7),w=a(v),S=n(10),C=a(S),E=n(1244),_=a(E),D=n(143),P=a(D),L={wiki:d.default.object.isRequired,renameWiki:d.default.func.isRequired,deleteWiki:d.default.func.isRequired,isItemFreezed:d.default.bool.isRequired,onFreezedItem:d.default.func.isRequired,onUnfreezedItem:d.default.func.isRequired},R=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clickMenuToggle=function(e){e.preventDefault(),n.onMenuToggle(e)},n.onMenuToggle=function(e){"item"!==e.target.dataset.toggle&&(n.props.isItemFreezed?(n.setState({highlight:!1,isShowMenuControl:!1,isShowWikiMenu:!n.state.isShowWikiMenu}),n.props.onUnfreezedItem()):(n.setState({isShowWikiMenu:!n.state.isShowWikiMenu}),n.props.onFreezedItem()))},n.onMouseEnter=function(){n.props.isItemFreezed||n.setState({isShowMenuControl:!0,highlight:!0,showOpIcon:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({isShowMenuControl:!1,highlight:!1,showOpIcon:!1})},n.changePerm=function(e){var t=n.props.wiki;g.seafileAPI.updateWikiPermission(t.slug,e).then(function(){n.setState({permission:e})}).catch(function(e){if(e.response){var t=e.response.data.error_msg;w.default.danger(t)}})},n.onRenameToggle=function(e){n.props.onFreezedItem(),n.setState({isShowWikiMenu:!1,isShowMenuControl:!1,isRenameing:!0})},n.onRenameConfirm=function(e){n.renameWiki(e),n.onRenameCancel()},n.onRenameCancel=function(){n.props.onUnfreezedItem(),n.setState({isRenameing:!1})},n.onDeleteToggle=function(){n.props.onUnfreezedItem(),n.setState({isShowDeleteDialog:!n.state.isShowDeleteDialog,isShowWikiMenu:!1,isShowMenuControl:!1})},n.onDeleteCancel=function(){n.props.onUnfreezedItem(),n.setState({isShowDeleteDialog:!n.state.isShowDeleteDialog})},n.renameWiki=function(e){var t=n.props.wiki;n.props.renameWiki(t,e)},n.deleteWiki=function(){var e=n.props.wiki;n.props.deleteWiki(e),n.setState({isShowDeleteDialog:!n.state.isShowDeleteDialog})},n.state={isShowWikiMenu:!1,isShowDeleteDialog:!1,isShowMenuControl:!1,isRenameing:!1,highlight:!1,permission:n.props.wiki.permission,showOpIcon:!1},n.permissions=["private","public"],n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.wiki,t=m.siteRoot+"profile/"+encodeURIComponent(e.owner)+"/";return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("td",{className:"name"},this.state.isRenameing?u.default.createElement(P.default,{wiki:e,name:e.name,onRenameConfirm:this.onRenameConfirm,onRenameCancel:this.onRenameCancel}):u.default.createElement("a",{href:e.link},e.name)),u.default.createElement("td",null,u.default.createElement("a",{href:t,target:"_blank"},e.owner_nickname)),u.default.createElement("td",null,(0,p.default)(e.updated_at).fromNow()),u.default.createElement("td",null,u.default.createElement(b.default,{isTextMode:!0,isEditIconShow:this.state.showOpIcon,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.changePerm})),u.default.createElement("td",{className:"text-center cursor-pointer"},this.state.isShowMenuControl&&u.default.createElement(h.Dropdown,{isOpen:this.state.isShowWikiMenu,toggle:this.onMenuToggle},u.default.createElement(h.DropdownToggle,{tag:"a",className:"fas fa-ellipsis-v",title:(0,m.gettext)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isShowWikiMenu,onClick:this.clickMenuToggle}),u.default.createElement(h.DropdownMenu,null,u.default.createElement(h.DropdownItem,{onClick:this.onRenameToggle},(0,m.gettext)("Rename")),u.default.createElement(h.DropdownItem,{onClick:this.onDeleteToggle},(0,m.gettext)("Delete")))))),this.state.isShowDeleteDialog&&u.default.createElement(C.default,null,u.default.createElement(_.default,{toggleCancel:this.onDeleteCancel,handleSubmit:this.deleteWiki})))}}]),t}(s.Component);R.propTypes=L,t.default=R},1243:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(32),h=a(p),m={isTextMode:d.default.bool.isRequired,isEditIconShow:d.default.bool.isRequired,permissions:d.default.array.isRequired,currentPermission:d.default.string.isRequired,onPermissionChanged:d.default.func.isRequired},g=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.translatePermission=function(e){return"private"===e?(0,f.gettext)("Private"):"public"===e?(0,f.gettext)("Public"):void 0},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(h.default,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.permissions,currentOption:this.props.currentPermission,onOptionChanged:this.props.onPermissionChanged,translateOption:this.translatePermission})}}]),t}(u.default.Component);g.propTypes=m,t.default=g},1244:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(5),h={toggleCancel:d.default.func.isRequired,handleSubmit:d.default.func.isRequired},m=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.toggle=function(){a.props.toggleCancel()},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(p.Modal,{isOpen:!0},u.default.createElement(p.ModalHeader,{toggle:this.toggle},(0,f.gettext)("Delete Wiki")),u.default.createElement(p.ModalBody,null,u.default.createElement("p",null,(0,f.gettext)("Are you sure you want to delete this wiki?"))),u.default.createElement(p.ModalFooter,null,u.default.createElement(p.Button,{color:"secondary",onClick:this.toggle},(0,f.gettext)("Cancel")),u.default.createElement(p.Button,{color:"danger",onClick:this.props.handleSubmit},(0,f.gettext)("Delete"))))}}]),t}(u.default.Component);m.propTypes=h,t.default=m},1245:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1246),d=a(c),f=function(e){return function(t){function n(e){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return i(n,t),l(n,[{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement(d.default,this.props),u.default.createElement(e,this.props))}}]),n}(u.default.Component)};t.default=f},1246:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(80),p=a(f),h={searchPlaceholder:d.default.string,onShowSidePanel:d.default.func.isRequired,onSearchedClick:d.default.func.isRequired},m=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.onShowSidePanel,n=e.onSearchedClick;return u.default.createElement("div",{className:"main-panel-north"},u.default.createElement("div",{className:"cur-view-toolbar"},u.default.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu",onClick:t})),u.default.createElement(p.default,{searchPlaceholder:this.props.searchPlaceholder,onSearchedClick:n}))}}]),t}(u.default.Component);m.propTypes=h,t.default=m},125:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=function e(t){a(this,e),this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.permission=t.permission,this.size=r.Utils.bytesToSize(t.size),this.owner_name=t.owner_name,this.owner_email=t.owner_email,this.owner_contact_email=t.owner_contact_email,this.encrypted=t.encrypted,this.last_modified=t.last_modified,this.modifier_contact_email=t.modifier_contact_email,this.modifier_email=t.modifier_email,this.modifier_name=t.modifier_name,this.type=t.type,this.starred=t.starred,void 0!=t.is_admin&&(this.is_admin=t.is_admin)};t.default=o},13:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.strChineseFirstPY="YDYQSXMWZSSXJBYMGCCZQPSSQBYCDSCDQLDYLYBSSJGYZZJJFKCCLZDHWDWZJLJPFYYNWJJTMYHZWZHFLZPPQHGSCYYYNJQYXXGJHHSDSJNKKTMOMLCRXYPSNQSECCQZGGLLYJLMYZZSECYKYYHQWJSSGGYXYZYJWWKDJHYCHMYXJTLXJYQBYXZLDWRDJRWYSRLDZJPCBZJJBRCFTLECZSTZFXXZHTRQHYBDLYCZSSYMMRFMYQZPWWJJYFCRWFDFZQPYDDWYXKYJAWJFFXYPSFTZYHHYZYSWCJYXSCLCXXWZZXNBGNNXBXLZSZSBSGPYSYZDHMDZBQBZCWDZZYYTZHBTSYYBZGNTNXQYWQSKBPHHLXGYBFMJEBJHHGQTJCYSXSTKZHLYCKGLYSMZXYALMELDCCXGZYRJXSDLTYZCQKCNNJWHJTZZCQLJSTSTBNXBTYXCEQXGKWJYFLZQLYHYXSPSFXLMPBYSXXXYDJCZYLLLSJXFHJXPJBTFFYABYXBHZZBJYZLWLCZGGBTSSMDTJZXPTHYQTGLJSCQFZKJZJQNLZWLSLHDZBWJNCJZYZSQQYCQYRZCJJWYBRTWPYFTWEXCSKDZCTBZHYZZYYJXZCFFZZMJYXXSDZZOTTBZLQWFCKSZSXFYRLNYJMBDTHJXSQQCCSBXYYTSYFBXDZTGBCNSLCYZZPSAZYZZSCJCSHZQYDXLBPJLLMQXTYDZXSQJTZPXLCGLQTZWJBHCTSYJSFXYEJJTLBGXSXJMYJQQPFZASYJNTYDJXKJCDJSZCBARTDCLYJQMWNQNCLLLKBYBZZSYHQQLTWLCCXTXLLZNTYLNEWYZYXCZXXGRKRMTCNDNJTSYYSSDQDGHSDBJGHRWRQLYBGLXHLGTGXBQJDZPYJSJYJCTMRNYMGRZJCZGJMZMGXMPRYXKJNYMSGMZJYMKMFXMLDTGFBHCJHKYLPFMDXLQJJSMTQGZSJLQDLDGJYCALCMZCSDJLLNXDJFFFFJCZFMZFFPFKHKGDPSXKTACJDHHZDDCRRCFQYJKQCCWJDXHWJLYLLZGCFCQDSMLZPBJJPLSBCJGGDCKKDEZSQCCKJGCGKDJTJDLZYCXKLQSCGJCLTFPCQCZGWPJDQYZJJBYJHSJDZWGFSJGZKQCCZLLPSPKJGQJHZZLJPLGJGJJTHJJYJZCZMLZLYQBGJWMLJKXZDZNJQSYZMLJLLJKYWXMKJLHSKJGBMCLYYMKXJQLBMLLKMDXXKWYXYSLMLPSJQQJQXYXFJTJDXMXXLLCXQBSYJBGWYMBGGBCYXPJYGPEPFGDJGBHBNSQJYZJKJKHXQFGQZKFHYGKHDKLLSDJQXPQYKYBNQSXQNSZSWHBSXWHXWBZZXDMNSJBSBKBBZKLYLXGWXDRWYQZMYWSJQLCJXXJXKJEQXSCYETLZHLYYYSDZPAQYZCMTLSHTZCFYZYXYLJSDCJQAGYSLCQLYYYSHMRQQKLDXZSCSSSYDYCJYSFSJBFRSSZQSBXXPXJYSDRCKGJLGDKZJZBDKTCSYQPYHSTCLDJDHMXMCGXYZHJDDTMHLTXZXYLYMOHYJCLTYFBQQXPFBDFHHTKSQHZYYWCNXXCRWHOWGYJLEGWDQCWGFJYCSNTMYTOLBYGWQWESJPWNMLRYDZSZTXYQPZGCWXHNGPYXSHMYQJXZTDPPBFYHZHTJYFDZWKGKZBLDNTSXHQEEGZZYLZMMZYJZGXZXKHKSTXNXXWYLYAPSTHXDWHZYMPXAGKYDXBHNHXKDPJNMYHYLPMGOCSLNZHKXXLPZZLBMLSFBHHGYGYYGGBHSCYAQTYWLXTZQCEZYDQDQMMHTKLLSZHLSJZWFYHQSWSCWLQAZYNYTLSXTHAZNKZZSZZLAXXZWWCTGQQTDDYZTCCHYQZFLXPSLZYGPZSZNGLNDQTBDLXGTCTAJDKYWNSYZLJHHZZCWNYYZYWMHYCHHYXHJKZWSXHZYXLYSKQYSPSLYZWMYPPKBYGLKZHTYXAXQSYSHXASMCHKDSCRSWJPWXSGZJLWWSCHSJHSQNHCSEGNDAQTBAALZZMSSTDQJCJKTSCJAXPLGGXHHGXXZCXPDMMHLDGTYBYSJMXHMRCPXXJZCKZXSHMLQXXTTHXWZFKHCCZDYTCJYXQHLXDHYPJQXYLSYYDZOZJNYXQEZYSQYAYXWYPDGXDDXSPPYZNDLTWRHXYDXZZJHTCXMCZLHPYYYYMHZLLHNXMYLLLMDCPPXHMXDKYCYRDLTXJCHHZZXZLCCLYLNZSHZJZZLNNRLWHYQSNJHXYNTTTKYJPYCHHYEGKCTTWLGQRLGGTGTYGYHPYHYLQYQGCWYQKPYYYTTTTLHYHLLTYTTSPLKYZXGZWGPYDSSZZDQXSKCQNMJJZZBXYQMJRTFFBTKHZKBXLJJKDXJTLBWFZPPTKQTZTGPDGNTPJYFALQMKGXBDCLZFHZCLLLLADPMXDJHLCCLGYHDZFGYDDGCYYFGYDXKSSEBDHYKDKDKHNAXXYBPBYYHXZQGAFFQYJXDMLJCSQZLLPCHBSXGJYNDYBYQSPZWJLZKSDDTACTBXZDYZYPJZQSJNKKTKNJDJGYYPGTLFYQKASDNTCYHBLWDZHBBYDWJRYGKZYHEYYFJMSDTYFZJJHGCXPLXHLDWXXJKYTCYKSSSMTWCTTQZLPBSZDZWZXGZAGYKTYWXLHLSPBCLLOQMMZSSLCMBJCSZZKYDCZJGQQDSMCYTZQQLWZQZXSSFPTTFQMDDZDSHDTDWFHTDYZJYQJQKYPBDJYYXTLJHDRQXXXHAYDHRJLKLYTWHLLRLLRCXYLBWSRSZZSYMKZZHHKYHXKSMDSYDYCJPBZBSQLFCXXXNXKXWYWSDZYQOGGQMMYHCDZTTFJYYBGSTTTYBYKJDHKYXBELHTYPJQNFXFDYKZHQKZBYJTZBXHFDXKDASWTAWAJLDYJSFHBLDNNTNQJTJNCHXFJSRFWHZFMDRYJYJWZPDJKZYJYMPCYZNYNXFBYTFYFWYGDBNZZZDNYTXZEMMQBSQEHXFZMBMFLZZSRXYMJGSXWZJSPRYDJSJGXHJJGLJJYNZZJXHGXKYMLPYYYCXYTWQZSWHWLYRJLPXSLSXMFSWWKLCTNXNYNPSJSZHDZEPTXMYYWXYYSYWLXJQZQXZDCLEEELMCPJPCLWBXSQHFWWTFFJTNQJHJQDXHWLBYZNFJLALKYYJLDXHHYCSTYYWNRJYXYWTRMDRQHWQCMFJDYZMHMYYXJWMYZQZXTLMRSPWWCHAQBXYGZYPXYYRRCLMPYMGKSJSZYSRMYJSNXTPLNBAPPYPYLXYYZKYNLDZYJZCZNNLMZHHARQMPGWQTZMXXMLLHGDZXYHXKYXYCJMFFYYHJFSBSSQLXXNDYCANNMTCJCYPRRNYTYQNYYMBMSXNDLYLYSLJRLXYSXQMLLYZLZJJJKYZZCSFBZXXMSTBJGNXYZHLXNMCWSCYZYFZLXBRNNNYLBNRTGZQYSATSWRYHYJZMZDHZGZDWYBSSCSKXSYHYTXXGCQGXZZSHYXJSCRHMKKBXCZJYJYMKQHZJFNBHMQHYSNJNZYBKNQMCLGQHWLZNZSWXKHLJHYYBQLBFCDSXDLDSPFZPSKJYZWZXZDDXJSMMEGJSCSSMGCLXXKYYYLNYPWWWGYDKZJGGGZGGSYCKNJWNJPCXBJJTQTJWDSSPJXZXNZXUMELPXFSXTLLXCLJXJJLJZXCTPSWXLYDHLYQRWHSYCSQYYBYAYWJJJQFWQCQQCJQGXALDBZZYJGKGXPLTZYFXJLTPADKYQHPMATLCPDCKBMTXYBHKLENXDLEEGQDYMSAWHZMLJTWYGXLYQZLJEEYYBQQFFNLYXRDSCTGJGXYYNKLLYQKCCTLHJLQMKKZGCYYGLLLJDZGYDHZWXPYSJBZKDZGYZZHYWYFQYTYZSZYEZZLYMHJJHTSMQWYZLKYYWZCSRKQYTLTDXWCTYJKLWSQZWBDCQYNCJSRSZJLKCDCDTLZZZACQQZZDDXYPLXZBQJYLZLLLQDDZQJYJYJZYXNYYYNYJXKXDAZWYRDLJYYYRJLXLLDYXJCYWYWNQCCLDDNYYYNYCKCZHXXCCLGZQJGKWPPCQQJYSBZZXYJSQPXJPZBSBDSFNSFPZXHDWZTDWPPTFLZZBZDMYYPQJRSDZSQZSQXBDGCPZSWDWCSQZGMDHZXMWWFYBPDGPHTMJTHZSMMBGZMBZJCFZWFZBBZMQCFMBDMCJXLGPNJBBXGYHYYJGPTZGZMQBQTCGYXJXLWZKYDPDYMGCFTPFXYZTZXDZXTGKMTYBBCLBJASKYTSSQYYMSZXFJEWLXLLSZBQJJJAKLYLXLYCCTSXMCWFKKKBSXLLLLJYXTYLTJYYTDPJHNHNNKBYQNFQYYZBYYESSESSGDYHFHWTCJBSDZZTFDMXHCNJZYMQWSRYJDZJQPDQBBSTJGGFBKJBXTGQHNGWJXJGDLLTHZHHYYYYYYSXWTYYYCCBDBPYPZYCCZYJPZYWCBDLFWZCWJDXXHYHLHWZZXJTCZLCDPXUJCZZZLYXJJTXPHFXWPYWXZPTDZZBDZCYHJHMLXBQXSBYLRDTGJRRCTTTHYTCZWMXFYTWWZCWJWXJYWCSKYBZSCCTZQNHXNWXXKHKFHTSWOCCJYBCMPZZYKBNNZPBZHHZDLSYDDYTYFJPXYNGFXBYQXCBHXCPSXTYZDMKYSNXSXLHKMZXLYHDHKWHXXSSKQYHHCJYXGLHZXCSNHEKDTGZXQYPKDHEXTYKCNYMYYYPKQYYYKXZLTHJQTBYQHXBMYHSQCKWWYLLHCYYLNNEQXQWMCFBDCCMLJGGXDQKTLXKGNQCDGZJWYJJLYHHQTTTNWCHMXCXWHWSZJYDJCCDBQCDGDNYXZTHCQRXCBHZTQCBXWGQWYYBXHMBYMYQTYEXMQKYAQYRGYZSLFYKKQHYSSQYSHJGJCNXKZYCXSBXYXHYYLSTYCXQTHYSMGSCPMMGCCCCCMTZTASMGQZJHKLOSQYLSWTMXSYQKDZLJQQYPLSYCZTCQQPBBQJZCLPKHQZYYXXDTDDTSJCXFFLLCHQXMJLWCJCXTSPYCXNDTJSHJWXDQQJSKXYAMYLSJHMLALYKXCYYDMNMDQMXMCZNNCYBZKKYFLMCHCMLHXRCJJHSYLNMTJZGZGYWJXSRXCWJGJQHQZDQJDCJJZKJKGDZQGJJYJYLXZXXCDQHHHEYTMHLFSBDJSYYSHFYSTCZQLPBDRFRZTZYKYWHSZYQKWDQZRKMSYNBCRXQBJYFAZPZZEDZCJYWBCJWHYJBQSZYWRYSZPTDKZPFPBNZTKLQYHBBZPNPPTYZZYBQNYDCPJMMCYCQMCYFZZDCMNLFPBPLNGQJTBTTNJZPZBBZNJKLJQYLNBZQHKSJZNGGQSZZKYXSHPZSNBCGZKDDZQANZHJKDRTLZLSWJLJZLYWTJNDJZJHXYAYNCBGTZCSSQMNJPJYTYSWXZFKWJQTKHTZPLBHSNJZSYZBWZZZZLSYLSBJHDWWQPSLMMFBJDWAQYZTCJTBNNWZXQXCDSLQGDSDPDZHJTQQPSWLYYJZLGYXYZLCTCBJTKTYCZJTQKBSJLGMGZDMCSGPYNJZYQYYKNXRPWSZXMTNCSZZYXYBYHYZAXYWQCJTLLCKJJTJHGDXDXYQYZZBYWDLWQCGLZGJGQRQZCZSSBCRPCSKYDZNXJSQGXSSJMYDNSTZTPBDLTKZWXQWQTZEXNQCZGWEZKSSBYBRTSSSLCCGBPSZQSZLCCGLLLZXHZQTHCZMQGYZQZNMCOCSZJMMZSQPJYGQLJYJPPLDXRGZYXCCSXHSHGTZNLZWZKJCXTCFCJXLBMQBCZZWPQDNHXLJCTHYZLGYLNLSZZPCXDSCQQHJQKSXZPBAJYEMSMJTZDXLCJYRYYNWJBNGZZTMJXLTBSLYRZPYLSSCNXPHLLHYLLQQZQLXYMRSYCXZLMMCZLTZSDWTJJLLNZGGQXPFSKYGYGHBFZPDKMWGHCXMSGDXJMCJZDYCABXJDLNBCDQYGSKYDQTXDJJYXMSZQAZDZFSLQXYJSJZYLBTXXWXQQZBJZUFBBLYLWDSLJHXJYZJWTDJCZFQZQZZDZSXZZQLZCDZFJHYSPYMPQZMLPPLFFXJJNZZYLSJEYQZFPFZKSYWJJJHRDJZZXTXXGLGHYDXCSKYSWMMZCWYBAZBJKSHFHJCXMHFQHYXXYZFTSJYZFXYXPZLCHMZMBXHZZSXYFYMNCWDABAZLXKTCSHHXKXJJZJSTHYGXSXYYHHHJWXKZXSSBZZWHHHCWTZZZPJXSNXQQJGZYZYWLLCWXZFXXYXYHXMKYYSWSQMNLNAYCYSPMJKHWCQHYLAJJMZXHMMCNZHBHXCLXTJPLTXYJHDYYLTTXFSZHYXXSJBJYAYRSMXYPLCKDUYHLXRLNLLSTYZYYQYGYHHSCCSMZCTZQXKYQFPYYRPFFLKQUNTSZLLZMWWTCQQYZWTLLMLMPWMBZSSTZRBPDDTLQJJBXZCSRZQQYGWCSXFWZLXCCRSZDZMCYGGDZQSGTJSWLJMYMMZYHFBJDGYXCCPSHXNZCSBSJYJGJMPPWAFFYFNXHYZXZYLREMZGZCYZSSZDLLJCSQFNXZKPTXZGXJJGFMYYYSNBTYLBNLHPFZDCYFBMGQRRSSSZXYSGTZRNYDZZCDGPJAFJFZKNZBLCZSZPSGCYCJSZLMLRSZBZZLDLSLLYSXSQZQLYXZLSKKBRXBRBZCYCXZZZEEYFGKLZLYYHGZSGZLFJHGTGWKRAAJYZKZQTSSHJJXDCYZUYJLZYRZDQQHGJZXSSZBYKJPBFRTJXLLFQWJHYLQTYMBLPZDXTZYGBDHZZRBGXHWNJTJXLKSCFSMWLSDQYSJTXKZSCFWJLBXFTZLLJZLLQBLSQMQQCGCZFPBPHZCZJLPYYGGDTGWDCFCZQYYYQYSSCLXZSKLZZZGFFCQNWGLHQYZJJCZLQZZYJPJZZBPDCCMHJGXDQDGDLZQMFGPSYTSDYFWWDJZJYSXYYCZCYHZWPBYKXRYLYBHKJKSFXTZJMMCKHLLTNYYMSYXYZPYJQYCSYCWMTJJKQYRHLLQXPSGTLYYCLJSCPXJYZFNMLRGJJTYZBXYZMSJYJHHFZQMSYXRSZCWTLRTQZSSTKXGQKGSPTGCZNJSJCQCXHMXGGZTQYDJKZDLBZSXJLHYQGGGTHQSZPYHJHHGYYGKGGCWJZZYLCZLXQSFTGZSLLLMLJSKCTBLLZZSZMMNYTPZSXQHJCJYQXYZXZQZCPSHKZZYSXCDFGMWQRLLQXRFZTLYSTCTMJCXJJXHJNXTNRZTZFQYHQGLLGCXSZSJDJLJCYDSJTLNYXHSZXCGJZYQPYLFHDJSBPCCZHJJJQZJQDYBSSLLCMYTTMQTBHJQNNYGKYRQYQMZGCJKPDCGMYZHQLLSLLCLMHOLZGDYYFZSLJCQZLYLZQJESHNYLLJXGJXLYSYYYXNBZLJSSZCQQCJYLLZLTJYLLZLLBNYLGQCHXYYXOXCXQKYJXXXYKLXSXXYQXCYKQXQCSGYXXYQXYGYTQOHXHXPYXXXULCYEYCHZZCBWQBBWJQZSCSZSSLZYLKDESJZWMYMCYTSDSXXSCJPQQSQYLYYZYCMDJDZYWCBTJSYDJKCYDDJLBDJJSODZYSYXQQYXDHHGQQYQHDYXWGMMMAJDYBBBPPBCMUUPLJZSMTXERXJMHQNUTPJDCBSSMSSSTKJTSSMMTRCPLZSZMLQDSDMJMQPNQDXCFYNBFSDQXYXHYAYKQYDDLQYYYSSZBYDSLNTFQTZQPZMCHDHCZCWFDXTMYQSPHQYYXSRGJCWTJTZZQMGWJJTJHTQJBBHWZPXXHYQFXXQYWYYHYSCDYDHHQMNMTMWCPBSZPPZZGLMZFOLLCFWHMMSJZTTDHZZYFFYTZZGZYSKYJXQYJZQBHMBZZLYGHGFMSHPZFZSNCLPBQSNJXZSLXXFPMTYJYGBXLLDLXPZJYZJYHHZCYWHJYLSJEXFSZZYWXKZJLUYDTMLYMQJPWXYHXSKTQJEZRPXXZHHMHWQPWQLYJJQJJZSZCPHJLCHHNXJLQWZJHBMZYXBDHHYPZLHLHLGFWLCHYYTLHJXCJMSCPXSTKPNHQXSRTYXXTESYJCTLSSLSTDLLLWWYHDHRJZSFGXTSYCZYNYHTDHWJSLHTZDQDJZXXQHGYLTZPHCSQFCLNJTCLZPFSTPDYNYLGMJLLYCQHYSSHCHYLHQYQTMZYPBYWRFQYKQSYSLZDQJMPXYYSSRHZJNYWTQDFZBWWTWWRXCWHGYHXMKMYYYQMSMZHNGCEPMLQQMTCWCTMMPXJPJJHFXYYZSXZHTYBMSTSYJTTQQQYYLHYNPYQZLCYZHZWSMYLKFJXLWGXYPJYTYSYXYMZCKTTWLKSMZSYLMPWLZWXWQZSSAQSYXYRHSSNTSRAPXCPWCMGDXHXZDZYFJHGZTTSBJHGYZSZYSMYCLLLXBTYXHBBZJKSSDMALXHYCFYGMQYPJYCQXJLLLJGSLZGQLYCJCCZOTYXMTMTTLLWTGPXYMZMKLPSZZZXHKQYSXCTYJZYHXSHYXZKXLZWPSQPYHJWPJPWXQQYLXSDHMRSLZZYZWTTCYXYSZZSHBSCCSTPLWSSCJCHNLCGCHSSPHYLHFHHXJSXYLLNYLSZDHZXYLSXLWZYKCLDYAXZCMDDYSPJTQJZLNWQPSSSWCTSTSZLBLNXSMNYYMJQBQHRZWTYYDCHQLXKPZWBGQYBKFCMZWPZLLYYLSZYDWHXPSBCMLJBSCGBHXLQHYRLJXYSWXWXZSLDFHLSLYNJLZYFLYJYCDRJLFSYZFSLLCQYQFGJYHYXZLYLMSTDJCYHBZLLNWLXXYGYYHSMGDHXXHHLZZJZXCZZZCYQZFNGWPYLCPKPYYPMCLQKDGXZGGWQBDXZZKZFBXXLZXJTPJPTTBYTSZZDWSLCHZHSLTYXHQLHYXXXYYZYSWTXZKHLXZXZPYHGCHKCFSYHUTJRLXFJXPTZTWHPLYXFCRHXSHXKYXXYHZQDXQWULHYHMJTBFLKHTXCWHJFWJCFPQRYQXCYYYQYGRPYWSGSUNGWCHKZDXYFLXXHJJBYZWTSXXNCYJJYMSWZJQRMHXZWFQSYLZJZGBHYNSLBGTTCSYBYXXWXYHXYYXNSQYXMQYWRGYQLXBBZLJSYLPSYTJZYHYZAWLRORJMKSCZJXXXYXCHDYXRYXXJDTSQFXLYLTSFFYXLMTYJMJUYYYXLTZCSXQZQHZXLYYXZHDNBRXXXJCTYHLBRLMBRLLAXKYLLLJLYXXLYCRYLCJTGJCMTLZLLCYZZPZPCYAWHJJFYBDYYZSMPCKZDQYQPBPCJPDCYZMDPBCYYDYCNNPLMTMLRMFMMGWYZBSJGYGSMZQQQZTXMKQWGXLLPJGZBQCDJJJFPKJKCXBLJMSWMDTQJXLDLPPBXCWRCQFBFQJCZAHZGMYKPHYYHZYKNDKZMBPJYXPXYHLFPNYYGXJDBKXNXHJMZJXSTRSTLDXSKZYSYBZXJLXYSLBZYSLHXJPFXPQNBYLLJQKYGZMCYZZYMCCSLCLHZFWFWYXZMWSXTYNXJHPYYMCYSPMHYSMYDYSHQYZCHMJJMZCAAGCFJBBHPLYZYLXXSDJGXDHKXXTXXNBHRMLYJSLTXMRHNLXQJXYZLLYSWQGDLBJHDCGJYQYCMHWFMJYBMBYJYJWYMDPWHXQLDYGPDFXXBCGJSPCKRSSYZJMSLBZZJFLJJJLGXZGYXYXLSZQYXBEXYXHGCXBPLDYHWETTWWCJMBTXCHXYQXLLXFLYXLLJLSSFWDPZSMYJCLMWYTCZPCHQEKCQBWLCQYDPLQPPQZQFJQDJHYMMCXTXDRMJWRHXCJZYLQXDYYNHYYHRSLSRSYWWZJYMTLTLLGTQCJZYABTCKZCJYCCQLJZQXALMZYHYWLWDXZXQDLLQSHGPJFJLJHJABCQZDJGTKHSSTCYJLPSWZLXZXRWGLDLZRLZXTGSLLLLZLYXXWGDZYGBDPHZPBRLWSXQBPFDWOFMWHLYPCBJCCLDMBZPBZZLCYQXLDOMZBLZWPDWYYGDSTTHCSQSCCRSSSYSLFYBFNTYJSZDFNDPDHDZZMBBLSLCMYFFGTJJQWFTMTPJWFNLBZCMMJTGBDZLQLPYFHYYMJYLSDCHDZJWJCCTLJCLDTLJJCPDDSQDSSZYBNDBJLGGJZXSXNLYCYBJXQYCBYLZCFZPPGKCXZDZFZTJJFJSJXZBNZYJQTTYJYHTYCZHYMDJXTTMPXSPLZCDWSLSHXYPZGTFMLCJTYCBPMGDKWYCYZCDSZZYHFLYCTYGWHKJYYLSJCXGYWJCBLLCSNDDBTZBSCLYZCZZSSQDLLMQYYHFSLQLLXFTYHABXGWNYWYYPLLSDLDLLBJCYXJZMLHLJDXYYQYTDLLLBUGBFDFBBQJZZMDPJHGCLGMJJPGAEHHBWCQXAXHHHZCHXYPHJAXHLPHJPGPZJQCQZGJJZZUZDMQYYBZZPHYHYBWHAZYJHYKFGDPFQSDLZMLJXKXGALXZDAGLMDGXMWZQYXXDXXPFDMMSSYMPFMDMMKXKSYZYSHDZKXSYSMMZZZMSYDNZZCZXFPLSTMZDNMXCKJMZTYYMZMZZMSXHHDCZJEMXXKLJSTLWLSQLYJZLLZJSSDPPMHNLZJCZYHMXXHGZCJMDHXTKGRMXFWMCGMWKDTKSXQMMMFZZYDKMSCLCMPCGMHSPXQPZDSSLCXKYXTWLWJYAHZJGZQMCSNXYYMMPMLKJXMHLMLQMXCTKZMJQYSZJSYSZHSYJZJCDAJZYBSDQJZGWZQQXFKDMSDJLFWEHKZQKJPEYPZYSZCDWYJFFMZZYLTTDZZEFMZLBNPPLPLPEPSZALLTYLKCKQZKGENQLWAGYXYDPXLHSXQQWQCQXQCLHYXXMLYCCWLYMQYSKGCHLCJNSZKPYZKCQZQLJPDMDZHLASXLBYDWQLWDNBQCRYDDZTJYBKBWSZDXDTNPJDTCTQDFXQQMGNXECLTTBKPWSLCTYQLPWYZZKLPYGZCQQPLLKCCYLPQMZCZQCLJSLQZDJXLDDHPZQDLJJXZQDXYZQKZLJCYQDYJPPYPQYKJYRMPCBYMCXKLLZLLFQPYLLLMBSGLCYSSLRSYSQTMXYXZQZFDZUYSYZTFFMZZSMZQHZSSCCMLYXWTPZGXZJGZGSJSGKDDHTQGGZLLBJDZLCBCHYXYZHZFYWXYZYMSDBZZYJGTSMTFXQYXQSTDGSLNXDLRYZZLRYYLXQHTXSRTZNGZXBNQQZFMYKMZJBZYMKBPNLYZPBLMCNQYZZZSJZHJCTZKHYZZJRDYZHNPXGLFZTLKGJTCTSSYLLGZRZBBQZZKLPKLCZYSSUYXBJFPNJZZXCDWXZYJXZZDJJKGGRSRJKMSMZJLSJYWQSKYHQJSXPJZZZLSNSHRNYPZTWCHKLPSRZLZXYJQXQKYSJYCZTLQZYBBYBWZPQDWWYZCYTJCJXCKCWDKKZXSGKDZXWWYYJQYYTCYTDLLXWKCZKKLCCLZCQQDZLQLCSFQCHQHSFSMQZZLNBJJZBSJHTSZDYSJQJPDLZCDCWJKJZZLPYCGMZWDJJBSJQZSYZYHHXJPBJYDSSXDZNCGLQMBTSFSBPDZDLZNFGFJGFSMPXJQLMBLGQCYYXBQKDJJQYRFKZTJDHCZKLBSDZCFJTPLLJGXHYXZCSSZZXSTJYGKGCKGYOQXJPLZPBPGTGYJZGHZQZZLBJLSQFZGKQQJZGYCZBZQTLDXRJXBSXXPZXHYZYCLWDXJJHXMFDZPFZHQHQMQGKSLYHTYCGFRZGNQXCLPDLBZCSCZQLLJBLHBZCYPZZPPDYMZZSGYHCKCPZJGSLJLNSCDSLDLXBMSTLDDFJMKDJDHZLZXLSZQPQPGJLLYBDSZGQLBZLSLKYYHZTTNTJYQTZZPSZQZTLLJTYYLLQLLQYZQLBDZLSLYYZYMDFSZSNHLXZNCZQZPBWSKRFBSYZMTHBLGJPMCZZLSTLXSHTCSYZLZBLFEQHLXFLCJLYLJQCBZLZJHHSSTBRMHXZHJZCLXFNBGXGTQJCZTMSFZKJMSSNXLJKBHSJXNTNLZDNTLMSJXGZJYJCZXYJYJWRWWQNZTNFJSZPZSHZJFYRDJSFSZJZBJFZQZZHZLXFYSBZQLZSGYFTZDCSZXZJBQMSZKJRHYJZCKMJKHCHGTXKXQGLXPXFXTRTYLXJXHDTSJXHJZJXZWZLCQSBTXWXGXTXXHXFTSDKFJHZYJFJXRZSDLLLTQSQQZQWZXSYQTWGWBZCGZLLYZBCLMQQTZHZXZXLJFRMYZFLXYSQXXJKXRMQDZDMMYYBSQBHGZMWFWXGMXLZPYYTGZYCCDXYZXYWGSYJYZNBHPZJSQSYXSXRTFYZGRHZTXSZZTHCBFCLSYXZLZQMZLMPLMXZJXSFLBYZMYQHXJSXRXSQZZZSSLYFRCZJRCRXHHZXQYDYHXSJJHZCXZBTYNSYSXJBQLPXZQPYMLXZKYXLXCJLCYSXXZZLXDLLLJJYHZXGYJWKJRWYHCPSGNRZLFZWFZZNSXGXFLZSXZZZBFCSYJDBRJKRDHHGXJLJJTGXJXXSTJTJXLYXQFCSGSWMSBCTLQZZWLZZKXJMLTMJYHSDDBXGZHDLBMYJFRZFSGCLYJBPMLYSMSXLSZJQQHJZFXGFQFQBPXZGYYQXGZTCQWYLTLGWSGWHRLFSFGZJMGMGBGTJFSYZZGZYZAFLSSPMLPFLCWBJZCLJJMZLPJJLYMQDMYYYFBGYGYZMLYZDXQYXRQQQHSYYYQXYLJTYXFSFSLLGNQCYHYCWFHCCCFXPYLYPLLZYXXXXXKQHHXSHJZCFZSCZJXCPZWHHHHHAPYLQALPQAFYHXDYLUKMZQGGGDDESRNNZLTZGCHYPPYSQJJHCLLJTOLNJPZLJLHYMHEYDYDSQYCDDHGZUNDZCLZYZLLZNTNYZGSLHSLPJJBDGWXPCDUTJCKLKCLWKLLCASSTKZZDNQNTTLYYZSSYSSZZRYLJQKCQDHHCRXRZYDGRGCWCGZQFFFPPJFZYNAKRGYWYQPQXXFKJTSZZXSWZDDFBBXTBGTZKZNPZZPZXZPJSZBMQHKCYXYLDKLJNYPKYGHGDZJXXEAHPNZKZTZCMXCXMMJXNKSZQNMNLWBWWXJKYHCPSTMCSQTZJYXTPCTPDTNNPGLLLZSJLSPBLPLQHDTNJNLYYRSZFFJFQWDPHZDWMRZCCLODAXNSSNYZRESTYJWJYJDBCFXNMWTTBYLWSTSZGYBLJPXGLBOCLHPCBJLTMXZLJYLZXCLTPNCLCKXTPZJSWCYXSFYSZDKNTLBYJCYJLLSTGQCBXRYZXBXKLYLHZLQZLNZCXWJZLJZJNCJHXMNZZGJZZXTZJXYCYYCXXJYYXJJXSSSJSTSSTTPPGQTCSXWZDCSYFPTFBFHFBBLZJCLZZDBXGCXLQPXKFZFLSYLTUWBMQJHSZBMDDBCYSCCLDXYCDDQLYJJWMQLLCSGLJJSYFPYYCCYLTJANTJJPWYCMMGQYYSXDXQMZHSZXPFTWWZQSWQRFKJLZJQQYFBRXJHHFWJJZYQAZMYFRHCYYBYQWLPEXCCZSTYRLTTDMQLYKMBBGMYYJPRKZNPBSXYXBHYZDJDNGHPMFSGMWFZMFQMMBCMZZCJJLCNUXYQLMLRYGQZCYXZLWJGCJCGGMCJNFYZZJHYCPRRCMTZQZXHFQGTJXCCJEAQCRJYHPLQLSZDJRBCQHQDYRHYLYXJSYMHZYDWLDFRYHBPYDTSSCNWBXGLPZMLZZTQSSCPJMXXYCSJYTYCGHYCJWYRXXLFEMWJNMKLLSWTXHYYYNCMMCWJDQDJZGLLJWJRKHPZGGFLCCSCZMCBLTBHBQJXQDSPDJZZGKGLFQYWBZYZJLTSTDHQHCTCBCHFLQMPWDSHYYTQWCNZZJTLBYMBPDYYYXSQKXWYYFLXXNCWCXYPMAELYKKJMZZZBRXYYQJFLJPFHHHYTZZXSGQQMHSPGDZQWBWPJHZJDYSCQWZKTXXSQLZYYMYSDZGRXCKKUJLWPYSYSCSYZLRMLQSYLJXBCXTLWDQZPCYCYKPPPNSXFYZJJRCEMHSZMSXLXGLRWGCSTLRSXBZGBZGZTCPLUJLSLYLYMTXMTZPALZXPXJTJWTCYYZLBLXBZLQMYLXPGHDSLSSDMXMBDZZSXWHAMLCZCPJMCNHJYSNSYGCHSKQMZZQDLLKABLWJXSFMOCDXJRRLYQZKJMYBYQLYHETFJZFRFKSRYXFJTWDSXXSYSQJYSLYXWJHSNLXYYXHBHAWHHJZXWMYLJCSSLKYDZTXBZSYFDXGXZJKHSXXYBSSXDPYNZWRPTQZCZENYGCXQFJYKJBZMLJCMQQXUOXSLYXXLYLLJDZBTYMHPFSTTQQWLHOKYBLZZALZXQLHZWRRQHLSTMYPYXJJXMQSJFNBXYXYJXXYQYLTHYLQYFMLKLJTMLLHSZWKZHLJMLHLJKLJSTLQXYLMBHHLNLZXQJHXCFXXLHYHJJGBYZZKBXSCQDJQDSUJZYYHZHHMGSXCSYMXFEBCQWWRBPYYJQTYZCYQYQQZYHMWFFHGZFRJFCDPXNTQYZPDYKHJLFRZXPPXZDBBGZQSTLGDGYLCQMLCHHMFYWLZYXKJLYPQHSYWMQQGQZMLZJNSQXJQSYJYCBEHSXFSZPXZWFLLBCYYJDYTDTHWZSFJMQQYJLMQXXLLDTTKHHYBFPWTYYSQQWNQWLGWDEBZWCMYGCULKJXTMXMYJSXHYBRWFYMWFRXYQMXYSZTZZTFYKMLDHQDXWYYNLCRYJBLPSXCXYWLSPRRJWXHQYPHTYDNXHHMMYWYTZCSQMTSSCCDALWZTCPQPYJLLQZYJSWXMZZMMYLMXCLMXCZMXMZSQTZPPQQBLPGXQZHFLJJHYTJSRXWZXSCCDLXTYJDCQJXSLQYCLZXLZZXMXQRJMHRHZJBHMFLJLMLCLQNLDXZLLLPYPSYJYSXCQQDCMQJZZXHNPNXZMEKMXHYKYQLXSXTXJYYHWDCWDZHQYYBGYBCYSCFGPSJNZDYZZJZXRZRQJJYMCANYRJTLDPPYZBSTJKXXZYPFDWFGZZRPYMTNGXZQBYXNBUFNQKRJQZMJEGRZGYCLKXZDSKKNSXKCLJSPJYYZLQQJYBZSSQLLLKJXTBKTYLCCDDBLSPPFYLGYDTZJYQGGKQTTFZXBDKTYYHYBBFYTYYBCLPDYTGDHRYRNJSPTCSNYJQHKLLLZSLYDXXWBCJQSPXBPJZJCJDZFFXXBRMLAZHCSNDLBJDSZBLPRZTSWSBXBCLLXXLZDJZSJPYLYXXYFTFFFBHJJXGBYXJPMMMPSSJZJMTLYZJXSWXTYLEDQPJMYGQZJGDJLQJWJQLLSJGJGYGMSCLJJXDTYGJQJQJCJZCJGDZZSXQGSJGGCXHQXSNQLZZBXHSGZXCXYLJXYXYYDFQQJHJFXDHCTXJYRXYSQTJXYEFYYSSYYJXNCYZXFXMSYSZXYYSCHSHXZZZGZZZGFJDLTYLNPZGYJYZYYQZPBXQBDZTZCZYXXYHHSQXSHDHGQHJHGYWSZTMZMLHYXGEBTYLZKQWYTJZRCLEKYSTDBCYKQQSAYXCJXWWGSBHJYZYDHCSJKQCXSWXFLTYNYZPZCCZJQTZWJQDZZZQZLJJXLSBHPYXXPSXSHHEZTXFPTLQYZZXHYTXNCFZYYHXGNXMYWXTZSJPTHHGYMXMXQZXTSBCZYJYXXTYYZYPCQLMMSZMJZZLLZXGXZAAJZYXJMZXWDXZSXZDZXLEYJJZQBHZWZZZQTZPSXZTDSXJJJZNYAZPHXYYSRNQDTHZHYYKYJHDZXZLSWCLYBZYECWCYCRYLCXNHZYDZYDYJDFRJJHTRSQTXYXJRJHOJYNXELXSFSFJZGHPZSXZSZDZCQZBYYKLSGSJHCZSHDGQGXYZGXCHXZJWYQWGYHKSSEQZZNDZFKWYSSTCLZSTSYMCDHJXXYWEYXCZAYDMPXMDSXYBSQMJMZJMTZQLPJYQZCGQHXJHHLXXHLHDLDJQCLDWBSXFZZYYSCHTYTYYBHECXHYKGJPXHHYZJFXHWHBDZFYZBCAPNPGNYDMSXHMMMMAMYNBYJTMPXYYMCTHJBZYFCGTYHWPHFTWZZEZSBZEGPFMTSKFTYCMHFLLHGPZJXZJGZJYXZSBBQSCZZLZCCSTPGXMJSFTCCZJZDJXCYBZLFCJSYZFGSZLYBCWZZBYZDZYPSWYJZXZBDSYUXLZZBZFYGCZXBZHZFTPBGZGEJBSTGKDMFHYZZJHZLLZZGJQZLSFDJSSCBZGPDLFZFZSZYZYZSYGCXSNXXCHCZXTZZLJFZGQSQYXZJQDCCZTQCDXZJYQJQCHXZTDLGSCXZSYQJQTZWLQDQZTQCHQQJZYEZZZPBWKDJFCJPZTYPQYQTTYNLMBDKTJZPQZQZZFPZSBNJLGYJDXJDZZKZGQKXDLPZJTCJDQBXDJQJSTCKNXBXZMSLYJCQMTJQWWCJQNJNLLLHJCWQTBZQYDZCZPZZDZYDDCYZZZCCJTTJFZDPRRTZTJDCQTQZDTJNPLZBCLLCTZSXKJZQZPZLBZRBTJDCXFCZDBCCJJLTQQPLDCGZDBBZJCQDCJWYNLLZYZCCDWLLXWZLXRXNTQQCZXKQLSGDFQTDDGLRLAJJTKUYMKQLLTZYTDYYCZGJWYXDXFRSKSTQTENQMRKQZHHQKDLDAZFKYPBGGPZREBZZYKZZSPEGJXGYKQZZZSLYSYYYZWFQZYLZZLZHWCHKYPQGNPGBLPLRRJYXCCSYYHSFZFYBZYYTGZXYLXCZWXXZJZBLFFLGSKHYJZEYJHLPLLLLCZGXDRZELRHGKLZZYHZLYQSZZJZQLJZFLNBHGWLCZCFJYSPYXZLZLXGCCPZBLLCYBBBBUBBCBPCRNNZCZYRBFSRLDCGQYYQXYGMQZWTZYTYJXYFWTEHZZJYWLCCNTZYJJZDEDPZDZTSYQJHDYMBJNYJZLXTSSTPHNDJXXBYXQTZQDDTJTDYYTGWSCSZQFLSHLGLBCZPHDLYZJYCKWTYTYLBNYTSDSYCCTYSZYYEBHEXHQDTWNYGYCLXTSZYSTQMYGZAZCCSZZDSLZCLZRQXYYELJSBYMXSXZTEMBBLLYYLLYTDQYSHYMRQWKFKBFXNXSBYCHXBWJYHTQBPBSBWDZYLKGZSKYHXQZJXHXJXGNLJKZLYYCDXLFYFGHLJGJYBXQLYBXQPQGZTZPLNCYPXDJYQYDYMRBESJYYHKXXSTMXRCZZYWXYQYBMCLLYZHQYZWQXDBXBZWZMSLPDMYSKFMZKLZCYQYCZLQXFZZYDQZPZYGYJYZMZXDZFYFYTTQTZHGSPCZMLCCYTZXJCYTJMKSLPZHYSNZLLYTPZCTZZCKTXDHXXTQCYFKSMQCCYYAZHTJPCYLZLYJBJXTPNYLJYYNRXSYLMMNXJSMYBCSYSYLZYLXJJQYLDZLPQBFZZBLFNDXQKCZFYWHGQMRDSXYCYTXNQQJZYYPFZXDYZFPRXEJDGYQBXRCNFYYQPGHYJDYZXGRHTKYLNWDZNTSMPKLBTHBPYSZBZTJZSZZJTYYXZPHSSZZBZCZPTQFZMYFLYPYBBJQXZMXXDJMTSYSKKBJZXHJCKLPSMKYJZCXTMLJYXRZZQSLXXQPYZXMKYXXXJCLJPRMYYGADYSKQLSNDHYZKQXZYZTCGHZTLMLWZYBWSYCTBHJHJFCWZTXWYTKZLXQSHLYJZJXTMPLPYCGLTBZZTLZJCYJGDTCLKLPLLQPJMZPAPXYZLKKTKDZCZZBNZDYDYQZJYJGMCTXLTGXSZLMLHBGLKFWNWZHDXUHLFMKYSLGXDTWWFRJEJZTZHYDXYKSHWFZCQSHKTMQQHTZHYMJDJSKHXZJZBZZXYMPAGQMSTPXLSKLZYNWRTSQLSZBPSPSGZWYHTLKSSSWHZZLYYTNXJGMJSZSUFWNLSOZTXGXLSAMMLBWLDSZYLAKQCQCTMYCFJBSLXCLZZCLXXKSBZQCLHJPSQPLSXXCKSLNHPSFQQYTXYJZLQLDXZQJZDYYDJNZPTUZDSKJFSLJHYLZSQZLBTXYDGTQFDBYAZXDZHZJNHHQBYKNXJJQCZMLLJZKSPLDYCLBBLXKLELXJLBQYCXJXGCNLCQPLZLZYJTZLJGYZDZPLTQCSXFDMNYCXGBTJDCZNBGBQYQJWGKFHTNPYQZQGBKPBBYZMTJDYTBLSQMPSXTBNPDXKLEMYYCJYNZCTLDYKZZXDDXHQSHDGMZSJYCCTAYRZLPYLTLKXSLZCGGEXCLFXLKJRTLQJAQZNCMBYDKKCXGLCZJZXJHPTDJJMZQYKQSECQZDSHHADMLZFMMZBGNTJNNLGBYJBRBTMLBYJDZXLCJLPLDLPCQDHLXZLYCBLCXZZJADJLNZMMSSSMYBHBSQKBHRSXXJMXSDZNZPXLGBRHWGGFCXGMSKLLTSJYYCQLTSKYWYYHYWXBXQYWPYWYKQLSQPTNTKHQCWDQKTWPXXHCPTHTWUMSSYHBWCRWXHJMKMZNGWTMLKFGHKJYLSYYCXWHYECLQHKQHTTQKHFZLDXQWYZYYDESBPKYRZPJFYYZJCEQDZZDLATZBBFJLLCXDLMJSSXEGYGSJQXCWBXSSZPDYZCXDNYXPPZYDLYJCZPLTXLSXYZYRXCYYYDYLWWNZSAHJSYQYHGYWWAXTJZDAXYSRLTDPSSYYFNEJDXYZHLXLLLZQZSJNYQYQQXYJGHZGZCYJCHZLYCDSHWSHJZYJXCLLNXZJJYYXNFXMWFPYLCYLLABWDDHWDXJMCXZTZPMLQZHSFHZYNZTLLDYWLSLXHYMMYLMBWWKYXYADTXYLLDJPYBPWUXJMWMLLSAFDLLYFLBHHHBQQLTZJCQJLDJTFFKMMMBYTHYGDCQRDDWRQJXNBYSNWZDBYYTBJHPYBYTTJXAAHGQDQTMYSTQXKBTZPKJLZRBEQQSSMJJBDJOTGTBXPGBKTLHQXJJJCTHXQDWJLWRFWQGWSHCKRYSWGFTGYGBXSDWDWRFHWYTJJXXXJYZYSLPYYYPAYXHYDQKXSHXYXGSKQHYWFDDDPPLCJLQQEEWXKSYYKDYPLTJTHKJLTCYYHHJTTPLTZZCDLTHQKZXQYSTEEYWYYZYXXYYSTTJKLLPZMCYHQGXYHSRMBXPLLNQYDQHXSXXWGDQBSHYLLPJJJTHYJKYPPTHYYKTYEZYENMDSHLCRPQFDGFXZPSFTLJXXJBSWYYSKSFLXLPPLBBBLBSFXFYZBSJSSYLPBBFFFFSSCJDSTZSXZRYYSYFFSYZYZBJTBCTSBSDHRTJJBYTCXYJEYLXCBNEBJDSYXYKGSJZBXBYTFZWGENYHHTHZHHXFWGCSTBGXKLSXYWMTMBYXJSTZSCDYQRCYTWXZFHMYMCXLZNSDJTTTXRYCFYJSBSDYERXJLJXBBDEYNJGHXGCKGSCYMBLXJMSZNSKGXFBNBPTHFJAAFXYXFPXMYPQDTZCXZZPXRSYWZDLYBBKTYQPQJPZYPZJZNJPZJLZZFYSBTTSLMPTZRTDXQSJEHBZYLZDHLJSQMLHTXTJECXSLZZSPKTLZKQQYFSYGYWPCPQFHQHYTQXZKRSGTTSQCZLPTXCDYYZXSQZSLXLZMYCPCQBZYXHBSXLZDLTCDXTYLZJYYZPZYZLTXJSJXHLPMYTXCQRBLZSSFJZZTNJYTXMYJHLHPPLCYXQJQQKZZSCPZKSWALQSBLCCZJSXGWWWYGYKTJBBZTDKHXHKGTGPBKQYSLPXPJCKBMLLXDZSTBKLGGQKQLSBKKTFXRMDKBFTPZFRTBBRFERQGXYJPZSSTLBZTPSZQZSJDHLJQLZBPMSMMSXLQQNHKNBLRDDNXXDHDDJCYYGYLXGZLXSYGMQQGKHBPMXYXLYTQWLWGCPBMQXCYZYDRJBHTDJYHQSHTMJSBYPLWHLZFFNYPMHXXHPLTBQPFBJWQDBYGPNZTPFZJGSDDTQSHZEAWZZYLLTYYBWJKXXGHLFKXDJTMSZSQYNZGGSWQSPHTLSSKMCLZXYSZQZXNCJDQGZDLFNYKLJCJLLZLMZZNHYDSSHTHZZLZZBBHQZWWYCRZHLYQQJBEYFXXXWHSRXWQHWPSLMSSKZTTYGYQQWRSLALHMJTQJSMXQBJJZJXZYZKXBYQXBJXSHZTSFJLXMXZXFGHKZSZGGYLCLSARJYHSLLLMZXELGLXYDJYTLFBHBPNLYZFBBHPTGJKWETZHKJJXZXXGLLJLSTGSHJJYQLQZFKCGNNDJSSZFDBCTWWSEQFHQJBSAQTGYPQLBXBMMYWXGSLZHGLZGQYFLZBYFZJFRYSFMBYZHQGFWZSYFYJJPHZBYYZFFWODGRLMFTWLBZGYCQXCDJYGZYYYYTYTYDWEGAZYHXJLZYYHLRMGRXXZCLHNELJJTJTPWJYBJJBXJJTJTEEKHWSLJPLPSFYZPQQBDLQJJTYYQLYZKDKSQJYYQZLDQTGJQYZJSUCMRYQTHTEJMFCTYHYPKMHYZWJDQFHYYXWSHCTXRLJHQXHCCYYYJLTKTTYTMXGTCJTZAYYOCZLYLBSZYWJYTSJYHBYSHFJLYGJXXTMZYYLTXXYPZLXYJZYZYYPNHMYMDYYLBLHLSYYQQLLNJJYMSOYQBZGDLYXYLCQYXTSZEGXHZGLHWBLJHEYXTWQMAKBPQCGYSHHEGQCMWYYWLJYJHYYZLLJJYLHZYHMGSLJLJXCJJYCLYCJPCPZJZJMMYLCQLNQLJQJSXYJMLSZLJQLYCMMHCFMMFPQQMFYLQMCFFQMMMMHMZNFHHJGTTHHKHSLNCHHYQDXTMMQDCYZYXYQMYQYLTDCYYYZAZZCYMZYDLZFFFMMYCQZWZZMABTBYZTDMNZZGGDFTYPCGQYTTSSFFWFDTZQSSYSTWXJHXYTSXXYLBYQHWWKXHZXWZNNZZJZJJQJCCCHYYXBZXZCYZTLLCQXYNJYCYYCYNZZQYYYEWYCZDCJYCCHYJLBTZYYCQWMPWPYMLGKDLDLGKQQBGYCHJXY"},137:function(e,t){},14:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(6),l=a(i),s=n(4),u=n(24),c=a(u),d=function(){function e(t){if(r(this,e),this.id=t.id||"0000000000000000",this.name=t.name,this.type=t.type,this.mtime=t.mtime,this.mtime_relative=l.default.unix(t.mtime).fromNow(),this.permission=t.permission||"rw",this.isSelected=!1,this.starred=t.starred||!1,"file"===t.type){this.size=s.Utils.bytesToSize(t.size),this.is_locked=t.is_locked||!1,this.lock_time=t.lock_time||"",this.lock_owner=t.lock_owner||null,this.lock_owner_name=t.lock_owner_name||null,this.locked_by_me=t.locked_by_me||!1,this.modifier_name=t.modifier_name||"",this.modifier_email=t.modifier_email||"",this.modifier_contact_email=t.modifier_contact_email||"";var n=[];t.file_tags&&(n=t.file_tags.map(function(e){return new c.default(e)})),this.file_tags=n,t.encoded_thumbnail_src&&(this.encoded_thumbnail_src=t.encoded_thumbnail_src)}}return o(e,[{key:"clone",value:function(){return new e(this)}},{key:"isDir",value:function(){return"file"!==this.type}}]),e}();t.default=d},141:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(4),m=n(30),g=a(m),y={path:d.default.string.isRequired,repoID:d.default.string.isRequired,dirent:d.default.object,selectedDirentList:d.default.array,isMutipleOperation:d.default.bool.isRequired,onItemMove:d.default.func,onItemsMove:d.default.func,onCancelMove:d.default.func.isRequired,repoEncrypted:d.default.bool.isRequired},b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSubmit=function(){n.props.isMutipleOperation?n.moveItems():n.moveItem()},n.moveItems=function(){var e=n.props.repoID,t=n.state,a=t.repo,r=t.selectedPath,o=(0,p.gettext)("Invalid destination path");if(!a||""===r)return void n.setState({errMessage:o});var i=n.props.selectedDirentList,l=[];if(i.forEach(function(e){var t=h.Utils.joinPath(n.props.path,e.name);l.push(t)}),l.some(function(e){return e===r}))return void n.setState({errMessage:o});if(r&&r===n.props.path&&a.repo_id===e)return void n.setState({errMessage:o});var s="";if(l.some(function(e){var t=r.length>e.length&&r.indexOf(e)>-1;return t&&(s=e),t}))return o=(0,p.gettext)("Can not move directory %(src)s to its subdirectory %(des)s"),o=o.replace("%(src)s",s),o=o.replace("%(des)s",r),void n.setState({errMessage:o});n.props.onItemsMove(a,r),n.toggle()},n.moveItem=function(){var e=n.state,t=e.repo,a=e.repoID,r=e.selectedPath,o=h.Utils.joinPath(n.props.path,n.props.dirent.name),i=(0,p.gettext)("Invalid destination path");return!t||t.repo_id===a&&""===r?void n.setState({errMessage:i}):r&&o===r?void n.setState({errMessage:i}):r&&n.props.path===r&&t.repo_id===a?void n.setState({errMessage:i}):r&&r.length>o.length&&r.indexOf(o)>-1?(i=(0,p.gettext)("Can not move directory %(src)s to its subdirectory %(des)s"),i=i.replace("%(src)s",o),i=i.replace("%(des)s",r),void n.setState({errMessage:i})):(n.props.onItemMove(t,n.props.dirent,r,n.props.path),void n.toggle())},n.toggle=function(){n.props.onCancelMove()},n.onDirentItemClick=function(e,t){n.setState({repo:e,selectedPath:t,errMessage:""})},n.onRepoItemClick=function(e){n.setState({repo:e,selectedPath:"/",errMessage:""})},n.state={repo:null,selectedPath:"",errMessage:""},n}return i(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.errMessage!==t.errMessage}},{key:"render",value:function(){var e=(0,p.gettext)("Move {placeholder} to:");e=this.props.isMutipleOperation?(0,p.gettext)("Move selected item(s) to:"):e.replace("{placeholder}",'<span class="op-target">'+h.Utils.HTMLescape(this.props.dirent.name)+"</span>");var t=this.props.repoEncrypted?"only_current_library":"current_repo_and_other_repos";return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},u.default.createElement("div",{dangerouslySetInnerHTML:{__html:e}})),u.default.createElement(f.ModalBody,null,u.default.createElement(g.default,{repoID:this.props.repoID,onDirentItemClick:this.onDirentItemClick,onRepoItemClick:this.onRepoItemClick,mode:t}),this.state.errMessage&&u.default.createElement(f.Alert,{color:"danger",style:{margin:"0.5rem"}},this.state.errMessage)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);b.propTypes=y,t.default=b},142:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(4),m=n(30),g=a(m),y={path:d.default.string.isRequired,repoID:d.default.string.isRequired,dirent:d.default.object,selectedDirentList:d.default.array,isMutipleOperation:d.default.bool.isRequired,onItemCopy:d.default.func,onItemsCopy:d.default.func,onCancelCopy:d.default.func.isRequired,repoEncrypted:d.default.bool.isRequired},b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSubmit=function(){n.props.isMutipleOperation?n.copyItems():n.copyItem()},n.copyItems=function(){var e=n.props.repoID,t=n.state,a=t.repo,r=t.selectedPath,o=(0,p.gettext)("Invalid destination path");if(!a||""===r)return void n.setState({errMessage:o});var i=n.props.selectedDirentList,l=[];if(i.forEach(function(e){var t=h.Utils.joinPath(n.props.path,e.name);l.push(t)}),l.some(function(e){return e===r}))return void n.setState({errMessage:o});if(r&&r===n.props.path&&a.repo_id===e)return void n.setState({errMessage:o});var s="";if(l.some(function(e){var t=r.length>e.length&&r.indexOf(e)>-1;return t&&(s=e),t}))return o=(0,p.gettext)("Can not move directory %(src)s to its subdirectory %(des)s"),o=o.replace("%(src)s",s),o=o.replace("%(des)s",r),void n.setState({errMessage:o});n.props.onItemsCopy(a,r),n.toggle()},n.copyItem=function(){var e=n.state,t=e.repo,a=e.repoID,r=e.selectedPath,o=h.Utils.joinPath(n.props.path,n.props.dirent.name),i="Invalid destination path";return!t||t.repo_id===a&&""===r?void n.setState({errMessage:i}):r&&o===r?void n.setState({errMessage:i}):r&&n.props.path===r&&t.repo_id===a?void n.setState({errMessage:i}):r&&r.length>o.length&&r.indexOf(o)>-1?(i=(0,p.gettext)("Can not copy directory %(src)s to its subdirectory %(des)s"),i=i.replace("%(src)s",o),i=i.replace("%(des)s",r),void n.setState({errMessage:i})):(n.props.onItemCopy(t,n.props.dirent,r,n.props.path),void n.toggle())},n.toggle=function(){n.props.onCancelCopy()},n.onDirentItemClick=function(e,t){n.setState({repo:e,selectedPath:t,errMessage:""})},n.onRepoItemClick=function(e){n.setState({repo:e,selectedPath:"/",errMessage:""})},n.state={repo:null,selectedPath:"",errMessage:""},n}return i(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.errMessage!==t.errMessage}},{key:"render",value:function(){var e=(0,p.gettext)("Copy {placeholder} to:");e=this.props.isMutipleOperation?(0,p.gettext)("Copy selected item(s) to:"):e.replace("{placeholder}",'<span class="op-target">'+h.Utils.HTMLescape(this.props.dirent.name)+"</span>");var t=this.props.repoEncrypted?"only_current_library":"current_repo_and_other_repos";return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},u.default.createElement("div",{dangerouslySetInnerHTML:{__html:e}})),u.default.createElement(f.ModalBody,null,u.default.createElement(g.default,{repoID:this.props.repoID,onDirentItemClick:this.onDirentItemClick,onRepoItemClick:this.onRepoItemClick,mode:t}),this.state.errMessage&&u.default.createElement(f.Alert,{color:"danger",style:{margin:"0.5rem"}},this.state.errMessage)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);b.propTypes=y,t.default=b},143:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(7),h=a(p),m={hasSuffix:d.default.bool,name:d.default.string.isRequired,onRenameConfirm:d.default.func.isRequired,onRenameCancel:d.default.func.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=function(e){n.setState({name:e.target.value})},n.onClick=function(e){e.nativeEvent.stopImmediatePropagation()},n.onKeyPress=function(e){"Enter"===e.key&&n.onRenameConfirm(e)},n.onRenameConfirm=function(e){e.nativeEvent.stopImmediatePropagation();var t=n.state.name.trim();if(t===n.props.name)return void n.props.onRenameCancel();var a=n.validateInput(),r=a.isValid,o=a.errMessage;r?n.props.onRenameConfirm(t):h.default.danger(o)},n.onRenameCancel=function(e){e.nativeEvent.stopImmediatePropagation(),n.props.onRenameCancel()},n.validateInput=function(){var e=n.state.name.trim(),t=!0,a="";return e?e.indexOf("/")>-1?(t=!1,a=(0,f.gettext)("Name should not include '/'."),{isValid:t,errMessage:a}):{isValid:t,errMessage:a}:(t=!1,a=(0,f.gettext)("Name is required."),{isValid:t,errMessage:a})},n.state={name:e.name},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){if(this.refs.renameInput.focus(),this.props.hasSuffix){var e=this.props.name.lastIndexOf(".");this.refs.renameInput.setSelectionRange(0,e,"forward")}else this.refs.renameInput.setSelectionRange(0,-1)}},{key:"render",value:function(){return u.default.createElement("div",{className:"rename-container"},u.default.createElement("input",{ref:"renameInput",value:this.state.name,onChange:this.onChange,onKeyPress:this.onKeyPress,onClick:this.onClick}),u.default.createElement("button",{className:"btn btn-secondary sf2-icon-confirm confirm",onClick:this.onRenameConfirm}),u.default.createElement("button",{className:"btn btn-secondary sf2-icon-cancel cancel",onClick:this.onRenameCancel}))}}]),t}(u.default.Component);g.propTypes=m,t.default=g},15:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(0),l=a(i),s=n(8),u=a(s),c=n(16),d=a(c),f="undefined"!==typeof window&&"undefined"!==typeof window.document,p=function e(){var t=this;if(r(this,e),this._bindNotify=function(e){t.notifyHandler=e},this._bindGetToasts=function(e){t.getToastsHandler=e},this._bindCloseAll=function(e){t.closeAllHandler=e},this.getToasts=function(){return t.getToastsHandler()},this.closeAll=function(){return t.closeAllHandler()},this.notify=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,o({},n,{intent:"none"}))},this.success=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,o({},n,{intent:"success"}))},this.warning=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,o({},n,{intent:"warning"}))},this.danger=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,o({},n,{intent:"danger"}))},f){var n=document.createElement("div");n.setAttribute("data-evergreen-toaster-container",""),document.body.appendChild(n),u.default.render(l.default.createElement(d.default,{bindNotify:this._bindNotify,bindGetToasts:this._bindGetToasts,bindCloseAll:this._bindCloseAll}),n)}};t.default=p},159:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(3),m=n(4),g=n(30),y=a(g);n(98);var b={repoID:d.default.string.isRequired,filePath:d.default.string.isRequired,toggleCancel:d.default.func.isRequired,onRelatedFileChange:d.default.func.isRequired,dirent:d.default.object.isRequired,onClose:d.default.func},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSubmit=function(){n.onAddRelatedFile()},n.onAddRelatedFile=function(){var e=n.state,t=e.repo,a=e.selectedPath,r=n.props.repoID,o=t.repo_id,i=n.props.filePath,l=a;if(r===o&&i===l){var s=(0,p.gettext)("Can not select self as a related file.");return void n.setState({errMessage:s})}h.seafileAPI.addRelatedFile(r,o,i,l).then(function(e){n.props.onRelatedFileChange(),n.toggle()}).catch(function(e){e.response&&n.setState({errMessage:e.response.data.error_msg})})},n.toggle=function(){n.props.toggleCancel()},n.onDirentItemClick=function(e,t,a){"file"===a.type?n.setState({repo:e,selectedPath:t}):n.setState({repo:null,selectedPath:""})},n.onRepoItemClick=function(e){n.setState({repo:null,selectedPath:""})},n.state={repo:null,selectedPath:"",isShowFile:!0,errMessage:""},n}return i(t,e),l(t,[{key:"render",value:function(){var e=(0,p.gettext)("Select related file for {placeholder}");return e=e.replace("{placeholder}",'<span class="op-target">'+m.Utils.HTMLescape(this.props.dirent.name)+"</span>"),u.default.createElement(s.Fragment,null,u.default.createElement(f.ModalHeader,{toggle:this.props.onClose},u.default.createElement("span",{className:"tag-dialog-back fas fa-sm fa-arrow-left",onClick:this.toggle,"aria-label":(0,p.gettext)("Back")}),(0,p.gettext)("Select File")),u.default.createElement(f.ModalBody,null,u.default.createElement("div",{className:"related-file-subtitle",dangerouslySetInnerHTML:{__html:e}}),u.default.createElement(y.default,{isShowFile:this.state.isShowFile,repoID:this.props.repoID,onDirentItemClick:this.onDirentItemClick,onRepoItemClick:this.onRepoItemClick,mode:"current_repo_and_other_repos"}),this.state.errMessage&&u.default.createElement(f.Alert,{color:"danger"},this.state.errMessage)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),this.state.selectedPath?u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit},(0,p.gettext)("Submit")):u.default.createElement(f.Button,{color:"primary",disabled:!0},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);v.propTypes=b,t.default=v},16:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(0),f=a(d),p=n(9),h=n(1),m=a(h),g=n(17),y=a(g),b=(0,p.css)({maxWidth:560,margin:"0 auto",top:0,left:0,right:0,position:"fixed",zIndex:999999}),v=function(e){return Object.hasOwnProperty.call(e,"id")},w=function(e){function t(e,n){i(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.getToasts=function(){return a.state.toasts},a.closeAll=function(){a.getToasts().forEach(function(e){return e.close()})},a.notify=function(e,t){if(v(t)){var n=!0,r=!1,i=void 0;try{for(var l,s=a.state.toasts[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var u=l.value;String(u.id).startsWith(t.id)&&a.closeToast(u.id)}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}var c=a.createToastInstance(e,t);return a.setState(function(e){return{toasts:[c].concat(o(e.toasts))}}),c},a.createToastInstance=function(e,n){var r=++t.idCounter,o=v(n)?n.id+"-"+r:r;return{id:o,title:e,description:n.description,hasCloseButton:n.hasCloseButton||!0,duration:n.duration||2,close:function(){return a.closeToast(o)},intent:n.intent}},a.closeToast=function(e){a.setState(function(t){return{toasts:t.toasts.map(function(t){return t.id===e?u({},t,{isShown:!1}):t})}})},a.removeToast=function(e){a.setState(function(t){return{toasts:t.toasts.filter(function(t){return t.id!==e})}})},e.bindNotify(a.notify),e.bindGetToasts(a.getToasts),e.bindCloseAll(a.closeAll),a.state={toasts:[]},a}return s(t,e),c(t,[{key:"render",value:function(){var e=this;return f.default.createElement("span",{className:b},this.state.toasts.map(function(t){var n=t.id,a=t.description,o=r(t,["id","description"]);return f.default.createElement(y.default,u({key:n,onRemove:function(){return e.removeToast(n)}},o),a)}))}}]),t}(f.default.PureComponent);w.propTypes={bindNotify:m.default.func.isRequired,bindGetToasts:m.default.func.isRequired,bindCloseAll:m.default.func.isRequired},w.idCounter=0,t.default=w},160:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(14),h=a(p),m=n(2),g=n(4),y=n(3);n(161);var b={relatedFiles:d.default.array.isRequired,repoID:d.default.string.isRequired,filePath:d.default.string.isRequired,toggleCancel:d.default.func.isRequired,addRelatedFileToggle:d.default.func.isRequired,onRelatedFileChange:d.default.func.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDeleteRelatedFile=function(e){var t=n.props.filePath,a=n.props.repoID,r=e.related_id;y.seafileAPI.deleteRelatedFile(a,t,r).then(function(e){n.props.onRelatedFileChange()})},n.toggle=function(){n.props.toggleCancel()},n.getDirentList=function(e){if(0===e.length)return void n.setState({direntList:[]});var t=[];e.map(function(e){y.seafileAPI.getFileInfo(e.repo_id,e.path).then(function(a){var r=new h.default(a.data);r.repo_name=e.repo_name,r.related_id=e.related_id,r.link=m.siteRoot+"lib/"+e.repo_id+"/file"+g.Utils.encodePath(e.path),t.push(r),n.setState({direntList:t})})})},n.state={direntList:[]},n}return i(t,e),l(t,[{key:"componentWillMount",value:function(){this.getDirentList(this.props.relatedFiles)}},{key:"componentWillReceiveProps",value:function(e){e.relatedFiles.length!==this.props.relatedFiles.length&&this.getDirentList(e.relatedFiles)}},{key:"render",value:function(){var e=this;return u.default.createElement(s.Fragment,null,u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,m.gettext)("Related Files")),u.default.createElement(f.ModalBody,{className:this.state.direntList.length>0?"list-related-file-body":""},u.default.createElement(f.Table,{hover:!0,size:"sm",className:"list-related-file-table"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"40%"},(0,m.gettext)("Name")),u.default.createElement("th",{width:"20%"},(0,m.gettext)("Library Name")),u.default.createElement("th",{width:"13%"},(0,m.gettext)("Size")),u.default.createElement("th",{width:"20%"},(0,m.gettext)("Last Update")),u.default.createElement("th",{width:"5%"}),u.default.createElement("th",{width:"2%"}))),u.default.createElement("tbody",null,this.state.direntList.map(function(t,n){return u.default.createElement(u.default.Fragment,{key:n},u.default.createElement(S,{relatedFile:t,onDeleteRelatedFile:e.onDeleteRelatedFile}))}))),u.default.createElement("a",{href:"#",className:"add-related-file-link",onClick:this.props.addRelatedFileToggle},(0,m.gettext)("Add File"))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,m.gettext)("Close"))))}}]),t}(u.default.Component);v.propTypes=b;var w={relatedFile:d.default.object,onDeleteRelatedFile:d.default.func.isRequired},S=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.setState({active:!0})},n.onMouseLeave=function(){n.setState({active:!1})},n.state={active:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state.active?"action-icon sf2-icon-x3":"action-icon vh sf2-icon-x3",t=this.props.relatedFile;return u.default.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("td",null,u.default.createElement("a",{href:t.link,target:"_blank"},t.name)),u.default.createElement("td",null,t.repo_name),u.default.createElement("td",null,t.size),u.default.createElement("td",null,t.mtime_relative),u.default.createElement("td",null,u.default.createElement("i",{className:e,onClick:this.props.onDeleteRelatedFile.bind(this,t)})),u.default.createElement("td",null))}}]),t}(u.default.Component);S.propTypes=w,t.default=v},161:function(e,t){},162:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(4),l=n(163),s=a(l),u=n(95),c=a(u),d=n(14),f=a(d),p=function(){function e(){r(this,e)}return o(e,[{key:"expandNode",value:function(e,t){e.expandNode(t)}},{key:"collapseNode",value:function(e,t){var n=e.clone();return t=n.getNodeByPath(t.path),n.collapseNode(t),n}},{key:"findNodeByPath",value:function(e,t){return e.clone().getNodeByPath(t)}},{key:"getNodeChildrenObject",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asc",r=e.getNodeChildrenObject(t);return r=i.Utils.sortDirents(r,n,a)}},{key:"addNodeToParent",value:function(e,t,n){return e.addNodeToParentNode(t,n),e}},{key:"addNodeListToParent",value:function(e,t,n){return e.addNodeListToParent(t,n),e}},{key:"addNodeToParentByPath",value:function(e,t,n){var a=e.clone(),r=a.getNodeByPath(n);return a.addNodeToParent(t,r),a}},{key:"deleteNodeByPath",value:function(e,t){var n=e.clone(),a=n.getNodeByPath(t);return n.deleteNode(a),n}},{key:"deleteNodeListByPaths",value:function(e,t){var n=e.clone();return t.forEach(function(e){var t=n.getNodeByPath(e);n.deleteNode(t)}),n}},{key:"renameNodeByPath",value:function(e,t,n){var a=e.clone(),r=a.getNodeByPath(t);return a.renameNode(r,n),a}},{key:"updateNodeByPath",value:function(e,t,n,a){var r=e.clone(),o=r.getNodeByPath(t);return r.updateNode(o,n,a),r}},{key:"moveNodeByPath",value:function(e,t,n,a){var r=e.clone(),o=r.getNodeByPath(t),i=r.getNodeByPath(n);return i&&o&&(o.object.name=a,r.moveNode(o,i)),!i&&o&&r.deleteNode(o),r}},{key:"moveNodeListByPaths",value:function(e,t,n){var a=e.clone(),r=a.getNodeByPath(n);return r?t.forEach(function(e){var t=a.getNodeByPath(e);a.moveNode(t,r)}):t.forEach(function(e){var t=a.getNodeByPath(e);a.delete(t)}),a}},{key:"copyNodeByPath",value:function(e,t,n,a){var r=e.clone(),o=r.getNodeByPath(n),i=r.getNodeByPath(t);if(o){var l=i.clone();l.object.name=a,r.copyNode(l,o)}return r}},{key:"copyNodeListByPaths",value:function(e,t,n){var a=e.clone(),r=a.getNodeByPath(n);return r&&t.forEach(function(e){var t=a.getNodeByPath(e);a.copyNode(t,r)}),a}},{key:"buildTree",value:function(){var e=new s.default,t=new f.default({name:"/"}),n=new c.default({object:t,isLoaded:!1,isExpanded:!0});return e.setRoot(n),e}}]),e}(),h=new p;t.default=h},163:function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(95),l=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(){function e(){r(this,e),this.root=null}return o(e,[{key:"clone",value:function(){var t=new e;return this.root&&(t.root=this.root.clone()),t}},{key:"setRoot",value:function(e){this.root=e}},{key:"getNodeByPath",value:function(e){function t(t){return t.path===e&&(n=t,!0)}var n=null;return this.traverseDF(t),n}},{key:"getNodeChildrenObject",value:function(e){return e.children.map(function(e){return e.object})}},{key:"addNodeToParent",value:function(e,t){t.addChild(e)}},{key:"addNodeListToParent",value:function(e,t){e.forEach(function(e){t.addChild(e)})}},{key:"deleteNode",value:function(e){this.getNodeByPath(e.parentNode.path).deleteChild(e)}},{key:"deleteNodeList",value:function(e){var t=this;e.forEach(function(e){t.deleteNode(e)})}},{key:"renameNode",value:function(e,t){e.rename(t)}},{key:"updateNode",value:function(e,t,n){e.updateObjectParam(t,n)}},{key:"moveNode",value:function(e,t){this.deleteNode(e),t.addChild(e)}},{key:"copyNode",value:function(e,t){t.addChild(e)}},{key:"traverseDF",value:function(e){var t=[],n=!1;t.unshift(this.root);for(var r=t.shift();!n&&r;)(n=1==e(r))||(t.unshift.apply(t,a(r.children)),r=t.shift())}},{key:"traverseBF",value:function(e){var t=[],n=!1;t.push(this.root);for(var r=t.shift();!n&&r;)(n=!0===e(r))||(t.push.apply(t,a(r.children)),r=t.shift())}},{key:"expandNode",value:function(e){for(e.isExpanded=!0;e.parentNode;)e.parentNode.isExpanded=!0,e=e.parentNode}},{key:"collapseNode",value:function(e){e.isExpanded=!1}},{key:"isNodeChild",value:function(e,t){return t.children.some(function(t){return t.path===e.path})}},{key:"serializeToJson",value:function(){return this.root.serializeToJson()}},{key:"deserializefromJson",value:function(t){var n=l.default.deserializefromJson(t),a=new e;return a.setRoot(n),a}}]),e}();t.default=s},164:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(165),p=a(f),h=n(167),m=a(h),g={repoPermission:d.default.bool,isNodeMenuShow:d.default.bool.isRequired,treeData:d.default.object.isRequired,currentPath:d.default.string.isRequired,onMenuItemClick:d.default.func,onNodeClick:d.default.func.isRequired,onNodeExpanded:d.default.func.isRequired,onNodeCollapse:d.default.func.isRequired,onItemMove:d.default.func,currentRepoInfo:d.default.object},y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onItemMove=function(e,t,a,r){n.props.onItemMove(e,t,a,r)},n.onNodeDragStart=function(e,t){var n={nodeDirent:t.object,nodeParentPath:t.parentNode.path,nodeRootPath:t.path};n=JSON.stringify(n),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("applicaiton/drag-item-info",n)},n.onNodeDragEnter=function(e,t){},n.onNodeDragMove=function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},n.onNodeDragLeave=function(e,t){},n.onNodeDrop=function(e,t){if(!e.dataTransfer.files.length){var a=e.dataTransfer.getData("applicaiton/drag-item-info");a=JSON.parse(a);var r=a,o=r.nodeDirent,i=r.nodeParentPath,l=r.nodeRootPath,s=t;"dir"===s.object.type&&(i===s.parentNode.path&&s.object.name===o.name||"dir"===s.object.type&&"dir"===o.type&&s.parentNode.path!==i&&-1!==s.path.indexOf(l)||n.onItemMove(n.props.currentRepoInfo,o,s.path,i))}},n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnFreezedItem=function(){n.setState({isItemFreezed:!1})},n.contextMenu=function(e){e.preventDefault(),n.setState({isRightMenuShow:!1}),setTimeout(function(){n.setState({isRightMenuShow:!0,fileData:n.state.nodeData,mousePosition:{clientX:e.clientX,clientY:e.clientY}})},40)},n.unregisterHandlers=function(){document.querySelector(".tree-view").removeEventListener("contextmenu",n.contextMenu)},n.registerHandlers=function(){document.querySelector(".tree-view").addEventListener("contextmenu",n.contextMenu)},n.onNodeChanged=function(e){n.setState({nodeData:e})},n.closeRightMenu=function(){n.setState({isRightMenuShow:!1})},n.onMenuItemClick=function(e,t){n.props.onMenuItemClick(e,t)},n.state={isItemFreezed:!1,isRightMenuShow:!1,nodeData:null,fileData:null,mousePosition:{clientX:"",clientY:""}},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.registerHandlers()}},{key:"componentWillUnmount",value:function(){this.unregisterHandlers()}},{key:"render",value:function(){return u.default.createElement("div",{className:"tree-view tree"},u.default.createElement(p.default,{repoPermission:this.props.repoPermission,node:this.props.treeData.root,currentPath:this.props.currentPath,paddingLeft:20,isNodeMenuShow:this.props.isNodeMenuShow,isItemFreezed:this.state.isItemFreezed,onNodeClick:this.props.onNodeClick,onMenuItemClick:this.props.onMenuItemClick,onNodeExpanded:this.props.onNodeExpanded,onNodeCollapse:this.props.onNodeCollapse,onNodeDragStart:this.onNodeDragStart,onFreezedItem:this.onFreezedItem,onUnFreezedItem:this.onUnFreezedItem,onNodeChanged:this.onNodeChanged,registerHandlers:this.registerHandlers,unregisterHandlers:this.unregisterHandlers,onNodeDragMove:this.onNodeDragMove,onNodeDrop:this.onNodeDrop,onNodeDragEnter:this.onNodeDragEnter,onNodeDragLeave:this.onNodeDragLeave}),this.state.isRightMenuShow&&u.default.createElement(m.default,{node:this.state.fileData,onMenuItemClick:this.onMenuItemClick,mousePosition:this.state.mousePosition,closeRightMenu:this.closeRightMenu,registerHandlers:this.registerHandlers,unregisterHandlers:this.unregisterHandlers}))}}]),t}(u.default.Component);y.propTypes=g,t.default=y},165:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(166),p=a(f),h=n(2),m={repoPermission:d.default.bool,node:d.default.object.isRequired,currentPath:d.default.string.isRequired,paddingLeft:d.default.number.isRequired,isNodeMenuShow:d.default.bool.isRequired,isItemFreezed:d.default.bool.isRequired,onNodeClick:d.default.func.isRequired,onNodeExpanded:d.default.func.isRequired,onNodeCollapse:d.default.func.isRequired,onNodeDragStart:d.default.func.isRequired,onFreezedItem:d.default.func.isRequired,onUnFreezedItem:d.default.func.isRequired,onMenuItemClick:d.default.func,registerHandlers:d.default.func,unregisterHandlers:d.default.func,onNodeDragMove:d.default.func,onNodeDrop:d.default.func},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.props.isItemFreezed||n.setState({isShowOperationMenu:!0,isHighlight:!0}),n.props.onNodeChanged(n.props.node)},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({isShowOperationMenu:!1,isHighlight:!1}),n.props.onNodeChanged(null)},n.onNodeClick=function(){n.props.onNodeClick(n.props.node)},n.onLoadToggle=function(){var e=n.props.node;e.isExpanded?n.props.onNodeCollapse(e):n.props.onNodeExpanded(e)},n.onNodeDragStart=function(e){n.props.onNodeDragStart(e,n.props.node)},n.onNodeDragEnter=function(e){"dir"===n.props.node.object.type&&n.setState({isNodeDropShow:!0}),n.props.onNodeDragEnter(e,n.props.node)},n.onNodeDragMove=function(e){n.props.onNodeDragMove(e)},n.onNodeDragLeave=function(e){n.setState({isNodeDropShow:!1}),n.props.onNodeDragLeave(e,n.props.node)},n.onNodeDrop=function(e){n.setState({isNodeDropShow:!1}),n.props.onNodeDrop(e,n.props.node)},n.onUnFreezedItem=function(){n.setState({isShowOperationMenu:!1}),n.props.onUnFreezedItem()},n.onMenuItemClick=function(e,t){n.props.onMenuItemClick(e,t)},n.getNodeTypeAndIcon=function(){var e=n.props.node,t="",a="";if("dir"===e.object.type)t=u.default.createElement("i",{className:"far fa-folder"}),a="dir";else{var r=e.object.name.lastIndexOf(".");if(-1===r)t=u.default.createElement("i",{className:"far fa-file"}),a="file";else{var o=e.object.name.slice(r).toLowerCase();".png"===o||".jpg"===o||".jpeg"===o||".gif"===o||".bmp"===o?(t=u.default.createElement("i",{className:"far fa-image"}),a="image"):".md"===o||".markdown"===o?(t=u.default.createElement("i",{className:"far fa-file-alt"}),a="file"):(t=u.default.createElement("i",{className:"far fa-file"}),a="file")}}return{icon:t,type:a}},n.renderChildren=function(){var e=n.props,a=e.node,r=e.paddingLeft;return a.hasChildren()?u.default.createElement("div",{className:"children",style:{paddingLeft:r}},a.children.map(function(e){return u.default.createElement(t,{key:e.path,node:e,paddingLeft:r,repoPermission:n.props.repoPermission,currentPath:n.props.currentPath,isNodeMenuShow:n.props.isNodeMenuShow,isItemFreezed:n.props.isItemFreezed,onNodeClick:n.props.onNodeClick,onNodeCollapse:n.props.onNodeCollapse,onNodeExpanded:n.props.onNodeExpanded,onFreezedItem:n.props.onFreezedItem,onMenuItemClick:n.onMenuItemClick,onUnFreezedItem:n.onUnFreezedItem,onNodeChanged:n.props.onNodeChanged,registerHandlers:n.props.registerHandlers,unregisterHandlers:n.props.unregisterHandlers,onNodeDragStart:n.props.onNodeDragStart,onNodeDragMove:n.props.onNodeDragMove,onNodeDrop:n.props.onNodeDrop,onNodeDragEnter:n.props.onNodeDragEnter,onNodeDragLeave:n.props.onNodeDragLeave})})):""},n.state={isHighlight:!1,isShowOperationMenu:!1,isNodeDropShow:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.currentPath,n=e.node,a=e.isNodeMenuShow,r=this.getNodeTypeAndIcon(),o=r.type,i=r.icon,l=this.state.isHighlight?"tree-node-inner-hover ":"";return n.path===t&&(l="tree-node-hight-light"),u.default.createElement("div",{className:"tree-node"},u.default.createElement("div",{type:o,title:n.object.name,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,className:"tree-node-inner text-nowrap "+l+" "+("/"===n.path?"hide":"")+" "+(this.state.isNodeDropShow?"tree-node-drop":"")},u.default.createElement("div",{className:"tree-node-text",draggable:"true",onDragStart:this.onNodeDragStart,onClick:this.onNodeClick,onDragEnter:this.onNodeDragEnter,onDragLeave:this.onNodeDragLeave,onDragOver:this.onNodeDragMove,onDrop:this.onNodeDrop},n.object.name),u.default.createElement("div",{className:"left-icon"},"dir"===o&&(!n.isLoaded||n.isLoaded&&n.hasChildren())&&u.default.createElement("i",{className:"folder-toggle-icon fa "+(n.isExpanded?"fa-caret-down":"fa-caret-right"),onMouseDown:function(e){return e.stopPropagation()},onClick:this.onLoadToggle}),u.default.createElement("i",{className:"tree-node-icon"},i)),a&&u.default.createElement("div",{className:"right-icon"},(this.props.repoPermission||h.permission)&&this.state.isShowOperationMenu&&u.default.createElement(p.default,{node:this.props.node,onMenuItemClick:this.onMenuItemClick,onUnFreezedItem:this.onUnFreezedItem,onFreezedItem:this.props.onFreezedItem,registerHandlers:this.props.registerHandlers,unregisterHandlers:this.props.unregisterHandlers}))),n.isExpanded&&this.renderChildren())}}]),t}(u.default.Component);g.propTypes=m,t.default=g},166:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h={node:d.default.object.isRequired,onMenuItemClick:d.default.func.isRequired,onFreezedItem:d.default.func.isRequired,onUnFreezedItem:d.default.func.isRequired,registerHandlers:d.default.func,unregisterHandlers:d.default.func},m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.translateMenuItem=function(e){var t="";switch(e){case"New Folder":t=(0,p.gettext)("New Folder");break;case"New File":t=(0,p.gettext)("New File");break;case"Rename":t=(0,p.gettext)("Rename");break;case"Copy":t=(0,p.gettext)("Copy");break;case"Move":t=(0,p.gettext)("Move");break;case"Delete":t=(0,p.gettext)("Delete");break;case"Open in New Tab":t=(0,p.gettext)("Open in New Tab")}return t},n.onDropdownToggleClick=function(e){e.preventDefault(),n.toggleOperationMenu(e)},n.toggleOperationMenu=function(e){e.stopPropagation(),n.setState({isItemMenuShow:!n.state.isItemMenuShow},function(){n.state.isItemMenuShow?n.props.onFreezedItem():n.props.onUnFreezedItem()})},n.onMenuItemClick=function(e){var t=e.target.dataset.toggle,a=n.props.node;n.props.onMenuItemClick(t,a)},n.state={isItemMenuShow:!1,menuList:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.caculateMenuList();this.setState({menuList:e})}},{key:"caculateMenuList",value:function(){var e=this.props.node;return"dir"===e.object.type?["New Folder","New File","Copy","Move","Rename","Delete"]:["Rename","Delete","Copy","Move","Open in New Tab"]}},{key:"render",value:function(){var e=this;return this.state.isItemMenuShow?this.props.unregisterHandlers():this.props.registerHandlers(),u.default.createElement(f.Dropdown,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu},u.default.createElement(f.DropdownToggle,{tag:"i",className:"fas fa-ellipsis-v",title:(0,p.gettext)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),u.default.createElement(f.DropdownMenu,null,this.state.menuList.map(function(t,n){return u.default.createElement(f.DropdownItem,{key:n,"data-toggle":t,onClick:e.onMenuItemClick},e.translateMenuItem(t))})))}}]),t}(u.default.Component);m.propTypes=h,t.default=m},167:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2);n(168);var p={onMenuItemClick:d.default.func.isRequired,node:d.default.object,mousePosition:d.default.object,closeRightMenu:d.default.func,registerHandlers:d.default.func,unregisterHandlers:d.default.func},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.calculateMenuDistance=function(){var e=n.props.mousePosition,t=document.querySelector(".right-tree-menu"),a=t.offsetHeight;e.clientY+a>document.body.clientHeight?t.style.top=e.clientY-a+"px":t.style.top=e.clientY+"px",t.style.left=e.clientX+"px",document.addEventListener("click",n.listenClick),document.addEventListener("mousemove",n.handleContextMenu)},n.translateMenuItem=function(e){var t="";switch(e){case"New Folder":t=(0,f.gettext)("New Folder");break;case"New File":t=(0,f.gettext)("New File");break;case"Rename":t=(0,f.gettext)("Rename");break;case"Copy":t=(0,f.gettext)("Copy");break;case"Move":t=(0,f.gettext)("Move");break;case"Delete":t=(0,f.gettext)("Delete");break;case"Open in New Tab":t=(0,f.gettext)("Open in New Tab")}return t},n.handleContextMenu=function(e){var t=n.props.mousePosition,a=document.querySelector(".right-tree-menu"),r=a.offsetHeight,o=a.offsetWidth;t.clientY+r>document.body.clientHeight?e.clientX>=t.clientX&&e.clientX<=t.clientX+o&&e.clientY<=t.clientY&&e.clientY>=t.clientY-r?n.props.unregisterHandlers():n.props.registerHandlers():e.clientX>=t.clientX&&e.clientX<=t.clientX+o&&e.clientY>=t.clientY&&e.clientY<=t.clientY+r?n.props.unregisterHandlers():n.props.registerHandlers()},n.listenClick=function(e){var t=n.props.mousePosition,a=document.querySelector(".right-tree-menu"),r=a.offsetHeight,o=a.offsetWidth;(e.clientX<=t.clientX||e.clientX>=t.clientX+o)&&n.props.closeRightMenu(),t.clientY+r>document.body.clientHeight?(e.clientY<=t.clientY-r||e.clientY>=t.clientY)&&n.props.closeRightMenu():(e.clientY<=t.clientY||e.clientY>=t.clientY+r)&&n.props.closeRightMenu()},n.onMenuItemClick=function(e){var t=e.target.dataset.toggle,a=n.props.node;n.props.onMenuItemClick(t,a),n.props.closeRightMenu()},n.state={isItemMenuShow:!1,menuList:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.caculateMenuList();this.setState({menuList:e})}},{key:"componentDidUpdate",value:function(){this.calculateMenuDistance()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.listenClick),document.removeEventListener("mousemove",this.handleContextMenu)}},{key:"caculateMenuList",value:function(){var e=this.props.node;return e?"dir"===e.object.type?["New Folder","New File","Copy","Move","Rename","Delete"]:["Rename","Delete","Copy","Move","Open in New Tab"]:["New Folder","New File"]}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{className:"right-tree-menu"},this.state.menuList.map(function(t,n){return u.default.createElement("button",{className:"right-tree-item",key:n,"data-toggle":t,onClick:e.onMenuItemClick},e.translateMenuItem(t))}))}}]),t}(u.default.Component);h.propTypes=p,t.default=h},168:function(e,t){},169:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(115),p=a(f),h=n(2),m=n(11),g=a(m),y=n(4),b={children:d.default.object,isFileLoading:d.default.bool.isRequired,markdownContent:d.default.string.isRequired,latestContributor:d.default.string.isRequired,lastModified:d.default.string.isRequired,onLinkClick:d.default.func.isRequired,isWiki:d.default.bool,isTOCShow:d.default.bool},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onContentRendered=function(e){n.titlesInfo=e.titlesInfo},n.onLinkClick=function(e){e.preventDefault(),e.stopPropagation();var t="";if("A"!==e.target.tagName){for(var a=e.target.parentNode;"A"!==a.tagName;)a=a.parentNode;t=a.href}else t=e.target.href;n.props.onLinkClick(t)},n.onScrollHandler=function(){var e=n.markdownContainer.current.scrollTop+180,t=n.titlesInfo.length,a=void 0;if(e<=n.titlesInfo[0])return a=0,void n.setState({activeTitleIndex:a});if(e>n.titlesInfo[t-1])return a=n.titlesInfo.length-1,void n.setState({activeTitleIndex:a});for(var r=0;r<t;r++)if(!(e>n.titlesInfo[r])){a=r-1;break}n.setState({activeTitleIndex:a})},n.changeInlineNode=function(e){if("inline"==e.object){var t=void 0;if("image"==e.type&&h.isPublicWiki){t=e.data.src;if(!new RegExp(h.serviceURL+"/lib/"+h.repoID+"/file.*raw=1").test(t))return;var n=t.indexOf("/file"),a=t.indexOf("?"),r=t.substring(n+5,a);e.data.src=h.serviceURL+"/view-image-via-public-wiki/?slug="+h.slug+"&path="+r}else if("link"==e.type)if(t=e.data.href,y.Utils.isInternalMarkdownLink(t,h.repoID)){var o=y.Utils.getPathFromInternalMarkdownLink(t,h.repoID);e.data.href=h.serviceURL+"/wikis/"+h.slug+o}else if(y.Utils.isInternalDirLink(t,h.repoID)){var i=y.Utils.getPathFromInternalDirLink(t,h.repoID);e.data.href=h.serviceURL+"/wikis/"+h.slug+i}}return e},n.modifyValueBeforeRender=function(e){var t=e.document.nodes,a=y.Utils.changeMarkdownNodes(t,n.changeInlineNode);return e.document.nodes=a,e},n.renderMarkdown=function(){var e=!0;return!1===n.props.isTOCShow&&(e=!1),n.props.isWiki?u.default.createElement(p.default,{showTOC:e,markdownContent:n.props.markdownContent,activeTitleIndex:n.state.activeTitleIndex,onContentRendered:n.onContentRendered,modifyValueBeforeRender:n.modifyValueBeforeRender}):u.default.createElement(p.default,{showTOC:e,markdownContent:n.props.markdownContent,activeTitleIndex:n.state.activeTitleIndex,onContentRendered:n.onContentRendered})},n.state={activeTitleIndex:0},n.markdownContainer=u.default.createRef(),n.links=[],n.titlesInfo=[],n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.links=document.querySelectorAll(".wiki-page-content a"),this.links.forEach(function(t){t.addEventListener("click",e.onLinkClick)})}},{key:"componentWillReceiveProps",value:function(){var e=this;this.links.forEach(function(t){t.removeEventListener("click",e.onLinkClick)})}},{key:"componentDidUpdate",value:function(){var e=this;this.links=document.querySelectorAll(".wiki-page-content a"),this.links.forEach(function(t){t.addEventListener("click",e.onLinkClick)})}},{key:"componentWillUnmount",value:function(){var e=this;this.links.forEach(function(t){t.removeEventListener("click",e.onLinkClick)})}},{key:"render",value:function(){return this.props.isFileLoading?u.default.createElement(g.default,null):u.default.createElement("div",{ref:this.markdownContainer,className:"wiki-page-container",onScroll:this.onScrollHandler.bind(this)},u.default.createElement("div",{className:"wiki-page-content"},this.props.children,this.renderMarkdown(),u.default.createElement("p",{id:"wiki-page-last-modified"},(0,h.gettext)("Last modified by")," ",this.props.latestContributor,", ",u.default.createElement("span",null,this.props.lastModified))))}}]),t}(u.default.Component),w={isWiki:!1};v.propTypes=b,p.default.defaultProps=w,t.default=v},17:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(9),d=n(1),f=a(d),p=n(36),h=a(p),m=n(18),g=a(m),y={deceleration:"cubic-bezier(0.0, 0.0, 0.2, 1)",acceleration:"cubic-bezier(0.4, 0.0, 1, 1)",spring:"cubic-bezier(0.175, 0.885, 0.320, 1.175)"},b=c.css.keyframes("openAnimation",{from:{opacity:0,transform:"translateY(-120%)"},to:{transform:"translateY(0)"}}),v=c.css.keyframes("closeAnimation",{from:{transform:"scale(1)",opacity:1},to:{transform:"scale(0.9)",opacity:0}}),w=(0,c.css)({display:"flex",flexDirection:"column",alignItems:"center",height:0,transition:"all 240ms "+y.deceleration,'&[data-state="entering"], &[data-state="entered"]':{animation:b+" 240ms "+y.spring+" both"},'&[data-state="exiting"]':{animation:v+" 120ms "+y.acceleration+" both"}}),S=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={isShown:!0,height:0},a.close=function(){a.clearCloseTimer(),a.setState({isShown:!1})},a.startCloseTimer=function(){a.props.duration&&(a.closeTimer=setTimeout(function(){a.close()},1e3*a.props.duration))},a.clearCloseTimer=function(){a.closeTimer&&(clearTimeout(a.closeTimer),a.closeTimer=null)},a.handleMouseEnter=function(){a.clearCloseTimer()},a.handleMouseLeave=function(){a.startCloseTimer()},a.onRef=function(e){if(null!==e){var t=e.getBoundingClientRect(),n=t.height;a.setState({height:n})}},i=n,o(a,i)}return i(t,e),l(t,[{key:"componentDidUpdate",value:function(e){e.isShown!==this.props.isShown&&this.setState({isShown:this.props.isShown})}},{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"render",value:function(){var e=this;return u.default.createElement(h.default,{appear:!0,unmountOnExit:!0,timeout:240,in:this.state.isShown,onExited:this.props.onRemove},function(t){return u.default.createElement("div",{"data-state":t,className:w,onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,style:{height:e.state.height,zIndex:e.props.zIndex,marginBottom:e.state.isShown?0:-e.state.height}},u.default.createElement("div",{ref:e.onRef,style:{padding:8}},u.default.createElement(g.default,{intent:e.props.intent,title:e.props.title,children:e.props.children,isRemoveable:e.props.hasCloseButton,onRemove:function(){return e.close()}})))})}}]),t}(u.default.PureComponent);S.propTypes={zIndex:f.default.number,duration:f.default.number,onRemove:f.default.func,intent:f.default.oneOf(["none","success","warning","danger"]).isRequired,title:f.default.node,children:f.default.node,hasCloseButton:f.default.bool,isShown:f.default.bool},S.defaultProps={intent:"none"},t.default=S},170:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(4),m={fileType:d.default.string,parentPath:d.default.string.isRequired,onAddFolder:d.default.func.isRequired,checkDuplicatedName:d.default.func.isRequired,addFolderCancel:d.default.func.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){n.setState({childName:e.target.value})},n.handleSubmit=function(){var e=n.state.childName;if(n.checkDuplicatedName()){var t=(0,p.gettext)('The name "{name}" is already taken. Please choose a different name.');t=t.replace("{name}",h.Utils.HTMLescape(e)),n.setState({errMessage:t})}else{var a=n.state.parentPath+e;n.props.onAddFolder(a)}},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.toggle=function(){n.props.addFolderCancel()},n.checkDuplicatedName=function(){return n.props.checkDuplicatedName(n.state.childName)},n.state={parentPath:"",childName:"",errMessage:""},n.newInput=u.default.createRef(),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.parentPath;"/"===e[e.length-1]?this.setState({parentPath:e}):this.setState({parentPath:e+"/"}),this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("New Folder")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,{for:"folderName"},(0,p.gettext)("Name")),u.default.createElement(f.Input,{id:"folderName",value:this.state.childName,innerRef:function(t){e.newInput=t},onKeyPress:this.handleKeyPress,onChange:this.handleChange}))),this.state.errMessage&&u.default.createElement(f.Alert,{color:"danger",className:"mt-2"},this.state.errMessage)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);g.propTypes=m,t.default=g},171:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p={onCancelDownload:d.default.func.isRequired,progress:d.default.number.isRequired},h=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.toggle=function(){a.props.onCancelDownload()},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle}),u.default.createElement(f.ModalBody,null,u.default.createElement("div",null,this.props.progress+"%")))}}]),t}(u.default.Component);h.propTypes=p,t.default=h},172:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(3),m=n(6),g=a(m),y=n(4),b={repoID:d.default.string.isRequired,currentTag:d.default.object.isRequired,toggleCancel:d.default.func.isRequired,onClose:d.default.func.isRequired,updateUsedRepoTags:d.default.func.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDeleteTaggedFile=function(e){var t=n.props.repoID,a=e.file_tag_id;h.seafileAPI.deleteFileTag(t,a).then(function(e){n.getTaggedFiles(),n.props.updateUsedRepoTags()})},n.getTaggedFiles=function(){var e=n.props,t=e.repoID,a=e.currentTag;h.seafileAPI.listTaggedFiles(t,a.id).then(function(e){var t=[];void 0!==e.data.tagged_files&&e.data.tagged_files.forEach(function(e){var n=e;t.push(n)}),n.setState({taggedFileList:t})})},n.state={taggedFileList:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.getTaggedFiles()}},{key:"render",value:function(){var e=this,t=this.state.taggedFileList;return u.default.createElement(f.Modal,{isOpen:!0},u.default.createElement(f.ModalHeader,{toggle:this.props.onClose},(0,p.gettext)("Tagged Files")),u.default.createElement(f.ModalBody,{className:"dialog-list-container"},u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"45%",className:"ellipsis"},(0,p.gettext)("Name")),u.default.createElement("th",{width:"27%"},(0,p.gettext)("Size")),u.default.createElement("th",{width:"18%"},(0,p.gettext)("Last Update")),u.default.createElement("th",{width:"10%"}))),u.default.createElement("tbody",null,t.map(function(t,n){return u.default.createElement(S,{key:n,repoID:e.props.repoID,taggedFile:t,onDeleteTaggedFile:e.onDeleteTaggedFile})})))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.props.toggleCancel},(0,p.gettext)("Close"))))}}]),t}(u.default.Component);v.propTypes=b,t.default=v;var w={repoID:d.default.string.isRequired,taggedFile:d.default.object,onDeleteTaggedFile:d.default.func.isRequired},S=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.setState({active:!0})},n.onMouseLeave=function(){n.setState({active:!1})},n.state={active:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.taggedFile,t=this.state.active?"action-icon sf2-icon-x3":"action-icon vh sf2-icon-x3",n=e.parent_path?y.Utils.joinPath(e.parent_path,e.filename):"",a=p.siteRoot+"lib/"+this.props.repoID+"/file"+y.Utils.encodePath(n);return e.file_deleted?u.default.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("td",{colSpan:"3",className:"name"},e.filename," ",u.default.createElement("span",{style:{color:"red"}},(0,p.gettext)("deleted"))),u.default.createElement("td",null,u.default.createElement("i",{className:t,onClick:this.props.onDeleteTaggedFile.bind(this,e)}))):u.default.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("td",{className:"name"},u.default.createElement("a",{href:a,target:"_blank"},e.filename)),u.default.createElement("td",null,y.Utils.bytesToSize(e.size)),u.default.createElement("td",null,g.default.unix(e.mtime).fromNow()),u.default.createElement("td",null,u.default.createElement("i",{className:t,onClick:this.props.onDeleteTaggedFile.bind(this,e)})))}}]),t}(u.default.Component);S.propTypes=w},18:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(9),d=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.containerStyle=(0,c.css)({borderRadius:"3px",backgroundColor:"#fff",padding:"10px 16px",display:"flex",boxSizing:"border-box",boxShadow:"rgba(67, 90, 111, 0.3) 0px 0px 1px, rgba(67, 90, 111, 0.47) 0px 8px 10px -4px",justifyContent:"space-between",flexDirection:"row"}),n.containerBorderSuccess=(0,c.css)({borderLeft:"3px solid rgb(71, 184, 129)"}),n.containerBorderWarn=(0,c.css)({borderLeft:"3px solid rgb(217, 130, 43)"}),n.containerBorderDanger=(0,c.css)({borderLeft:"3px solid rgb(236, 76, 71)"}),n.containerBorderNotify=(0,c.css)({borderLeft:"3px solid rgb(16, 112, 202)"}),n.toastTextTitle=(0,c.css)({fontWeight:"600",fontSize:"14px",color:"#435a6f",margin:"0"}),n.toastTextChild=(0,c.css)({fontSize:"14px",color:"#999",margin:"0"}),n.toastClose=(0,c.css)({marginLeft:"15px",height:"24px",width:"24px",lineHeight:"22px",fontWeight:"700",textAlign:"center",fontSize:"20px",color:"#000",cursor:"pointer",opacity:"0.5",":hover":{opacity:1}}),n.toastIcon=(0,c.css)({marginRight:"10px",width:"14px",height:"20px",lineHeight:"20px"}),n}return o(t,e),l(t,[{key:"getContainerStyle",value:function(e){switch(e){case"success":return{borderStyle:this.containerBorderSuccess,iconColor:(0,c.css)({color:"rgb(71, 184, 129)"}),iconClass:"fa fa-check-circle"};case"warning":return{borderStyle:this.containerBorderWarn,iconColor:(0,c.css)({color:"rgb(217, 130, 43)"}),iconClass:"fa fa-exclamation-triangle"};case"none":return{borderStyle:this.containerBorderNotify,iconColor:(0,c.css)({color:"rgb(16, 112, 202)"}),iconClass:"fa fa-exclamation-circle"};case"danger":return{borderStyle:this.containerBorderDanger,iconColor:(0,c.css)({color:"rgb(236, 76, 71)"}),iconClass:"fa fa-exclamation-circle"}}}},{key:"render",value:function(){var e=this.getContainerStyle(this.props.intent);return u.default.createElement("div",(0,c.css)(e.borderStyle,this.containerStyle),u.default.createElement("div",{className:this.toastIcon},u.default.createElement("i",i({className:e.iconClass},e.iconColor))),u.default.createElement("div",{className:this.toastTextContainer},u.default.createElement("p",{className:this.toastTextTitle},this.props.title),this.props.children?u.default.createElement("p",{className:this.toastTextChild},this.props.children):null),u.default.createElement("div",{onClick:this.props.onRemove,className:this.toastClose},u.default.createElement("span",null,"\xd7")))}}]),t}(u.default.PureComponent);t.default=d},19:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(4),p=n(32),h=a(p),m={isTextMode:d.default.bool.isRequired,isEditIconShow:d.default.bool.isRequired,permissions:d.default.array.isRequired,currentPermission:d.default.string.isRequired,onPermissionChanged:d.default.func.isRequired},g=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.translatePermission=function(e){return f.Utils.sharePerms(e)},a.translateExplanation=function(e){return f.Utils.sharePermsExplanation(e)},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(h.default,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.permissions,currentOption:this.props.currentPermission,onOptionChanged:this.props.onPermissionChanged,translateOption:this.translatePermission,translateExplanation:this.translateExplanation})}}]),t}(u.default.Component);g.propTypes=m,t.default=g},2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.dirPath="/",t.gettext=window.gettext,t.siteRoot=window.app.config.siteRoot,t.loginUrl=window.app.config.loginUrl,t.avatarInfo=window.app.config.avatarInfo,t.logoPath=window.app.config.logoPath,t.mediaUrl=window.app.config.mediaUrl,t.siteTitle=window.app.config.siteTitle,t.siteName=window.app.config.siteName,t.logoWidth=window.app.config.logoWidth,t.logoHeight=window.app.config.logoHeight,t.isPro="True"===window.app.config.isPro,t.isDocs="True"===window.app.config.isDocs,t.lang=window.app.config.lang,t.fileServerRoot=window.app.config.fileServerRoot,t.seafileVersion=window.app.config.seafileVersion,t.serviceURL=window.app.config.serviceURL,t.seafileCollabServer=window.app.pageOptions.seafileCollabServer,t.name=window.app.pageOptions.name,t.contactEmail=window.app.pageOptions.contactEmail,t.username=window.app.pageOptions.username,t.canAddRepo=window.app.pageOptions.canAddRepo,t.canGenerateShareLink=window.app.pageOptions.canGenerateShareLink,t.canGenerateUploadLink=!!window.app.pageOptions.canGenerateUploadLink,t.canViewOrg="True"===window.app.pageOptions.canViewOrg,t.fileAuditEnabled=!!window.app.pageOptions.fileAuditEnabled,t.enableFileComment=!!window.app.pageOptions.enableFileComment,t.folderPermEnabled="True"===window.app.pageOptions.folderPermEnabled,t.enableResetEncryptedRepoPassword="True"===window.app.pageOptions.enableResetEncryptedRepoPassword,t.isEmailConfigured="True"===window.app.pageOptions.isEmailConfigured,t.enableUploadFolder="True"===window.app.pageOptions.enableUploadFolder,t.enableResumableFileUpload="True"===window.app.pageOptions.enableResumableFileUpload,t.storages=window.app.pageOptions.storages,t.enableRepoSnapshotLabel=window.app.pageOptions.enableRepoSnapshotLabel,t.shareLinkExpireDaysMin=window.app.pageOptions.shareLinkExpireDaysMin,t.shareLinkExpireDaysMax=window.app.pageOptions.shareLinkExpireDaysMax,t.maxFileName=window.app.pageOptions.maxFileName,t.enableWiki=window.app.pageOptions.enableWiki,t.enableEncryptedLibrary="1"===window.app.pageOptions.enableEncryptedLibrary,t.enableRepoHistorySetting="1"===window.app.pageOptions.enableRepoHistorySetting,t.isSystemStaff=window.app.pageOptions.isSystemStaff,t.thumbnailSizeForOriginal=window.app.pageOptions.thumbnailSizeForOriginal,t.repoPasswordMinLength=window.app.pageOptions.repoPasswordMinLength,t.curNoteMsg=window.app.pageOptions.curNoteMsg,t.curNoteID=window.app.pageOptions.curNoteID,t.slug=window.wiki?window.wiki.config.slug:"",t.repoID=window.wiki?window.wiki.config.repoId:"",t.initialPath=window.wiki?window.wiki.config.initial_path:"",t.permission=window.wiki?"True"===window.wiki.config.permission:"",t.isDir=window.wiki?window.wiki.config.isDir:"",t.serviceUrl=window.wiki?window.wiki.config.serviceUrl:"",t.isPublicWiki=window.wiki?"True"===window.wiki.config.isPublicWiki:"",t.PER_PAGE=25,t.historyRepoID=window.fileHistory?window.fileHistory.pageOptions.repoID:"",t.repoName=window.fileHistory?window.fileHistory.pageOptions.repoName:"",t.filePath=window.fileHistory?window.fileHistory.pageOptions.filePath:"",t.fileName=window.fileHistory?window.fileHistory.pageOptions.fileName:"",t.draftFilePath=window.draft?window.draft.config.draftFilePath:"",t.draftOriginFilePath=window.draft?window.draft.config.draftOriginFilePath:"",t.draftFileName=window.draft?window.draft.config.draftFileName:"",t.draftID=window.draft?window.draft.config.draftID:"",t.draftRepoID=window.draft?window.draft.config.draftRepoID:"",t.author=window.draft?window.draft.config.author:"",t.authorAvatar=window.draft?window.draft.config.authorAvatar:"",t.originFileExists=window.draft?window.draft.config.originFileExists:"",t.draftFileExists=window.draft?window.draft.config.draftFileExists:"",t.draftStatus=window.draft?window.draft.config.draftStatus:"",t.draftPublishVersion=window.draft?window.draft.config.draftPublishVersion:"",t.originFileVersion=window.draft?window.draft.config.originFileVersion:"",t.orgID=window.org?window.org.pageOptions.orgID:"",t.invitationLink=window.org?window.org.pageOptions.invitationLink:"",t.orgMemberQuotaEnabled=window.org?window.org.pageOptions.orgMemberQuotaEnabled:"",t.constanceEnabled=window.sysadmin?window.sysadmin.pageOptions.constance_enabled:"",t.multiTenancy=window.sysadmin?window.sysadmin.pageOptions.multi_tenancy:"",t.multiInstitution=window.sysadmin?window.sysadmin.pageOptions.multi_institution:"",t.sysadminExtraEnabled=window.sysadmin?window.sysadmin.pageOptions.sysadmin_extra_enabled:"",t.enableGuestInvitation=window.sysadmin?window.sysadmin.pageOptions.enable_guest_invitation:"",t.enableTermsAndConditions=window.sysadmin?window.sysadmin.pageOptions.enable_terms_and_conditions:"",t.isDefaultAdmin=window.sysadmin?window.sysadmin.pageOptions.is_default_admin:"",t.enableFileScan=window.sysadmin?window.sysadmin.pageOptions.enable_file_scan:"",t.canViewSystemInfo=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_system_info:"",t.canViewStatistic=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_statistic:"",t.canConfigSystem=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_config_system:"",t.canManageLibrary=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_library:"",t.canManageUser=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_user:"",t.canManageGroup=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_group:"",t.canViewUserLog=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_user_log:"",t.canViewAdminLog=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_admin_log:""},207:function(e,t){},21:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(2),i=n(3),l=function(){function e(){a(this,e)}return r(e,[{key:"getFiles",value:function(){return i.seafileAPI.listWikiDir(o.slug,"/").then(function(e){return e.data.dir_file_list.map(function(e){return{name:e.name,type:"dir"===e.type?"dir":"file",isExpanded:"dir"===e.type,parent_path:e.parent_dir,last_update_time:e.last_update_time,permission:e.permission,size:e.size}})})}},{key:"listRepoDir",value:function(){return i.seafileAPI.listDir(o.repoID,"/",{recursive:!0}).then(function(e){return e.data.dirent_list.map(function(e){return{name:e.name,type:"dir"===e.type?"dir":"file",isExpanded:"dir"===e.type,parent_path:e.parent_dir,last_update_time:e.mtime,permission:e.permission,size:e.size}})})}},{key:"createFile",value:function(e,t){return i.seafileAPI.createFile(o.repoID,e,t)}},{key:"deleteFile",value:function(e){return i.seafileAPI.deleteFile(o.repoID,e)}},{key:"renameFile",value:function(e,t){return i.seafileAPI.renameFile(o.repoID,e,t)}},{key:"createDir",value:function(e){return i.seafileAPI.createDir(o.repoID,e)}},{key:"deleteDir",value:function(e){return i.seafileAPI.deleteDir(o.repoID,e)}},{key:"renameDir",value:function(e,t){return i.seafileAPI.renameDir(o.repoID,e,t)}},{key:"getWikiFileContent",value:function(e,t){return i.seafileAPI.getWikiFileContent(e,t)}},{key:"getSource",value:function(){return i.seafileAPI.getSource()}},{key:"searchFiles",value:function(e,t){return i.seafileAPI.searchFiles(e,t)}},{key:"getAccountInfo",value:function(){return i.seafileAPI.getAccountInfo()}},{key:"getFileDownloadLink",value:function(e){return i.seafileAPI.getFileDownloadLink(o.historyRepoID,e)}},{key:"getFileContent",value:function(e){return i.seafileAPI.getFileContent(e)}},{key:"listFileHistoryRecords",value:function(e,t,n){return i.seafileAPI.listFileHistoryRecords(o.historyRepoID,e,t,n)}},{key:"revertFile",value:function(e,t){return i.seafileAPI.revertFile(o.historyRepoID,e,t)}},{key:"listDrafts",value:function(){return i.seafileAPI.listDrafts()}},{key:"deleteDraft",value:function(e){return i.seafileAPI.deleteDraft(e)}},{key:"publishDraft",value:function(e){return i.seafileAPI.publishDraft(e)}},{key:"zipDownload",value:function(e,t){return i.seafileAPI.zipDownload(o.repoID,e,t)}},{key:"queryZipProgress",value:function(e){return i.seafileAPI.queryZipProgress(e)}},{key:"cancelZipTask",value:function(e){return i.seafileAPI.cancelZipTask(e)}}]),e}(),s=new l;t.default=s},23:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=n(0),c=a(u),d=n(1),f=a(d),p=n(76),h=a(p),m=n(3),g=n(2),y={placeholder:f.default.string.isRequired,onSelectChange:f.default.func.isRequired,isMulti:f.default.bool.isRequired,className:f.default.string},b=function(e){return c.default.createElement("div",s({},e.innerProps,{style:{margin:"6px 10px",textAlign:"center",color:"hsl(0,0%,50%)"}}),(0,g.gettext)("User not found"))},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectChange=function(e){n.options=[],n.props.onSelectChange(e)},n.loadOptions=function(e,t){var a=e.trim();a.length>0&&m.seafileAPI.searchUsers(a).then(function(e){n.options=[];for(var a=0;a<e.data.users.length;a++){var r=e.data.users[a],o={};o.value=r.name,o.email=r.email,o.label=c.default.createElement(c.default.Fragment,null,c.default.createElement("img",{src:r.avatar_url,className:"select-module select-module-icon avatar",alt:""}),c.default.createElement("span",{className:"select-module select-module-name"},r.name)),n.options.push(o)}t(n.options)})},n.clearSelect=function(){n.refs.userSelect.select.onChange([],{action:"clear"})},n.options=[],n}return i(t,e),l(t,[{key:"render",value:function(){return c.default.createElement(h.default,{isClearable:!0,classNamePrefix:!0,components:{NoOptionsMessage:b},isMulti:this.props.isMulti,loadOptions:this.loadOptions,onChange:this.handleSelectChange,placeholder:this.props.placeholder,className:"user-select "+this.props.className,ref:"userSelect"})}}]),t}(c.default.Component);v.propTypes=y,t.default=v},24:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){a(this,e),this.id=t.file_tag_id,this.repo_tag_id=t.repo_tag_id,this.name=t.tag_name,this.color=t.tag_color};t.default=r},25:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(49),m=a(h),g=n(50),y=a(g),b=n(51),v=a(b),w=n(52),S=a(w);n(53);var C={isGroupOwnedRepo:d.default.bool,itemType:d.default.string.isRequired,itemName:d.default.string.isRequired,itemPath:d.default.string.isRequired,toggleDialog:d.default.func.isRequired,repoID:d.default.string.isRequired,repoEncrypted:d.default.bool,userPerm:d.default.string,enableDirPrivateShare:d.default.bool},E=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getInitialActiveTab=function(){var e=n.props,t=e.repoEncrypted,a=e.userPerm,r=e.enableDirPrivateShare,o=!t&&p.canGenerateShareLink,i=!t&&p.canGenerateUploadLink&&"rw"==a;return o?"shareLink":i?"uploadLink":r?"shareToUser":void 0},n.toggle=function(e){n.state.activeTab!==e&&n.setState({activeTab:e})},n.renderDirContent=function(){var e=n.state.activeTab,t=n.props,a=t.repoEncrypted,r=t.userPerm,o=t.enableDirPrivateShare,i=!a&&p.canGenerateShareLink,l=!a&&p.canGenerateUploadLink&&"rw"==r;return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"share-dialog-side"},u.default.createElement(f.Nav,{pills:!0,vertical:!0},i&&u.default.createElement(f.NavItem,null,u.default.createElement(f.NavLink,{className:"shareLink"===e?"active":"",onClick:n.toggle.bind(n,"shareLink")},(0,p.gettext)("Share Link"))),l&&u.default.createElement(f.NavItem,null,u.default.createElement(f.NavLink,{className:"uploadLink"===e?"active":"",onClick:n.toggle.bind(n,"uploadLink")},(0,p.gettext)("Upload Link"))),o&&u.default.createElement(s.Fragment,null,u.default.createElement(f.NavItem,null,u.default.createElement(f.NavLink,{className:"shareToUser"===e?"active":"",onClick:n.toggle.bind(n,"shareToUser")},(0,p.gettext)("Share to user"))),u.default.createElement(f.NavItem,null,u.default.createElement(f.NavLink,{className:"shareToGroup"===e?"active":"",onClick:n.toggle.bind(n,"shareToGroup")},(0,p.gettext)("Share to group")))))),u.default.createElement("div",{className:"share-dialog-main"},u.default.createElement(f.TabContent,{activeTab:n.state.activeTab},i&&u.default.createElement(f.TabPane,{tabId:"shareLink"},u.default.createElement(v.default,{itemPath:n.props.itemPath,repoID:n.props.repoID,closeShareDialog:n.props.toggleDialog})),l&&u.default.createElement(f.TabPane,{tabId:"uploadLink"},u.default.createElement(S.default,{itemPath:n.props.itemPath,repoID:n.props.repoID,closeShareDialog:n.props.toggleDialog})),o&&u.default.createElement(s.Fragment,null,u.default.createElement(f.TabPane,{tabId:"shareToUser"},u.default.createElement(m.default,{itemType:n.props.itemType,isGroupOwnedRepo:n.props.isGroupOwnedRepo,itemPath:n.props.itemPath,repoID:n.props.repoID})),u.default.createElement(f.TabPane,{tabId:"shareToGroup"},u.default.createElement(y.default,{itemType:n.props.itemType,isGroupOwnedRepo:n.props.isGroupOwnedRepo,itemPath:n.props.itemPath,repoID:n.props.repoID}))))))},n.renderFileContent=function(){return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"share-dialog-side"},u.default.createElement(f.Nav,{pills:!0,vertical:!0},u.default.createElement(f.NavItem,null,u.default.createElement(f.NavLink,{className:"active",onClick:function(){n.toggle.bind(n,"shareLink")}},(0,p.gettext)("Share Link"))))),u.default.createElement("div",{className:"share-dialog-main"},u.default.createElement(f.TabContent,{activeTab:n.state.activeTab},u.default.createElement(f.TabPane,{tabId:"shareLink"},u.default.createElement(v.default,{itemPath:n.props.itemPath,repoID:n.props.repoID,closeShareDialog:n.props.toggleDialog})))))},n.state={activeTab:n.getInitialActiveTab()},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.itemType,n=e.itemName,a=e.repoEncrypted,r=!a&&p.canGenerateShareLink;return u.default.createElement("div",null,u.default.createElement(f.Modal,{isOpen:!0,style:{maxWidth:"720px"},className:"share-dialog",toggle:this.props.toggleDialog},u.default.createElement(f.ModalHeader,{toggle:this.props.toggleDialog},(0,p.gettext)("Share")," ",u.default.createElement("span",{className:"op-target",title:n},n)),u.default.createElement(f.ModalBody,{className:"dialog-list-container share-dialog-content"},("library"===t||"dir"===t)&&this.renderDirContent(),"file"===t&&r&&this.renderFileContent())))}}]),t}(u.default.Component);E.propTypes=C,t.default=E},258:function(e,t){},27:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(8),p=a(f),h=n(4),m=n(21),g=a(m),y=n(2),b={isAdminPanel:d.default.bool},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getContainer=function(){return p.default.findDOMNode(n)},n.handleProps=function(){n.state.showInfo?n.addEvents():n.removeEvents()},n.addEvents=function(){["click","touchstart","keyup"].forEach(function(e){return document.addEventListener(e,n.handleDocumentClick,!0)})},n.removeEvents=function(){["click","touchstart","keyup"].forEach(function(e){return document.removeEventListener(e,n.handleDocumentClick,!0)})},n.handleDocumentClick=function(e){if(!e||3!==e.which&&("keyup"!==e.type||e.which===h.Utils.keyCodes.tab)){var t=n.getContainer();(!t.contains(e.target)||t===e.target||"keyup"===e.type&&e.which!==h.Utils.keyCodes.tab)&&n.setState({showInfo:!n.state.showInfo})}},n.onClickAccount=function(){n.setState({showInfo:!n.state.showInfo})},n.getAccountInfo=function(){g.default.getAccountInfo().then(function(e){n.setState({userName:e.data.name,contactEmail:e.data.email,usageRate:e.data.space_usage,quotaUsage:h.Utils.bytesToSize(e.data.usage),quotaTotal:h.Utils.bytesToSize(e.data.total),isStaff:e.data.is_staff,isOrgStaff:1===e.data.is_org_staff,avatarURL:e.data.avatar_url})})},n.renderMenu=function(){return(n.state.isStaff||n.state.isOrgStaff)&&n.props.isAdminPanel?u.default.createElement("a",{href:y.siteRoot,title:(0,y.gettext)("Exit Admin Panel"),className:"item"},(0,y.gettext)("Exit Admin Panel")):n.state.isStaff?u.default.createElement("a",{href:y.siteRoot+"sys/useradmin/",title:(0,y.gettext)("System Admin"),className:"item"},(0,y.gettext)("System Admin")):n.state.isOrgStaff?u.default.createElement("a",{href:y.siteRoot+"org/useradmin/",title:(0,y.gettext)("Organization Admin"),className:"item"},(0,y.gettext)("Organization Admin")):void 0},n.renderAvatar=function(){return n.state.avatarURL?u.default.createElement("img",{src:n.state.avatarURL,width:"36",height:"36",className:"avatar",alt:(0,y.gettext)("Avatar")}):u.default.createElement("img",{src:"",width:"36",height:"36",className:"avatar",alt:(0,y.gettext)("Avatar")})},n.state={showInfo:!1,userName:"",contactEmail:"",quotaUsage:"",quotaTotal:"",isStaff:!1,isOrgStaff:!1,usageRate:"",avatarURL:""},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.getAccountInfo()}},{key:"componentDidUpdate",value:function(e){this.handleProps()}},{key:"render",value:function(){return u.default.createElement("div",{id:"account"},u.default.createElement("a",{id:"my-info",onClick:this.onClickAccount,className:"account-toggle no-deco d-none d-md-block","aria-label":"View profile and more"},u.default.createElement("span",null,u.default.createElement("img",{src:this.state.avatarURL,width:"36",height:"36",className:"avatar",alt:(0,y.gettext)("Avatar")})),u.default.createElement("span",{className:"fas fa-caret-down vam"})),u.default.createElement("span",{className:"account-toggle sf2-icon-more mobile-icon d-md-none","aria-label":"View profile and more",onClick:this.onClickAccount}),u.default.createElement("div",{id:"user-info-popup",className:"account-popup sf-popover "+(this.state.showInfo?"":"hide")},u.default.createElement("div",{className:"outer-caret up-outer-caret"},u.default.createElement("div",{className:"inner-caret"})),u.default.createElement("div",{className:"sf-popover-con"},u.default.createElement("div",{className:"item o-hidden"},this.renderAvatar(),u.default.createElement("div",{className:"txt"},this.state.userName)),u.default.createElement("div",{id:"space-traffic"},u.default.createElement("div",{className:"item"},u.default.createElement("p",null,(0,y.gettext)("Used:")," ",this.state.quotaUsage," / ",this.state.quotaTotal),u.default.createElement("div",{id:"quota-bar"},u.default.createElement("span",{id:"quota-usage",className:"usage",style:{width:this.state.usageRate}})))),u.default.createElement("a",{href:y.siteRoot+"profile/",className:"item"},(0,y.gettext)("Settings")),this.renderMenu(),u.default.createElement("a",{href:y.siteRoot+"accounts/logout/",className:"item"},(0,y.gettext)("Log out")))))}}]),t}(s.Component);v.defaultProps={isAdminPanel:!1},v.propTypes=b,t.default=v},276:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(253),i=function(e){return e&&e.__esModule?e:{default:e}}(o),l=n(2),s=""!==l.seafileCollabServer?(0,i.default)(l.seafileCollabServer):void 0,u=function(){function e(){a(this,e)}return r(e,[{key:"watchRepo",value:function(e,t){s&&(s.emit("repo_update",{request:"watch_update",repo_id:e,user:{name:l.name,username:l.username,contact_email:l.contactEmail}}),s.on("repo_update",t))}},{key:"unwatchRepo",value:function(e,t){s&&(s.emit("repo_update",{request:"unwatch_update",repo_id:e,user:{name:l.name,username:l.username,contact_email:l.contactEmail}}),s.off("repo_update",t))}}]),e}(),c=new u;t.default=c},277:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(5),h={currentNode:d.default.object.isRequired,toggleCancel:d.default.func.isRequired,handleSubmit:d.default.func.isRequired},m=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.toggle=function(){a.props.toggleCancel()},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.currentNode,t=e.object.name,n=(0,f.gettext)("Delete File");return e.object.isDir()&&(n=(0,f.gettext)("Delete Folder")),u.default.createElement(p.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(p.ModalHeader,{toggle:this.toggle},n),u.default.createElement(p.ModalBody,null,u.default.createElement("p",null,(0,f.gettext)("Are you sure to delete")," ",u.default.createElement("b",null,t)," ?")),u.default.createElement(p.ModalFooter,null,u.default.createElement(p.Button,{color:"secondary",onClick:this.toggle},(0,f.gettext)("Cancel")),u.default.createElement(p.Button,{color:"primary",onClick:this.props.handleSubmit},(0,f.gettext)("Delete"))))}}]),t}(u.default.Component);m.propTypes=h,t.default=m},278:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(4),h=n(5),m={currentNode:d.default.object,onRename:d.default.func.isRequired,toggleCancel:d.default.func.isRequired,checkDuplicatedName:d.default.func.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){n.setState({newName:e.target.value})},n.handleSubmit=function(){var e=n.validateInput(),t=e.isValid,a=e.errMessage;if(t){if(n.checkDuplicatedName()){var r=(0,f.gettext)('The name "{name}" is already taken. Please choose a different name.');r=r.replace("{name}",p.Utils.HTMLescape(n.state.newName)),n.setState({errMessage:r})}else n.props.onRename(n.state.newName)}else n.setState({errMessage:a})},n.handleKeyPress=function(e){"Enter"===e.key&&n.handleSubmit()},n.toggle=function(){n.props.toggleCancel()},n.changeState=function(e){var t=e.object.name;n.setState({newName:t})},n.validateInput=function(){var e=n.state.newName.trim(),t=!0,a="";return e?e.indexOf("/")>-1?(t=!1,a=(0,f.gettext)("Name should not include '/'."),{isValid:t,errMessage:a}):{isValid:t,errMessage:a}:(t=!1,a=(0,f.gettext)("Name is required."),{isValid:t,errMessage:a})},n.checkDuplicatedName=function(){return n.props.checkDuplicatedName(n.state.newName)},n.state={newName:"",errMessage:""},n.newInput=u.default.createRef(),n}return i(t,e),l(t,[{key:"componentWillMount",value:function(){this.setState({newName:this.props.currentNode.object.name})}},{key:"componentDidMount",value:function(){var e=this.props.currentNode;if(this.changeState(e),this.newInput.focus(),"file"===e.object.type){var t=e.object.name.lastIndexOf(".md");this.newInput.setSelectionRange(0,t,"forward")}else this.newInput.setSelectionRange(0,-1)}},{key:"componentWillReceiveProps",value:function(e){this.changeState(e.currentNode)}},{key:"render",value:function(){var e=this,t=this.props.currentNode.object.type;return u.default.createElement(h.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(h.ModalHeader,{toggle:this.toggle},"file"===t?(0,f.gettext)("Rename File"):(0,f.gettext)("Rename Folder")),u.default.createElement(h.ModalBody,null,u.default.createElement("p",null,"file"===t?(0,f.gettext)("New file name"):(0,f.gettext)("New folder name")),u.default.createElement(h.Input,{onKeyPress:this.handleKeyPress,innerRef:function(t){e.newInput=t},placeholder:"newName",value:this.state.newName,onChange:this.handleChange}),this.state.errMessage&&u.default.createElement(h.Alert,{color:"danger",className:"mt-2"},this.state.errMessage)),u.default.createElement(h.ModalFooter,null,u.default.createElement(h.Button,{color:"secondary",onClick:this.toggle},(0,f.gettext)("Cancel")),u.default.createElement(h.Button,{color:"primary",onClick:this.handleSubmit},(0,f.gettext)("Submit"))))}}]),t}(u.default.Component);g.propTypes=m,t.default=g},279:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p={currentMode:d.default.string.isRequired,switchViewMode:d.default.func.isRequired},h=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.switchViewMode=function(e){e.preventDefault();var t=e.target.id;t!==a.props.currentMode&&a.props.switchViewMode(t)},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e="btn btn-secondary btn-icon sf-view-mode-btn ";return u.default.createElement("div",{className:"view-mode btn-group"},u.default.createElement("button",{className:e+" sf2-icon-list-view "+("list"===this.props.currentMode?"current-mode":""),id:"list",title:(0,f.gettext)("List"),onClick:this.switchViewMode}),u.default.createElement("button",{className:e+" sf2-icon-two-columns "+("column"===this.props.currentMode?"current-mode":""),id:"column",title:(0,f.gettext)("Column"),onClick:this.switchViewMode}))}}]),t}(u.default.Component);h.propTypes=p,t.default=h},280:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(4),p=n(2),h=n(10),m=a(h),g=n(170),y=a(g),b=n(123),v=a(b),w=n(25),S=a(w),C={path:d.default.string.isRequired,repoID:d.default.string.isRequired,repoName:d.default.string.isRequired,repoEncrypted:d.default.bool.isRequired,enableDirPrivateShare:d.default.bool.isRequired,userPerm:d.default.string.isRequired,isGroupOwnedRepo:d.default.bool.isRequired,showShareBtn:d.default.bool.isRequired,onAddFile:d.default.func.isRequired,onAddFolder:d.default.func.isRequired,onUploadFile:d.default.func.isRequired,onUploadFolder:d.default.func.isRequired,direntList:d.default.array.isRequired},E=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hideOperationMenu=function(){n.setState({isUploadMenuShow:!1,isCreateMenuShow:!1})},n.toggleOperationMenu=function(e){e.nativeEvent.stopImmediatePropagation();var t=e.target.getClientRects()[0],a=t.x,r=t.y+t.height,o={position:"fixed",display:"block",left:a,top:r};n.setState({operationMenuStyle:o})},n.onUploadClick=function(e){n.toggleOperationMenu(e),n.setState({isUploadMenuShow:!0,isCreateMenuShow:!1})},n.onUploadFile=function(e){n.setState({isUploadMenuShow:!1}),n.props.onUploadFile(e)},n.onUploadFolder=function(e){n.setState({isUploadMenuShow:!1}),n.props.onUploadFolder(e)},n.onCreateClick=function(e){n.toggleOperationMenu(e),n.setState({isCreateMenuShow:!0,isUploadMenuShow:!1})},n.onShareClick=function(e){e.nativeEvent.stopImmediatePropagation(),n.setState({isShareDialogShow:!n.state.isShareDialogShow})},n.onCreateFolderToggle=function(){n.setState({isCreateFolderDialogShow:!n.state.isCreateFolderDialogShow})},n.onCreateFileToggle=function(){n.setState({isCreateFileDialogShow:!n.state.isCreateFileDialogShow,fileType:""})},n.onCreateMarkdownToggle=function(){n.setState({isCreateFileDialogShow:!n.state.isCreateFileDialogShow,fileType:".md"})},n.onCreateExcelToggle=function(){n.setState({isCreateFileDialogShow:!n.state.isCreateFileDialogShow,fileType:".xlsx"})},n.onCreatePPTToggle=function(){n.setState({isCreateFileDialogShow:!n.state.isCreateFileDialogShow,fileType:".pptx"})},n.onCreateWordToggle=function(){n.setState({isCreateFileDialogShow:!n.state.isCreateFileDialogShow,fileType:".docx"})},n.onAddFile=function(e,t){n.setState({isCreateFileDialogShow:!1}),n.props.onAddFile(e,t)},n.onAddFolder=function(e){n.setState({isCreateFolderDialogShow:!1}),n.props.onAddFolder(e)},n.checkDuplicatedName=function(e){return n.props.direntList.some(function(t){return t.name===e})},n.state={fileType:".md",isCreateFileDialogShow:!1,isCreateFolderDialogShow:!1,isUploadMenuShow:!1,isCreateMenuShow:!1,isShareDialogShow:!1,operationMenuStyle:""},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.hideOperationMenu)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hideOperationMenu)}},{key:"render",value:function(){var e=this.props,t=e.path,n=e.repoName,a=e.userPerm;if("rw"!==a&&"admin"!==a)return"";var r="/"===t?"library":"dir",o="/"==t?n:f.Utils.getFolderName(t);return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"operation"},f.Utils.isSupportUploadFolder()?u.default.createElement("button",{className:"btn btn-secondary operation-item",title:(0,p.gettext)("Upload"),onClick:this.onUploadClick},(0,p.gettext)("Upload")):u.default.createElement("button",{className:"btn btn-secondary operation-item",title:(0,p.gettext)("Upload"),onClick:this.uploadFile},(0,p.gettext)("Upload")),u.default.createElement("button",{className:"btn btn-secondary operation-item",title:(0,p.gettext)("New"),onClick:this.onCreateClick},(0,p.gettext)("New")),this.props.showShareBtn&&u.default.createElement("button",{className:"btn btn-secondary operation-item",title:(0,p.gettext)("Share"),onClick:this.onShareClick},(0,p.gettext)("Share"))),this.state.isUploadMenuShow&&u.default.createElement("ul",{className:"menu dropdown-menu",style:this.state.operationMenuStyle},u.default.createElement("li",{className:"dropdown-item",onClick:this.onUploadFile},(0,p.gettext)("Upload Files")),u.default.createElement("li",{className:"dropdown-item",onClick:this.onUploadFolder},(0,p.gettext)("Upload Folder"))),this.state.isCreateMenuShow&&u.default.createElement("ul",{className:"menu dropdown-menu",style:this.state.operationMenuStyle},u.default.createElement("li",{className:"dropdown-item",onClick:this.onCreateFolderToggle},(0,p.gettext)("New Folder")),u.default.createElement("li",{className:"dropdown-item",onClick:this.onCreateFileToggle},(0,p.gettext)("New File")),u.default.createElement("li",{className:"dropdown-divider"}),u.default.createElement("li",{className:"dropdown-item",onClick:this.onCreateMarkdownToggle},(0,p.gettext)("New Markdown File")),u.default.createElement("li",{className:"dropdown-item",onClick:this.onCreateExcelToggle},(0,p.gettext)("New Excel File")),u.default.createElement("li",{className:"dropdown-item",onClick:this.onCreatePPTToggle},(0,p.gettext)("New PowerPoint File")),u.default.createElement("li",{className:"dropdown-item",onClick:this.onCreateWordToggle},(0,p.gettext)("New Word File"))),this.state.isCreateFileDialogShow&&u.default.createElement(m.default,null,u.default.createElement(v.default,{parentPath:this.props.path,fileType:this.state.fileType,onAddFile:this.onAddFile,checkDuplicatedName:this.checkDuplicatedName,addFileCancel:this.onCreateFileToggle})),this.state.isCreateFolderDialogShow&&u.default.createElement(m.default,null,u.default.createElement(y.default,{parentPath:this.props.path,onAddFolder:this.onAddFolder,checkDuplicatedName:this.checkDuplicatedName,addFolderCancel:this.onCreateFolderToggle})),this.state.isShareDialogShow&&u.default.createElement(m.default,null,u.default.createElement(S.default,{itemType:r,itemName:o,itemPath:this.props.path,repoID:this.props.repoID,repoEncrypted:this.props.repoEncrypted,enableDirPrivateShare:this.props.enableDirPrivateShare,userPerm:this.props.userPerm,isGroupOwnedRepo:this.props.isGroupOwnedRepo,toggleDialog:this.onShareClick})))}}]),t}(u.default.Component);E.propTypes=C,t.default=E},281:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(4),m=n(3),g=n(124),y=a(g),b=n(171),v=a(b),w=n(141),S=a(w),C=n(142),E=a(C),_=n(282),D=a(_),P=n(25),L=a(P),R=n(107),M=a(R),T=n(106),k=a(T),N=n(7),Y=(a(N),n(10)),I=a(Y),O={path:d.default.string.isRequired,repoID:d.default.string.isRequired,repoEncrypted:d.default.bool.isRequired,selectedDirentList:d.default.array.isRequired,onItemsMove:d.default.func.isRequired,onItemsCopy:d.default.func.isRequired,onItemsDelete:d.default.func.isRequired,isRepoOwner:d.default.bool.isRequired,enableDirPrivateShare:d.default.bool.isRequired,currentRepoInfo:d.default.object.isRequired,onFilesTagChanged:d.default.func.isRequired,unSelectDirent:d.default.func.isRequired,updateDirent:d.default.func.isRequired,showDirentDetail:d.default.func.isRequired},Z=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMoveToggle=function(){n.setState({isMoveDialogShow:!n.state.isMoveDialogShow})},n.onCopyToggle=function(){n.setState({isCopyDialogShow:!n.state.isCopyDialogShow})},n.onItemsDelete=function(){n.props.onItemsDelete()},n.onItemsDownload=function(){var e=n.props,t=e.path,a=e.repoID,r=e.selectedDirentList;if(r.length){if(1===r.length&&!r[0].isDir()){var o=h.Utils.joinPath(t,r[0].name),i=y.default.getUrl({type:"download_file_url",repoID:a,filePath:o});return void(location.href=i)}var l=r.map(function(e){return e.name});n.setState({isProgressDialogShow:!0,progress:0}),m.seafileAPI.zipDownload(a,t,l).then(function(e){n.zipToken=e.data.zip_token,n.addDownloadAnimation(),n.interval=setInterval(n.addDownloadAnimation,1e3)})}},n.addDownloadAnimation=function(){var e=n,t=n.zipToken;m.seafileAPI.queryZipProgress(t).then(function(a){var r=a.data,o=0===r.total?100:(r.zipped/r.total*100).toFixed(0);n.setState({progress:parseInt(o)}),r.total===r.zipped&&(n.setState({progress:100}),clearInterval(n.interval),location.href=y.default.getUrl({type:"download_dir_zip_url",token:t}),setTimeout(function(){e.setState({isProgressDialogShow:!1})},500))})},n.onCancelDownload=function(){m.seafileAPI.cancelZipTask(n.zipToken).then(function(){n.setState({isProgressDialogShow:!1})})},n.onMenuItemClick=function(e){var t=n.props.selectedDirentList,a=t[0];switch(e){case"Share":n.setState({showLibContentViewDialogs:!0,showShareDialog:!0});break;case"Tags":n.listFileTags(a);break;case"Details":n.props.showDirentDetail();break;case"Lock":n.lockFile(a);break;case"Unlock":n.unlockFile(a);break;case"Related Files":n.openRelatedFilesDialog(a);break;case"History":n.onHistory(a);break;case"Open via Client":n.onOpenViaClient(a)}},n.lockFile=function(e){var t=n.getDirentPath(e);m.seafileAPI.lockfile(n.props.repoID,t).then(function(t){t.data.is_locked&&(n.props.updateDirent(e,"is_locked",!0),n.props.updateDirent(e,"locked_by_me",!0),n.props.unSelectDirent())})},n.unlockFile=function(e){var t=n.getDirentPath(e);m.seafileAPI.unlockfile(n.props.repoID,t).then(function(t){t.data.is_locked||(n.props.updateDirent(e,"is_locked",!1),n.props.updateDirent(e,"locked_by_me",!1),n.props.unSelectDirent())})},n.onOpenViaClient=function(e){var t=n.getDirentPath(e),a=y.default.getUrl({type:"open_via_client",repoID:n.props.repoID,filePath:t});location.href=a,n.props.unSelectDirent()},n.onHistory=function(e){var t=n.getDirentPath(e),a=y.default.getUrl({type:"file_revisions",repoID:n.props.repoID,filePath:t});location.href=a},n.openRelatedFilesDialog=function(e){var t=n.getDirentPath(e);m.seafileAPI.listRelatedFiles(n.props.repoID,t).then(function(e){var t=e.data.related_files;t.length>0?n.setState({relatedFiles:t,showLibContentViewDialogs:!0,showRelatedFileDialog:!0,viewMode:"list_related_file"}):n.setState({relatedFiles:t,showLibContentViewDialogs:!0,showRelatedFileDialog:!0,viewMode:"add_related_file"})})},n.toggleCancel=function(){n.setState({showLibContentViewDialogs:!1,showShareDialog:!1,showEditFileTagDialog:!1,showRelatedFileDialog:!1})},n.listFileTags=function(e){var t=n.getDirentPath(e);m.seafileAPI.listFileTags(n.props.repoID,t).then(function(e){for(var t=e.data.file_tags,a=0,r=t.length;a<r;a++)t[a].id=t[a].file_tag_id;n.setState({fileTagList:t,showLibContentViewDialogs:!0,showEditFileTagDialog:!0})})},n.onMenuFileTagChanged=function(){n.listFileTags(n.props.selectedDirentList[0]);for(var e=n.props.selectedDirentList.length,t=0;t<e;t++){var a=n.props.selectedDirentList[t],r=n.getDirentPath(a);n.props.onFilesTagChanged(a,r)}},n.listRelatedFiles=function(e){var t=n.getDirentPath(e);m.seafileAPI.listRelatedFiles(n.props.repoID,t).then(function(e){n.setState({relatedFiles:e.data.related_files})})},n.onRelatedFileChange=function(){n.listRelatedFiles(n.props.selectedDirentList[0])},n.getDirentPath=function(e){if(e)return h.Utils.joinPath(n.props.path,e.name)},n.state={progress:0,isProgressDialogShow:!1,isMoveDialogShow:!1,isCopyDialogShow:!1,isMutipleOperation:!0,showLibContentViewDialogs:!1,showShareDialog:!1,showEditFileTagDialog:!1,fileTagList:[],multiFileTagList:[],showRelatedFileDialog:!1,viewMode:"list_related_file"},n.zipToken=null,n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.repoID,t=this.getDirentPath(this.props.selectedDirentList[0]);return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"d-flex"},u.default.createElement(f.ButtonGroup,{className:"flex-row group-operations"},u.default.createElement(f.Button,{className:"secondary group-op-item action-icon sf2-icon-move",title:(0,p.gettext)("Move"),onClick:this.onMoveToggle}),u.default.createElement(f.Button,{className:"secondary group-op-item action-icon sf2-icon-copy",title:(0,p.gettext)("Copy"),onClick:this.onCopyToggle}),u.default.createElement(f.Button,{className:"secondary group-op-item action-icon sf2-icon-delete",title:(0,p.gettext)("Delete"),onClick:this.onItemsDelete}),u.default.createElement(f.Button,{className:"secondary group-op-item action-icon sf2-icon-download",title:(0,p.gettext)("Download"),onClick:this.onItemsDownload}),this.props.selectedDirentList.length>0&&u.default.createElement(D.default,{dirents:this.props.selectedDirentList,currentRepoInfo:this.props.currentRepoInfo,isRepoOwner:this.props.isRepoOwner,onMenuItemClick:this.onMenuItemClick}))),this.state.isMoveDialogShow&&u.default.createElement(S.default,{path:this.props.path,repoID:this.props.repoID,repoEncrypted:this.props.repoEncrypted,isMutipleOperation:this.state.isMutipleOperation,selectedDirentList:this.props.selectedDirentList,onItemsMove:this.props.onItemsMove,onCancelMove:this.onMoveToggle}),this.state.isCopyDialogShow&&u.default.createElement(E.default,{path:this.props.path,repoID:this.props.repoID,repoEncrypted:this.props.repoEncrypted,selectedDirentList:this.props.selectedDirentList,isMutipleOperation:this.state.isMutipleOperation,onItemsCopy:this.props.onItemsCopy,onCancelCopy:this.onCopyToggle}),this.state.isProgressDialogShow&&u.default.createElement(v.default,{progress:this.state.progress,onCancelDownload:this.onCancelDownload}),this.state.showLibContentViewDialogs&&u.default.createElement(s.Fragment,null,this.state.showShareDialog&&u.default.createElement(I.default,null,u.default.createElement(L.default,{itemType:this.props.selectedDirentList[0].type,itemName:this.props.selectedDirentList[0].name,itemPath:t,userPerm:this.props.selectedDirentList[0].permission,repoID:e,repoEncrypted:!1,enableDirPrivateShare:this.props.enableDirPrivateShare,isGroupOwnedRepo:this.state.isGroupOwnedRepo,toggleDialog:this.toggleCancel})),this.state.showEditFileTagDialog&&u.default.createElement(I.default,null,u.default.createElement(k.default,{repoID:e,filePath:t,fileTagList:this.state.fileTagList,toggleCancel:this.toggleCancel,onFileTagChanged:this.onMenuFileTagChanged})),this.state.showRelatedFileDialog&&u.default.createElement(I.default,null,u.default.createElement(M.default,{repoID:e,filePath:t,relatedFiles:this.state.relatedFiles,toggleCancel:this.toggleCancel,onRelatedFileChange:this.onRelatedFileChange,dirent:this.props.selectedDirentList[0],viewMode:this.state.viewMode}))))}}]),t}(u.default.Component);Z.propTypes=O,t.default=Z},282:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2);n(283);var h={dirents:d.default.array.isRequired,currentRepoInfo:d.default.object.isRequired,isRepoOwner:d.default.bool.isRequired,onMenuItemClick:d.default.func.isRequired},m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.translateMenuItem=function(e){var t="";switch(e){case"Share":t=(0,p.gettext)("Share");break;case"Tags":t=(0,p.gettext)("Tags");break;case"Details":t=(0,p.gettext)("Details");break;case"Lock":t=(0,p.gettext)("Lock");break;case"Unlock":t=(0,p.gettext)("Unlock");break;case"Related Files":t=(0,p.gettext)("Related Files");break;case"History":t=(0,p.gettext)("History");break;case"Open via Client":t=(0,p.gettext)("Open via Client")}return t},n.onDropdownToggleClick=function(e){e.preventDefault(),n.setState({isItemMenuShow:!n.state.isItemMenuShow})},n.onMenuItemClick=function(e){var t=e.target.dataset.toggle;n.props.onMenuItemClick(t,n.props.dirents)},n.state={isItemMenuShow:!1,menuList:[]},n}return i(t,e),l(t,[{key:"calculateMenuList",value:function(e){var t=e.currentRepoInfo,n=e.dirents,a=(e.isRepoOwner,n.length),r=[];if(1===a){var o=n[0];"dir"===o.type?r=["Share"]:"file"===o.type&&(r=["Share","Tags","Related Files","Divider","History","Details","Divider","Open via Client"],p.isPro&&(o.is_locked?(o.locked_by_me||"OnlineOffice"===o.lock_owner&&"rw"===t.permission)&&r.splice(1,0,"Unlock"):r.splice(1,0,"Lock")))}else r=[];this.setState({menuList:r})}},{key:"componentDidMount",value:function(){this.calculateMenuList(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.dirents.length!==e.dirents.length&&this.calculateMenuList(e)}},{key:"render",value:function(){var e=this;return 0===this.state.menuList.length?null:u.default.createElement(f.ButtonDropdown,{isOpen:this.state.isItemMenuShow,toggle:this.onDropdownToggleClick,title:(0,p.gettext)("More Operations")},u.default.createElement(f.DropdownToggle,{"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick,className:"fas fa-ellipsis-v sf-dropdown-toggle dirents-more-menu"}),u.default.createElement(f.DropdownMenu,null,this.state.menuList.map(function(t,n){return"Divider"===t?u.default.createElement(f.DropdownItem,{key:n,divider:!0}):u.default.createElement(f.DropdownItem,{key:n,"data-toggle":t,onClick:e.onMenuItemClick},e.translateMenuItem(t))})))}}]),t}(u.default.Component);m.propTypes=h,t.default=m},283:function(e,t){},284:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(285),p=a(f),h=n(286),m=a(h),g={repoID:d.default.string.isRequired,repoName:d.default.string.isRequired,permission:d.default.bool.isRequired,currentPath:d.default.string.isRequired,onPathClick:d.default.func.isRequired,onTabNavClick:d.default.func,pathPrefix:d.default.array,isViewFile:d.default.bool,updateUsedRepoTags:d.default.func.isRequired,fileTags:d.default.array.isRequired,onDeleteRepoTag:d.default.func.isRequired},y=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement(p.default,{repoName:this.props.repoName,pathPrefix:this.props.pathPrefix,currentPath:this.props.currentPath,onPathClick:this.props.onPathClick,onTabNavClick:this.props.onTabNavClick,repoID:this.props.repoID,isViewFile:this.props.isViewFile,fileTags:this.props.fileTags}),u.default.createElement(m.default,{repoID:this.props.repoID,repoName:this.props.repoName,permission:this.props.permission,currentPath:this.props.currentPath,updateUsedRepoTags:this.props.updateUsedRepoTags,onDeleteRepoTag:this.props.onDeleteRepoTag}))}}]),t}(u.default.Component);y.propTypes=g,t.default=y},285:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(60),p=n(5),h=n(2),m=(n(3),n(24)),g=(a(m),n(54)),y=a(g),b={repoName:d.default.string.isRequired,currentPath:d.default.string.isRequired,onPathClick:d.default.func.isRequired,onTabNavClick:d.default.func,pathPrefix:d.default.array,repoID:d.default.string.isRequired,isViewFile:d.default.bool,fileTags:d.default.array.isRequired},v=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.onPathClick=function(e){var t=e.target.dataset.path;a.props.onPathClick(t)},a.onTabNavClick=function(e,t){a.props.onTabNavClick(e,t)},a.turnPathToLink=function(e){e="/"===e[e.length-1]?e.slice(0,e.length-1):e;var t=e.split("/"),n="";return t.map(function(e,r){if(""!==e)return r===t.length-1?u.default.createElement("span",{key:r},u.default.createElement("span",{className:"path-split"},"/"),e):(n+="/"+e,u.default.createElement("span",{key:r},u.default.createElement("span",{className:"path-split"},"/"),u.default.createElement("a",{className:"path-link","data-path":n,onClick:a.onPathClick},e)))})},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.currentPath,a=t.repoName,r=t.fileTags,o=this.turnPathToLink(n),i="";return r.length>0&&r.forEach(function(e){i+=e.name+" "}),u.default.createElement("div",{className:"path-container"},this.props.pathPrefix&&this.props.pathPrefix.map(function(t,n){return u.default.createElement(s.Fragment,{key:n},u.default.createElement(f.Link,{to:t.url,className:"normal",onClick:function(){return e.onTabNavClick(t.name,t.id)}},(0,h.gettext)(t.showName)),u.default.createElement("span",{className:"path-split"},"/"))}),this.props.pathPrefix&&0===this.props.pathPrefix.length&&u.default.createElement(s.Fragment,null,u.default.createElement(f.Link,{to:h.siteRoot+"my-libs/",className:"normal",onClick:function(){return e.onTabNavClick.bind(e,"my-libs")}},(0,h.gettext)("Libraries")),u.default.createElement("span",{className:"path-split"},"/")),!this.props.pathPrefix&&u.default.createElement(s.Fragment,null,u.default.createElement("a",{href:h.siteRoot+"my-libs/",className:"normal",onClick:function(){return e.onTabNavClick.bind(e,"my-libs")}},(0,h.gettext)("Libraries")),u.default.createElement("span",{className:"path-split"},"/")),"/"===n?u.default.createElement("span",null,a):u.default.createElement("a",{className:"path-link","data-path":"/",onClick:this.onPathClick},a),o,this.props.isViewFile&&u.default.createElement(y.default,{repoID:this.props.repoID,path:this.props.currentPath}),this.props.isViewFile&&0!==r.length&&u.default.createElement("span",{id:"column-mode-file-tags",className:"tag-list tag-list-stacked align-middle ml-1"},r.map(function(e,t){return u.default.createElement("span",{className:"file-tag",key:e.id,style:{zIndex:t,backgroundColor:e.color}})}),u.default.createElement(p.UncontrolledTooltip,{target:"column-mode-file-tags",placement:"bottom"},i)))}}]),t}(u.default.Component);v.propTypes=b,t.default=v},286:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=n(4),f=n(1),p=a(f),h=n(10),m=a(h),g=n(5),y=n(287),b=a(y),v=n(288),w=a(v),S=n(289),C=a(S),E=n(172),_=a(E),D={repoID:p.default.string.isRequired,repoName:p.default.string.isRequired,permission:p.default.bool.isRequired,currentPath:p.default.string.isRequired,updateUsedRepoTags:p.default.func.isRequired,onDeleteRepoTag:p.default.func.isRequired},P=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onShowListRepoTag=function(){n.setState({isRepoTagDialogShow:!0,isListRepoTagShow:!0,isUpdateRepoTagShow:!1,isCreateRepoTagShow:!1,isListTaggedFileShow:!1})},n.onCloseRepoTagDialog=function(){n.setState({isRepoTagDialogShow:!1,isListRepoTagShow:!1,isUpdateRepoTagShow:!1,isCreateRepoTagShow:!1,isListTaggedFileShow:!1})},n.onCreateRepoTagToggle=function(){n.setState({isCreateRepoTagShow:!n.state.isCreateRepoTagShow,isListRepoTagShow:!n.state.isListRepoTagShow})},n.onUpdateRepoTagToggle=function(e){n.setState({currentTag:e,isListRepoTagShow:!n.state.isListRepoTagShow,isUpdateRepoTagShow:!n.state.isUpdateRepoTagShow})},n.onListTaggedFileToggle=function(e){n.setState({currentTag:e,isListRepoTagShow:!n.state.isListRepoTagShow,isListTaggedFileShow:!n.state.isListTaggedFileShow})},n.state={isRepoTagDialogShow:!1,currentTag:null,isListRepoTagShow:!1,isUpdateRepoTagShow:!1,isCreateRepoTagShow:!1,isListTaggedFileShow:!1},n}return i(t,e),l(t,[{key:"isMarkdownFile",value:function(e){return d.Utils.getFileName(e).indexOf(".md")>-1}},{key:"render",value:function(){var e=this.props,t=e.repoID,n=e.repoName,a=e.permission,r=e.currentPath,o=this.isMarkdownFile(r),i=d.Utils.getFileName(r),l=c.siteRoot+"repo/recycle/"+t+"/?referer="+encodeURIComponent(location.href),f=c.siteRoot+"repo/history/"+t+"/?referer="+encodeURIComponent(location.href);return i!==n&&""!==i||o||!a?!o&&a?u.default.createElement("ul",{className:"path-toolbar"},u.default.createElement("li",{className:"toolbar-item"},u.default.createElement("a",{className:"op-link sf2-icon-recycle",href:l,title:(0,c.gettext)("Trash"),"aria-label":(0,c.gettext)("Trash")}))):a?(f=c.siteRoot+"repo/file_revisions/"+t+"/?p="+d.Utils.encodePath(r),u.default.createElement("ul",{className:"path-toolbar"},u.default.createElement("li",{className:"toolbar-item"},u.default.createElement("a",{className:"op-link sf2-icon-history",href:f,title:(0,c.gettext)("History"),"aria-label":(0,c.gettext)("History")})))):"":u.default.createElement(s.Fragment,null,u.default.createElement("ul",{className:"path-toolbar"},u.default.createElement("li",{className:"toolbar-item"},u.default.createElement("a",{className:"op-link sf2-icon-tag",onClick:this.onShowListRepoTag,title:(0,c.gettext)("Tags"),"aria-label":(0,c.gettext)("Tags")})),u.default.createElement("li",{className:"toolbar-item"},u.default.createElement("a",{className:"op-link sf2-icon-recycle",href:l,title:(0,c.gettext)("Trash"),"aria-label":(0,c.gettext)("Trash")})),u.default.createElement("li",{className:"toolbar-item"},u.default.createElement("a",{className:"op-link sf2-icon-history",href:f,title:(0,c.gettext)("History"),"aria-label":(0,c.gettext)("History")}))),this.state.isRepoTagDialogShow&&u.default.createElement(m.default,null,u.default.createElement(g.Modal,{isOpen:!0},this.state.isListRepoTagShow&&u.default.createElement(b.default,{repoID:t,onListTagCancel:this.onCloseRepoTagDialog,onCreateRepoTag:this.onCreateRepoTagToggle,onUpdateRepoTag:this.onUpdateRepoTagToggle,onListTaggedFiles:this.onListTaggedFileToggle}),this.state.isCreateRepoTagShow&&u.default.createElement(w.default,{repoID:t,onClose:this.onCloseRepoTagDialog,toggleCancel:this.onCreateRepoTagToggle}),this.state.isUpdateRepoTagShow&&u.default.createElement(C.default,{repoID:t,currentTag:this.state.currentTag,onClose:this.onCloseRepoTagDialog,toggleCancel:this.onUpdateRepoTagToggle,onDeleteRepoTag:this.props.onDeleteRepoTag}),this.state.isListTaggedFileShow&&u.default.createElement(_.default,{repoID:this.props.repoID,currentTag:this.state.currentTag,onClose:this.onCloseRepoTagDialog,toggleCancel:this.onListTaggedFileToggle,updateUsedRepoTags:this.props.updateUsedRepoTags}))))}}]),t}(u.default.Component);P.propTypes=D,t.default=P},287:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(3),m=n(4),g=n(103),y=a(g);n(113);var b={item:d.default.object.isRequired,onTagUpdate:d.default.func.isRequired,onListTaggedFiles:d.default.func.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseOver=function(){n.setState({showSelectedTag:!0})},n.onMouseOut=function(){n.setState({showSelectedTag:!1})},n.onTagUpdate=function(){n.props.onTagUpdate(n.props.item)},n.onListTaggedFiles=function(){n.props.onListTaggedFiles(n.props.item)},n.state={showSelectedTag:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item.color,t=m.Utils.getDarkColor(e);return u.default.createElement("li",{className:"tag-list-item"},u.default.createElement("div",{className:"tag-demo",style:{backgroundColor:e},onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut},u.default.createElement("span",{className:this.state.showSelectedTag?"show-tag-selected":"",style:{backgroundColor:t}}),u.default.createElement("span",{className:"tag-name"},this.props.item.name),u.default.createElement("span",{className:"tag-files",onClick:this.onListTaggedFiles},this.props.item.fileCount," ","files")),u.default.createElement("i",{className:"tag-edit fa fa-pencil-alt",onClick:this.onTagUpdate}))}}]),t}(u.default.Component);v.propTypes=b;var w={repoID:d.default.string.isRequired,onListTagCancel:d.default.func.isRequired,onCreateRepoTag:d.default.func.isRequired,onUpdateRepoTag:d.default.func.isRequired,onListTaggedFiles:d.default.func.isRequired},S=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggle=function(){n.props.onListTagCancel()},n.createNewTag=function(e){e.preventDefault(),n.props.onCreateRepoTag()},n.state={repotagList:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.repoID;h.seafileAPI.listRepoTags(t).then(function(t){var n=[];t.data.repo_tags.forEach(function(e){var t=new y.default(e);n.push(t)}),e.setState({repotagList:n})})}},{key:"render",value:function(){var e=this;return u.default.createElement(s.Fragment,null,u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("Tags")),u.default.createElement(f.ModalBody,null,u.default.createElement("ul",{className:"tag-list tag-list-container"},this.state.repotagList.map(function(t,n){return u.default.createElement(v,{key:n,item:t,onTagUpdate:e.props.onUpdateRepoTag,onListTaggedFiles:e.props.onListTaggedFiles})})),u.default.createElement("a",{href:"#",className:"add-tag-link",onClick:this.createNewTag},(0,p.gettext)("Create a new tag"))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Close"))))}}]),t}(u.default.Component);S.propTypes=w,t.default=S},288:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(3),m={repoID:d.default.string.isRequired,toggleCancel:d.default.func.isRequired,onClose:d.default.func.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.inputNewName=function(e){n.setState({tagName:e.target.value})},n.selectTagcolor=function(e){n.setState({tagColor:e.target.value})},n.createTag=function(){var e=n.state.tagName,t=n.state.tagColor,a=n.props.repoID;h.seafileAPI.createRepoTag(a,e,t).then(function(){n.props.toggleCancel()})},n.handleKeyPress=function(e){"Enter"===e.key&&n.createTag()},n.state={tagName:"",tagColor:"",newTag:{},colorList:["#FFA8A8","#FFA94D","#FFD43B","#A0EC50","#A9E34B","#63E6BE","#4FD2C9","#72C3FC","#91A7FF","#E599F7","#B197FC","#F783AC","#CED4DA"]},n.newInput=u.default.createRef(),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.setState({tagColor:this.state.colorList[0]}),this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this,t=this.state.colorList;return u.default.createElement(s.Fragment,null,u.default.createElement(f.ModalHeader,{toggle:this.props.onClose},u.default.createElement("span",{className:"tag-dialog-back fas fa-sm fa-arrow-left",onClick:this.props.toggleCancel,"aria-label":(0,p.gettext)("Back")}),(0,p.gettext)("New Tag")),u.default.createElement(f.ModalBody,null,u.default.createElement("div",{role:"form",className:"tag-create"},u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"form-label"},(0,p.gettext)("Name")),u.default.createElement(f.Input,{onKeyPress:this.handleKeyPress,innerRef:function(t){e.newInput=t},value:this.state.tagName,onChange:this.inputNewName})),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"form-label"},(0,p.gettext)("Select a color")),u.default.createElement("div",{className:"row gutters-xs"},t.map(function(t,n){return u.default.createElement("div",{key:n,className:"col-auto",onChange:e.selectTagcolor},u.default.createElement("label",{className:"colorinput"},0===n?u.default.createElement("input",{name:"color",type:"radio",value:t,className:"colorinput-input",defaultChecked:!0,onClick:e.selectTagcolor}):u.default.createElement("input",{name:"color",type:"radio",value:t,className:"colorinput-input",onClick:e.selectTagcolor}),u.default.createElement("span",{className:"colorinput-color",style:{backgroundColor:t}})))}))))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"primary",onClick:this.createTag},(0,p.gettext)("Save")),u.default.createElement(f.Button,{color:"secondary",onClick:this.props.toggleCancel},(0,p.gettext)("Cancel"))))}}]),t}(u.default.Component);g.propTypes=m,t.default=g},289:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(3),m={currentTag:d.default.object,repoID:d.default.string.isRequired,toggleCancel:d.default.func.isRequired,onDeleteRepoTag:d.default.func.isRequired,onClose:d.default.func.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.inputNewName=function(e){n.setState({newName:e.target.value})},n.selectNewcolor=function(e){n.setState({newColor:e.target.value})},n.updateTag=function(){var e=n.props.currentTag.id,t=n.state.newName,a=n.state.newColor,r=n.props.repoID;h.seafileAPI.updateRepoTag(r,e,t,a).then(function(){n.props.toggleCancel()})},n.handleKeyPress=function(e){"Enter"===e.key&&n.updateTag()},n.deleteTagClick=function(e){n.setState({deleteRepoTag:!n.state.deleteRepoTag})},n.onDeleteTag=function(){var e=n.props.currentTag,t=n.props.repoID;h.seafileAPI.deleteRepoTag(t,e.id).then(function(t){n.props.toggleCancel(),"true"===t.data.success&&n.props.onDeleteRepoTag(e.id)})},n.state={deleteRepoTag:!1,newName:n.props.currentTag.name,newColor:n.props.currentTag.color,colorList:["#FFA8A8","#FFA94D","#FFD43B","#A0EC50","#A9E34B","#63E6BE","#4FD2C9","#72C3FC","#91A7FF","#E599F7","#B197FC","#F783AC","#CED4DA"]},n.newInput=u.default.createRef(),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,-1)}},{key:"render",value:function(){var e=this,t=this.state.colorList;return-1===t.indexOf(this.props.currentTag.color)&&t.push(this.props.currentTag.color),u.default.createElement(s.Fragment,null,u.default.createElement(f.ModalHeader,{toggle:this.props.onClose},u.default.createElement("span",{className:"tag-dialog-back fas fa-sm fa-arrow-left",onClick:this.props.toggleCancel,"aria-label":(0,p.gettext)("Back")}),(0,p.gettext)("Edit Tag")),u.default.createElement(f.ModalBody,null,u.default.createElement("div",{className:"tag-edit"},u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"form-label"},(0,p.gettext)("Name")),u.default.createElement(f.Input,{onKeyPress:this.handleKeyPress,innerRef:function(t){e.newInput=t},value:this.state.newName,onChange:this.inputNewName})),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"form-label"},(0,p.gettext)("Select a color")),u.default.createElement("div",{className:"row gutters-xs"},t.map(function(t,n){return u.default.createElement("div",{key:n,className:"col-auto",onChange:e.selectNewcolor},u.default.createElement("label",{className:"colorinput"},t===e.props.currentTag.color?u.default.createElement("input",{name:"color",type:"radio",value:t,className:"colorinput-input",defaultChecked:!0,onChange:e.selectNewcolor}):u.default.createElement("input",{name:"color",type:"radio",value:t,className:"colorinput-input",onChange:e.selectNewcolor}),u.default.createElement("span",{className:"colorinput-color",style:{backgroundColor:t}})))}))))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"danger",onClick:this.onDeleteTag},(0,p.gettext)("Delete")),u.default.createElement(f.Button,{color:"primary",onClick:this.updateTag},(0,p.gettext)("Save"))))}}]),t}(u.default.Component);g.propTypes=m,t.default=g},290:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(4),h=n(11),m=a(h),g=n(291),y=a(g),b=n(10),v=a(b),w=n(123),S=a(w),C=n(294),E=a(C);n(207),n(296);var _=n(7),D=a(_),P={path:d.default.string.isRequired,repoID:d.default.string.isRequired,currentRepoInfo:d.default.object,isAllItemSelected:d.default.bool.isRequired,isDirentListLoading:d.default.bool.isRequired,direntList:d.default.array.isRequired,sortBy:d.default.string.isRequired,sortOrder:d.default.string.isRequired,sortItems:d.default.func.isRequired,onAddFile:d.default.func.isRequired,onItemDelete:d.default.func.isRequired,onAllItemSelected:d.default.func.isRequired,onItemSelected:d.default.func.isRequired,onItemRename:d.default.func.isRequired,onItemClick:d.default.func.isRequired,onItemMove:d.default.func.isRequired,onItemCopy:d.default.func.isRequired,onDirentClick:d.default.func.isRequired,onItemDetails:d.default.func.isRequired,updateDirent:d.default.func.isRequired},L=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.onItemRename=function(e,t){if(n.props.direntList.some(function(e){return e.name===t})){var a=(0,f.gettext)('The name "{name}" is already taken. Please choose a different name.');return a=a.replace("{name}",p.Utils.HTMLescape(t)),D.default.danger(a),!1}n.props.onItemRename(e,t)},n.onItemRenameToggle=function(){n.onFreezedItem()},n.onItemDetails=function(e){n.props.onItemDetails(e)},n.onCreateFileToggle=function(){n.setState({isCreateFileDialogShow:!n.state.isCreateFileDialogShow,fileType:""})},n.onCreateNewFile=function(e){n.setState({isCreateFileDialogShow:!n.state.isCreateFileDialogShow,fileType:e})},n.onAddFile=function(e,t){n.setState({isCreateFileDialogShow:!1}),n.props.onAddFile(e,t)},n.sortByName=function(e){e.preventDefault();var t="asc"==n.props.sortOrder?"desc":"asc";n.props.sortItems("name",t)},n.sortByTime=function(e){e.preventDefault();var t="asc"==n.props.sortOrder?"desc":"asc";n.props.sortItems("time",t)},n.prepareImageItems=function(){var e=n.props.direntList.filter(function(e){return p.Utils.imageCheck(e.name)}),t=!n.repoEncrypted,a=function(e){var a=e.name,r=a.substr(a.lastIndexOf(".")+1).toLowerCase(),o="gif"==r,i=p.Utils.encodePath(p.Utils.joinPath(n.props.path,a)),l=n.props.repoID,s=void 0;return s=t&&!o?f.siteRoot+"thumbnail/"+l+"/"+f.thumbnailSizeForOriginal+i:f.siteRoot+"repo/"+l+"/raw"+i,{name:a,url:f.siteRoot+"lib/"+l+"/file"+i,src:s}};return e.map(function(e){return a(e)})},n.showImagePopup=function(e){var t=n.props.direntList.filter(function(e){return p.Utils.imageCheck(e.name)});n.setState({isImagePopupOpen:!0,imageItems:n.prepareImageItems(),imageIndex:t.indexOf(e)})},n.moveToPrevImage=function(){var e=n.state.imageItems.length;n.setState(function(t){return{imageIndex:(t.imageIndex+e-1)%e}})},n.moveToNextImage=function(){var e=n.state.imageItems.length;n.setState(function(t){return{imageIndex:(t.imageIndex+1)%e}})},n.closeImagePopup=function(){n.setState({isImagePopupOpen:!1})},n.checkDuplicatedName=function(e){return n.props.direntList.some(function(t){return t.name===e})},n.state={isItemFreezed:!1,isImagePopupOpen:!1,imageItems:[],imageIndex:0,isCreateFileDialogShow:!1,fileType:""},n.isRepoOwner=e.currentRepoInfo.owner_email===f.username,n.isAdmin=e.currentRepoInfo.is_admin,n.repoEncrypted=e.currentRepoInfo.encrypted,n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.direntList,a=t.sortBy,r=t.sortOrder;if(this.props.isDirentListLoading)return u.default.createElement(m.default,null);if("/"==this.props.path&&!n.length)return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"tip-for-new-file"},u.default.createElement("p",{className:"text-center"},(0,f.gettext)("This folder has no content at this time.")),u.default.createElement("p",{className:"text-center"},(0,f.gettext)("You can create files quickly")," +"),u.default.createElement("div",{className:"big-new-file-button-group"},u.default.createElement("div",{className:"d-flex justify-content-center"},u.default.createElement("button",{className:"big-new-file-button",onClick:this.onCreateNewFile.bind(this,".md")},"+ ",(0,f.gettext)("Markdown")),u.default.createElement("button",{className:"big-new-file-button",onClick:this.onCreateNewFile.bind(this,".ppt")},"+ ",(0,f.gettext)("PPT"))),u.default.createElement("div",{className:"d-flex justify-content-center"},u.default.createElement("button",{className:"big-new-file-button",onClick:this.onCreateNewFile.bind(this,".doc")},"+ ",(0,f.gettext)("Word")),u.default.createElement("button",{className:"big-new-file-button",onClick:this.onCreateNewFile.bind(this,".xls")},"+ ",(0,f.gettext)("Excel"))))),this.state.isCreateFileDialogShow&&u.default.createElement(v.default,null,u.default.createElement(S.default,{parentPath:this.props.path,fileType:this.state.fileType,onAddFile:this.onAddFile,checkDuplicatedName:this.checkDuplicatedName,addFileCancel:this.onCreateFileToggle})));var o="name"==a,i="time"==a,l="asc"==r?u.default.createElement("span",{className:"fas fa-caret-up"}):u.default.createElement("span",{className:"fas fa-caret-down"}),c=this.state.imageItems,d=this.state.imageIndex,p=c.length,h=p&&u.default.createElement(s.Fragment,null,u.default.createElement("span",null,(0,f.gettext)("%curr% of %total%").replace("%curr%",d+1).replace("%total%",p)),u.default.createElement("br",null),u.default.createElement("a",{href:c[d].url,target:"_blank"},(0,f.gettext)("Open in New Tab")));return u.default.createElement(s.Fragment,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"3%",className:"pl10"},u.default.createElement("input",{type:"checkbox",className:"vam",onChange:this.props.onAllItemSelected,checked:this.props.isAllItemSelected})),u.default.createElement("th",{width:"3%",className:"pl10"}),u.default.createElement("th",{width:"5%",className:"pl10"}),u.default.createElement("th",{width:"39%"},u.default.createElement("a",{className:"d-block table-sort-op",href:"#",onClick:this.sortByName},(0,f.gettext)("Name")," ",o&&l)),u.default.createElement("th",{width:"6%"}),u.default.createElement("th",{width:"18%"}),u.default.createElement("th",{width:"11%"},(0,f.gettext)("Size")),u.default.createElement("th",{width:"15%"},u.default.createElement("a",{className:"d-block table-sort-op",href:"#",onClick:this.sortByTime},(0,f.gettext)("Last Update")," ",i&&l)))),u.default.createElement("tbody",null,0!==n.length&&n.map(function(t,n){return u.default.createElement(y.default,{key:n,dirent:t,path:e.props.path,repoID:e.props.repoID,currentRepoInfo:e.props.currentRepoInfo,isAdmin:e.isAdmin,isRepoOwner:e.isRepoOwner,repoEncrypted:e.repoEncrypted,enableDirPrivateShare:e.props.enableDirPrivateShare,isGroupOwnedRepo:e.props.isGroupOwnedRepo,direntList:e.props.direntList,onItemClick:e.props.onItemClick,onItemRenameToggle:e.onItemRenameToggle,onItemSelected:e.props.onItemSelected,onItemDelete:e.props.onItemDelete,onItemRename:e.onItemRename,onItemMove:e.props.onItemMove,onItemCopy:e.props.onItemCopy,updateDirent:e.props.updateDirent,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDirentClick:e.props.onDirentClick,onItemDetails:e.onItemDetails,showImagePopup:e.showImagePopup})}))),this.state.isImagePopupOpen&&u.default.createElement(E.default,{mainSrc:c[d].src,imageTitle:c[d].name,imageCaption:h,nextSrc:c[(d+1)%p].src,prevSrc:c[(d+p-1)%p].src,onCloseRequest:this.closeImagePopup,onMovePrevRequest:this.moveToPrevImage,onMoveNextRequest:this.moveToNextImage,imagePadding:70,imageLoadErrorMessage:(0,f.gettext)("The image could not be loaded."),prevLabel:(0,f.gettext)("Previous (Left arrow key)"),nextLabel:(0,f.gettext)("Next (Right arrow key)"),closeLabel:(0,f.gettext)("Close (Esc)"),zoomInLabel:(0,f.gettext)("Zoom in"),zoomOutLabel:(0,f.gettext)("Zoom out")}))}}]),t}(u.default.Component);L.propTypes=P,t.default=L},291:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(206),p=a(f),h=n(5),m=n(2),g=n(4),y=n(3),b=n(124),v=a(b),w=n(292),S=a(w),C=n(143),E=a(C),_=n(10),D=a(_),P=n(171),L=a(P),R=n(141),M=a(R),T=n(142),k=a(T),N=n(25),Y=a(N);n(293);var I={path:d.default.string.isRequired,repoID:d.default.string.isRequired,isItemFreezed:d.default.bool.isRequired,dirent:d.default.object.isRequired,onItemClick:d.default.func.isRequired,onFreezedItem:d.default.func.isRequired,onUnfreezedItem:d.default.func.isRequired,onItemRenameToggle:d.default.func.isRequired,onItemSelected:d.default.func.isRequired,onItemDelete:d.default.func.isRequired,onItemRename:d.default.func.isRequired,onItemMove:d.default.func.isRequired,onItemCopy:d.default.func.isRequired,onItemDetails:d.default.func.isRequired,onDirentClick:d.default.func.isRequired,updateDirent:d.default.func.isRequired,showImagePopup:d.default.func.isRequired,currentRepoInfo:d.default.object,isRepoOwner:d.default.bool,isAdmin:d.default.bool.isRequired,repoEncrypted:d.default.bool.isRequired,isGroupOwnedRepo:d.default.bool.isRequired},O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.props.isItemFreezed||n.setState({highlight:!0,isOperationShow:!0}),n.setState({isDragTipShow:!0})},n.onMouseOver=function(){n.props.isItemFreezed||n.setState({highlight:!0,isOperationShow:!0}),n.setState({isDragTipShow:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({highlight:!1,isOperationShow:!1}),n.setState({isDragTipShow:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOperationShow:!1}),n.props.onUnfreezedItem()},n.onItemSelected=function(){n.props.onItemSelected(n.props.dirent)},n.onItemStarred=function(){var e=n.props.dirent,t=n.props.repoID,a=n.getDirentPath(e);e.starred?y.seafileAPI.unstarItem(t,a).then(function(){n.props.updateDirent(n.props.dirent,"starred",!1)}):y.seafileAPI.starItem(t,a).then(function(){n.props.updateDirent(n.props.dirent,"starred",!0)})},n.onDirentClick=function(e){"TD"==e.target.tagName&&n.props.onDirentClick(n.props.dirent)},n.onItemClick=function(e){e.preventDefault();var t=n.props.dirent;g.Utils.imageCheck(t.name)?n.props.showImagePopup(t):n.props.onItemClick(t)},n.onItemDelete=function(e){e.nativeEvent.stopImmediatePropagation(),n.props.onItemDelete(n.props.dirent)},n.onItemShare=function(e){e.nativeEvent.stopImmediatePropagation(),n.setState({isShareDialogShow:!n.state.isShareDialogShow})},n.closeSharedDialog=function(){n.setState({isShareDialogShow:!n.state.isShareDialogShow})},n.onMenuItemClick=function(e){switch(e){case"Rename":n.onItemRenameToggle();break;case"Move":n.onItemMoveToggle();break;case"Copy":n.onItemCopyToggle();break;case"Permission":n.onPermissionItem();break;case"Details":n.onDetailsItem();break;case"Unlock":n.onUnlockItem();break;case"Lock":n.onLockItem();break;case"Comment":n.onComnentItem();break;case"History":n.onHistory();break;case"Access Log":n.onAccessLog();break;case"Open via Client":n.onOpenViaClient()}},n.onItemRenameToggle=function(){n.props.onItemRenameToggle(n.props.dirent),n.setState({isOperationShow:!1,isRenameing:!0})},n.onRenameConfirm=function(e){n.props.onItemRename(n.props.dirent,e),n.onRenameCancel()},n.onRenameCancel=function(){n.setState({isRenameing:!1}),n.props.onUnfreezedItem()},n.onItemMoveToggle=function(){n.setState({isMoveDialogShow:!n.state.isMoveDialogShow})},n.onItemCopyToggle=function(){n.setState({isCopyDialogShow:!n.state.isCopyDialogShow})},n.onPermissionItem=function(){},n.onDetailsItem=function(){n.props.onItemDetails(n.props.dirent)},n.onLockItem=function(){var e=n.props.repoID,t=n.getDirentPath(n.props.dirent);y.seafileAPI.lockfile(e,t).then(function(){n.props.updateDirent(n.props.dirent,"is_locked",!0),n.props.updateDirent(n.props.dirent,"locked_by_me",!0)})},n.onUnlockItem=function(){var e=n.props.repoID,t=n.getDirentPath(n.props.dirent);y.seafileAPI.unlockfile(e,t).then(function(){n.props.updateDirent(n.props.dirent,"is_locked",!1),n.props.updateDirent(n.props.dirent,"locked_by_me",!1)})},n.onComnentItem=function(){},n.onHistory=function(){var e=n.props.repoID,t=n.getDirentPath(n.props.dirent),a=v.default.getUrl({type:"file_revisions",repoID:e,filePath:t});location.href=a},n.onAccessLog=function(){},n.onOpenViaClient=function(){var e=n.props.repoID,t=n.getDirentPath(n.props.dirent),a=v.default.getUrl({type:"open_via_client",repoID:e,filePath:t});location.href=a},n.onItemDownload=function(e){e.nativeEvent.stopImmediatePropagation();var t=n.props.dirent,a=n.props.repoID,r=n.getDirentPath(t);if("dir"===t.type)n.setState({isProgressDialogShow:!0,progress:0}),y.seafileAPI.zipDownload(a,n.props.path,t.name).then(function(e){n.zipToken=e.data.zip_token,n.addDownloadAnimation(),n.interval=setInterval(n.addDownloadAnimation,1e3)}).catch(function(){clearInterval(n.interval)});else{var o=v.default.getUrl({type:"download_file_url",repoID:a,filePath:r});location.href=o}},n.addDownloadAnimation=function(){var e=n,t=n.zipToken;y.seafileAPI.queryZipProgress(t).then(function(a){var r=a.data,o=0===r.total?100:(r.zipped/r.total*100).toFixed(0);n.setState({progress:parseInt(o)}),r.total===r.zipped&&(n.setState({progress:100}),clearInterval(n.interval),location.href=v.default.getUrl({type:"download_dir_zip_url",token:t}),setTimeout(function(){e.setState({isProgressDialogShow:!1})},500))})},n.onCancelDownload=function(){var e=n.zipToken;y.seafileAPI.cancelZipTask(e).then(function(e){n.setState({isProgressDialogShow:!1})})},n.getDirentPath=function(e){var t=n.props.path;return"/"===t?t+e.name:t+"/"+e.name},n.onTagTooltipToggle=function(e){e.stopPropagation(),n.setState({isShowTagTooltip:!n.state.isShowTagTooltip})},n.onItemMove=function(e,t,a,r){n.props.onItemMove(e,t,a,r)},n.onItemDragStart=function(e){var t="";t="/"===n.props.path?""+n.props.path+n.props.dirent.name:n.props.path;var a={nodeDirent:n.props.dirent,nodeParentPath:n.props.path,nodeRootPath:t};a=JSON.stringify(a),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(n.refs.drag_icon,15,15),e.dataTransfer.setData("applicaiton/drag-item-info",a)},n.onItemDragEnter=function(){"dir"===n.props.dirent.type&&n.setState({isDropTipshow:!0})},n.onItemDragOver=function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},n.onItemDragLeave=function(){n.setState({isDropTipshow:!1})},n.onItemDragDrop=function(e){if(n.setState({isDropTipshow:!1}),!e.dataTransfer.files.length){var t=e.dataTransfer.getData("applicaiton/drag-item-info");t=JSON.parse(t);var a=t,r=a.nodeDirent,o=a.nodeParentPath,i=a.nodeRootPath,l=n.props.dirent;if(r.name!==l.name&&"dir"===l.type&&("dir"!==l.type||"dir"!==r.type||o===n.props.path||-1===n.props.path.indexOf(i))){var s=g.Utils.joinPath(n.props.path,n.props.dirent.name);n.onItemMove(n.props.currentRepoInfo,r,s,o)}}},n.state={isOperationShow:!1,highlight:!1,progress:0,isProgressDialogShow:!1,isMoveDialogShow:!1,isCopyDialogShow:!1,isShareDialogShow:!1,isMutipleOperation:!1,isShowTagTooltip:!1,isDragTipShow:!1,isDropTipshow:!1},n.zipToken=null,n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.path,n=e.dirent,a=g.Utils.joinPath(t,n.name),r="";this.props.currentRepoInfo&&(r=m.siteRoot+"library/"+this.props.repoID+"/"+this.props.currentRepoInfo.repo_name+g.Utils.encodePath(a));var o=m.siteRoot+"lib/"+this.props.repoID+"/file"+g.Utils.encodePath(a),i=(0,p.default)(n.name).slice(0,7),l="";n.file_tags&&n.file_tags.length>0&&n.file_tags.forEach(function(e){l+=e.name+" "});var c=g.Utils.getDirentIcon(n),d=this.props,f=d.repoEncrypted,y=d.isRepoOwner,b=d.isAdmin,v=!1;f||"rw"!=n.permission&&"r"!=n.permission||(v="file"==n.type?m.canGenerateShareLink:m.canGenerateShareLink||m.canGenerateUploadLink||y||b);var w=this.state.highlight?"tr-highlight ":"";return w+=this.state.isDropTipshow?"tr-drop-effect":"",u.default.createElement(s.Fragment,null,u.default.createElement("tr",{className:w,draggable:"true",onMouseEnter:this.onMouseEnter,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseLeave,onClick:this.onDirentClick,onDragStart:this.onItemDragStart,onDragEnter:this.onItemDragEnter,onDragOver:this.onItemDragOver,onDragLeave:this.onItemDragLeave,onDrop:this.onItemDragDrop},u.default.createElement("td",{className:"pl10 "+(this.state.isDragTipShow?"tr-drag-effect":"")},u.default.createElement("input",{type:"checkbox",className:"vam",onChange:this.onItemSelected,checked:n.isSelected})),u.default.createElement("td",{className:"pl10"},void 0!==n.starred&&!n.starred&&u.default.createElement("i",{className:"far fa-star star-empty cursor-pointer",onClick:this.onItemStarred}),void 0!==n.starred&&n.starred&&u.default.createElement("i",{className:"fas fa-star cursor-pointer",onClick:this.onItemStarred})),u.default.createElement("td",{className:"pl10"},u.default.createElement("div",{className:"dir-icon"},n.encoded_thumbnail_src?u.default.createElement("img",{ref:"drag_icon",src:""+m.siteRoot+n.encoded_thumbnail_src,className:"thumbnail cursor-pointer",onClick:this.onItemClick,alt:""}):u.default.createElement("img",{ref:"drag_icon",src:c,width:"24",alt:""}),n.is_locked&&u.default.createElement("img",{className:"locked",src:m.mediaUrl+"img/file-locked-32.png",alt:(0,m.gettext)("locked"),title:n.lock_owner_name}))),u.default.createElement("td",{className:"name"},this.state.isRenameing?u.default.createElement(E.default,{hasSuffix:"dir"!==n.type,name:n.name,onRenameConfirm:this.onRenameConfirm,onRenameCancel:this.onRenameCancel}):u.default.createElement("a",{href:"dir"===n.type?r:o,onClick:this.onItemClick},n.name)),u.default.createElement("td",{className:"tag-list-title"},"dir"!==n.type&&n.file_tags&&u.default.createElement(s.Fragment,null,u.default.createElement("div",{id:"tag-list-title-"+i,className:"dirent-item tag-list tag-list-stacked"},n.file_tags.map(function(e,t){var a=n.file_tags.length;return u.default.createElement("span",{className:"file-tag",key:e.id,style:{zIndex:a-t,backgroundColor:e.color}})})),u.default.createElement(h.UncontrolledTooltip,{target:"tag-list-title-"+i,placement:"bottom"},l))),u.default.createElement("td",{className:"operation"},this.state.isOperationShow&&u.default.createElement("div",{className:"operations"},u.default.createElement("ul",{className:"operation-group"},u.default.createElement("li",{className:"operation-group-item"},u.default.createElement("i",{className:"op-icon sf2-icon-download",title:(0,m.gettext)("Download"),onClick:this.onItemDownload})),v&&u.default.createElement("li",{className:"operation-group-item"},u.default.createElement("i",{className:"op-icon sf2-icon-share",title:(0,m.gettext)("Share"),onClick:this.onItemShare})),u.default.createElement("li",{className:"operation-group-item"},u.default.createElement("i",{className:"op-icon sf2-icon-delete",title:(0,m.gettext)("Delete"),onClick:this.onItemDelete})),u.default.createElement("li",{className:"operation-group-item"},u.default.createElement(S.default,{dirent:this.props.dirent,onMenuItemClick:this.onMenuItemClick,currentRepoInfo:this.props.currentRepoInfo,isRepoOwner:this.props.isRepoOwner,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))))),u.default.createElement("td",{className:"file-size"},n.size&&n.size),u.default.createElement("td",{className:"last-update"},n.mtime_relative)),this.state.isMoveDialogShow&&u.default.createElement(D.default,null,u.default.createElement(M.default,{path:this.props.path,repoID:this.props.repoID,dirent:this.props.dirent,isMutipleOperation:this.state.isMutipleOperation,onItemMove:this.props.onItemMove,onCancelMove:this.onItemMoveToggle,repoEncrypted:this.props.repoEncrypted})),this.state.isCopyDialogShow&&u.default.createElement(D.default,null,u.default.createElement(k.default,{path:this.props.path,repoID:this.props.repoID,dirent:this.props.dirent,isMutipleOperation:this.state.isMutipleOperation,onItemCopy:this.props.onItemCopy,onCancelCopy:this.onItemCopyToggle,repoEncrypted:this.props.repoEncrypted})),this.state.isProgressDialogShow&&u.default.createElement(D.default,null,u.default.createElement(L.default,{progress:this.state.progress,onCancelDownload:this.onCancelDownload})),this.state.isShareDialogShow&&u.default.createElement(D.default,null,u.default.createElement(Y.default,{itemType:n.type,itemName:n.name,itemPath:a,userPerm:n.permission,repoID:this.props.repoID,repoEncrypted:!1,enableDirPrivateShare:this.props.enableDirPrivateShare,isGroupOwnedRepo:this.props.isGroupOwnedRepo,toggleDialog:this.closeSharedDialog})))}}]),t}(u.default.Component);O.propTypes=I,t.default=O},292:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h={dirent:d.default.object.isRequired,currentRepoInfo:d.default.object.isRequired,isRepoOwner:d.default.bool.isRequired,onMenuItemClick:d.default.func.isRequired,onFreezedItem:d.default.func.isRequired,onUnfreezedItem:d.default.func.isRequired},m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.translateMenuItem=function(e){var t="";switch(e){case"Rename":t=(0,p.gettext)("Rename");break;case"Move":t=(0,p.gettext)("Move");break;case"Copy":t=(0,p.gettext)("Copy");break;case"Permission":t=(0,p.gettext)("Permission");break;case"Details":t=(0,p.gettext)("Details");break;case"Unlock":t=(0,p.gettext)("Unlock");break;case"Lock":t=(0,p.gettext)("Lock");break;case"Comment":t=(0,p.gettext)("Comment");break;case"History":t=(0,p.gettext)("History");break;case"Access Log":t=(0,p.gettext)("Access Log");break;case"Open via Client":t=(0,p.gettext)("Open via Client")}return t},n.onDropdownToggleClick=function(e){e.preventDefault(),n.toggleOperationMenu()},n.toggleOperationMenu=function(){n.setState({isItemMenuShow:!n.state.isItemMenuShow},function(){n.state.isItemMenuShow?n.props.onFreezedItem():n.props.onUnfreezedItem()})},n.onMenuItemClick=function(e){var t=e.target.dataset.toggle;n.props.onMenuItemClick(t)},n.state={isItemMenuShow:!1},n.menuList=[],n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.menuList=this.calculateMenuList()}},{key:"calculateMenuList",value:function(){var e=this.props,t=e.currentRepoInfo,n=e.dirent,a=e.isRepoOwner,r=n.type,o=n.permission,i=p.folderPermEnabled&&(a&&t.has_been_shared_out||t.is_admin);if("dir"===r&&"rw"===o){return i?["Rename","Move","Copy","Divider","Permission","Details","Divider","Open via Client"]:["Rename","Move","Copy","Divider","Details","Divider","Open via Client"]}if("dir"===r&&"r"===o){return t.encrypted?["Copy","Details"]:["Details"]}if("file"===r&&"rw"===o){var l=[];return(!n.is_locked||n.is_locked&&n.locked_by_me)&&(l.push("Rename"),l.push("Move")),l.push("Copy"),p.isPro&&(n.is_locked?(n.locked_by_me||"OnlineOffice"===n.lock_owner&&"rw"===o)&&l.push("Unlock"):l.push("Lock")),l.push("Divider"),p.enableFileComment&&l.push("Comment"),l.push("History"),p.fileAuditEnabled&&l.push("Access Log"),l.push("Details"),l.push("Divider"),l.push("Open via Client"),l}if("file"===r&&"r"===o){var s=[];return t.encrypted||s.push("Copy"),p.enableFileComment&&s.push("Comment"),s.push("History"),s.push("Details"),s}}},{key:"render",value:function(){var e=this;return this.menuList.length?u.default.createElement(f.Dropdown,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu},u.default.createElement(f.DropdownToggle,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down",title:(0,p.gettext)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),u.default.createElement(f.DropdownMenu,null,this.menuList.map(function(t,n){return"Divider"===t?u.default.createElement(f.DropdownItem,{key:n,divider:!0}):u.default.createElement(f.DropdownItem,{key:n,"data-toggle":t,onClick:e.onMenuItemClick},e.translateMenuItem(t))}))):""}}]),t}(u.default.Component);m.propTypes=h,t.default=m},293:function(e,t){},296:function(e,t){},297:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(4),p=n(3),h=n(298),m=a(h),g=n(31),y=a(g),b=n(24),v=a(b);n(98);var w={repoID:d.default.string.isRequired,dirent:d.default.object.isRequired,path:d.default.string.isRequired,onItemDetailsClose:d.default.func.isRequired,onFileTagChanged:d.default.func.isRequired},S=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateDetailView=function(e,t){var a=n.props.repoID;"file"===e.type?(p.seafileAPI.getFileInfo(a,t).then(function(e){n.setState({direntType:"file",direntDetail:e.data})}),p.seafileAPI.listFileTags(a,t).then(function(e){var t=[];e.data.file_tags.forEach(function(e){var n=new v.default(e);t.push(n)}),n.setState({fileTagList:t})}),p.seafileAPI.listRelatedFiles(a,t).then(function(e){var t=[];e.data.related_files.map(function(e){t.push(e)}),n.setState({relatedFiles:t})}).catch(function(e){500===e.response.status&&n.setState({relatedFiles:[]})})):p.seafileAPI.getDirInfo(a,t).then(function(e){n.setState({direntType:"dir",direntDetail:e.data})})},n.onFileTagChanged=function(e,t){n.updateDetailView(e,t),n.props.onFileTagChanged(e,t)},n.onRelatedFileChange=function(){var e=n.props,t=e.dirent,a=e.path,r=f.Utils.joinPath(a,t.name);n.updateDetailView(t,r)},n.state={direntType:"",direntDetail:"",repoInfo:null,fileTagList:[],relatedFiles:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.dirent,a=t.path,r=t.repoID,o=f.Utils.joinPath(a,n.name);p.seafileAPI.getRepoInfo(r).then(function(t){var a=new y.default(t.data);e.setState({repoInfo:a}),e.updateDetailView(n,o)})}},{key:"componentWillReceiveProps",value:function(e){var t=e.dirent,n=e.path,a=f.Utils.joinPath(n,t.name);this.updateDetailView(t,a)}},{key:"render",value:function(){var e=this.props.dirent,t=f.Utils.getDirentIcon(e),n=f.Utils.getDirentIcon(e,!0);return u.default.createElement("div",{className:"detail-container"},u.default.createElement("div",{className:"detail-header"},u.default.createElement("div",{className:"detail-control sf2-icon-x1",onClick:this.props.onItemDetailsClose}),u.default.createElement("div",{className:"detail-title dirent-title"},u.default.createElement("img",{src:t,width:"24",height:"24",alt:""})," ",u.default.createElement("span",{className:"name ellipsis",title:e.name},e.name))),u.default.createElement("div",{className:"detail-body dirent-info"},u.default.createElement("div",{className:"img"},u.default.createElement("img",{src:n,width:"96",alt:""})),this.state.direntDetail&&u.default.createElement("div",{className:"dirent-table-container"},u.default.createElement(m.default,{repoInfo:this.state.repoInfo,path:this.props.path,repoID:this.props.repoID,dirent:this.props.dirent,direntType:this.state.direntType,direntDetail:this.state.direntDetail,fileTagList:this.state.fileTagList,relatedFiles:this.state.relatedFiles,onFileTagChanged:this.onFileTagChanged,onRelatedFileChange:this.onRelatedFileChange}))))}}]),t}(u.default.Component);S.propTypes=w,t.default=S},298:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(6),p=a(f),h=n(2),m=n(4),g=n(106),y=a(g),b=n(10),v=a(b),w=n(107),S=a(w),C={repoInfo:d.default.object.isRequired,repoID:d.default.string.isRequired,dirent:d.default.object.isRequired,direntType:d.default.string.isRequired,direntDetail:d.default.object.isRequired,path:d.default.string.isRequired,fileTagList:d.default.array.isRequired,relatedFiles:d.default.array.isRequired,onFileTagChanged:d.default.func.isRequired,onRelatedFileChange:d.default.func.isRequired},E=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getDirentPostion=function(){var e=n.props.repoInfo,t=n.getDirentPath(),a=e.repo_name;if("/"!==t){var r=t.lastIndexOf("/");a+=t.slice(0,r)}return a},n.onEditFileTagToggle=function(){n.setState({isEditFileTagShow:!n.state.isEditFileTagShow})},n.onFileTagChanged=function(){var e=n.getDirentPath();n.props.onFileTagChanged(n.props.dirent,e)},n.getDirentPath=function(){var e=n.props,t=e.dirent,a=e.path;return m.Utils.joinPath(a,t.name)},n.onListRelatedFileToggle=function(){n.setState({showRelatedFileDialog:!0})},n.toggleCancel=function(){n.setState({showRelatedFileDialog:!1})},n.state={isEditFileTagShow:!1,showRelatedFileDialog:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.direntType,n=e.direntDetail,a=e.fileTagList,r=e.relatedFiles,o=this.getDirentPostion(),i=this.getDirentPath();return"dir"===t?u.default.createElement("table",{className:"table-thead-hidden"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"35%"}),u.default.createElement("th",{width:"65%"}))),u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("th",null,(0,h.gettext)("Location")),u.default.createElement("td",null,o)),u.default.createElement("tr",null,u.default.createElement("th",null,(0,h.gettext)("Last Update")),u.default.createElement("td",null,(0,p.default)(n.mtime).format("YYYY-MM-DD"))))):u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-thead-hidden"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"35%"}),u.default.createElement("th",{width:"65%"}))),u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("th",null,(0,h.gettext)("Size")),u.default.createElement("td",null,m.Utils.bytesToSize(n.size))),u.default.createElement("tr",null,u.default.createElement("th",null,(0,h.gettext)("Location")),u.default.createElement("td",null,o)),u.default.createElement("tr",null,u.default.createElement("th",null,(0,h.gettext)("Last Update")),u.default.createElement("td",null,(0,p.default)(n.last_modified).fromNow())),u.default.createElement("tr",{className:"file-tag-container"},u.default.createElement("th",null,(0,h.gettext)("Tags")),u.default.createElement("td",null,u.default.createElement("ul",{className:"file-tag-list"},a.map(function(e){return u.default.createElement("li",{key:e.id,className:"file-tag-item"},u.default.createElement("span",{className:"file-tag",style:{backgroundColor:e.color}}),u.default.createElement("span",{className:"tag-name",title:e.name},e.name))})),u.default.createElement("i",{className:"fa fa-pencil-alt attr-action-icon",onClick:this.onEditFileTagToggle}))),u.default.createElement("tr",{className:"file-related-files"},u.default.createElement("th",null,(0,h.gettext)("Related Files")),u.default.createElement("td",null,u.default.createElement("ul",null,r.map(function(e,t){var n=h.siteRoot+"lib/"+e.repo_id+"/file"+m.Utils.encodePath(e.path);return u.default.createElement("li",{key:t},u.default.createElement("a",{href:n,target:"_blank"},e.name))})),u.default.createElement("i",{className:"fa fa-pencil-alt attr-action-icon",onClick:this.onListRelatedFileToggle}))))),this.state.showRelatedFileDialog&&u.default.createElement(v.default,null,u.default.createElement(S.default,{repoID:this.props.repoID,filePath:i,relatedFiles:r,toggleCancel:this.toggleCancel,onRelatedFileChange:this.props.onRelatedFileChange,dirent:this.props.dirent,viewMode:"list_related_file"})),this.state.isEditFileTagShow&&u.default.createElement(y.default,{repoID:this.props.repoID,fileTagList:a,filePath:i,toggleCancel:this.onEditFileTagToggle,onFileTagChanged:this.onFileTagChanged}))}}]),t}(u.default.Component);E.propTypes=C,t.default=E},299:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),d=n(1),f=a(d),p=n(523),h=a(p),m=n(206),g=a(m),y=n(2),b=n(3),v=n(4),w=n(300),S=a(w),C=n(302),E=a(C);n(303);var _={repoID:f.default.string.isRequired,direntList:f.default.array.isRequired,filetypes:f.default.array,chunkSize:f.default.number,withCredentials:f.default.bool,maxFiles:f.default.number,maxFileSize:f.default.number,testMethod:f.default.string,testChunks:f.default.number,simultaneousUploads:f.default.number,fileParameterName:f.default.string,maxFilesErrorCallback:f.default.func,maxFileSizeErrorCallback:f.default.func,minFileSizeErrorCallback:f.default.func,fileTypeErrorCallback:f.default.func,dragAndDrop:f.default.bool.isRequired,path:f.default.string.isRequired,onFileUploadSuccess:f.default.func.isRequired},D=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentWillUnmount=function(){!0===n.props.dragAndDrop&&n.resumable.disableDropOnDocument()},n.bindCallbackHandler=function(){var e=n.props,t=e.maxFilesErrorCallback,a=e.minFileSizeErrorCallback,r=e.maxFileSizeErrorCallback,o=e.fileTypeErrorCallback;t&&(n.resumable.opts.maxFilesErrorCallback=n.props.maxFilesErrorCallback),a&&(n.resumable.opts.minFileSizeErrorCallback=n.props.minFileSizeErrorCallback),r&&(n.resumable.opts.maxFileSizeErrorCallback=n.props.maxFileSizeErrorCallback),o&&(n.resumable.opts.fileTypeErrorCallback=n.props.fileTypeErrorCallback)},n.bindEventHandler=function(){n.resumable.on("chunkingComplete",n.onChunkingComplete.bind(n)),n.resumable.on("fileAdded",n.onFileAdded.bind(n)),n.resumable.on("filesAddedComplete",n.filesAddedComplete.bind(n)),n.resumable.on("fileProgress",n.onFileProgress.bind(n)),n.resumable.on("fileSuccess",n.onFileUploadSuccess.bind(n)),n.resumable.on("progress",n.onProgress.bind(n)),n.resumable.on("complete",n.onComplete.bind(n)),n.resumable.on("pause",n.onPause.bind(n)),n.resumable.on("fileRetry",n.onFileRetry.bind(n)),n.resumable.on("fileError",n.onFileError.bind(n)),n.resumable.on("error",n.onError.bind(n)),n.resumable.on("beforeCancel",n.onBeforeCancel.bind(n)),n.resumable.on("cancel",n.onCancel.bind(n)),n.resumable.on("dragstart",n.onDragStart.bind(n))},n.onChunkingComplete=function(e){if(e.relativePath===e.fileName&&y.enableResumableFileUpload){var t=n.props.repoID;b.seafileAPI.getFileUploadedBytes(t,n.props.path,e.fileName).then(function(t){var n=t.data.uploadedBytes,a=Math.floor(n/1048576);e.markChunksCompleted(a)})}},n.onFileAdded=function(e,t){var a="/"===n.props.path?"/":n.props.path+"/",r=e.fileName,o=e.relativePath,i=r===o;if(e.formData={},i)e.formData={parent_dir:a};else{var l=o.slice(0,o.lastIndexOf("/")+1);e.formData={parent_dir:a,relative_path:l}}if(i&&1===t.length){for(var s=!1,u=n.props.direntList,c=0;c<u.length;c++)if("file"===u[c].type&&u[c].name===e.fileName){s=!0;break}s?n.setState({isUploadRemindDialogShow:!0,currentResumableFile:e}):(n.setUploadFileList(n.resumable.files),n.resumable.upload())}else n.setUploadFileList(n.resumable.files),n.resumable.upload()},n.filesAddedComplete=function(e,t){},n.setUploadFileList=function(){var e=n.resumable.files.map(function(e){return n.buildCustomFileObj(e)});n.setState({isUploadProgressDialogShow:!0,uploadFileList:e})},n.buildCustomFileObj=function(e){return{uniqueIdentifier:e.uniqueIdentifier,resumableFile:e,progress:e.progress(),isSaved:1===e.progress()}},n.onFileProgress=function(e){var t=e.uniqueIdentifier,a=n.state.uploadFileList.map(function(n){return n.uniqueIdentifier===t&&(n.progress=Math.round(100*e.progress())),n});n.setState({uploadFileList:a})},n.getBitrate=function(){var e=0,t=0,a=(new Date).getTime();if(n.resumable.files.forEach(function(t){e+=t.progress()*t.size}),n.timestamp){var r=a-n.timestamp;if(r<n.bitrateInterval)return n.state.uploadBitrate;t=(e-n.loaded)*(1e3/r)*8}return n.timestamp=a,n.loaded=e,t=v.Utils.formatBitRate(t)},n.onProgress=function(){var e=Math.round(100*n.resumable.progress()),t=n.getBitrate();n.setState({totalProgress:e,uploadBitrate:t})},n.onFileUploadSuccess=function(e,t){var a=e.formData,r=(new Date).getTime()/1e3;if(t=a.replace?t:JSON.parse(t)[0],a.relative_path){var o=a.relative_path,i=o.slice(0,o.indexOf("/")),l={id:t.id,name:i,type:"dir",mtime:r};n.notifiedFolders.some(function(e){return e.name===l.name})||(n.notifiedFolders.push(l),n.props.onFileUploadSuccess(l));var s=n.state.uploadFileList.map(function(n){return n.resumableFile.uniqueIdentifier===e.uniqueIdentifier&&(n.resumableFile.fileName=t.name,n.resumableFile.relativePath=o+t.name,n.isSaved=!0),n});return void n.setState({uploadFileList:s})}if(a.replace){var u=e.fileName,c={id:t,name:u,type:"file",mtime:r};n.props.onFileUploadSuccess(c);var d=n.state.uploadFileList.map(function(t){return t.resumableFile.uniqueIdentifier===e.uniqueIdentifier&&(t.isSaved=!0),t});return void n.setState({uploadFileList:d})}var f={id:t.id,type:"file",name:t.name,size:t.size,mtime:r};n.props.onFileUploadSuccess(f);var p=n.state.uploadFileList.map(function(n){return n.resumableFile.uniqueIdentifier===e.uniqueIdentifier&&(n.resumableFile.fileName=t.name,n.resumableFile.relativePath=t.name,n.isSaved=!0),n});n.setState({uploadFileList:p})},n.onFileError=function(e,t){var a="";a=t||(0,y.gettext)("Network error");var r=n.state.uploadFileList.map(function(t){return t.resumableFile.uniqueIdentifier===e.uniqueIdentifier&&(t.resumableFile.error=a),t});n.setState({uploadFileList:r})},n.onComplete=function(){n.notifiedFolders=[],n.setState({allFilesUploaded:!0})},n.onPause=function(){},n.onError=function(e){},n.onFileRetry=function(){},n.onBeforeCancel=function(){},n.onCancel=function(){},n.setHeaders=function(e,t){if(e.formData.replace)return[];var n=t.offset,a=t.getOpt("chunkSize"),r=e.size,o=0!==n?n*a:0,i=Math.min(r,(n+1)*a)-1;return r-t.endByte<a&&!t.getOpt("forceChunkSize")&&(i=r),{Accept:"application/json; text/javascript, */*; q=0.01","Content-Disposition":'attachment; filename="'+encodeURI(e.fileName)+'"',"Content-Range":"bytes "+o+"-"+i+"/"+r}},n.setQuery=function(e){return e.formData},n.generateUniqueIdentifier=function(e){var t=e.webkitRelativePath||e.relativePath||e.fileName||e.name;return(0,g.default)(t+new Date)+t},n.onClick=function(e){e.nativeEvent.stopImmediatePropagation(),e.stopPropagation()},n.onFileUpload=function(){n.uploadInput.current.removeAttribute("webkitdirectory"),n.uploadInput.current.click();var e=n.props.repoID;b.seafileAPI.getUploadLink(e,n.props.path).then(function(e){n.resumable.opts.target=e.data})},n.onFolderUpload=function(){n.uploadInput.current.setAttribute("webkitdirectory","webkitdirectory"),n.uploadInput.current.click();var e=n.props.repoID;b.seafileAPI.getUploadLink(e,n.props.path).then(function(e){n.resumable.opts.target=e.data})},n.onDragStart=function(){var e=n.props.repoID;n.uploadInput.current.setAttribute("webkitdirectory","webkitdirectory"),b.seafileAPI.getUploadLink(e,n.props.path).then(function(e){n.resumable.opts.target=e.data})},n.onCloseUploadDialog=function(){n.resumable.files=[],n.setState({isUploadProgressDialogShow:!1,uploadFileList:[]})},n.onUploadCancel=function(e){var t=n.state.uploadFileList.filter(function(t){if(t.uniqueIdentifier!==e.uniqueIdentifier)return t;e.resumableFile.cancel(),n.resumable.removeFile(e.resumableFile.file)}),a=t.map(function(e){var t=Math.round(100*e.resumableFile.progress());return e.progress=t,e});n.setState({uploadFileList:a})},n.onCancelAllUploading=function(){var e=n.state.uploadFileList.filter(function(e){var t=e.resumableFile;if(!Math.round(1!==t.progress()))return e;t.cancel(),n.resumable.removeFile(t.file)});n.setState({uploadFileList:e})},n.onUploaderRetry=function(){},n.replaceRepetitionFile=function(){var e=n.props,t=e.repoID,a=e.path;b.seafileAPI.getUpdateLink(t,a).then(function(e){n.resumable.opts.target=e.data;var t=n.resumable.files[n.resumable.files.length-1];t.formData.replace=1,t.formData.target_file=t.formData.parent_dir+t.fileName,n.setState({isUploadRemindDialogShow:!1}),n.setUploadFileList(n.resumable.files),n.resumable.upload()})},n.uploadFile=function(){var e=n.resumable.files[n.resumable.files.length-1],t=n.buildCustomFileObj(e);n.setState({isUploadRemindDialogShow:!1,isUploadProgressDialogShow:!0,uploadFileList:[].concat(r(n.state.uploadFileList),[t])},function(){n.resumable.upload()})},n.cancelFileUpload=function(){n.resumable.files.pop(),n.setState({isUploadRemindDialogShow:!1})},n.state={uploadFileList:[],totalProgress:0,isUploadProgressDialogShow:!1,isUploadRemindDialogShow:!1,currentResumableFile:null,uploadBitrate:"0",allFilesUploaded:!1},n.uploadInput=c.default.createRef(),n.notifiedFolders=[],n.timestamp=null,n.loaded=0,n.bitrateInterval=500,n}return l(t,e),s(t,[{key:"componentDidMount",value:function(){this.resumable=new h.default({target:"",query:this.setQuery||{},fileType:this.props.filetypes,maxFiles:this.props.maxFiles,maxFileSize:this.props.maxFileSize,testMethod:this.props.testMethod||"post",testChunks:this.props.testChunks||!1,headers:this.setHeaders||{},withCredentials:this.props.withCredentials||!1,chunkSize:this.props.chunkSize,simultaneousUploads:this.props.simultaneousUploads||1,fileParameterName:this.props.fileParameterName,generateUniqueIdentifier:this.generateUniqueIdentifier,forceChunkSize:!0,maxChunkRetries:3}),this.resumable.assignBrowse(this.uploadInput.current,!0),!0===this.props.dragAndDrop&&this.resumable.enableDropOnDocument(),this.bindCallbackHandler(),this.bindEventHandler()}},{key:"render",value:function(){return c.default.createElement(u.Fragment,null,c.default.createElement("div",{className:"file-uploader-container"},c.default.createElement("div",{className:"file-uploader"},c.default.createElement("input",{className:"upload-input",type:"file",ref:this.uploadInput,onClick:this.onClick}))),this.state.isUploadRemindDialogShow&&c.default.createElement(E.default,{currentResumableFile:this.state.currentResumableFile,replaceRepetitionFile:this.replaceRepetitionFile,uploadFile:this.uploadFile,cancelFileUpload:this.cancelFileUpload}),this.state.isUploadProgressDialogShow&&c.default.createElement(S.default,{uploadFileList:this.state.uploadFileList,totalProgress:this.state.totalProgress,uploadBitrate:this.state.uploadBitrate,allFilesUploaded:this.state.allFilesUploaded,onCloseUploadDialog:this.onCloseUploadDialog,onCancelAllUploading:this.onCancelAllUploading,onUploadCancel:this.onUploadCancel}))}}]),t}(c.default.Component);D.propTypes=_,t.default=D},3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.seafileAPI=void 0;var a=n(22),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(35),i=n(2),l=new o.SeafileAPI,s=r.default.load("sfcsrftoken");l.initForSeahubUsage({siteRoot:i.siteRoot,xcsrfHeaders:s}),t.seafileAPI=l},30:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),d=n(1),f=a(d),p=n(5),h=n(3),m=n(2),g=n(4),y=n(31),b=a(y),v=n(42),w=a(v),S=n(11),C=a(S),E=n(46),_=a(E);n(48);var D={isShowFile:f.default.bool,repoID:f.default.string,onDirentItemClick:f.default.func,onRepoItemClick:f.default.func,mode:f.default.oneOf(["current_repo_and_other_repos","only_all_repos","only_current_library"])},P=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onOtherRepoToggle=function(){if(n.state.hasRequest)n.setState({isOtherRepoShow:!n.state.isOtherRepoShow});else{var e=n;h.seafileAPI.listRepos().then(function(t){for(var a=t.data.repos,r=[],o=[],i=0;i<a.length;i++)"rw"===a[i].permission&&(e.props.repoID&&a[i].repo_name===e.state.currentRepoInfo.repo_name||o.indexOf(a[i].repo_id)>-1||(r.push(a[i]),o.push(a[i].repo_id)));r=g.Utils.sortRepos(r,"name","asc"),n.setState({repoList:r,isOtherRepoShow:!n.state.isOtherRepoShow})})}},n.onCurrentRepoToggle=function(){return[n.setState({isCurrentRepoShow:!n.state.isCurrentRepoShow})]},n.onDirentItemClick=function(e,t,a){n.props.onDirentItemClick(e,t,a),n.setState({selectedRepo:e,selectedPath:t})},n.onRepoItemClick=function(e){n.props.onRepoItemClick&&n.props.onRepoItemClick(e),n.setState({selectedRepo:e,selectedPath:""})},n.onCloseSearching=function(){n.setState({isSearching:!1,isResultGot:!1,searchInfo:"",searchResults:[]}),n.inputValue="",n.timer=null,n.source=null},n.onSearchInfoChanged=function(e){var t=e.target.value.trim();if(n.setState({searchInfo:t}),n.inputValue===t)return!1;if(n.inputValue=t,0===t.length)return n.setState({isSearching:!1,searchResults:[]}),!1;if(!n.state.searchResults.length&&t.length>0&&n.setState({isSearching:!0,isResultGot:!1}),""===n.inputValue||n.getValueLength(n.inputValue)<3)return n.setState({isResultGot:!1}),!1;var a=n.props.repoID,r=n.props.isShowFile,o=n.props.mode,i="only_current_library"===o?a:"all",l={q:t,search_repo:i,search_ftypes:"all",obj_type:r?"file":"dir"};n.timer&&clearTimeout(n.timer),n.timer=setTimeout(n.getSearchResult(l),500)},n.getSearchResult=function(e){n.source&&n.cancelRequest(),n.setState({isResultGot:!1}),n.source=h.seafileAPI.getSource(),n.sendRequest(e,n.source.token)},n.sendRequest=function(e,t){h.seafileAPI.searchFiles(e,t).then(function(e){if(!e.data.total)return n.setState({searchResults:[],isResultGot:!0}),void(n.source=null);var t=n.formatResultItems(e.data.results);n.setState({searchResults:t,isResultGot:!0}),n.source=null}).catch(function(e){console.log(e)})},n.cancelRequest=function(){n.source.cancel("prev request is cancelled")},n.getValueLength=function(e){for(var t,n=0,a=0;n<e.length;n++)t=e.charCodeAt(n),10==t?a+=2:t<127?a+=1:t>=128&&t<=2047?a+=2:t>=2048&&t<=65535&&(a+=3);return a},n.formatResultItems=function(e){for(var t=[],n=e.length>10?10:e.length,a=0;a<n;a++)t[a]={},t[a].index=[a],t[a].name=e[a].name,t[a].path=e[a].fullpath,t[a].repo_id=e[a].repo_id,t[a].repo_name=e[a].repo_name,t[a].is_dir=e[a].is_dir,t[a].link_content=decodeURI(e[a].fullpath).substring(1),t[a].content=e[a].content_highlight;return t},n.onSearchedItemClick=function(e){e.type=e.is_dir?"dir":"file";var t=new b.default(e);n.props.onDirentItemClick(t,e.path,e)},n.renderSearchedView=function(){return n.getValueLength(n.inputValue)<3?"":n.state.isResultGot?n.state.isResultGot&&0===n.state.searchResults.length?c.default.createElement("div",{className:"search-result-none text-center"},(0,m.gettext)("No results matching.")):n.state.isResultGot&&n.state.searchResults.length>0?c.default.createElement(_.default,{searchResults:n.state.searchResults,onItemClick:n.onSearchedItemClick}):void 0:c.default.createElement(C.default,null)},n.renderRepoListView=function(){return c.default.createElement("div",{className:"file-chooser-container"},"current_repo_and_other_repos"===n.props.mode&&c.default.createElement(u.Fragment,null,c.default.createElement("div",{className:"list-view"},c.default.createElement("div",{className:"list-view-header"},c.default.createElement("span",{className:"item-toggle fa "+(n.state.isCurrentRepoShow?"fa-caret-down":"fa-caret-right"),onClick:n.onCurrentRepoToggle}),c.default.createElement("span",{className:"library"},(0,m.gettext)("Current Library"))),n.state.isCurrentRepoShow&&n.state.currentRepoInfo&&c.default.createElement(w.default,{initToShowChildren:!0,currentRepoInfo:n.state.currentRepoInfo,selectedRepo:n.state.selectedRepo,selectedPath:n.state.selectedPath,onRepoItemClick:n.onRepoItemClick,onDirentItemClick:n.onDirentItemClick,isShowFile:n.props.isShowFile})),c.default.createElement("div",{className:"list-view"},c.default.createElement("div",{className:"list-view-header"},c.default.createElement("span",{className:"item-toggle fa "+(n.state.isOtherRepoShow?"fa-caret-down":"fa-caret-right"),onClick:n.onOtherRepoToggle}),c.default.createElement("span",{className:"library"},(0,m.gettext)("Other Libraries"))),n.state.isOtherRepoShow&&c.default.createElement(w.default,{initToShowChildren:!1,repoList:n.state.repoList,selectedRepo:n.state.selectedRepo,selectedPath:n.state.selectedPath,onRepoItemClick:n.onRepoItemClick,onDirentItemClick:n.onDirentItemClick,isShowFile:n.props.isShowFile}))),"only_current_library"===n.props.mode&&c.default.createElement("div",{className:"list-view"},c.default.createElement("div",{className:"list-view-header"},c.default.createElement("span",{className:"item-toggle fa "+(n.state.isCurrentRepoShow?"fa-caret-down":"fa-caret-right"),onClick:n.onCurrentRepoToggle}),c.default.createElement("span",{className:"library"},(0,m.gettext)("Current Library"))),n.state.isCurrentRepoShow&&n.state.currentRepoInfo&&c.default.createElement(w.default,{initToShowChildren:!0,currentRepoInfo:n.state.currentRepoInfo,selectedRepo:n.state.selectedRepo,selectedPath:n.state.selectedPath,onRepoItemClick:n.onRepoItemClick,onDirentItemClick:n.onDirentItemClick,isShowFile:n.props.isShowFile})),"only_all_repos"===n.props.mode&&c.default.createElement("div",{className:"file-chooser-container"},c.default.createElement("div",{className:"list-view"},c.default.createElement("div",{className:"list-view-header"},c.default.createElement("span",{className:"item-toggle fa fa-caret-down"}),c.default.createElement("span",{className:"library"},(0,m.gettext)("Libraries"))),c.default.createElement(w.default,{initToShowChildren:!1,repoList:n.state.repoList,selectedRepo:n.state.selectedRepo,selectedPath:n.state.selectedPath,onRepoItemClick:n.onRepoItemClick,onDirentItemClick:n.onDirentItemClick,isShowFile:n.props.isShowFile}))))},n.state={hasRequest:!1,isCurrentRepoShow:!0,isOtherRepoShow:!1,repoList:[],currentRepoInfo:null,selectedRepo:null,selectedPath:"",isSearching:!1,isResultGot:!1,searchInfo:"",searchResults:[]},n.inputValue="",n.timer=null,n.source=null,n}return l(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.repoID){var t=this.props.repoID;h.seafileAPI.getRepoInfo(t).then(function(t){var n=new b.default(t.data);e.setState({currentRepoInfo:n,selectedRepo:n}),e.props.onRepoItemClick(n)})}else h.seafileAPI.listRepos().then(function(t){for(var n=t.data.repos,a=[],r=[],o=0;o<n.length;o++)"rw"===n[o].permission&&(r.indexOf(n[o].repo_id)>-1||(a.push(n[o]),r.push(n[o].repo_id)));a=g.Utils.sortRepos(a,"name","asc"),e.setState({repoList:a})})}},{key:"render",value:function(){var e;return!this.state.selectedRepo&&this.props.repoID?"":c.default.createElement(u.Fragment,null,m.isPro&&c.default.createElement("div",{className:"file-chooser-search-input"},c.default.createElement(p.Input,(e={className:"search-input",placeholder:(0,m.gettext)("Search...")},r(e,"className","mb-2"),r(e,"type","text"),r(e,"value",this.state.searchInfo),r(e,"onChange",this.onSearchInfoChanged),e)),0!==this.state.searchInfo.length&&c.default.createElement("span",{className:"search-control attr-action-icon fas fa-times",onClick:this.onCloseSearching})),this.state.isSearching&&c.default.createElement("div",{className:"file-chooser-search-container"},this.renderSearchedView()),!this.state.isSearching&&this.renderRepoListView())}}]),t}(c.default.Component);P.propTypes=D,t.default=P},300:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(301),h=a(p),m={uploadBitrate:d.default.string.isRequired,totalProgress:d.default.number.isRequired,uploadFileList:d.default.array.isRequired,onCloseUploadDialog:d.default.func.isRequired,onCancelAllUploading:d.default.func.isRequired,onUploadCancel:d.default.func.isRequired,allFilesUploaded:d.default.bool.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onCancelAllUploading=function(){n.props.onCancelAllUploading()},n.onMinimizeUpload=function(e){e.nativeEvent.stopImmediatePropagation(),n.setState({isMinimized:!n.state.isMinimized})},n.onCloseUpload=function(e){e.nativeEvent.stopImmediatePropagation(),n.props.onCloseUploadDialog()},n.state={isMinimized:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=(0,f.gettext)("File Upload"),n=(0,f.gettext)("File Uploading...")+" "+this.props.totalProgress+"% ("+this.props.uploadBitrate+")",a=u.default.createElement("span",{className:"sf2-icon-minus",onClick:this.onMinimizeUpload}),r=u.default.createElement(s.Fragment,null,u.default.createElement("span",{className:"sf2-icon-minus",onClick:this.onMinimizeUpload}),u.default.createElement("span",{className:"sf2-icon-x1",onClick:this.onCloseUpload})),o=this.props,i=o.totalProgress,l=o.allFilesUploaded;return u.default.createElement("div",{className:"uploader-list-view",style:{height:this.state.isMinimized?"2.25rem":"20rem"}},u.default.createElement("div",{className:"uploader-list-header"},u.default.createElement("div",{className:"title"},100===i?t:n),u.default.createElement("div",{className:"uploader-options"},100===i||l?r:a)),u.default.createElement("div",{className:"uploader-list-content"},u.default.createElement("table",{className:"table-thead-hidden"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"45%"},(0,f.gettext)("name")),u.default.createElement("th",{width:"40%"},(0,f.gettext)("progress")),u.default.createElement("th",{width:"15%"},(0,f.gettext)("state")))),u.default.createElement("tbody",null,!l&&u.default.createElement("tr",null,u.default.createElement("td",{className:"text-right",colSpan:3},u.default.createElement("span",{className:"cursor-pointer",onClick:this.onCancelAllUploading},(0,f.gettext)("Cancel All")))),this.props.uploadFileList.map(function(t,n){return u.default.createElement(h.default,{key:n,item:t,onUploadCancel:e.props.onUploadCancel})})))))}}]),t}(u.default.Component);g.propTypes=m,t.default=g},301:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p={item:d.default.object.isRequired,onUploadCancel:d.default.func.isRequired},h=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.onUploadCancel=function(e){e.preventDefault(),a.props.onUploadCancel(a.props.item)},a.formatFileSize=function(e){return"number"!==typeof e?"":e>=1e9?(e/1e9).toFixed(1)+" G":e>=1e6?(e/1e6).toFixed(1)+" M":e>=1e3?(e/1e3).toFixed(1)+" K":e.toFixed(1)+" B"},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=Math.round(100*e.resumableFile.progress()),n=e.resumableFile.error;return u.default.createElement("tr",{className:"file-upload-item"},u.default.createElement("td",{className:"upload-name"},u.default.createElement("div",{className:"ellipsis"},e.resumableFile.relativePath),u.default.createElement("div",{className:"message err-message ml-0"},n)),u.default.createElement("td",{className:"upload-progress"},u.default.createElement("span",{className:"file-size"},this.formatFileSize(e.resumableFile.size)),!e.resumableFile.error&&100!==t&&u.default.createElement("div",{className:"progress"},u.default.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:t+"%"},"aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100"}))),u.default.createElement("td",{className:"upload-operation"},!e.resumableFile.error&&u.default.createElement(s.Fragment,null,!e.isSaved&&100!==t&&u.default.createElement("a",{href:"#",onClick:this.onUploadCancel},(0,f.gettext)("cancel")),!e.isSaved&&100===t&&u.default.createElement("span",{className:"saving"},(0,f.gettext)("saving...")),e.isSaved&&u.default.createElement("span",{className:"uploaded"},(0,f.gettext)("uploaded")))))}}]),t}(u.default.Component);h.propTypes=p,t.default=h},302:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(5),h={currentResumableFile:d.default.object.isRequired,replaceRepetitionFile:d.default.func.isRequired,uploadFile:d.default.func.isRequired,cancelFileUpload:d.default.func.isRequired},m=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.toggle=function(e){e.nativeEvent.stopImmediatePropagation(),a.props.cancelFileUpload()},a.replaceRepetitionFile=function(e){e.nativeEvent.stopImmediatePropagation(),a.props.replaceRepetitionFile()},a.uploadFile=function(e){e.nativeEvent.stopImmediatePropagation(),a.props.uploadFile()},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=(0,f.gettext)("Replace file {filename}?");return e=e.replace("{filename}",'<span class="a-simaulte">'+this.props.currentResumableFile.fileName+"</span>"),u.default.createElement(p.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(p.ModalHeader,{toggle:this.toggle},u.default.createElement("div",{dangerouslySetInnerHTML:{__html:e}})),u.default.createElement(p.ModalBody,null,u.default.createElement("p",null,(0,f.gettext)("A file with the same name already exists in this folder.")),u.default.createElement("p",null,(0,f.gettext)("Replacing it will overwrite its content."))),u.default.createElement(p.ModalFooter,null,u.default.createElement(p.Button,{outline:!0,color:"primary",onClick:this.replaceRepetitionFile},(0,f.gettext)("Replace")),u.default.createElement(p.Button,{outline:!0,color:"info",onClick:this.uploadFile},(0,f.gettext)("Don't replace")),u.default.createElement(p.Button,{outline:!0,color:"danger",onClick:this.toggle},(0,f.gettext)("Cancel"))))}}]),t}(u.default.Component);m.propTypes=h,t.default=m},303:function(e,t){},304:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(10),p=a(f),h=n(172),m=a(h),g=n(305),y=a(g),b=n(307),v=a(b),w=n(2),S=n(4);n(308);var C={repoID:d.default.string.isRequired,currentPath:d.default.string.isRequired,usedRepoTags:d.default.array.isRequired,readmeMarkdown:d.default.object,draftCounts:d.default.number,updateUsedRepoTags:d.default.func.isRequired},E=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onListTaggedFiles=function(e){n.setState({currentTag:e,isListTaggedFileShow:!n.state.isListTaggedFileShow})},n.onCloseDialog=function(){n.setState({isListTaggedFileShow:!1})},n.toggleDrafts=function(){n.setState({showRepoDrafts:!n.state.showRepoDrafts})},n.toggleReadme=function(){n.setState({showReadmeDialog:!n.state.showReadmeDialog})},n.state={currentTag:null,isListTaggedFileShow:!1,showRepoDrafts:!1,showReadmeDialog:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.repoID,a=t.currentPath,r=t.usedRepoTags,o=t.readmeMarkdown,i=null!==o?w.siteRoot+"lib/"+n+"/file"+S.Utils.joinPath(a,o.name)+"?mode=edit":"",l=null!==o?a+o.name:"";return u.default.createElement("div",{className:"repo-info-bar"},r.length>0&&u.default.createElement("ul",{className:"used-tag-list"},r.map(function(t){return u.default.createElement("li",{key:t.id,className:"used-tag-item"},u.default.createElement("span",{className:"used-tag",style:{backgroundColor:t.color}}),u.default.createElement("span",{className:"used-tag-name",title:t.name},t.name),u.default.createElement("span",{className:"used-tag-files",onClick:e.onListTaggedFiles.bind(e,t)},t.fileCount>1?t.fileCount+" files":t.fileCount+" file"))})),u.default.createElement("div",{className:r.length>0&&o?"file-info-list mt-1":"file-info-list"},null!==o&&parseInt(o.size)>1&&u.default.createElement("span",{className:"file-info",onClick:this.toggleReadme},u.default.createElement("span",{className:"info-icon sf2-icon-readme"}),u.default.createElement("span",{className:"used-tag-name"},o.name)),null!==o&&parseInt(o.size)<2&&u.default.createElement("span",{className:"file-info"},u.default.createElement("span",{className:"info-icon sf2-icon-readme"}),u.default.createElement("a",{className:"used-tag-name",href:i,target:"_blank"},o.name)),this.props.draftCounts>0&&u.default.createElement("span",{className:"file-info"},u.default.createElement("span",{className:"info-icon sf2-icon-drafts"}),u.default.createElement("span",{className:"used-tag-name"},(0,w.gettext)("draft")),u.default.createElement("span",{className:"used-tag-files",onClick:this.toggleDrafts},this.props.draftCounts>1?this.props.draftCounts+" files":this.props.draftCounts+" file"))),this.state.isListTaggedFileShow&&u.default.createElement(p.default,null,u.default.createElement(m.default,{repoID:n,currentTag:this.state.currentTag,onClose:this.onCloseDialog,toggleCancel:this.onListTaggedFiles,updateUsedRepoTags:this.props.updateUsedRepoTags})),this.state.showRepoDrafts&&u.default.createElement(p.default,null,u.default.createElement(y.default,{toggle:this.toggleDrafts,repoID:this.props.repoID})),this.state.showReadmeDialog&&u.default.createElement(p.default,null,u.default.createElement(v.default,{toggleCancel:this.toggleReadme,repoID:n,filePath:l,href:i,fileName:o.name})))}}]),t}(u.default.Component);E.propTypes=C,t.default=E},305:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(3),m=n(6),g=a(m),y=n(4),b=n(306),v=a(b),w={repoID:d.default.string.isRequired,toggle:d.default.func.isRequired},S=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggle=function(){n.props.toggle()},n.state={drafts:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;h.seafileAPI.listRepoDrafts(this.props.repoID).then(function(t){var n=t.data.drafts.map(function(e){return new v.default(e)});e.setState({drafts:n})})}},{key:"render",value:function(){this.state.drafts;return u.default.createElement(f.Modal,{isOpen:!0},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("Drafts")),u.default.createElement(f.ModalBody,{className:"dialog-list-container"},u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"50%",className:"ellipsis"},(0,p.gettext)("Name")),u.default.createElement("th",{width:"25%"},(0,p.gettext)("Owner")),u.default.createElement("th",{width:"25%"},(0,p.gettext)("Last Update")))),u.default.createElement("tbody",null,this.state.drafts.map(function(e){var t=p.siteRoot+"drafts/"+e.id+"/";return u.default.createElement("tr",{key:e.id},u.default.createElement("td",{className:"name"},u.default.createElement("a",{href:t,target:"_blank"},y.Utils.getFileName(e.draftFilePath))),u.default.createElement("td",null,e.ownerNickname),u.default.createElement("td",null,(0,g.default)(e.createdStr).fromNow()))})))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Close"))))}}]),t}(u.default.Component);S.propTypes=w,t.default=S},306:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function e(t){a(this,e),this.created=t.created_at,this.createdStr=(0,o.default)(new Date(t.created_at).getTime()).format("YYYY-MM-DD HH:mm"),this.id=t.id,this.ownerNickname=t.owner_nickname,this.originRepoID=t.origin_repo_id,this.draftFilePath=t.draft_file_path};t.default=i},307:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(115),h=a(p),m=n(11),g=a(m),y=n(3),b=n(2),v={repoID:d.default.string.isRequired,filePath:d.default.string.isRequired,fileName:d.default.string.isRequired,href:d.default.string,toggleCancel:d.default.func.isRequired},w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={readmeContent:null,isLoading:!0},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;y.seafileAPI.getFileDownloadLink(this.props.repoID,this.props.filePath).then(function(t){y.seafileAPI.getFileContent(t.data).then(function(t){e.setState({readmeContent:t.data,isLoading:!1})})})}},{key:"render",value:function(){return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.props.toggleCancel,className:"readme-dialog",size:"lg"},u.default.createElement(f.ModalHeader,null,this.props.fileName,u.default.createElement("a",{className:"readme-dialog-edit",href:this.props.href,target:"_blank"},u.default.createElement("i",{className:"fa fa-pencil-alt"}))),u.default.createElement(f.ModalBody,null,this.state.isLoading?u.default.createElement(g.default,null):u.default.createElement(h.default,{markdownContent:this.state.readmeContent,showTOC:!1})),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.props.toggleCancel},(0,b.gettext)("Close"))))}}]),t}(u.default.Component);w.propTypes=v,t.default=w},308:function(e,t){},309:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(3);n(310);var m={repoID:d.default.string.isRequired,onLibDecryptDialog:d.default.func.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSubmit=function(e){var t=n.props.repoID,a=n.state.password;h.seafileAPI.setRepoDecryptPassword(t,a).then(function(e){n.props.onLibDecryptDialog()}).catch(function(e){n.setState({showError:!0})}),e.preventDefault()},n.handleKeyPress=function(e){"Enter"==e.key&&n.handleSubmit(e)},n.handleChange=function(e){n.setState({password:e.target.value,showError:!1})},n.toggle=function(){window.location.href=p.siteRoot},n.state={password:"",showError:!1},n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(f.Modal,{isOpen:!0},u.default.createElement(f.ModalBody,null,u.default.createElement("button",{type:"button",className:"close",onClick:this.toggle},u.default.createElement("span",{"aria-hidden":"true"},"\xd7")),u.default.createElement(f.Form,{className:"lib-decrypt-form text-center"},u.default.createElement("img",{src:p.mediaUrl+"img/lock.png",alt:"","aria-hidden":"true"}),u.default.createElement("p",{className:"intro"},(0,p.gettext)("This library is password protected")),this.state.showError&&u.default.createElement("p",{className:"error"},(0,p.gettext)("Wrong password")),u.default.createElement("input",{type:"password",name:"password",className:"form-control password-input",autoComplete:"off",onKeyPress:this.handleKeyPress,placeholder:(0,p.gettext)("Password"),onChange:this.handleChange}),u.default.createElement("button",{type:"submit",className:"btn btn-primary submit",onClick:this.handleSubmit},(0,p.gettext)("Submit")),u.default.createElement("p",{className:"tip"},"* ",(0,p.gettext)("The password will be kept in the server for only 1 hour.")))))}}]),t}(u.default.Component);g.propTypes=m,t.default=g},31:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=function e(t){a(this,e),this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.permission=t.permission,this.size=r.Utils.bytesToSize(t.size),this.file_count=t.file_count,this.owner_name=t.owner_name,this.owner_email=t.owner_email,this.owner_contact_email=t.owner_contact_email,this.is_admin=t.is_admin,this.is_virtual=t.is_virtual,this.no_quota=t.no_quota,this.has_been_shared_out=t.has_been_shared_out,this.encrypted=t.encrypted,this.lib_need_decrypt=t.lib_need_decrypt};t.default=o},310:function(e,t){},312:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){a(this,e),this.id=t.id,this.name=t.name,this.owner=t.owner,this.admins=t.admins||[],this.avatar_url=t.avatar_url,this.created_at=t.created_at,this.parent_group_id=t.parent_group_id,this.wiki_enabled=t.wiki_enabled,this.repos=t.repos||[]};t.default=r},313:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h={libraryType:d.default.string.isRequired,onCreateRepo:d.default.func.isRequired,onCreateToggle:d.default.func.isRequired},m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleRepoNameChange=function(e){n.setState({repoName:e.target.value})},n.handlePassword1Change=function(e){n.setState({password1:e.target.value})},n.handlePassword2Change=function(e){n.setState({password2:e.target.value})},n.handleSubmit=function(){if(n.validateInputParams()){var e=n.state.repoName.trim(),t=n.state.encrypt?n.state.password1:"",a=n.state.permission,r=n.createRepo(e,t,a);n.props.onCreateRepo(r)}},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.toggle=function(){n.props.onCreateToggle()},n.onPermissionChange=function(e){var t=e.target.value;n.setState({permission:t})},n.onEncrypted=function(e){var t=e.target.checked;n.setState({encrypt:t,disabled:!t})},n.createRepo=function(e,t,a){var r=n.props.libraryType,o=!!t,i=null;return"mine"!==r&&"public"!==r||(i={id:null,name:e,desc:"",encrypted:o,passwd:t,passwd1:t,passwd2:t,mtime:0,mtime_relative:"",owner:"-",owner_nickname:"-",permission:"rw",storage_name:"-"}),"group"===r&&(i={repo_name:e,password:t,permission:a}),i},n.state={repoName:"",disabled:!0,encrypt:!1,password1:"",password2:"",errMessage:"",permission:"rw"},n.newInput=u.default.createRef(),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.newInput.focus()}},{key:"validateInputParams",value:function(){var e="",t=this.state.repoName.trim();if(!t.length)return e=(0,p.gettext)("Name is required"),this.setState({errMessage:e}),!1;if(t.indexOf("/")>-1)return e=(0,p.gettext)("Name should not include '/'."),this.setState({errMessage:e}),!1;if(this.state.encrypt){var n=this.state.password1.trim(),a=this.state.password2.trim();if(!n.length)return e=(0,p.gettext)("Please enter password"),this.setState({errMessage:e}),!1;if(!a.length)return e=(0,p.gettext)("Please enter the password again"),this.setState({errMessage:e}),!1;if(n.length<8)return e=(0,p.gettext)("Password is too short"),this.setState({errMessage:e}),!1;if(n!==a)return e=(0,p.gettext)("Passwords don't match"),this.setState({errMessage:e}),!1}return!0}},{key:"render",value:function(){var e=this;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("New Library")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,{for:"repoName"},(0,p.gettext)("Name")),u.default.createElement(f.Input,{id:"repoName",onKeyPress:this.handleKeyPress,innerRef:function(t){e.newInput=t},value:this.state.repoName,onChange:this.handleRepoNameChange})),"group"===this.props.libraryType&&u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,{for:"exampleSelect"},(0,p.gettext)("Permission")),u.default.createElement(f.Input,{type:"select",name:"select",id:"exampleSelect",onChange:this.onPermissionChange,value:this.state.permission},u.default.createElement("option",{value:"rw"},(0,p.gettext)("Read-Write")),u.default.createElement("option",{value:"r"},(0,p.gettext)("Read-Only")))),p.enableEncryptedLibrary&&u.default.createElement("div",null,u.default.createElement(f.FormGroup,{check:!0},u.default.createElement(f.Input,{type:"checkbox",id:"encrypt",onChange:this.onEncrypted}),u.default.createElement(f.Label,{for:"encrypt"},(0,p.gettext)("Encrypt"))),u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,{for:"passwd1",className:"font-weight-bold"},(0,p.gettext)("Password")," "),u.default.createElement("span",{className:"tip"},(0,p.gettext)("(at least 8 characters)")),u.default.createElement(f.Input,{id:"passwd1",type:"password",disabled:this.state.disabled,value:this.state.password1,onChange:this.handlePassword1Change})),u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,{for:"passwd2",className:"font-weight-bold"},(0,p.gettext)("Password again")),u.default.createElement(f.Input,{id:"passwd2",type:"password",disabled:this.state.disabled,value:this.state.password2,onChange:this.handlePassword2Change})))),this.state.errMessage&&u.default.createElement(f.Alert,{color:"danger"},this.state.errMessage)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);m.propTypes=h,t.default=m},314:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(6),p=a(f),h=n(4),m=n(2);n(98);var g=n(3),y={currentRepo:d.default.object.isRequired,closeDetails:d.default.func.isRequired},b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getFileCounts=function(e){g.seafileAPI.getRepoInfo(e.repo_id).then(function(e){n.setState({fileCount:e.data.file_count})})},n.state={fileCount:0},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.currentRepo;this.getFileCounts(e)}},{key:"componentWillReceiveProps",value:function(e){e.currentRepo.repo_id!==this.props.currentRepo.repo_id&&this.getFileCounts(e.currentRepo)}},{key:"render",value:function(){var e=this.props.currentRepo,t=h.Utils.getLibIconUrl(e),n=h.Utils.getLibIconUrl(e,!0);return u.default.createElement("div",{className:"detail-container"},u.default.createElement("div",{className:"detail-header"},u.default.createElement("div",{className:"detail-control sf2-icon-x1",onClick:this.props.closeDetails}),u.default.createElement("div",{className:"detail-title dirent-title"},u.default.createElement("img",{src:t,width:"24",height:"24",alt:""}),"  ",u.default.createElement("span",{className:"name ellipsis",title:e.repo_name},e.repo_name))),u.default.createElement("div",{className:"detail-body dirent-info"},u.default.createElement("div",{className:"img"},u.default.createElement("img",{src:n,height:"96",alt:""})),u.default.createElement("div",{className:"dirent-table-container"},u.default.createElement("table",{className:"table-thead-hidden"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"35%"}),u.default.createElement("th",{width:"65%"}))),u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("th",null,(0,m.gettext)("Files")),u.default.createElement("td",null,this.state.fileCount)),u.default.createElement("tr",null,u.default.createElement("th",null,(0,m.gettext)("Size")),u.default.createElement("td",null,e.size)),u.default.createElement("tr",null,u.default.createElement("th",null,(0,m.gettext)("Last Update")),u.default.createElement("td",null,(0,p.default)(e.last_modified).fromNow())))))))}}]),t}(u.default.Component);b.propTypes=y,t.default=b},315:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(5),p=n(2),h=n(23),m=a(h),g={itemName:d.default.string.isRequired,toggleDialog:d.default.func.isRequired,submit:d.default.func.isRequired},y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectChange=function(e){n.setState({selectedOption:e}),n.options=[]},n.submit=function(){var e=n.state.selectedOption;n.props.submit(e)},n.state={selectedOption:null,errorMsg:[],sharedItems:[]},n.options=[],n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.itemName,t='<span class="op-target" title='+e+">"+e+"</span>",n=(0,p.gettext)("Transfer Library {library_name} To"),a=n.replace("{library_name}",t);return u.default.createElement(f.Modal,{isOpen:!0,centered:!0},u.default.createElement(f.ModalHeader,{toggle:this.props.toggleDialog},u.default.createElement("div",{dangerouslySetInnerHTML:{__html:a}})),u.default.createElement(f.ModalBody,null,u.default.createElement(m.default,{ref:"userSelect",isMulti:!1,className:"reviewer-select",placeholder:(0,p.gettext)("Please enter 1 or more character"),onSelectChange:this.handleSelectChange})),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.props.toggleDialog},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.submit},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);y.propTypes=g,t.default=y},316:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(4),h=n(1215),m=a(h),g=n(7),y=a(g),b={libraryType:d.default.string,currentGroup:d.default.object,isShowTableThread:d.default.bool,sortBy:d.default.string,sortOrder:d.default.string,sortItems:d.default.func,repoList:d.default.array.isRequired,onItemUnshare:d.default.func.isRequired,onItemDelete:d.default.func.isRequired,onItemDetails:d.default.func,onItemRename:d.default.func},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.sortByName=function(e){e.preventDefault();var t="asc"==n.props.sortOrder?"desc":"asc";n.props.sortItems("name",t)},n.sortByTime=function(e){e.preventDefault();var t="asc"==n.props.sortOrder?"desc":"asc";n.props.sortItems("time",t)},n.getSortMetaData=function(){return{sortByName:"name"==n.props.sortBy,sortByTime:"time"==n.props.sortBy,sortIcon:"asc"==n.props.sortOrder?u.default.createElement("span",{className:"fas fa-caret-up"}):u.default.createElement("span",{className:"fas fa-caret-down"})}},n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.onItemRename=function(e,t){if(n.props.repoList.some(function(e){return e.name===t})){var a=(0,f.gettext)('The name "{name}" is already taken. Please choose a different name.');return a=a.replace("{name}",p.Utils.HTMLescape(t)),y.default.danger(a),!1}n.props.onItemRename(e,t)},n.renderRepoListView=function(){return u.default.createElement(s.Fragment,null,n.props.repoList.map(function(e){return u.default.createElement(m.default,{key:e.repo_id,repo:e,libraryType:n.props.libraryType,currentGroup:n.props.currentGroup,isItemFreezed:n.state.isItemFreezed,onFreezedItem:n.onFreezedItem,onUnfreezedItem:n.onUnfreezedItem,onItemUnshare:n.props.onItemUnshare,onItemDelete:n.props.onItemDelete,onItemDetails:n.props.onItemDetails,onItemRename:n.props.onItemRename})}))},n.renderPCUI=function(){var e=void 0===n.props.isShowTableThread||n.props.isShowTableThread,t=n.getSortMetaData(),a=t.sortByName,r=t.sortByTime,o=t.sortIcon;return u.default.createElement("table",{className:e?"":"table-thead-hidden"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"4%"}),u.default.createElement("th",{width:"4%"},u.default.createElement("span",{className:"sr-only"},(0,f.gettext)("Library Type"))),u.default.createElement("th",{width:"36%"},u.default.createElement("a",{className:"d-block table-sort-op",href:"#",onClick:n.sortByName},(0,f.gettext)("Name")," ",a&&o)),u.default.createElement("th",{width:"12%"},u.default.createElement("span",{className:"sr-only"},(0,f.gettext)("Actions"))),u.default.createElement("th",{width:"14%"},(0,f.gettext)("Size")),u.default.createElement("th",{width:"14%"},u.default.createElement("a",{className:"d-block table-sort-op",href:"#",onClick:n.sortByTime},(0,f.gettext)("Last Update")," ",r&&o)),u.default.createElement("th",{width:"16%"},(0,f.gettext)("Owner")))),u.default.createElement("tbody",null,n.renderRepoListView()))},n.renderMobileUI=function(){var e=void 0===n.props.isShowTableThread||n.props.isShowTableThread,t=n.getSortMetaData(),a=t.sortByName,r=t.sortByTime,o=t.sortIcon;return u.default.createElement("table",{className:e?"":"table-thead-hidden"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"18%"},u.default.createElement("span",{className:"sr-only"},(0,f.gettext)("Library Type"))),u.default.createElement("th",{width:"68%"},(0,f.gettext)("Sort:"),u.default.createElement("a",{className:"table-sort-op",href:"#",onClick:n.sortByName},(0,f.gettext)("name")," ",a&&o),u.default.createElement("a",{className:"table-sort-op",href:"#",onClick:n.sortByTime},(0,f.gettext)("last update")," ",r&&o)),u.default.createElement("th",{width:"14%"},u.default.createElement("span",{className:"sr-only"},(0,f.gettext)("Actions"))))),u.default.createElement("tbody",null,n.renderRepoListView()))},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){return window.innerWidth>=768?this.renderPCUI():this.renderMobileUI()}}]),t}(u.default.Component);v.propTypes=b,t.default=v},317:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(32),h=a(p),m={isTextMode:d.default.bool.isRequired,isEditIconShow:d.default.bool.isRequired,roles:d.default.array.isRequired,currentRole:d.default.string.isRequired,onRoleChanged:d.default.func.isRequired,toggleItemFreezed:d.default.func},g=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.translateRole=function(e){return"Admin"===e?(0,f.gettext)("Admin"):"Member"===e?(0,f.gettext)("Member"):void 0},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(h.default,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.roles,currentOption:this.props.currentRole,onOptionChanged:this.props.onRoleChanged,translateOption:this.translateRole,toggleItemFreezed:this.props.toggleItemFreezed})}}]),t}(u.default.Component);g.propTypes=m,t.default=g},32:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(37),h=a(p);n(38);var m={isTextMode:d.default.bool.isRequired,isEditIconShow:d.default.bool.isRequired,options:d.default.array.isRequired,currentOption:d.default.string.isRequired,translateOption:d.default.func.isRequired,translateExplanation:d.default.func,onOptionChanged:d.default.func.isRequired,toggleItemFreezed:d.default.func},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOptions=function(){n.options=[];for(var e=n.props.options,t=0,a=e.length;t<a;t++){var r={};r.value=e[t],r.label=u.default.createElement("div",null,n.props.translateOption(e[t]),n.props.translateExplanation&&u.default.createElement("div",{className:"permission-editor-explanation"},n.props.translateExplanation(e[t]))),n.options.push(r)}},n.onEditPermission=function(e){e.nativeEvent.stopImmediatePropagation(),n.setState({isEditing:!0}),n.props.toggleItemFreezed&&n.props.toggleItemFreezed(!0)},n.onOptionChanged=function(e){var t=e.value;t!==n.props.currentOption&&n.props.onOptionChanged(t),n.setState({isEditing:!1}),n.props.toggleItemFreezed&&n.props.toggleItemFreezed(!1)},n.onSelectHandler=function(e){e.nativeEvent.stopImmediatePropagation()},n.onHideSelect=function(){n.setState({isEditing:!1}),n.props.toggleItemFreezed&&n.props.toggleItemFreezed(!1)},n.state={isEditing:!1},n.options=[],n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onHideSelect),this.setOptions()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onHideSelect)}},{key:"render",value:function(){var e=this.props,t=e.currentOption,n=e.isTextMode;return u.default.createElement("div",{className:"permission-editor",onClick:this.onSelectHandler},(!n||this.state.isEditing)&&u.default.createElement(h.default,{options:this.options,className:"permission-editor-select",classNamePrefix:"permission-editor",placeholder:this.props.translateOption(t),onChange:this.onOptionChanged,captureMenuScroll:!1}),n&&!this.state.isEditing&&u.default.createElement("div",null,this.props.translateOption(t),this.props.isEditIconShow&&u.default.createElement("span",{title:(0,f.gettext)("Edit"),className:"fa fa-pencil-alt attr-action-icon",onClick:this.onEditPermission})))}}]),t}(u.default.Component);g.propTypes=m,t.default=g},38:function(e,t){},4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;var a=n(2),r=n(13),o=t.Utils={keyCodes:{esc:27,space:32,tab:9,up:38,down:40},bytesToSize:function(e){if("undefined"==typeof e)return" ";if(e<0)return"--";var t=["bytes","KB","MB","GB","TB","PB"];if(0===e)return e+" "+t[0];var n=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return 0===n?e+" "+t[n]:(e/Math.pow(1e3,n)).toFixed(1)+" "+t[n]},isHiDPI:function(){return(window.devicePixelRatio?window.devicePixelRatio:1)>1},FILEEXT_ICON_MAP:{md:"txt.png",txt:"txt.png",pdf:"pdf.png",doc:"word.png",docx:"word.png",odt:"word.png",fodt:"word.png",ppt:"ppt.png",pptx:"ppt.png",odp:"ppt.png",fodp:"ppt.png",xls:"excel.png",xlsx:"excel.png",ods:"excel.png",fods:"excel.png",mp4:"video.png",ogv:"video.png",webm:"video.png",mov:"video.png",flv:"video.png",wmv:"video.png",rmvb:"video.png",mp3:"music.png",oga:"music.png",ogg:"music.png",flac:"music.png",aac:"music.png",ac3:"music.png",wma:"music.png",jpg:"pic.png",jpeg:"pic.png",png:"pic.png",svg:"pic.png",gif:"pic.png",bmp:"pic.png",ico:"pic.png",default:"file.png"},imageCheck:function(e){return-1!=e.lastIndexOf(".")&&-1!=["gif","jpeg","jpg","png","ico","bmp"].indexOf(e.substr(e.lastIndexOf(".")+1).toLowerCase())},videoCheck:function(e){return-1!=e.lastIndexOf(".")&&-1!=["mp4","ogv","webm","mov"].indexOf(e.substr(e.lastIndexOf(".")+1).toLowerCase())},encodePath:function(e){if(!e)return"";for(var t=e.split("/"),n=[],a=0,r=t.length;a<r;a++)n.push(encodeURIComponent(t[a]));return n.join("/")},HTMLescape:function(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML},generateDialogTitle:function(e,t){var n=this.HTMLescape(t),a='<span class="op-target ellipsis ellipsis-op-target" title='+n+">"+n+"</span>";return e.replace("{placeholder}",a)},getFileName:function(e){var t=e.lastIndexOf("/");return e.slice(t+1)},getPaths:function(e){for(var t=e.split("/").slice(1),n=[];t.length;)n.push("/"+t.join("/")),t.pop();return n.reverse()},getFolderName:function(e){return"/"===e?e:(e="/"!==e[e.length-1]?e:e.slice(0,e.length-2),e.slice(e.lastIndexOf("/")+1))},getDirName:function(e){var t=e.slice(0,e.lastIndexOf("/"));return""===t?"/":t},isChildPath:function(e,t){return this.getDirName(e)===t},isAncestorPath:function(e,t){return t.indexOf(e)>-1},renameAncestorPath:function(e,t,n){return e.replace(t,n)},joinPath:function(e,t){return"/"===e[e.length-1]?e+t:e+"/"+t},isSupportUploadFolder:function(){return-1!=navigator.userAgent.indexOf("Firefox")||navigator.userAgent.indexOf("Chrome")>-1},getDefaultLibIconUrl:function(e){var t=o.isHiDPI()?48:24;t=e?256:t;return a.mediaUrl+"img/lib/"+t+"/lib.png"},getLibIconUrl:function(e,t){var n=e.permission||e.share_permission,r=o.isHiDPI()?48:24;r=t?256:r;var i="lib.png";return e.encrypted&&(i="lib-encrypted.png"),"r"!==n&&"perview"!==n||(i="lib-readonly.png"),a.mediaUrl+"img/lib/"+r+"/"+i},getDirentIcon:function(e,t){var n=this.isHiDPI()?48:24;if(n=t?192:n,e.isDir()){var a=!1;return!e.permission||"r"!==e.permission&&"preview"!==e.permission||(a=!0),this.getFolderIconUrl(a,n)}return this.getFileIconUrl(e.name,n)},getFolderIconUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];return t||(t=o.isHiDPI()?48:24),t=t>24?192:24,a.mediaUrl+"img/folder"+(e?"-read-only-":"-")+t+".png"},getFileIconUrl:function(e,t){t||(t=o.isHiDPI()?48:24),t=t>24?192:24;var n="";return-1==e.lastIndexOf(".")?a.mediaUrl+"img/file/"+t+"/"+this.FILEEXT_ICON_MAP.default:(n=e.substr(e.lastIndexOf(".")+1).toLowerCase(),this.FILEEXT_ICON_MAP[n]?a.mediaUrl+"img/file/"+t+"/"+this.FILEEXT_ICON_MAP[n]:a.mediaUrl+"img/file/"+t+"/"+this.FILEEXT_ICON_MAP.default)},getLibIconTitle:function(e){var t,n=e.permission||e.share_permission;if(e.encrypted)t=(0,a.gettext)("Encrypted library");else if(e.is_admin)t=(0,a.gettext)("Admin access");else switch(n){case"rw":t=(0,a.gettext)("Read-Write library");break;case"r":t=(0,a.gettext)("Read-Only library");break;case"cloud-edit":t=(0,a.gettext)("Preview-Edit-on-Cloud library");break;case"preview":t=(0,a.gettext)("Preview-on-Cloud library")}return t},getFolderIconTitle:function(e){var t;switch(e.permission){case"rw":t=(0,a.gettext)("Read-Write folder");break;case"r":t=(0,a.gettext)("Read-Only folder");break;case"cloud-edit":t=(0,a.gettext)("Preview-Edit-on-Cloud folder");break;case"preview":t=(0,a.gettext)("Preview-on-Cloud folder")}return t},sharePerms:function(e){var t;switch(e){case"rw":t=(0,a.gettext)("Read-Write");break;case"r":t=(0,a.gettext)("Read-Only");break;case"admin":t=(0,a.gettext)("Admin");break;case"cloud-edit":t=(0,a.gettext)("Preview-Edit-on-Cloud");break;case"preview":t=(0,a.gettext)("Preview-on-Cloud")}return t},sharePermsExplanation:function(e){var t;switch(e){case"rw":t=(0,a.gettext)("User can read, write, upload, download and sync files.");break;case"r":t=(0,a.gettext)("User can read, download and sync files.");break;case"admin":t=(0,a.gettext)("Besides Write permission, user can also share the library.");break;case"cloud-edit":t=(0,a.gettext)("Same as Preview on cloud. But user can also edit files online via browser.");break;case"preview":t=(0,a.gettext)("User can only view files online via browser. Files can't be downloaded.")}return t},formatSize:function(e){var t=e.bytes,n=e.precision||0;return t>=0&&t<1e3?t+" B":t>=1e3&&t<1e6?(t/1e3).toFixed(n)+" KB":t>=1e6&&t<1e9?(t/1e6).toFixed(n)+" MB":t>=1e9&&t<1e12?(t/1e9).toFixed(n)+" GB":t>=1e12?(t/1e12).toFixed(n)+" TB":t+" B"},formatBitRate:function(e){var t;return"number"!==typeof e?"":(t=e/8,t>=1e9?(t/1e9).toFixed(2)+" GB/s":t>=1e6?(t/1e6).toFixed(2)+" MB/s":t>=1e3?(t/1e3).toFixed(2)+" kB/s":t.toFixed(2)+" B/s")},isMarkdownFile:function(e){var t=e.lastIndexOf(".");if(-1===t)return!1;var n=e.substring(t).toLowerCase();return".md"===n||".markdown"===n},isInternalMarkdownLink:function(e,t){return new RegExp(a.serviceURL+"/lib/"+t+".*.md$").test(e)},isInternalDirLink:function(e,t){return new RegExp(a.serviceURL+"/library/"+t+".*").test(e)},getPathFromInternalMarkdownLink:function(e,t){var n=new RegExp(a.serviceURL+"/lib/"+t+"/file(.*.md)"),r=n.exec(e);return decodeURIComponent(r[1])},getPathFromInternalDirLink:function(e,t){var n=new RegExp(a.serviceURL+"/library/"+t+"(/.*)"),r=n.exec(e),o=decodeURIComponent(r[1]);return o=o.slice(1),o=o.slice(o.indexOf("/"))},isWikiInternalMarkdownLink:function(e,t){return t=encodeURIComponent(t),new RegExp(a.serviceURL+"/wikis/"+t+".*.md$").test(e)},isWikiInternalDirLink:function(e,t){return t=encodeURIComponent(t),new RegExp(a.serviceURL+"/wikis/"+t+".*").test(e)},getPathFromWikiInternalMarkdownLink:function(e,t){t=encodeURIComponent(t);var n=new RegExp(a.serviceURL+"/wikis/"+t+"(.*.md)"),r=n.exec(e),o=r[1];try{o=decodeURIComponent(o)}catch(e){o=o.replace(/%/g,"%25"),o=decodeURIComponent(o)}return o},getPathFromWikiInternalDirLink:function(e,t){t=encodeURIComponent(t);var n=new RegExp(a.serviceURL+"/wikis/"+t+"(/.*)"),r=n.exec(e),o=r[1];try{o=decodeURIComponent(o)}catch(e){o=o.replace(/%/g,"%25"),o=decodeURIComponent(o)}return o},compareTwoWord:function(e,t){var n,a,o=e.charCodeAt(0),i=t.charCodeAt(0);return 19968<o&&o<40869&&19968<i&&i<40869?(n=r.strChineseFirstPY.charAt(o-19968).toLowerCase(),a=r.strChineseFirstPY.charAt(i-19968).toLowerCase(),n>=a?1:-1):19968<o&&o<40869&&!(19968<i&&i<40869)?1:!(19968<o&&o<40869)&&19968<i&&i<40869?-1:(n=e.toLowerCase(),a=t.toLowerCase(),this.compareStrWithNumbersIn(n,a))},compareStrWithNumbersIn:function(e,t){var n,a,r,o=/\d+|\D+/g,i=/\d/,l=e.match(o),s=t.match(o),u=Math.min(l.length,s.length);if(l&&s&&(n=i.test(l[0]))==i.test(s[0]))for(var c=0;c<u;c++){if(a=l[c],r=s[c],n&&(a=parseInt(a,10),r=parseInt(r,10)),a!=r)return a<r?-1:1;n=!n}return(e>=t)-(e<=t)},sortRepos:function(e,t,n){var a=this,r=void 0;switch(t+"-"+n){case"name-asc":r=function(e,t){return e.repo_name?t.repo_name?a.compareTwoWord(e.repo_name,t.repo_name):-1:1};break;case"name-desc":r=function(e,t){return e.repo_name?t.repo_name?-a.compareTwoWord(e.repo_name,t.repo_name):1:-1};break;case"time-asc":r=function(e,t){return e.last_modified<t.last_modified?-1:1};break;case"time-desc":r=function(e,t){return e.last_modified<t.last_modified?1:-1}}return e.sort(r),e},sortDirents:function(e,t,n){var a=this,r=void 0;switch(t+"-"+n){case"name-asc":r=function(e,t){return a.compareTwoWord(e.name,t.name)};break;case"name-desc":r=function(e,t){return-a.compareTwoWord(e.name,t.name)};break;case"time-asc":r=function(e,t){return e.mtime<t.mtime?-1:1};break;case"time-desc":r=function(e,t){return e.mtime<t.mtime?1:-1}}return e.sort(function(e,t){return"dir"==e.type&&"file"==t.type?-1:"file"==e.type&&"dir"==t.type?1:r(e,t)}),e},changeMarkdownNodes:function(e,t){return e.map(function(e){t(e),e.nodes&&e.nodes.length>0&&o.changeMarkdownNodes(e.nodes,t)}),e},chooseLanguage:function(e){var t=void 0;switch(e){case"py":t="python";break;case"js":t="javascript";break;case"c":t="text/x-csrc";break;case"cpp":t="text/x-c++src";break;case"java":t="text/x-java";break;case"cs":t="text/x-csharp";break;case"mdf":t="text/x-sql";break;case"html":t="htmlmixed";break;default:t=e}return t},DARK_COLOR_MAP:{red:"#D11507",orange:"#FF8C00",yellow:"#EDEF00",green:"#006400",cyan:"#00E0E1",blue:"#2510A3",indigo:"#350C56",purple:"#551054",pink:"#E3A5B0",azure:"#C4D0D0",lime:"#00E100",teal:"#006A6B",gray:"#545454","#FFA8A8":"#E49090","#FFA94D":"#E39136","#FFD43B":"#E0B815","#A0EC50":"#83CF32","#A9E34B":"#8DC72E","#63E6BE":"#43CAA4","#4FD2C9":"#2DB9B0","#72C3FC":"#57ABE3","#91A7FF":"#7A91E7","#E599F7":"#CC82DE","#B197FC":"#9B82E5","#F783AC":"#DF6D97","#CED4DA":"#A8ADB2"},getDarkColor:function(e){return this.DARK_COLOR_MAP[e]}}},40:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){a(this,e),this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.path=t.path,this.obj_name=t.obj_name,this.is_dir=t.is_dir,this.permissions=t.permissions,this.username=t.username,this.is_expired=t.is_expired,this.expire_date=t.expire_date,this.token=t.token,this.link=t.link,this.view_cnt=t.view_cnt,this.ctime=t.ctime};t.default=r},41:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){a(this,e),this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.path=t.path,this.link=t.link,this.obj_name=t.obj_name,this.username=t.username,this.ctime=t.ctime,this.token=t.token,this.view_cnt=t.view_cnt};t.default=r},42:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(43),p=a(f),h={currentRepoInfo:d.default.object,isShowFile:d.default.bool,repo:d.default.object,repoList:d.default.array,selectedRepo:d.default.object,initToShowChildren:d.default.bool.isRequired,selectedPath:d.default.string,onDirentItemClick:d.default.func.isRequired,onRepoItemClick:d.default.func.isRequired},m=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.currentRepoInfo,a=t.repoList;return n&&(a=[],a.push(n)),u.default.createElement("ul",{className:"list-view-content file-chooser-item"},a.length>0&&a.map(function(t,n){return u.default.createElement(p.default,{key:n,repo:t,initToShowChildren:e.props.initToShowChildren,selectedRepo:e.props.selectedRepo,selectedPath:e.props.selectedPath,onRepoItemClick:e.props.onRepoItemClick,onDirentItemClick:e.props.onDirentItemClick,isShowFile:e.props.isShowFile})}))}}]),t}(u.default.Component);m.propTypes=h,t.default=m},43:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(44),p=a(f),h={isShowFile:d.default.bool,selectedPath:d.default.string,selectedRepo:d.default.object,repo:d.default.object.isRequired,initToShowChildren:d.default.bool.isRequired,onDirentItemClick:d.default.func.isRequired,onRepoItemClick:d.default.func.isRequired},m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onToggleClick=function(){n.setState({isShowChildren:!n.state.isShowChildren})},n.onDirentItemClick=function(e,t){var a=n.props.repo;n.props.onDirentItemClick(a,e,t)},n.onRepoItemClick=function(){n.isCurrentRepo()?n.onToggleClick():n.props.onRepoItemClick(n.props.repo)},n.isCurrentRepo=function(){var e=n.props,t=e.selectedRepo,a=e.repo;return t&&a.repo_id===t.repo_id},n.state={isShowChildren:n.props.initToShowChildren},n}return i(t,e),l(t,[{key:"render",value:function(){var e=!1;return this.isCurrentRepo()&&!this.props.selectedPath&&(e=!0),u.default.createElement("li",{className:"file-chooser-item"},u.default.createElement("span",{className:"item-toggle fa "+(this.state.isShowChildren?"fa-caret-down":"fa-caret-right"),onClick:this.onToggleClick}),u.default.createElement("span",{className:"item-info "+(e?"item-active":""),onClick:this.onRepoItemClick},u.default.createElement("span",{className:"icon far fa-folder"}),u.default.createElement("span",{className:"name user-select-none ellipsis"},this.props.repo.repo_name)),this.state.isShowChildren&&u.default.createElement(p.default,{repo:this.props.repo,isShowChildren:this.state.isShowChildren,onDirentItemClick:this.onDirentItemClick,selectedRepo:this.props.selectedRepo,selectedPath:this.props.selectedPath,isShowFile:this.props.isShowFile}))}}]),t}(u.default.Component);m.propTypes=h,t.default=m},44:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(3),p=n(14),h=a(p),m=n(45),g=a(m),y=n(4),b={isShowFile:d.default.bool,selectedPath:d.default.string,selectedRepo:d.default.object,repo:d.default.object.isRequired,isShowChildren:d.default.bool.isRequired,onDirentItemClick:d.default.func.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={direntList:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.repo;f.seafileAPI.listDir(t.repo_id,"/").then(function(t){var n=[];t.data.dirent_list.forEach(function(t){if(!0===e.props.isShowFile){var a=new h.default(t);n.push(a)}else if("dir"===t.type){var r=new h.default(t);n.push(r)}}),n=y.Utils.sortDirents(n,"name","asc"),e.setState({direntList:n})})}},{key:"render",value:function(){var e=this,t=this.state.direntList;return u.default.createElement("ul",{className:"list-view-content "+(this.props.isShowChildren?"":"hide")},t.map(function(t,n){return u.default.createElement(g.default,{key:n,repo:e.props.repo,dirent:t,selectedRepo:e.props.selectedRepo,onDirentItemClick:e.props.onDirentItemClick,selectedPath:e.props.selectedPath,isShowFile:e.props.isShowFile})}))}}]),t}(u.default.Component);v.propTypes=b,t.default=v},45:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(3),p=n(14),h=a(p),m=n(4),g={isShowFile:d.default.bool,filePath:d.default.string,selectedPath:d.default.string,selectedRepo:d.default.object,dirent:d.default.object.isRequired,repo:d.default.object.isRequired,onDirentItemClick:d.default.func.isRequired},y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onItemClick=function(e){e.stopPropagation(),n.props.selectedRepo.repo_id===n.props.repo.repo_id?n.props.selectedPath!==n.state.filePath?n.props.onDirentItemClick(n.state.filePath,n.props.dirent):"dir"===n.props.dirent.type&&n.onToggleClick(e):n.props.onDirentItemClick(n.state.filePath,n.props.dirent)},n.onToggleClick=function(e){e.stopPropagation(),n.state.hasRequest||f.seafileAPI.listDir(n.props.repo.repo_id,n.state.filePath).then(function(e){var t=[];e.data.dirent_list.forEach(function(e){if(!0===n.props.isShowFile){var a=new h.default(e);t.push(a)}else if("dir"===e.type){var r=new h.default(e);t.push(r)}}),t=m.Utils.sortDirents(t,"name","asc"),n.setState({hasRequest:!0,direntList:t}),0!==e.data.length&&0!==t.length||n.setState({hasChildren:!1})}),n.setState({isShowChildren:!n.state.isShowChildren})},n.renderChildren=function(){return u.default.createElement("ul",{className:"list-view-content"},n.state.direntList.map(function(e,a){return u.default.createElement(t,{key:a,dirent:e,repo:n.props.repo,filePath:n.state.filePath,onItemClick:n.onItemClick,selectedPath:n.props.selectedPath,selectedRepo:n.props.selectedRepo,onDirentItemClick:n.props.onDirentItemClick,isShowFile:n.props.isShowFile})}))};var a=n.props.filePath?n.props.filePath+"/"+n.props.dirent.name:"/"+n.props.dirent.name;return n.state={isShowChildren:!1,hasRequest:!1,hasChildren:!0,filePath:a,direntList:[]},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.selectedRepo.repo_id===this.props.repo.repo_id,t=this.props.selectedPath===this.state.filePath;return u.default.createElement("li",{className:"file-chooser-item"},this.state.hasChildren&&"file"!==this.props.dirent.type&&u.default.createElement("span",{className:"item-toggle fa "+(this.state.isShowChildren?"fa-caret-down":"fa-caret-right"),onClick:this.onToggleClick}),u.default.createElement("span",{className:"item-info "+(e&&t?"item-active":""),onClick:this.onItemClick},u.default.createElement("span",{className:"icon far "+("dir"===this.props.dirent.type?"fa-folder":"fa-file")}),u.default.createElement("span",{className:"name user-select-none ellipsis"},this.props.dirent&&this.props.dirent.name)),this.state.isShowChildren&&this.renderChildren())}}]),t}(u.default.Component);y.propTypes=g,t.default=y},46:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(47),p=a(f),h={searchResults:d.default.array.isRequired,onItemClick:d.default.func.isRequired},m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onItemClick=function(e){n.setState({currentItem:e}),n.props.onItemClick(e)},n.state={currentItem:null},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this;return u.default.createElement("table",{className:"table-thead-hidden"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"8%"}),u.default.createElement("th",{width:"92%"}))),u.default.createElement("tbody",null,this.props.searchResults.map(function(t,n){return u.default.createElement(p.default,{key:n,item:t,currentItem:e.state.currentItem,onItemClick:e.onItemClick})})))}}]),t}(u.default.Component);m.propTypes=h,t.default=m},47:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(4),p={currentItem:d.default.object,onItemClick:d.default.func.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.setState({highlight:!0})},n.onMouseLeave=function(){n.setState({highlight:!1})},n.onClick=function(){var e=n.props.item;n.props.onItemClick(e)},n.state={highlight:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.currentItem,a=t.is_dir?f.Utils.getFolderIconUrl(!1,192):f.Utils.getFileIconUrl(t.name,192),r=this.state.highlight?"tr-highlight":"";return n&&t.repo_id===n.repo_id&&t.path===n.path&&(r="searched-active"),u.default.createElement("tr",{className:r,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("td",{className:"text-center"},u.default.createElement("img",{className:"item-img",src:a,alt:"",width:"24"})),u.default.createElement("td",null,u.default.createElement("span",{className:"item-link"},t.repo_name,"/",t.link_content)))}}]),t}(u.default.Component);h.propTypes=p,t.default=h},48:function(e,t){},49:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(5),h=n(3),m=n(23),g=a(m),y=n(19),b=a(y),v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.setState({isOperationShow:!0})},n.onMouseLeave=function(){n.setState({isOperationShow:!1})},n.deleteShareItem=function(){var e=n.props.item;n.props.deleteShareItem(e.user_info.name)},n.onChangeUserPermission=function(e){var t=n.props.item;n.props.onChangeUserPermission(t,e)},n.state={isOperationShow:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=e.is_admin?"admin":e.permission;return u.default.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("td",{className:"name"},e.user_info.nickname),u.default.createElement("td",null,u.default.createElement(b.default,{isTextMode:!0,isEditIconShow:this.state.isOperationShow,currentPermission:t,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})),u.default.createElement("td",null,u.default.createElement("span",{className:"sf2-icon-x3 action-icon "+(this.state.isOperationShow?"":"hide"),onClick:this.deleteShareItem,title:(0,f.gettext)("Delete")})))}}]),t}(u.default.Component),w=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props.items;return u.default.createElement("tbody",null,t.map(function(t,n){return u.default.createElement(v,{key:n,item:t,permissions:e.props.permissions,deleteShareItem:e.props.deleteShareItem,onChangeUserPermission:e.props.onChangeUserPermission})}))}}]),t}(u.default.Component),S={isGroupOwnedRepo:d.default.bool,itemPath:d.default.string.isRequired,itemType:d.default.string.isRequired,repoID:d.default.string.isRequired},C=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectChange=function(e){n.setState({selectedOption:e}),n.options=[]},n.setPermission=function(e){n.setState({permission:e})},n.shareToUser=function(){var e=[],t=n.props.itemPath,a=n.props.repoID;if(n.state.selectedOption&&n.state.selectedOption.length>0)for(var r=0;r<n.state.selectedOption.length;r++)e[r]=n.state.selectedOption[r].email;n.props.isGroupOwnedRepo?h.seafileAPI.shareGroupOwnedRepoToUser(a,n.state.permission,e).then(function(e){var t=[];if(e.data.failed.length>0)for(var a=0;a<e.data.failed.length;a++)t[a]=e.data.failed[a];var r=e.data.success.map(function(e){return{user_info:{nickname:e.user_name,name:e.user_email},permission:e.permission,share_type:"user"}});n.setState({errorMsg:t,sharedItems:n.state.sharedItems.concat(r),selectedOption:null,permission:"rw"}),n.refs.userSelect.clearSelect()}).catch(function(e){if(e.response){var t=(0,f.gettext)("Library can not be shared to owner."),a=[];a.push(t),n.setState({errorMsg:a,selectedOption:null})}}):h.seafileAPI.shareFolder(a,t,"user",n.state.permission,e).then(function(e){var t=[];if(e.data.failed.length>0)for(var a=0;a<e.data.failed.length;a++)t[a]=e.data.failed[a];n.setState({errorMsg:t,sharedItems:n.state.sharedItems.concat(e.data.success),selectedOption:null,permission:"rw"}),n.refs.userSelect.clearSelect()}).catch(function(e){if(e.response){var t=(0,f.gettext)("Library can not be shared to owner."),a=[];a.push(t),n.setState({errorMsg:a,selectedOption:null})}})},n.deleteShareItem=function(e){var t=n.props.itemPath,a=n.props.repoID;n.props.isGroupOwnedRepo?h.seafileAPI.deleteGroupOwnedRepoSharedUserItem(a,e).then(function(t){n.setState({sharedItems:n.state.sharedItems.filter(function(t){return t.user_info.name!==e})})}):h.seafileAPI.deleteShareToUserItem(a,t,"user",e).then(function(t){n.setState({sharedItems:n.state.sharedItems.filter(function(t){return t.user_info.name!==e})})})},n.onChangeUserPermission=function(e,t){var a=n.props.itemPath,r=n.props.repoID,o=e.user_info.name;n.props.isGroupOwnedRepo?h.seafileAPI.modifyGroupOwnedRepoUserSharedPermission(r,t,o).then(function(){n.updateSharedItems(e,t)}):h.seafileAPI.updateShareToUserItemPermission(r,a,"user",o,t).then(function(){n.updateSharedItems(e,t)})},n.updateSharedItems=function(e,t){var a=e.user_info.name,r=n.state.sharedItems.map(function(e){var n=e.user_info.name;return a===n&&(e.permission=t),e.is_admin="admin"===t,e});n.setState({sharedItems:r})},n.state={selectedOption:null,errorMsg:[],permission:"rw",sharedItems:[]},n.options=[],n.permissions=[],"library"===n.props.itemType?n.permissions=["rw","r","admin","cloud-edit","preview"]:"dir"===n.props.itemType&&(n.permissions=["rw","r","cloud-edit","preview"]),!n.props.isGroupOwnedRepo&&f.isPro||(n.permissions=["rw","r"]),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.itemPath,n=this.props.repoID;h.seafileAPI.listSharedItems(n,t,"user").then(function(t){0!==t.data.length&&e.setState({sharedItems:t.data})})}},{key:"render",value:function(){var e=this.state.sharedItems;return u.default.createElement(s.Fragment,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"50%"},(0,f.gettext)("User")),u.default.createElement("th",{width:"35%"},(0,f.gettext)("Permission")),u.default.createElement("th",{width:"15%"}))),u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("td",null,u.default.createElement(g.default,{ref:"userSelect",isMulti:!0,className:"reviewer-select",placeholder:(0,f.gettext)("Select users..."),onSelectChange:this.handleSelectChange})),u.default.createElement("td",null,u.default.createElement(b.default,{isTextMode:!1,isEditIconShow:!1,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission})),u.default.createElement("td",null,u.default.createElement(p.Button,{onClick:this.shareToUser},(0,f.gettext)("Submit")))),this.state.errorMsg.length>0&&this.state.errorMsg.map(function(e,t){var n="";return n=e.email?e.email+": "+e.error_msg:e,u.default.createElement("tr",{key:t},u.default.createElement("td",{colSpan:3},u.default.createElement("p",{className:"error"},n)))}))),u.default.createElement("div",{className:"share-list-container"},u.default.createElement("table",{className:"table-thead-hidden"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"50%"},(0,f.gettext)("User")),u.default.createElement("th",{width:"35%"},(0,f.gettext)("Permission")),u.default.createElement("th",{width:"15%"}))),u.default.createElement(w,{items:e,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission}))))}}]),t}(u.default.Component);C.propTypes=S,t.default=C},50:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(0),d=a(c),f=n(1),p=a(f),h=n(5),m=n(37),g=a(m),y=n(85),b=a(y),v=n(2),w=n(3),S=n(19),C=a(S),E=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.setState({isOperationShow:!0})},n.onMouseLeave=function(){n.setState({isOperationShow:!1})},n.deleteShareItem=function(){var e=n.props.item;n.props.deleteShareItem(e.group_info.id)},n.onChangeUserPermission=function(e){var t=n.props.item;n.props.onChangeUserPermission(t,e)},n.state={isOperationShow:!1},n}return l(t,e),u(t,[{key:"render",value:function(){var e=this.props.item;return d.default.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},d.default.createElement("td",{className:"name"},e.group_info.name),d.default.createElement("td",null,d.default.createElement(C.default,{isTextMode:!0,isEditIconShow:this.state.isOperationShow,currentPermission:e.permission,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})),d.default.createElement("td",null,d.default.createElement("span",{className:"sf2-icon-x3 action-icon "+(this.state.isOperationShow?"":"hide"),onClick:this.deleteShareItem,title:(0,v.gettext)("Delete")})))}}]),t}(d.default.Component),_=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props.items;return d.default.createElement("tbody",null,t.map(function(t,n){return d.default.createElement(E,{key:n,item:t,permissions:e.props.permissions,deleteShareItem:e.props.deleteShareItem,onChangeUserPermission:e.props.onChangeUserPermission})}))}}]),t}(d.default.Component),D={isGroupOwnedRepo:p.default.bool,itemPath:p.default.string.isRequired,itemType:p.default.string.isRequired,repoID:p.default.string.isRequired},P=function(e){return d.default.createElement("div",s({},e.innerProps,{style:{margin:"6px 10px",textAlign:"center",color:"hsl(0,0%,50%)"}}),(0,v.gettext)("Group not found"))},L=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectChange=function(e){n.setState({selectedOption:e})},n.loadOptions=function(){w.seafileAPI.shareableGroups().then(function(e){n.options=[];for(var t=0;t<e.data.length;t++){var a={};a.value=e.data[t].name,a.id=e.data[t].id,a.label=e.data[t].name,n.options.push(a)}})},n.listSharedGroups=function(){var e=n.props.itemPath,t=n.props.repoID;w.seafileAPI.listSharedItems(t,e,"group").then(function(e){0!==e.data.length&&n.setState({sharedItems:e.data})})},n.setPermission=function(e){n.setState({permission:e})},n.shareToGroup=function(){var e=[],t=n.props.itemPath,a=n.props.repoID,r=n.props.isGroupOwnedRepo;if(n.state.selectedOption&&n.state.selectedOption.length>0)for(var o=0;o<n.state.selectedOption.length;o++)e[o]=n.state.selectedOption[o].id;r?w.seafileAPI.shareGroupOwnedRepoToGroup(a,n.state.permission,e).then(function(e){var t=[];if(e.data.failed.length>0)for(var a=0;a<e.data.failed.length;a++)t[a]=e.data.failed[a];var r=e.data.success.map(function(e){return{group_info:{id:e.group_id,name:e.group_name},permission:e.permission,share_type:"group"}});n.setState({errorMsg:t,sharedItems:n.state.sharedItems.concat(r),selectedOption:null,permission:"rw"})}):w.seafileAPI.shareFolder(a,t,"group",n.state.permission,e).then(function(e){var t=[];if(e.data.failed.length>0)for(var a=0;a<e.data.failed.length;a++)t[a]=e.data.failed[a];n.setState({errorMsg:t,sharedItems:n.state.sharedItems.concat(e.data.success),selectedOption:null,permission:"rw"})})},n.deleteShareItem=function(e){var t=n.props.itemPath,a=n.props.repoID;n.props.isGroupOwnedRepo?w.seafileAPI.deleteGroupOwnedRepoSharedGroupItem(a,e).then(function(){n.setState({sharedItems:n.state.sharedItems.filter(function(t){return t.group_info.id!==e})})}):w.seafileAPI.deleteShareToGroupItem(a,t,"group",e).then(function(){n.setState({sharedItems:n.state.sharedItems.filter(function(t){return t.group_info.id!==e})})})},n.onChangeUserPermission=function(e,t){var a=n.props.itemPath,r=n.props.repoID,o=e.group_info.id;n.props.isGroupOwnedRepo?w.seafileAPI.modifyGroupOwnedRepoGroupSharedPermission(r,t,o).then(function(){n.updateSharedItems(e,t)}):w.seafileAPI.updateShareToGroupItemPermission(r,a,"group",o,t).then(function(){n.updateSharedItems(e,t)})},n.updateSharedItems=function(e,t){var a=e.group_info.id,r=n.state.sharedItems.map(function(e){var n=e.group_info.id;return a===n&&(e.permission=t),e});n.setState({sharedItems:r})},n.state={selectedOption:null,errorMsg:[],permission:"rw",sharedItems:[]},n.options=[],n.permissions=[],"library"===n.props.itemType?n.permissions=["rw","r","admin","cloud-edit","preview"]:"dir"===n.props.itemType&&(n.permissions=["rw","r","cloud-edit","preview"]),!n.props.isGroupOwnedRepo&&v.isPro||(n.permissions=["rw","r"]),n}return l(t,e),u(t,[{key:"componentDidMount",value:function(){this.loadOptions(),this.listSharedGroups()}},{key:"render",value:function(){return d.default.createElement(c.Fragment,null,d.default.createElement("table",null,d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",{width:"50%"},(0,v.gettext)("Group")),d.default.createElement("th",{width:"35%"},(0,v.gettext)("Permission")),d.default.createElement("th",{width:"15%"}))),d.default.createElement("tbody",null,d.default.createElement("tr",null,d.default.createElement("td",null,d.default.createElement(g.default,r({isMulti:!0,onChange:this.handleSelectChange,options:this.options,placeholder:(0,v.gettext)("Select a group"),components:(0,b.default)(),maxMenuHeight:200,inputId:"react-select-2-input",value:this.state.selectedOption},"components",{NoOptionsMessage:P}))),d.default.createElement("td",null,d.default.createElement(C.default,{isTextMode:!1,isEditIconShow:!1,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission})),d.default.createElement("td",null,d.default.createElement(h.Button,{onClick:this.shareToGroup},(0,v.gettext)("Submit")))),this.state.errorMsg.length>0&&this.state.errorMsg.map(function(e,t){var n=e.group_name+": "+e.error_msg;return d.default.createElement("tr",{key:t},d.default.createElement("td",{colSpan:3},d.default.createElement("p",{className:"error"},n)))}))),d.default.createElement("div",{className:"share-list-container"},d.default.createElement("table",{className:"table-thead-hidden"},d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",{width:"50%"},(0,v.gettext)("Group")),d.default.createElement("th",{width:"35%"},(0,v.gettext)("Permission")),d.default.createElement("th",{width:"15%"}))),d.default.createElement(_,{items:this.state.sharedItems,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission}))))}}]),t}(d.default.Component);L.propTypes=D,t.default=L},51:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(6),p=a(f),h=n(39),m=a(h),g=n(5),y=n(2),b=n(3),v=n(40),w=a(v),S=n(7),C=a(S),E={itemPath:d.default.string.isRequired,repoID:d.default.string.isRequired,closeShareDialog:d.default.func.isRequired},_=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getShareLink=function(){var e=n.props.itemPath,t=n.props.repoID;b.seafileAPI.getShareLink(t,e).then(function(e){if(0!==e.data.length){var t=new w.default(e.data[0]);n.setState({sharedLinkInfo:t})}})},n.onPasswordInputChecked=function(){n.setState({isShowPasswordInput:!n.state.isShowPasswordInput,password:"",passwdnew:"",errorInfo:""})},n.togglePasswordVisible=function(){n.setState({isPasswordVisible:!n.state.isPasswordVisible})},n.generatePassword=function(){var e=Math.random().toString(36).substr(5);n.setState({password:e,passwdnew:e})},n.inputPassword=function(e){var t=e.target.value.trim();n.setState({password:t})},n.inputPasswordNew=function(e){var t=e.target.value.trim();n.setState({passwdnew:t})},n.setPermission=function(e){n.permissions="previewAndDownload"==e?{can_edit:!1,can_download:!0}:{can_edit:!1,can_download:!1}},n.generateShareLink=function(){if(n.validateParamsInput()){n.setState({errorInfo:""});var e=n.props,t=e.itemPath,a=e.repoID,r=n.state,o=r.password,i=r.expireDays,l=n.permissions;l=JSON.stringify(l),b.seafileAPI.createShareLink(a,t,o,i,l).then(function(e){var t=new w.default(e.data);n.setState({sharedLinkInfo:t})})}},n.onCopySharedLink=function(){var e=n.state.sharedLinkInfo.link;(0,m.default)(e),C.default.success((0,y.gettext)("Share link is copied to the clipboard.")),n.props.closeShareDialog()},n.onCopyDownloadLink=function(){var e=n.state.sharedLinkInfo.link+"?dl";(0,m.default)(e),C.default.success((0,y.gettext)("Direct download link is copied to the clipboard.")),n.props.closeShareDialog()},n.deleteShareLink=function(){var e=n.state.sharedLinkInfo;b.seafileAPI.deleteShareLink(e.token).then(function(){n.setState({password:"",passwordnew:"",isShowPasswordInput:!1,expireDays:"",isExpireChecked:!1,errorInfo:"",sharedLinkInfo:null,isNoticeMessageShow:!1}),n.permissions={can_edit:!1,can_download:!0}})},n.onExpireChecked=function(e){n.setState({isExpireChecked:e.target.checked})},n.onExpireDaysChanged=function(e){var t=e.target.value.trim();n.setState({expireDays:t})},n.validateParamsInput=function(){var e=n.state,t=e.isShowPasswordInput,a=e.password,r=e.passwdnew,o=e.isExpireChecked,i=e.expireDays;if(t){if(0===a.length)return n.setState({errorInfo:"Please enter password"}),!1;if(a.length<8)return n.setState({errorInfo:"Password is too short"}),!1;if(a!==r)return n.setState({errorInfo:"Passwords don't match"}),!1}var l=/^\d+$/;if(n.isExpireDaysNoLimit){if(o){if(!i)return n.setState({errorInfo:"Please enter days"}),!1;var s=l.test(i);if(!s)return n.setState({errorInfo:"Please enter a non-negative integer"}),!1;n.setState({expireDays:parseInt(i)})}}else{if(!i)return n.setState({errorInfo:"Please enter days"}),!1;if(!l.test(i))return n.setState({errorInfo:"Please enter a non-negative integer"}),!1;i=parseInt(i);var u=parseInt(y.shareLinkExpireDaysMin),c=parseInt(y.shareLinkExpireDaysMax);if(0!==u&&c!==c&&i<u)return n.setState({errorInfo:"Please enter valid days"}),!1;if(0===u&&0!==c&&i>c)return n.setState({errorInfo:"Please enter valid days"}),!1;if(0!==u&&0!==c&&(i<u||i<c))return n.setState({errorInfo:"Please enter valid days"}),!1;n.setState({expireDays:i})}return!0},n.onNoticeMessageToggle=function(){n.setState({isNoticeMessageShow:!n.state.isNoticeMessageShow})},n.state={isValidate:!1,isShowPasswordInput:!1,isPasswordVisible:!1,isExpireChecked:!1,password:"",passwdnew:"",expireDays:"",errorInfo:"",sharedLinkInfo:null,isNoticeMessageShow:!1},n.permissions={can_edit:!1,can_download:!0},n.isExpireDaysNoLimit=0===parseInt(y.shareLinkExpireDaysMin)&&0===parseInt(y.shareLinkExpireDaysMax),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.getShareLink()}},{key:"render",value:function(){var e=this;if(this.state.sharedLinkInfo){var t=this.state.sharedLinkInfo;return u.default.createElement("div",null,u.default.createElement(g.Form,{className:"mb-4"},u.default.createElement(g.FormGroup,{className:"mb-0"},u.default.createElement("dt",{className:"text-secondary font-weight-normal"},(0,y.gettext)("Link:")),u.default.createElement("dd",{className:"d-flex"},u.default.createElement("span",null,t.link)," ",t.is_expired?u.default.createElement("span",{className:"err-message"},"(",(0,y.gettext)("Expired"),")"):u.default.createElement("span",{className:"far fa-copy action-icon",onClick:this.onCopySharedLink}))),!t.is_dir&&u.default.createElement(g.FormGroup,{className:"mb-0"},u.default.createElement("dt",{className:"text-secondary font-weight-normal"},(0,y.gettext)("Direct Download Link:")),u.default.createElement("dd",{className:"d-flex"},u.default.createElement("span",null,t.link,"?dl")," ",t.is_expired?u.default.createElement("span",{className:"err-message"},"(",(0,y.gettext)("Expired"),")"):u.default.createElement("span",{className:"far fa-copy action-icon",onClick:this.onCopyDownloadLink}))),t.expire_date&&u.default.createElement(g.FormGroup,{className:"mb-0"},u.default.createElement("dt",{className:"text-secondary font-weight-normal"},(0,y.gettext)("Expiration Date:")),u.default.createElement("dd",null,(0,p.default)(t.expire_date).format("YYYY-MM-DD hh:mm:ss")))),this.state.isNoticeMessageShow?u.default.createElement("div",{className:"alert alert-warning"},u.default.createElement("h4",{className:"alert-heading"},(0,y.gettext)("Are you sure you want to delete the share link?")),u.default.createElement("p",{className:"mb-4"},(0,y.gettext)("If the share link is deleted, no one will be able to access it any more.")),u.default.createElement("button",{className:"btn btn-primary",onClick:this.deleteShareLink},(0,y.gettext)("Delete"))," ",u.default.createElement("button",{className:"btn btn-secondary",onClick:this.onNoticeMessageToggle},(0,y.gettext)("Cancel"))):u.default.createElement(g.Button,{onClick:this.onNoticeMessageToggle},(0,y.gettext)("Delete")))}return u.default.createElement(g.Form,{className:"generate-share-link"},u.default.createElement(g.FormGroup,{check:!0},u.default.createElement(g.Label,{check:!0},u.default.createElement(g.Input,{type:"checkbox",onChange:this.onPasswordInputChecked}),"  ",(0,y.gettext)("Add password protection"))),this.state.isShowPasswordInput&&u.default.createElement(g.FormGroup,{className:"link-operation-content"},u.default.createElement(g.Label,{className:"font-weight-bold"},(0,y.gettext)("Password"))," ",u.default.createElement("span",{className:"tip"},(0,y.gettext)("(at least 8 characters)")),u.default.createElement(g.InputGroup,{className:"passwd"},u.default.createElement(g.Input,{type:this.state.isPasswordVisible?"text":"password",value:this.state.password||"",onChange:this.inputPassword}),u.default.createElement(g.InputGroupAddon,{addonType:"append"},u.default.createElement(g.Button,{onClick:this.togglePasswordVisible},u.default.createElement("i",{className:"link-operation-icon fas "+(this.state.isPasswordVisible?"fa-eye":"fa-eye-slash")})),u.default.createElement(g.Button,{onClick:this.generatePassword},u.default.createElement("i",{className:"link-operation-icon fas fa-magic"})))),u.default.createElement(g.Label,{className:"font-weight-bold"},(0,y.gettext)("Password again")),u.default.createElement(g.Input,{className:"passwd",type:this.state.isPasswordVisible?"text":"password",value:this.state.passwdnew||"",onChange:this.inputPasswordNew})),this.isExpireDaysNoLimit&&u.default.createElement(g.FormGroup,{check:!0},u.default.createElement(g.Label,{check:!0},u.default.createElement(g.Input,{className:"expire-checkbox",type:"checkbox",onChange:this.onExpireChecked}),"  ",(0,y.gettext)("Add auto expiration"),u.default.createElement(g.Input,{className:"expire-input",type:"text",value:this.state.expireDays,onChange:this.onExpireDaysChanged,readOnly:!this.state.isExpireChecked}),u.default.createElement("span",null,(0,y.gettext)("days")))),!this.isExpireDaysNoLimit&&u.default.createElement(g.FormGroup,{check:!0},u.default.createElement(g.Label,{check:!0},u.default.createElement(g.Input,{className:"expire-checkbox",type:"checkbox",onChange:this.onExpireChecked,checked:!0,readOnly:!0}),"  ",(0,y.gettext)("Add auto expiration"),u.default.createElement(g.Input,{className:"expire-input",type:"text",value:this.state.expireDays,onChange:this.onExpireDaysChanged})," ",u.default.createElement("span",null,(0,y.gettext)("days")),0!==parseInt(y.shareLinkExpireDaysMin)&&0!==parseInt(y.shareLinkExpireDaysMax)&&u.default.createElement("span",null," (",y.shareLinkExpireDaysMin," - ",y.shareLinkExpireDaysMax," ",(0,y.gettext)("days"),")"),0!==parseInt(y.shareLinkExpireDaysMin)&&0===parseInt(y.shareLinkExpireDaysMax)&&u.default.createElement("span",null," (",(0,y.gettext)("Greater than or equal to")," ",y.shareLinkExpireDaysMin," ",(0,y.gettext)("days"),")"),0===parseInt(y.shareLinkExpireDaysMin)&&0!==parseInt(y.shareLinkExpireDaysMax)&&u.default.createElement("span",null," (",(0,y.gettext)("Less than or equal to")," ",y.shareLinkExpireDaysMax," ",(0,y.gettext)("days"),")"))),u.default.createElement(g.FormGroup,{check:!0},u.default.createElement(g.Label,{check:!0},u.default.createElement(g.Input,{type:"checkbox",checked:!0,readOnly:!0}),"  ",(0,y.gettext)("Set permission"))),u.default.createElement(g.FormGroup,{check:!0,className:"permission"},u.default.createElement(g.Label,{check:!0},u.default.createElement(g.Input,{type:"radio",name:"radio1",defaultChecked:!0,onChange:function(){return e.setPermission("previewAndDownload")}}),"  ",(0,y.gettext)("Preview and download"))),u.default.createElement(g.FormGroup,{check:!0,className:"permission"},u.default.createElement(g.Label,{check:!0},u.default.createElement(g.Input,{type:"radio",name:"radio1",onChange:function(){return e.setPermission("preview")}}),"  ",(0,y.gettext)("Preview only"))),this.state.errorInfo&&u.default.createElement(g.Alert,{color:"danger",className:"mt-2"},(0,y.gettext)(this.state.errorInfo)),u.default.createElement(g.Button,{onClick:this.generateShareLink},(0,y.gettext)("Generate")))}}]),t}(u.default.Component);_.propTypes=E,t.default=_},52:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(39),p=a(f),h=n(5),m=n(2),g=n(3),y=n(41),b=a(y),v=n(7),w=a(v),S={itemPath:d.default.string.isRequired,repoID:d.default.string.isRequired,closeShareDialog:d.default.func.isRequired},C=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getUploadLink=function(){var e=n.props.itemPath,t=n.props.repoID;g.seafileAPI.getUploadLinks(t,e).then(function(e){if(0!==e.data.length){var t=new b.default(e.data[0]);n.setState({sharedUploadInfo:t})}})},n.addPassword=function(){n.setState({showPasswordInput:!n.state.showPasswordInput,password:"",passwdnew:"",errorInfo:""})},n.togglePasswordVisible=function(){n.setState({passwordVisible:!n.state.passwordVisible})},n.generatePassword=function(){var e=Math.random().toString(36).substr(5);n.setState({password:e,passwordnew:e})},n.inputPassword=function(e){n.setState({password:e.target.value})},n.inputPasswordNew=function(e){n.setState({passwordnew:e.target.value})},n.generateUploadLink=function(){var e=n.props.itemPath,t=n.props.repoID;n.state.showPasswordInput&&""==n.state.password?n.setState({errorInfo:(0,m.gettext)("Please enter password")}):n.state.showPasswordInput&&n.state.showPasswordInput&&n.state.password.length<8?n.setState({errorInfo:(0,m.gettext)("Password is too short")}):n.state.showPasswordInput&&n.state.password!==n.state.passwordnew?n.setState({errorInfo:(0,m.gettext)("Passwords don't match")}):g.seafileAPI.createUploadLink(t,e,n.state.password).then(function(e){var t=new b.default(e.data);n.setState({sharedUploadInfo:t})})},n.onCopyUploadLink=function(){var e=n.state.sharedUploadInfo.link;(0,p.default)(e),w.default.success((0,m.gettext)("Upload link is copied to the clipboard.")),n.props.closeShareDialog()},n.deleteUploadLink=function(){var e=n.state.sharedUploadInfo;g.seafileAPI.deleteUploadLink(e.token).then(function(){n.setState({showPasswordInput:!1,password:"",passwordnew:"",sharedUploadInfo:null})})},n.state={showPasswordInput:!1,passwordVisible:!1,password:"",passwdnew:"",sharedUploadInfo:null},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.getUploadLink()}},{key:"render",value:function(){if(this.state.sharedUploadInfo){var e=this.state.sharedUploadInfo;return u.default.createElement("div",null,u.default.createElement(h.Form,{className:"mb-4"},u.default.createElement(h.FormGroup,null,u.default.createElement("dt",{className:"text-secondary font-weight-normal"},(0,m.gettext)("Upload Link:")),u.default.createElement("dd",{className:"d-flex"},u.default.createElement("span",null,e.link),u.default.createElement("span",{className:"far fa-copy action-icon",onClick:this.onCopyUploadLink})))),u.default.createElement(h.Button,{onClick:this.deleteUploadLink},(0,m.gettext)("Delete")))}return u.default.createElement(h.Form,{className:"generate-upload-link"},u.default.createElement(h.FormGroup,null,u.default.createElement(h.FormText,{className:"tip"},(0,m.gettext)("You can share the generated link to others and then they can upload files to this directory via the link."))),u.default.createElement(h.FormGroup,{check:!0},u.default.createElement(h.Label,{check:!0},u.default.createElement(h.Input,{type:"checkbox",onChange:this.addPassword}),"  ",(0,m.gettext)("Add password protection"))),this.state.showPasswordInput&&u.default.createElement(h.FormGroup,{className:"link-operation-content"},u.default.createElement(h.Label,{className:"font-weight-bold"},(0,m.gettext)("Password"))," ",u.default.createElement("span",{className:"tip"},(0,m.gettext)("(at least 8 characters)")),u.default.createElement(h.InputGroup,{className:"passwd"},u.default.createElement(h.Input,{type:this.state.passwordVisible?"text":"password",value:this.state.password||"",onChange:this.inputPassword}),u.default.createElement(h.InputGroupAddon,{addonType:"append"},u.default.createElement(h.Button,{onClick:this.togglePasswordVisible},u.default.createElement("i",{className:"link-operation-icon fas "+(this.state.passwordVisible?"fa-eye":"fa-eye-slash")})),u.default.createElement(h.Button,{onClick:this.generatePassword},u.default.createElement("i",{className:"link-operation-icon fas fa-magic"})))),u.default.createElement(h.Label,{className:"font-weight-bold"},(0,m.gettext)("Password again")),u.default.createElement(h.Input,{className:"passwd",type:this.state.passwordVisible?"text":"password",value:this.state.passwordnew||"",onChange:this.inputPasswordNew})),this.state.errorInfo&&u.default.createElement(h.Alert,{color:"danger",className:"mt-2"},this.state.errorInfo),u.default.createElement(h.Button,{className:"generate-link-btn",onClick:this.generateUploadLink},(0,m.gettext)("Generate")))}}]),t}(u.default.Component);C.propTypes=S,t.default=C},524:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(304),p=a(f),h=n(290),m=a(h),g={path:d.default.string.isRequired,repoID:d.default.string.isRequired,currentRepoInfo:d.default.object.isRequired,isGroupOwnedRepo:d.default.bool.isRequired,enableDirPrivateShare:d.default.bool.isRequired,isRepoInfoBarShow:d.default.bool.isRequired,usedRepoTags:d.default.array.isRequired,readmeMarkdown:d.default.object,draftCounts:d.default.number,updateUsedRepoTags:d.default.func.isRequired,isDirentListLoading:d.default.bool.isRequired,direntList:d.default.array.isRequired,sortBy:d.default.string.isRequired,sortOrder:d.default.string.isRequired,sortItems:d.default.func.isRequired,onAddFile:d.default.func.isRequired,onItemClick:d.default.func.isRequired,onItemSelected:d.default.func.isRequired,onItemDelete:d.default.func.isRequired,onItemRename:d.default.func.isRequired,onItemMove:d.default.func.isRequired,onItemCopy:d.default.func.isRequired,onDirentClick:d.default.func.isRequired,onItemDetails:d.default.func.isRequired,updateDirent:d.default.func.isRequired,isAllItemSelected:d.default.bool.isRequired,onAllItemSelected:d.default.func.isRequired},y=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(s.Fragment,null,this.props.isRepoInfoBarShow&&u.default.createElement(p.default,{repoID:this.props.repoID,currentPath:this.props.path,readmeMarkdown:this.props.readmeMarkdown,draftCounts:this.props.draftCounts,usedRepoTags:this.props.usedRepoTags,updateUsedRepoTags:this.props.updateUsedRepoTags}),u.default.createElement(m.default,{path:this.props.path,currentRepoInfo:this.props.currentRepoInfo,repoID:this.props.repoID,isGroupOwnedRepo:this.props.isGroupOwnedRepo,enableDirPrivateShare:this.props.enableDirPrivateShare,direntList:this.props.direntList,sortBy:this.props.sortBy,sortOrder:this.props.sortOrder,sortItems:this.props.sortItems,onAddFile:this.props.onAddFile,onItemClick:this.props.onItemClick,onItemSelected:this.props.onItemSelected,onItemDelete:this.props.onItemDelete,onItemRename:this.props.onItemRename,onItemMove:this.props.onItemMove,onItemCopy:this.props.onItemCopy,onDirentClick:this.props.onDirentClick,onItemDetails:this.props.onItemDetails,isDirentListLoading:this.props.isDirentListLoading,updateDirent:this.props.updateDirent,isAllItemSelected:this.props.isAllItemSelected,onAllItemSelected:this.props.onAllItemSelected}))}}]),t}(u.default.Component);y.propTypes=g,t.default=y},53:function(e,t){},54:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(5),d=n(1),f=a(d),p=n(7),h=a(p),m=n(75),g=a(m),y=n(2),b=n(3);n(55);var v={path:f.default.string.isRequired,repoID:f.default.string.isRequired},w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOpen:!1,smartLink:""},n.toggle=n.toggle.bind(n),n.getInternalLink=n.getInternalLink.bind(n),n.copyToClipBoard=n.copyToClipBoard.bind(n),n}return i(t,e),l(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"getInternalLink",value:function(){var e=this,t=this.props.repoID,n=this.props.path;b.seafileAPI.getInternalLink(t,n).then(function(t){e.setState({isOpen:!0,smartLink:t.data.smart_link})})}},{key:"copyToClipBoard",value:function(){(0,g.default)(this.state.smartLink),this.setState({isOpen:!1});var e=(0,y.gettext)("Internal link has been copied to clipboard");h.default.success(e)}},{key:"render",value:function(){return u.default.createElement("span",{className:"file-internal-link",title:(0,y.gettext)("Internal Link")},u.default.createElement("i",{className:"fa fa-link",onClick:this.getInternalLink}),u.default.createElement(c.Modal,{isOpen:this.state.isOpen,toggle:this.toggle},u.default.createElement(c.ModalHeader,{toggle:this.toggle},(0,y.gettext)("Internal Link")),u.default.createElement(c.ModalBody,null,u.default.createElement("p",{className:"tip mb-1"},(0,y.gettext)("An internal link is a link to a file or folder that can be accessed by users with read permission to the file or folder.")),u.default.createElement("p",null,u.default.createElement("a",{target:"_blank",href:this.state.smartLink},this.state.smartLink))),u.default.createElement(c.ModalFooter,null,u.default.createElement(c.Button,{color:"primary",onClick:this.copyToClipBoard},(0,y.gettext)("Copy"))," ",u.default.createElement(c.Button,{color:"secondary",onClick:this.toggle},(0,y.gettext)("Cancel")))))}}]),t}(u.default.Component);w.propTypes=v,t.default=w},55:function(e,t){},7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=new r.default;t.default=o},80:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(2),p=n(116),h=a(p),m=n(120),g=a(m),y=n(27),b=a(y),v={repoID:d.default.string,onSearchedClick:d.default.func.isRequired,searchPlaceholder:d.default.string},w=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.searchPlaceholder||(0,f.gettext)("Search Files");return u.default.createElement("div",{className:"common-toolbar"},f.isPro&&u.default.createElement(h.default,{repoID:this.props.repoID,placeholder:e,onSearchedClick:this.props.onSearchedClick}),u.default.createElement(g.default,null),u.default.createElement(b.default,null))}}]),t}(u.default.Component);w.propTypes=v,t.default=w},89:function(e,t){},90:function(e,t){},95:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(t){var n=t.path,r=t.object,o=t.isLoaded,i=t.isPreload,l=t.isExpanded,s=t.parentNode;a(this,e),this.path=n||r.name,this.object=r.clone(),this.isLoaded=o||!1,this.isPreload=i||!1,this.isExpanded=l||!1,this.children=[],this.parentNode=s||null}return r(e,[{key:"clone",value:function(t){var n=new e({path:this.path,object:this.object.clone(),isLoaded:this.isLoaded,isPreload:this.isPreload,isExpanded:this.isExpanded,parentNode:t||null});return n.children=this.children.map(function(e){return e.clone(n)}),n}},{key:"setParent",value:function(e){this.path=this.generatePath(e),this.parentNode=e,this.isLoaded=!1}},{key:"hasChildren",value:function(){return 0!==this.children.length}},{key:"addChild",value:function(e){e.setParent(this);var t=this.children;if(e.object.isDir())this.children.unshift(e);else{for(var n=-1,a=0;a<t.length;a++)if(!t[a].object.isDir()){n=a;break}-1===n?this.children.push(e):0===n?this.children.unshift(e):this.children.splice(n,0,e)}}},{key:"addChildren",value:function(e){var t=this;e.forEach(function(e){e.setParent(t)}),this.children=e}},{key:"deleteChild",value:function(e){var t=this.children.filter(function(t){return t!==e});this.children=t}},{key:"rename",value:function(e){this.object.name=e,this.path=this.generatePath(this.parentNode),this.isExpanded?this.updateChildrenPath(this):this.isLoaded=!1}},{key:"updateChildrenPath",value:function(e){e.children.forEach(function(e){e.path=e.generatePath(e.parentNode),e.isExpanded?e.updateChildrenPath(e):e.isLoaded=!1})}},{key:"updateObjectProperties",value:function(e,t){var n=this;Array.isArray(e)&&Array.isArray(t)?e.forEach(function(e,a){n.object[e]=t[a]}):this.object[e]=t}},{key:"generatePath",value:function(e){return"/"===e.path?e.path+this.object.name:e.path+"/"+this.object.name}},{key:"serializeToJson",value:function(){var e=[];return this.hasChildren&&(e=this.children.map(function(e){return e.serializeToJson()})),{path:this.path,object:this.object.clone(),isLoaded:this.isLoaded,isPreload:this.isPreload,isExpanded:this.isExpanded,parentNode:this.parentNode,children:e}}}],[{key:"deserializefromJson",value:function(t){var n=t.path,a=t.object,r=t.isLoaded,o=t.isPreload,i=t.isExpanded,l=t.parentNode,s=t.children,u=void 0===s?[]:s;return a=a.clone(),new e({path:n,object:a,isLoaded:r,isPreload:o,isExpanded:i,parentNode:l,children:u.map(function(t){return e.deserializefromJson(t)})})}}]),e}();t.default=o},98:function(e,t){}},[1177]);
//# sourceMappingURL=app.js.map